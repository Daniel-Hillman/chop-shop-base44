import{H as e,O as t}from"./sequencer-core-BoSNYj9I.js";function n(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i,s,a={exports:{}},o={};var l,c,u=(s||(s=1,a.exports=function(){if(i)return o;i=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==n.key&&(i=""+n.key),"key"in n)for(var s in r={},n)"key"!==s&&(r[s]=n[s]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:i,ref:void 0!==n?n:null,props:r}}return o.Fragment=t,o.jsx=n,o.jsxs=n,o}()),a.exports),d={exports:{}},h={};function f(){if(l)return h;l=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function C(t,n,r,i,s,a){return r=a.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:a}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var T=/\/+/g;function _(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function N(){}function I(n,r,i,s,a){var o=typeof n;"undefined"!==o&&"boolean"!==o||(n=null);var l,c,u=!1;if(null===n)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(n.$$typeof){case e:case t:u=!0;break;case d:return I((u=n._init)(n._payload),r,i,s,a)}}if(u)return a=a(n),u=""===s?"."+_(n,0):s,x(a)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),I(a,r,i,"",function(e){return e})):null!=a&&(E(a)&&(l=a,c=i+(null==a.key||n&&n.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=C(l.type,c,void 0,0,0,l.props)),r.push(a)),1;u=0;var h,p=""===s?".":s+":";if(x(n))for(var m=0;m<n.length;m++)u+=I(s=n[m],r,i,o=p+_(s,m),a);else if("function"==typeof(m=null===(h=n)||"object"!=typeof h?null:"function"==typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(n=m.call(n),m=0;!(s=n.next()).done;)u+=I(s=s.value,r,i,o=p+_(s,m++),a);else if("object"===o){if("function"==typeof n.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,i,s,a);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function j(){}return h.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},h.Component=y,h.Fragment=n,h.Profiler=i,h.PureComponent=b,h.StrictMode=r,h.Suspense=c,h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,h.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},h.cache=function(e){return function(){return e.apply(null,arguments)}},h.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!k.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return C(e.type,i,void 0,0,0,r)},h.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},h.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return C(e,s,void 0,0,0,i)},h.createRef=function(){return{current:null}},h.forwardRef=function(e){return{$$typeof:o,render:e}},h.isValidElement=E,h.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},h.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},h.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(j,R)}catch(s){R(s)}finally{S.T=t}},h.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},h.use=function(e){return S.H.use(e)},h.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},h.useCallback=function(e,t){return S.H.useCallback(e,t)},h.useContext=function(e){return S.H.useContext(e)},h.useDebugValue=function(){},h.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},h.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},h.useId=function(){return S.H.useId()},h.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},h.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},h.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},h.useMemo=function(e,t){return S.H.useMemo(e,t)},h.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},h.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},h.useRef=function(e){return S.H.useRef(e)},h.useState=function(e){return S.H.useState(e)},h.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},h.useTransition=function(){return S.H.useTransition()},h.version="19.1.1",h}function p(){return c||(c=1,d.exports=f()),d.exports}var m=p();const g=r(m),y=n({__proto__:null,default:g},[m]);var v,b,w={exports:{}},x={},S={exports:{}},k={};function C(){return b||(b=1,S.exports=(v||(v=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function x(e){if(m=!1,w(e),!p)if(null!==n(l))p=!0,k||(k=!0,S());else{var t=n(c);null!==t&&P(x,t.startTime-e)}}var S,k=!1,C=-1,E=5,T=-1;function _(){return!(!g&&e.unstable_now()-T<E)}function N(){if(g=!1,k){var t=e.unstable_now();T=t;var i=!0;try{e:{p=!1,m&&(m=!1,v(C),C=-1),f=!0;var s=h;try{t:{for(w(t),d=n(l);null!==d&&!(d.expirationTime>t&&_());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,w(t),i=!0;break t}d===n(l)&&r(l),w(t)}else r(l);d=n(l)}if(null!==d)i=!0;else{var u=n(c);null!==u&&P(x,u.startTime-t),i=!1}}break e}finally{d=null,h=s,f=!1}i=void 0}}finally{i?S():k=!1}}}if("function"==typeof b)S=function(){b(N)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=N,S=function(){A.postMessage(null)}}else S=function(){y(N,0)};function P(t,n){C=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(E=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(v(C),C=-1):m=!0,P(x,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,k||(k=!0,S()))),r},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(k)),k)),S.exports}var E,T,_,N,I={exports:{}},A={};function P(){if(E)return A;E=1;var e=p();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return A.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,A.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},A.flushSync=function(e){var t=s.T,n=r.p;try{if(s.T=null,r.p=2,e)return e()}finally{s.T=t,r.p=n,r.d.f()}},A.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},A.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},A.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin),s="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:o}):"script"===n&&r.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},A.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},A.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},A.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},A.requestFormReset=function(e){r.d.r(e)},A.unstable_batchedUpdates=function(e,t){return e(t)},A.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},A.useFormStatus=function(){return s.H.useHostTransitionStatus()},A.version="19.1.1",A}function R(){if(T)return I.exports;return T=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),I.exports=P(),I.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function j(){if(_)return x;_=1;var e=C(),t=p(),n=R();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(s(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case b:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var D=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},U=[],z=-1;function B(e){return{current:e}}function V(e){0>z||(e.current=U[z],U[z]=null,z--)}function $(e,t){z++,U[z]=e.current,e.current=t}var H=B(null),q=B(null),K=B(null),W=B(null);function G(e,t){switch($(K,t),$(q,e),$(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ad(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=ad(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(H),$(H,e)}function Y(){V(H),V(q),V(K)}function J(e){null!==e.memoizedState&&$(W,e);var t=H.current,n=od(t,e.type);t!==n&&($(q,e),$(H,n))}function Q(e){q.current===e&&(V(H),V(q)),W.current===e&&(V(W),Jd._currentValue=F)}var X=Object.prototype.hasOwnProperty,Z=e.unstable_scheduleCallback,ee=e.unstable_cancelCallback,te=e.unstable_shouldYield,ne=e.unstable_requestPaint,re=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,ae=e.unstable_UserBlockingPriority,oe=e.unstable_NormalPriority,le=e.unstable_LowPriority,ce=e.unstable_IdlePriority,ue=e.log,de=e.unstable_setDisableYieldValue,he=null,fe=null;function pe(e){if("function"==typeof ue&&de(e),fe&&"function"==typeof fe.setStrictMode)try{fe.setStrictMode(he,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ge(e)/ye|0)|0},ge=Math.log,ye=Math.LN2;var ve=256,be=4194304;function we(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=we(r):0!==(a&=o)?i=we(a):n||0!==(n=o&~e)&&(i=we(n)):0!==(o=r&~s)?i=we(o):0!==a?i=we(a):n||0!==(n=r&~e)&&(i=we(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&4194048&n)?t:i}function Se(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ce(){var e=ve;return!(4194048&(ve<<=1))&&(ve=256),e}function Ee(){var e=be;return!(62914560&(be<<=1))&&(be=4194304),e}function Te(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-me(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-me(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Re(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:dh(e.type)}var je=Math.random().toString(36).slice(2),Me="__reactFiber$"+je,De="__reactProps$"+je,Le="__reactContainer$"+je,Oe="__reactEvents$"+je,Fe="__reactListeners$"+je,Ue="__reactHandles$"+je,ze="__reactResources$"+je,Be="__reactMarker$"+je;function Ve(e){delete e[Me],delete e[De],delete e[Oe],delete e[Fe],delete e[Ue]}function $e(e){var t=e[Me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Me]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=xd(e);null!==e;){if(n=e[Me])return n;e=xd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Me]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function Ke(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Be]=!0}var Ge=new Set,Ye={};function Je(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ye[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Xe,Ze,et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},nt={};function rt(e,t,n){if(i=t,X.call(nt,i)||!X.call(tt,i)&&(et.test(i)?nt[i]=!0:(tt[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function it(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function st(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ze=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ze}var ot=!1;function lt(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"==typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return at("Activity");default:return""}}function ut(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,dt(t)):null!=n?wt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return;n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(D(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&Tt(e,s,i)}else for(var a in t)t.hasOwnProperty(a)&&Tt(e,a,t[a])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Dt=null;function Lt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[De]||null;if(!s)throw Error(r(90));vt(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&pt(i)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Ft(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Mt||null!==Dt)&&($c(),Mt&&(t=Mt,e=Dt,Dt=Mt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var i=n[De]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var zt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Bt=!1;if(zt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Dh){Bt=!1}var $t=null,Ht=null,qt=null;function Kt(){if(qt)return qt;var e,t,n=Ht,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Yt(){return!1}function Jt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Gt:Yt,this.isPropagationStopped=Yt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Qt,Xt,Zt,en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Jt(en),nn=c({},en,{view:0,detail:0}),rn=Jt(nn),sn=c({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Qt=e.screenX-Zt.screenX,Xt=e.screenY-Zt.screenY):Xt=Qt=0,Zt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),an=Jt(sn),on=Jt(c({},sn,{dataTransfer:0})),ln=Jt(c({},nn,{relatedTarget:0})),cn=Jt(c({},en,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Jt(c({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Jt(c({},en,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function gn(){return mn}var yn=Jt(c({},nn,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Jt(c({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Jt(c({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),wn=Jt(c({},en,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=Jt(c({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Jt(c({},en,{newState:0,oldState:0})),kn=[9,13,27,32],Cn=zt&&"CompositionEvent"in window,En=null;zt&&"documentMode"in document&&(En=document.documentMode);var Tn=zt&&"TextEvent"in window&&!En,_n=zt&&(!Cn||En&&8<En&&11>=En),Nn=String.fromCharCode(32),In=!1;function An(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Dn(e,t,n,r){Mt?Dt?Dt.push(r):Dt=[r]:Mt=r,0<(t=Ku(t,"onChange")).length&&(n=new tn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,On=null;function Fn(e){Fu(e,0)}function Un(e){if(pt(qe(e)))return e}function zn(e,t){if("change"===e)return t}var Bn=!1;if(zt){var Vn;if(zt){var $n="oninput"in document;if(!$n){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),$n="function"==typeof Hn.oninput}Vn=$n}else Vn=!1;Bn=Vn&&(!document.documentMode||9<document.documentMode)}function qn(){Ln&&(Ln.detachEvent("onpropertychange",Kn),On=Ln=null)}function Kn(e){if("value"===e.propertyName&&Un(On)){var t=[];Dn(t,On,e,jt(e)),Ft(Fn,t)}}function Wn(e,t,n){"focusin"===e?(qn(),On=n,(Ln=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&qn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(On)}function Yn(e,t){if("click"===e)return Un(t)}function Jn(e,t){if("input"===e||"change"===e)return Un(t)}var Qn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Xn(e,t){if(Qn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function er(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function tr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=zt&&"documentMode"in document&&11>=document.documentMode,sr=null,ar=null,or=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==sr||sr!==mt(r)||("selectionStart"in(r=sr)&&rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=Ku(ar,"onSelect")).length&&(t=new tn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=sr)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},hr={},fr={};function pr(e){if(hr[e])return hr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return hr[e]=n[t];return e}zt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var mr=pr("animationend"),gr=pr("animationiteration"),yr=pr("animationstart"),vr=pr("transitionrun"),br=pr("transitionstart"),wr=pr("transitioncancel"),xr=pr("transitionend"),Sr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Sr.set(e,t),Je(t,[e])}kr.push("scrollEnd");var Er=new WeakMap;function Tr(e,t){if("object"==typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ut(t)},Er.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var _r=[],Nr=0,Ir=0;function Ar(){for(var e=Nr,t=Ir=Nr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var s=_r[t];if(_r[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Mr(n,i,s)}}function Pr(e,t,n,r){_r[Nr++]=e,_r[Nr++]=t,_r[Nr++]=n,_r[Nr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Pr(e,t,n,r),Dr(e)}function jr(e,t){return Pr(e,null,null,t),Dr(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-me(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Mc)throw Mc=0,Dc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Or(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,i,s,a){var o=0;if(i=e,"function"==typeof e)Ur(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Fr(31,n,t,s)).elementType=N,e.lanes=a,e;case f:return $r(n.children,s,a,t);case m:o=8,s|=24;break;case g:return(e=Fr(12,n,t,2|s)).elementType=g,e.lanes=a,e;case S:return(e=Fr(13,n,t,s)).elementType=S,e.lanes=a,e;case k:return(e=Fr(19,n,t,s)).elementType=k,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case y:case b:o=10;break e;case v:o=9;break e;case w:o=11;break e;case E:o=14;break e;case T:o=16,i=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=Fr(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function $r(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kr=[],Wr=0,Gr=null,Yr=0,Jr=[],Qr=0,Xr=null,Zr=1,ei="";function ti(e,t){Kr[Wr++]=Yr,Kr[Wr++]=Gr,Gr=e,Yr=t}function ni(e,t,n){Jr[Qr++]=Zr,Jr[Qr++]=ei,Jr[Qr++]=Xr,Xr=e;var r=Zr;e=ei;var i=32-me(r)-1;r&=~(1<<i),n+=1;var s=32-me(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zr=1<<32-me(t)+i|n<<i|r,ei=s+e}else Zr=1<<s|n<<i|r,ei=e}function ri(e){null!==e.return&&(ti(e,1),ni(e,1,0))}function ii(e){for(;e===Gr;)Gr=Kr[--Wr],Kr[Wr]=null,Yr=Kr[--Wr],Kr[Wr]=null;for(;e===Xr;)Xr=Jr[--Qr],Jr[Qr]=null,ei=Jr[--Qr],Jr[Qr]=null,Zr=Jr[--Qr],Jr[Qr]=null}var si=null,ai=null,oi=!1,li=null,ci=!1,ui=Error(r(519));function di(e){throw yi(Tr(Error(r(418,"")),e)),ui}function hi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Me]=e,t[De]=r,n){case"dialog":Uu("cancel",t),Uu("close",t);break;case"iframe":case"object":case"embed":Uu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Uu(Lu[n],t);break;case"source":Uu("error",t);break;case"img":case"image":case"link":Uu("error",t),Uu("load",t);break;case"details":Uu("toggle",t);break;case"input":Uu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Uu("invalid",t);break;case"textarea":Uu("invalid",t),kt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Uu("beforetoggle",t),Uu("toggle",t)),null!=r.onScroll&&Uu("scroll",t),null!=r.onScrollEnd&&Uu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||di(e)}function fi(e){for(si=e.return;si;)switch(si.tag){case 5:case 13:return void(ci=!1);case 27:case 3:return void(ci=!0);default:si=si.return}}function pi(e){if(e!==si)return!1;if(!oi)return fi(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&ai&&di(e),fi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ai=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ai=null}}else 27===n?(n=ai,md(e.type)?(e=wd,wd=null,ai=e):ai=n):ai=si?bd(e.stateNode.nextSibling):null;return!0}function mi(){ai=si=null,oi=!1}function gi(){var e=li;return null!==e&&(null===xc?xc=e:xc.push.apply(xc,e),li=null),e}function yi(e){null===li?li=[e]:li.push(e)}var vi=B(null),bi=null,wi=null;function xi(e,t,n){$(vi,t._currentValue),t._currentValue=n}function Si(e){e._currentValue=vi.current,V(vi)}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t,n,i){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ki(a.return,n,e),i||(o=null);break e}a=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(r(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),ki(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ei(e,t,n,i){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(524288&s.flags)a=!0;else if(262144&s.flags)break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var l=s.type;Qn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===W.current){if(null===(o=s.alternate))throw Error(r(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Jd):e=[Jd])}s=s.return}null!==e&&Ci(t,e,n,i),t.flags|=262144}function Ti(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){bi=e,wi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ni(e){return Ai(bi,e)}function Ii(e,t){return null===bi&&_i(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===wi){if(null===e)throw Error(r(308));wi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wi=wi.next=t;return n}var Pi="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=e.unstable_scheduleCallback,ji=e.unstable_NormalPriority,Mi={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Pi,data:new Map,refCount:0}}function Li(e){e.refCount--,0===e.refCount&&Ri(ji,function(){e.controller.abort()})}var Oi=null,Fi=0,Ui=0,zi=null;function Bi(){if(0===--Fi&&null!==Oi){null!==zi&&(zi.status="fulfilled");var e=Oi;Oi=null,Ui=0,zi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=L.S;L.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Oi){var n=Oi=[];Fi=0,Ui=Pu(),zi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(Bi,Bi)}(0,t),null!==Vi&&Vi(e,t)};var $i=B(null);function Hi(){var e=$i.current;return null!==e?e:sc.pooledCache}function qi(e,t){$($i,null===t?$i.current:t.pool)}function Ki(){var e=Hi();return null===e?null:{parent:Mi._currentValue,pool:e}}var Wi=Error(r(460)),Gi=Error(r(474)),Yi=Error(r(542)),Ji={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ns(e=t.reason),e;default:if("string"==typeof t.status)t.then(Xi,Xi);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ns(e=t.reason),e}throw es=t,Wi}}var es=null;function ts(){if(null===es)throw Error(r(459));var e=es;return es=null,e}function ns(e){if(e===Wi||e===Yi)throw Error(r(483))}var rs=!1;function is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function as(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&ic){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Mr(e,null,n),t}return Pr(e,r,t,n),Dr(e)}function ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}function cs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var us=!1;function ds(){if(us){if(null!==zi)throw zi}}function hs(e,t,n,r){us=!1;var i=e.updateQueue;rs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,d=u=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(oc&f)===f:(r&f)===f){0!==f&&f===Ui&&(us=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(y,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(y,h,f):m))break e;h=c({},h,f);break e;case 2:rs=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(u=d=p,l=h):d=d.next=p,a|=f;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===d&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,null===s&&(i.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=h}}function fs(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function ps(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fs(n[e],t)}var ms=B(null),gs=B(0);function ys(e,t){$(gs,e=fc),$(ms,t),fc=e|t.baseLanes}function vs(){$(gs,fc),$(ms,ms.current)}function bs(){fc=gs.current,V(ms),V(gs)}var ws=0,xs=null,Ss=null,ks=null,Cs=!1,Es=!1,Ts=!1,_s=0,Ns=0,Is=null,As=0;function Ps(){throw Error(r(321))}function Rs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function js(e,t,n,r,i,s){return ws=s,xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Wa:Ga,Ts=!1,s=n(r,i),Ts=!1,Es&&(s=Ds(t,n,r,i)),Ms(e),s}function Ms(e){L.H=Ka;var t=null!==Ss&&null!==Ss.next;if(ws=0,ks=Ss=xs=null,Cs=!1,Ns=0,Is=null,t)throw Error(r(300));null===e||Io||null!==(e=e.dependencies)&&Ti(e)&&(Io=!0)}function Ds(e,t,n,i){xs=e;var s=0;do{if(Es&&(Is=null),Ns=0,Es=!1,25<=s)throw Error(r(301));if(s+=1,ks=Ss=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}L.H=Ya,a=t(n,i)}while(Es);return a}function Ls(){var e=L.H,t=e.useState()[0];return t="function"==typeof t.then?Vs(t):t,e=e.useState()[0],(null!==Ss?Ss.memoizedState:null)!==e&&(xs.flags|=1024),t}function Os(){var e=0!==_s;return _s=0,e}function Fs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Us(e){if(Cs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Cs=!1}ws=0,ks=Ss=xs=null,Es=!1,Ns=_s=0,Is=null}function zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ks?xs.memoizedState=ks=e:ks=ks.next=e,ks}function Bs(){if(null===Ss){var e=xs.alternate;e=null!==e?e.memoizedState:null}else e=Ss.next;var t=null===ks?xs.memoizedState:ks.next;if(null!==t)ks=t,Ss=e;else{if(null===e){if(null===xs.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Ss=e).memoizedState,baseState:Ss.baseState,baseQueue:Ss.baseQueue,queue:Ss.queue,next:null},null===ks?xs.memoizedState=ks=e:ks=ks.next=e}return ks}function Vs(e){var t=Ns;return Ns+=1,null===Is&&(Is=[]),e=Zi(Is,e,t),t=xs,null===(null===ks?t.memoizedState:ks.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Wa:Ga),e}function $s(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Vs(e);if(e.$$typeof===b)return Ni(e)}throw Error(r(438,String(e)))}function Hs(e){var t=null,n=xs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=xs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=I;return t.index++,n}function qs(e,t){return"function"==typeof t?t(e):t}function Ks(e){return Ws(Bs(),Ss,e)}function Ws(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var s=e.baseQueue,a=i.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,i.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(ws&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ui&&(d=!0);else{if((ws&f)===f){u=u.next,f===Ui&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,xs.lanes|=f,mc|=f}h=u.action,Ts&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,xs.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Qn(a,e.memoizedState)&&(Io=!0,d&&null!==(n=zi)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,i.lastRenderedState=a}return null===s&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Gs(e){var t=Bs(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);Qn(a,t.memoizedState)||(Io=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Ys(e,t,n){var i=xs,s=Bs(),a=oi;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!Qn((Ss||s).memoizedState,n);if(o&&(s.memoizedState=n,Io=!0),s=s.queue,va(2048,8,Xs.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||null!==ks&&1&ks.memoizedState.tag){if(i.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,s,n,t),null),null===sc)throw Error(r(349));a||124&ws||Js(i,t,n)}return n}function Js(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=xs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Zs(t)&&ea(e)}function Xs(e,t,n){return n(function(){Zs(t)&&ea(e)})}function Zs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function ea(e){var t=jr(e,2);null!==t&&Fc(t,e,2)}function ta(e){var t=zs();if("function"==typeof e){var n=e;if(e=n(),Ts){pe(!0);try{n()}finally{pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t}function na(e,t,n,r){return e.baseState=n,Ws(e,Ss,"function"==typeof r?r:qs)}function ra(e,t,n,i,s){if($a(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==L.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,ia(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ia(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=L.T,a={};L.T=a;try{var o=n(i,r),l=L.S;null!==l&&l(a,o),sa(e,t,o)}catch(c){oa(e,t,c)}finally{L.T=s}}else try{sa(e,t,s=n(i,r))}catch(u){oa(e,t,u)}}function sa(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){aa(e,t,n)},function(n){return oa(e,t,n)}):aa(e,t,n)}function aa(e,t,n){t.status="fulfilled",t.value=n,la(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ia(e,n)))}function oa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,la(t),t=t.next}while(t!==r)}e.action=null}function la(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ca(e,t){return t}function ua(e,t){if(oi){var n=sc.formState;if(null!==n){e:{var r=xs;if(oi){if(ai){t:{for(var i=ai,s=ci;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=bd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ai=bd(i.nextSibling),r="F!"===i.data;break e}}di(r)}r=!1}r&&(t=n[0])}}return(n=zs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},n.queue=r,n=za.bind(null,xs,r),r.dispatch=n,r=ta(!1),s=Va.bind(null,xs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=zs()).queue=i,n=ra.bind(null,xs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function da(e){return ha(Bs(),Ss,e)}function ha(e,t,n){if(t=Ws(e,t,ca)[0],e=Ks(qs)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Vs(t)}catch(a){if(a===Wi)throw Yi;throw a}else r=t;var i=(t=Bs()).queue,s=i.dispatch;return n!==t.memoizedState&&(xs.flags|=2048,ma(9,{destroy:void 0,resource:void 0},fa.bind(null,i,n),null)),[r,s,e]}function fa(e,t){e.action=t}function pa(e){var t=Bs(),n=Ss;if(null!==n)return ha(t,n,e);Bs(),t=t.memoizedState;var r=(n=Bs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=xs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ga(){return Bs().memoizedState}function ya(e,t,n,r){var i=zs();r=void 0===r?null:r,xs.flags|=e,i.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function va(e,t,n,r){var i=Bs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Ss&&null!==r&&Rs(r,Ss.memoizedState.deps)?i.memoizedState=ma(t,s,n,r):(xs.flags|=e,i.memoizedState=ma(1|t,s,n,r))}function ba(e,t){ya(8390656,8,e,t)}function wa(e,t){va(2048,8,e,t)}function xa(e,t){return va(4,2,e,t)}function Sa(e,t){return va(4,4,e,t)}function ka(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ca(e,t,n){n=null!=n?n.concat([e]):null,va(4,4,ka.bind(null,t,e),n)}function Ea(){}function Ta(e,t){var n=Bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Rs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _a(e,t){var n=Bs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Rs(t,r[1]))return r[0];if(r=e(),Ts){pe(!0);try{e()}finally{pe(!1)}}return n.memoizedState=[r,t],r}function Na(e,t,n){return void 0===n||1073741824&ws?e.memoizedState=t:(e.memoizedState=n,e=Oc(),xs.lanes|=e,mc|=e,n)}function Ia(e,t,n,r){return Qn(n,t)?n:null!==ms.current?(e=Na(e,n,r),Qn(e,t)||(Io=!0),e):42&ws?(e=Oc(),xs.lanes|=e,mc|=e,t):(Io=!0,e.memoizedState=n)}function Aa(e,t,n,r,i){var s=O.p;O.p=0!==s&&8>s?s:8;var a,o,l,c=L.T,u={};L.T=u,Va(e,!1,t,n);try{var d=i(),h=L.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Ba(e,t,(a=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<o.length;e++)(0,o[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Lc());else Ba(e,t,r,Lc())}catch(f){Ba(e,t,{then:function(){},status:"rejected",reason:f},Lc())}finally{O.p=s,L.T=c}}function Pa(){}function Ra(e,t,n,i){if(5!==e.tag)throw Error(r(476));var s=ja(e).queue;Aa(e,s,t,F,null===n?Pa:function(){return Ma(e),n(i)})}function ja(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ma(e){Ba(e,ja(e).next.queue,{},Lc())}function Da(){return Ni(Jd)}function La(){return Bs().memoizedState}function Oa(){return Bs().memoizedState}function Fa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=os(t,e=as(n),n);return null!==r&&(Fc(r,t,n),ls(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function Ua(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},$a(e)?Ha(t,n):null!==(n=Rr(e,t,n,r))&&(Fc(n,e,r),qa(n,t,r))}function za(e,t,n){Ba(e,t,n,Lc())}function Ba(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if($a(e))Ha(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Qn(o,a))return Pr(e,t,i,0),null===sc&&Ar(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Fc(n,e,r),qa(n,t,r),!0}return!1}function Va(e,t,n,i){if(i={lane:2,revertLane:Pu(),action:i,hasEagerState:!1,eagerState:null,next:null},$a(e)){if(t)throw Error(r(479))}else null!==(t=Rr(e,n,i,2))&&Fc(t,e,2)}function $a(e){var t=e.alternate;return e===xs||null!==t&&t===xs}function Ha(e,t){Es=Cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}var Ka={readContext:Ni,use:$s,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps},Wa={readContext:Ni,use:$s,useCallback:function(e,t){return zs().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:ba,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,ya(4194308,4,ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ya(4194308,4,e,t)},useInsertionEffect:function(e,t){ya(4,2,e,t)},useMemo:function(e,t){var n=zs();t=void 0===t?null:t;var r=e();if(Ts){pe(!0);try{e()}finally{pe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zs();if(void 0!==n){var i=n(t);if(Ts){pe(!0);try{n(t)}finally{pe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Ua.bind(null,xs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zs().memoizedState=e},useState:function(e){var t=(e=ta(e)).queue,n=za.bind(null,xs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Na(zs(),e,t)},useTransition:function(){var e=ta(!1);return e=Aa.bind(null,xs,e.queue,!0,!1),zs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=xs,s=zs();if(oi){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===sc)throw Error(r(349));124&oc||Js(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,ba(Xs.bind(null,i,a,e),[e]),i.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Qs.bind(null,i,a,n,t),null),n},useId:function(){var e=zs(),t=sc.identifierPrefix;if(oi){var n=ei;t=""+t+"R"+(n=(Zr&~(1<<32-me(Zr)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=As++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Da,useFormState:ua,useActionState:ua,useOptimistic:function(e){var t=zs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Va.bind(null,xs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Hs,useCacheRefresh:function(){return zs().memoizedState=Fa.bind(null,xs)}},Ga={readContext:Ni,use:$s,useCallback:Ta,useContext:Ni,useEffect:wa,useImperativeHandle:Ca,useInsertionEffect:xa,useLayoutEffect:Sa,useMemo:_a,useReducer:Ks,useRef:ga,useState:function(){return Ks(qs)},useDebugValue:Ea,useDeferredValue:function(e,t){return Ia(Bs(),Ss.memoizedState,e,t)},useTransition:function(){var e=Ks(qs)[0],t=Bs().memoizedState;return["boolean"==typeof e?e:Vs(e),t]},useSyncExternalStore:Ys,useId:La,useHostTransitionStatus:Da,useFormState:da,useActionState:da,useOptimistic:function(e,t){return na(Bs(),0,e,t)},useMemoCache:Hs,useCacheRefresh:Oa},Ya={readContext:Ni,use:$s,useCallback:Ta,useContext:Ni,useEffect:wa,useImperativeHandle:Ca,useInsertionEffect:xa,useLayoutEffect:Sa,useMemo:_a,useReducer:Gs,useRef:ga,useState:function(){return Gs(qs)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Bs();return null===Ss?Na(n,e,t):Ia(n,Ss.memoizedState,e,t)},useTransition:function(){var e=Gs(qs)[0],t=Bs().memoizedState;return["boolean"==typeof e?e:Vs(e),t]},useSyncExternalStore:Ys,useId:La,useHostTransitionStatus:Da,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var n=Bs();return null!==Ss?na(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Hs,useCacheRefresh:Oa},Ja=null,Qa=0;function Xa(e){var t=Qa;return Qa+=1,null===Ja&&(Ja=[]),Zi(Ja,e,t)}function Za(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eo(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function to(e){return(0,e._init)(e._payload)}function no(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===f?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===T&&to(i)===t.type)?(Za(t=s(t,n.props),n),t.return=e,t):(Za(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function p(e,t,n,r,i){return null===t||7!==t.tag?((t=$r(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Za(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=qr(t,e.mode,n)).return=e,t;case T:return m(e,t=(0,t._init)(t._payload),n)}if(D(t)||P(t))return(t=$r(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,Xa(t),n);if(t.$$typeof===b)return m(e,Ii(e,t),n);eo(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===i?c(e,t,n,r):null;case h:return n.key===i?u(e,t,n,r):null;case T:return g(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||P(n))return null!==i?null:p(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Xa(n),r);if(n.$$typeof===b)return g(e,t,Ii(e,n),r);eo(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||P(r))return p(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,Xa(r),i);if(r.$$typeof===b)return y(e,t,n,Ii(t,r),i);eo(t,r)}return null}function v(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case d:e:{for(var w=u.key;null!==c;){if(c.key===w){if((w=u.type)===f){if(7===c.tag){n(l,c.sibling),(p=s(c,u.props.children)).return=l,l=p;break e}}else if(c.elementType===w||"object"==typeof w&&null!==w&&w.$$typeof===T&&to(w)===c.type){n(l,c.sibling),Za(p=s(c,u.props),u),p.return=l,l=p;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===f?((p=$r(u.props.children,l.mode,p,u.key)).return=l,l=p):(Za(p=Vr(u.type,u.key,u.props,null,l.mode,p),u),p.return=l,l=p)}return o(l);case h:e:{for(w=u.key;null!==c;){if(c.key===w){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(p=s(c,u.children||[])).return=l,l=p;break e}n(l,c);break}t(l,c),c=c.sibling}(p=qr(u,l.mode,p)).return=l,l=p}return o(l);case T:return v(l,c,u=(w=u._init)(u._payload),p)}if(D(u))return function(r,s,o,l){for(var c=null,u=null,d=s,h=s=0,f=null;null!==d&&h<o.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=g(r,d,o[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(r,d),s=a(p,s,h),null===u?c=p:u.sibling=p,u=p,d=f}if(h===o.length)return n(r,d),oi&&ti(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(r,o[h],l))&&(s=a(d,s,h),null===u?c=d:u.sibling=d,u=d);return oi&&ti(r,h),c}for(d=i(d);h<o.length;h++)null!==(f=y(d,r,h,o[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),s=a(f,s,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return t(r,e)}),oi&&ti(r,h),c}(l,c,u,p);if(P(u)){if("function"!=typeof(w=P(u)))throw Error(r(150));return function(s,o,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,h=o,f=o=0,p=null,v=l.next();null!==h&&!v.done;f++,v=l.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=g(s,h,v.value,c);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(s,h),o=a(b,o,f),null===d?u=b:d.sibling=b,d=b,h=p}if(v.done)return n(s,h),oi&&ti(s,f),u;if(null===h){for(;!v.done;f++,v=l.next())null!==(v=m(s,v.value,c))&&(o=a(v,o,f),null===d?u=v:d.sibling=v,d=v);return oi&&ti(s,f),u}for(h=i(h);!v.done;f++,v=l.next())null!==(v=y(h,s,f,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?f:v.key),o=a(v,o,f),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(s,e)}),oi&&ti(s,f),u}(l,c,u=w.call(u),p)}if("function"==typeof u.then)return v(l,c,Xa(u),p);if(u.$$typeof===b)return v(l,c,Ii(l,u),p);eo(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(p=s(c,u)).return=l,l=p):(n(l,c),(p=Hr(u,l.mode,p)).return=l,l=p),o(l)):n(l,c)}return function(e,t,n,r){try{Qa=0;var i=v(e,t,n,r);return Ja=null,i}catch(a){if(a===Wi||a===Yi)throw a;var s=Fr(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var ro=no(!0),io=no(!1),so=B(null),ao=null;function oo(e){var t=e.alternate;$(ho,1&ho.current),$(so,e),null===ao&&(null===t||null!==ms.current||null!==t.memoizedState)&&(ao=e)}function lo(e){if(22===e.tag){if($(ho,ho.current),$(so,e),null===ao){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ao=e)}}else co()}function co(){$(ho,ho.current),$(so,so.current)}function uo(e){V(so),ao===e&&(ao=null),V(ho)}var ho=B(0);function fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function po(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=as(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=os(e,i,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),i=as(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=os(e,i,r))&&(Fc(t,e,r),ls(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=as(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=os(e,r,n))&&(Fc(t,e,n),ls(t,e,n))}};function go(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,s))}function yo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function vo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=c({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var bo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function wo(e){bo(e)}function xo(e){}function So(e){bo(e)}function ko(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Co(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Eo(e,t,n){return(n=as(n)).tag=3,n.payload={element:null},n.callback=function(){ko(e,t)},n}function To(e){return(e=as(e)).tag=3,e}function _o(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Co(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){Co(t,n,r),"function"!=typeof i&&(null===Tc?Tc=new Set([this]):Tc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var No=Error(r(461)),Io=!1;function Ao(e,t,n,r){t.child=null===e?io(t,null,n,r):ro(t,e.child,n,r)}function Po(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _i(t),r=js(e,t,n,a,s,i),o=Os(),null===e||Io?(oi&&o&&ri(t),t.flags|=1,Ao(e,t,r,i),t.child):(Fs(e,t,i),Qo(e,t,i))}function Ro(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Ur(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,jo(e,t,s,r,i))}if(s=e.child,!Xo(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Qo(e,t,i)}return t.flags|=1,(e=zr(s,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(Io=!1,t.pendingProps=r=s,!Xo(e,i))return t.lanes=e.lanes,Qo(e,t,i);131072&e.flags&&(Io=!0)}}return Oo(e,t,n,r,i)}function Mo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==s?s.cachePool:null),null!==s?ys(t,s):vs(),lo(t)}else null!==s?(qi(0,s.cachePool),ys(t,s),co(),t.memoizedState=null):(null!==e&&qi(0,null),vs(),co());return Ao(e,t,i,n),t.child}function Do(e,t,n,r){var i=Hi();return i=null===i?null:{parent:Mi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),vs(),lo(t),null!==e&&Ei(e,t,r,!0),null}function Lo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,r,i){return _i(t),n=js(e,t,n,r,void 0,i),r=Os(),null===e||Io?(oi&&r&&ri(t),t.flags|=1,Ao(e,t,n,i),t.child):(Fs(e,t,i),Qo(e,t,i))}function Fo(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=Ds(t,r,n,i),Ms(e),r=Os(),null===e||Io?(oi&&r&&ri(t),t.flags|=1,Ao(e,t,n,s),t.child):(Fs(e,t,s),Qo(e,t,s))}function Uo(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=Lr,a=n.contextType;"object"==typeof a&&null!==a&&(s=Ni(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=mo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},is(t),a=n.contextType,s.context="object"==typeof a&&null!==a?Ni(a):Lr,s.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(po(t,n,a,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(a=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&mo.enqueueReplaceState(s,s.state,null),hs(t,r,s,i),ds(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=vo(n,o);s.props=l;var c=s.context,u=n.contextType;a=Lr,"object"==typeof u&&null!==u&&(a=Ni(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||c!==a)&&yo(t,s,r,a),rs=!1;var h=t.memoizedState;s.state=h,hs(t,r,s,i),ds(),c=t.memoizedState,o||h!==c||rs?("function"==typeof d&&(po(t,n,d,r),c=t.memoizedState),(l=rs||go(t,n,l,r,h,c,a))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ss(e,t),u=vo(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Lr,"object"==typeof c&&null!==c&&(l=Ni(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&yo(t,s,r,l),rs=!1,h=t.memoizedState,s.state=h,hs(t,r,s,i),ds();var f=t.memoizedState;a!==d||h!==f||rs||null!==e&&null!==e.dependencies&&Ti(e.dependencies)?("function"==typeof o&&(po(t,n,o,r),f=t.memoizedState),(u=rs||go(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ti(e.dependencies))?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Lo(e,t),r=!!(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ro(t,e.child,null,i),t.child=ro(t,null,n,i)):Ao(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qo(e,t,i),e}function zo(e,t,n,r){return mi(),t.flags|=256,Ao(e,t,n,r),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vo(e){return{baseLanes:e,cachePool:Ki()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function Ho(e,t,n){var i,s=t.pendingProps,a=!1,o=!!(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&!!(2&ho.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(oi){if(a?oo(t):co(),oi){var l,c=ai;if(l=c){e:{for(l=c,c=ci;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Zr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,si=t,ai=null,l=!0):l=!1}l||di(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;uo(t)}return c=s.children,s=s.fallback,a?(co(),c=Ko({mode:"hidden",children:c},a=t.mode),s=$r(s,a,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(a=t.child).memoizedState=Vo(n),a.childLanes=$o(e,i,n),t.memoizedState=Bo,s):(oo(t),qo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(oo(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(co(),t.child=e.child,t.flags|=128,t=null):(co(),a=s.fallback,c=t.mode,s=Ko({mode:"visible",children:s.children},c),(a=$r(a,c,n,null)).flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,ro(t,e.child,null,n),(s=t.child).memoizedState=Vo(n),s.childLanes=$o(e,i,n),t.memoizedState=Bo,t=a);else if(oo(t),vd(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var u=i.dgst;i=u,(s=Error(r(419))).stack="",s.digest=i,yi({value:s,source:null,stack:null}),t=Wo(e,t,n)}else if(Io||Ei(e,t,n,!1),i=0!==(n&e.childLanes),Io||i){if(null!==(i=sc)&&(0!==(s=0!==((s=42&(s=n&-n)?1:Ae(s))&(i.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,jr(e,s),Fc(i,e,s),No;"$?"===c.data||Yc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ai=bd(c.nextSibling),si=t,oi=!0,li=null,ci=!1,null!==e&&(Jr[Qr++]=Zr,Jr[Qr++]=ei,Jr[Qr++]=Xr,Zr=e.id,ei=e.overflow,Xr=t),(t=qo(t,s.children)).flags|=4096);return t}return a?(co(),a=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=zr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?a=zr(u,a):(a=$r(a,c,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,null===(c=e.child.memoizedState)?c=Vo(n):(null!==(l=c.cachePool)?(u=Mi._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ki(),c={baseLanes:c.baseLanes|n,cachePool:l}),a.memoizedState=c,a.childLanes=$o(e,i,n),t.memoizedState=Bo,s):(oo(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function qo(e,t){return(t=Ko({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ko(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return ro(t,e.child,null,n),(e=qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Yo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Jo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ao(e,t,r.children,n),2&(r=ho.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch($(ho,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yo(t,!0,n,null,s);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ei(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ti(e))}function Zo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Io=!0;else{if(!(Xo(e,n)||128&t.flags))return Io=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),xi(0,Mi,e.memoizedState.cache),mi();break;case 27:case 5:J(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:xi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oo(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ho(e,t,n):(oo(t),null!==(e=Qo(e,t,n))?e.sibling:null);oo(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ei(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Jo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(ho,ho.current),r)break;return null;case 22:case 23:return t.lanes=0,Mo(e,t,n);case 24:xi(0,Mi,e.memoizedState.cache)}return Qo(e,t,n)}(e,t,n);Io=!!(131072&e.flags)}else Io=!1,oi&&1048576&t.flags&&ni(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,"function"!=typeof i){if(null!=i){if((s=i.$$typeof)===w){t.tag=11,t=Po(null,t,i,e,n);break e}if(s===E){t.tag=14,t=Ro(null,t,i,e,n);break e}}throw t=M(i)||i,Error(r(306,t,""))}Ur(i)?(e=vo(i,e),t.tag=1,t=Uo(null,t,i,e,n)):(t.tag=0,t=Oo(null,t,i,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Uo(e,t,i=t.type,s=vo(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(r(387));i=t.pendingProps;var a=t.memoizedState;s=a.element,ss(e,t),hs(t,i,null,n);var o=t.memoizedState;if(i=o.cache,xi(0,Mi,i),i!==a.cache&&Ci(t,[Mi],n,!0),ds(),i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=zo(e,t,i,n);break e}if(i!==s){yi(s=Tr(Error(r(424)),t)),t=zo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ai=bd(e.firstChild),si=t,oi=!0,li=null,ci=!0,n=io(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mi(),i===s){t=Qo(e,t,n);break e}Ao(e,t,i,n)}t=t.child}return t;case 26:return Lo(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(i=sd(K.current).createElement(n))[Me]=t,i[De]=e,nd(i,n,e),We(i),t.stateNode=i):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&oi&&(i=t.stateNode=Sd(t.type,t.pendingProps,K.current),si=t,ci=!0,s=ai,md(t.type)?(wd=s,ai=bd(i.firstChild)):ai=s),Ao(e,t,t.pendingProps.children,n),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((s=i=ai)&&(null!==(i=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=bd(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,ci))?(t.stateNode=i,si=t,ai=bd(i.firstChild),ci=!1,s=!0):s=!1),s||di(t)),J(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,ld(s,a)?i=null:null!==o&&ld(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=js(e,t,Ls,null,null,n),Jd._currentValue=s),Lo(e,t),Ao(e,t,i,n),t.child;case 6:return null===e&&oi&&((e=n=ai)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,ci))?(t.stateNode=n,si=t,ai=null,e=!0):e=!1),e||di(t)),null;case 13:return Ho(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ro(t,null,i,n):Ao(e,t,i,n),t.child;case 11:return Po(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xi(0,t.type,i.value),Ao(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,_i(t),i=i(s=Ni(s)),t.flags|=1,Ao(e,t,i,n),t.child;case 14:return Ro(e,t,t.type,t.pendingProps,n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 19:return Jo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Ko(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Mo(e,t,n);case 24:return _i(t),i=Ni(Mi),null===e?(null===(s=Hi())&&(s=sc,a=Di(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:i,cache:s},is(t),xi(0,Mi,s)):(0!==(e.lanes&n)&&(ss(e,t),hs(t,null,null,n),ds()),s=e.memoizedState,a=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),xi(0,Mi,i)):(i=a.cache,xi(0,Mi,i),i!==s.cache&&Ci(t,[Mi],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!$d(t)){if(null!==(t=so.current)&&((4194048&oc)===oc?null!==ao:(62914560&oc)!==oc&&!(536870912&oc)||t!==ao))throw es=Ji,Gi;e.flags|=8192}}function nl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,bc|=t)}function rl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var i=t.pendingProps;switch(ii(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Si(Mi),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pi(t)?el(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,gi())),il(t),null;case 26:return n=t.memoizedState,null===e?(el(t),null!==n?(il(t),tl(t,n)):(il(t),t.flags&=-16777217)):n?n!==e.memoizedState?(el(t),il(t),tl(t,n)):(il(t),t.flags&=-16777217):(e.memoizedProps!==i&&el(t),il(t),t.flags&=-16777217),null;case 27:Q(t),n=K.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&el(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return il(t),null}e=H.current,pi(t)?hi(t):(e=Sd(s,i,n),t.stateNode=e,el(t))}return il(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&el(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return il(t),null}if(e=H.current,pi(t))hi(t);else{switch(s=sd(K.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"==typeof i.is?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Me]=t,e[De]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(nd(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&el(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=K.current,pi(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(s=si))switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Me]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Xu(e.nodeValue,n)))||di(t)}else(e=sd(e).createTextNode(i))[Me]=t,t.stateNode=e}return il(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=pi(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(r(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(r(317));s[Me]=t}else mi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),s=!1}else s=gi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(uo(t),t):(uo(t),null)}if(uo(t),128&t.flags)return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(s=i.alternate.memoizedState.cachePool.pool);var a=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),il(t),null;case 4:return Y(),null===e&&Vu(t.stateNode.containerInfo),il(t),null;case 10:return Si(t.type),il(t),null;case 19:if(V(ho),null===(s=t.memoizedState))return il(t),null;if(i=!!(128&t.flags),null===(a=s.rendering))if(i)rl(s,!1);else{if(0!==pc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=fo(e))){for(t.flags|=128,rl(s,!1),e=a.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return $(ho,1&ho.current|2),t.child}e=e.sibling}null!==s.tail&&re()>Cc&&(t.flags|=128,i=!0,rl(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=fo(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!oi)return il(t),null}else 2*re()-s.renderingStartTime>Cc&&536870912!==n&&(t.flags|=128,i=!0,rl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=s.last)?e.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=re(),t.sibling=null,e=ho.current,$(ho,i?1&e|2:1&e),t):(il(t),null);case 22:case 23:return uo(t),bs(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(n=t.updateQueue)&&nl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&V($i),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Si(Mi),il(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function al(e,t){switch(ii(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Si(Mi),Y(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(uo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(ho),null;case 4:return Y(),null;case 10:return Si(t.type),null;case 22:case 23:return uo(t),bs(),null!==e&&V($i),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Si(Mi),null;default:return null}}function ol(e,t){switch(ii(t),t.tag){case 3:Si(Mi),Y();break;case 26:case 27:case 5:Q(t);break;case 4:Y();break;case 13:uo(t);break;case 19:V(ho);break;case 10:Si(t.type);break;case 22:case 23:uo(t),bs(),null!==e&&V($i);break;case 24:Si(Mi)}}function ll(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){hu(t,t.return,o)}}function cl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){hu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){hu(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ps(t,n)}catch(r){hu(e,e.return,r)}}}function dl(e,t,n){n.props=vo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){hu(e,t,r)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){hu(e,t,i)}}function fl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){hu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(s){hu(e,t,s)}else n.current=null}function pl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){hu(e,e.return,i)}}function ml(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(p)||ed(e,t,p,null,i,h)}}for(var f in i){var p=i[f];if(h=n[f],i.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:p!==h&&ed(e,t,f,p,i,h)}}return void vt(e,o,l,c,u,d,a,s);case"select":for(a in p=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(a)||ed(e,t,a,null,i,c)}for(s in i)if(a=i[s],c=n[s],i.hasOwnProperty(s)&&(null!=a||null!=c))switch(s){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&ed(e,t,s,a,i,c)}return t=l,n=o,i=p,void(null!=f?xt(e,!!n,f,!1):!!i!=!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,i,s)}for(o in i)if(s=i[o],a=n[o],i.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:s!==a&&ed(e,t,o,s,i,a)}return void St(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ed(e,t,m,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else ed(e,t,c,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&ed(e,t,g,null,i,f);for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:ed(e,t,u,f,i,p)}return;default:if(Nt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!i.hasOwnProperty(y)&&td(e,t,y,void 0,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||td(e,t,d,f,i,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!i.hasOwnProperty(v)&&ed(e,t,v,null,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||null==f&&null==p||ed(e,t,h,f,i,p)}(i,e.type,n,t),i[De]=t}catch(s){hu(e,e.return,s)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function yl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function wl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);nd(t,r,n),t[Me]=e,t[De]=n}catch(s){hu(e,e.return,s)}}var xl=!1,Sl=!1,kl=!1,Cl="function"==typeof WeakSet?WeakSet:Set,El=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ul(e,n),4&r&&ll(5,n);break;case 1:if(Ul(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){hu(n,n.return,a)}else{var i=vo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&r&&ul(n),512&r&&hl(n,n.return);break;case 3:if(Ul(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ps(e,t)}catch(a){hu(n,n.return,a)}}break;case 27:null===t&&4&r&&wl(n);case 26:case 5:Ul(e,n),null===t&&4&r&&pl(n),512&r&&hl(n,n.return);break;case 12:Ul(e,n);break;case 13:Ul(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xl)){t=null!==t&&null!==t.memoizedState||Sl,i=xl;var s=Sl;xl=r,(Sl=t)&&!s?Bl(e,n,!!(8772&n.subtreeFlags)):Ul(e,n),xl=i,Sl=s}break;case 30:break;default:Ul(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Il=!1;function Al(e,t,n){for(n=n.child;null!==n;)Pl(e,t,n),n=n.sibling}function Pl(e,t,n){if(fe&&"function"==typeof fe.onCommitFiberUnmount)try{fe.onCommitFiberUnmount(he,n)}catch(s){}switch(n.tag){case 26:Sl||fl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Sl||fl(n,t);var r=Nl,i=Il;md(n.type)&&(Nl=n.stateNode,Il=!1),Al(e,t,n),kd(n.stateNode),Nl=r,Il=i;break;case 5:Sl||fl(n,t);case 6:if(r=Nl,i=Il,Nl=null,Al(e,t,n),Il=i,null!==(Nl=r))if(Il)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(a){hu(n,t,a)}else try{Nl.removeChild(n.stateNode)}catch(a){hu(n,t,a)}break;case 18:null!==Nl&&(Il?(gd(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ih(e)):gd(Nl,n.stateNode));break;case 4:r=Nl,i=Il,Nl=n.stateNode.containerInfo,Il=!0,Al(e,t,n),Nl=r,Il=i;break;case 0:case 11:case 14:case 15:Sl||cl(2,n,t),Sl||cl(4,n,t),Al(e,t,n);break;case 1:Sl||(fl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&dl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:Sl=(r=Sl)||null!==n.memoizedState,Al(e,t,n),Sl=r;break;default:Al(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ih(e)}catch(n){hu(t,t.return,n)}}function jl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Cl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Cl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var r=yu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Nl=l.stateNode,Il=!1;break e}break;case 5:Nl=l.stateNode,Il=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,Il=!0;break e}l=l.return}if(null===Nl)throw Error(r(160));Pl(a,o,s),Nl=null,Il=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Dl=null;function Ll(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ml(t,e),Ol(e),4&i&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Ml(t,e),Ol(e),512&i&&(Sl||null===n||fl(n,n.return)),64&i&&xl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var s=Dl;if(Ml(t,e),Ol(e),512&i&&(Sl||null===n||fl(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":(!(a=s.getElementsByTagName("title")[0])||a[Be]||a[Me]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(i),s.head.insertBefore(a,s.querySelector("head > title"))),nd(a,i,n),a[Me]=e,We(a),i=a;break e;case"link":var o=Bd("link","href",s).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}nd(a=s.createElement(i),i,n),s.head.appendChild(a);break;case"meta":if(o=Bd("meta","content",s).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}nd(a=s.createElement(i),i,n),s.head.appendChild(a);break;default:throw Error(r(468,i))}a[Me]=e,We(a),i=a}e.stateNode=i}else Vd(s,e.type,e.stateNode);else e.stateNode=Ld(s,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?Vd(s,e.type,e.stateNode):Ld(s,i,e.memoizedProps)):null===i&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ml(t,e),Ol(e),512&i&&(Sl||null===n||fl(n,n.return)),null!==n&&4&i&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ml(t,e),Ol(e),512&i&&(Sl||null===n||fl(n,n.return)),32&e.flags){s=e.stateNode;try{Ct(s,"")}catch(p){hu(e,e.return,p)}}4&i&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&i&&(kl=!0);break;case 6:if(Ml(t,e),Ol(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){hu(e,e.return,p)}}break;case 3:if(zd=null,s=Dl,Dl=Td(t.containerInfo),Ml(t,e),Dl=s,Ol(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ih(t.containerInfo)}catch(p){hu(e,e.return,p)}kl&&(kl=!1,Fl(e));break;case 4:i=Dl,Dl=Td(e.stateNode.containerInfo),Ml(t,e),Ol(e),Dl=i;break;case 12:default:Ml(t,e),Ol(e);break;case 13:Ml(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(kc=re()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,jl(e,i)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=xl,d=Sl;if(xl=u||s,Sl=d||c,Ml(t,e),Sl=d,xl=u,Ol(e),8192&i)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||xl||Sl||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,s)"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(p){hu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){hu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,jl(e,n))));break;case 19:Ml(t,e),Ol(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,jl(e,i)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(gl(i)){n=i;break}i=i.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var s=n.stateNode;bl(e,yl(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(Ct(a,""),n.flags&=-33),bl(e,yl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,yl(e),o);break;default:throw Error(r(161))}}catch(l){hu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ul(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),zl(t);break;case 1:fl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&dl(t,t.return,n),zl(t);break;case 27:kd(t.stateNode);case 26:case 5:fl(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(i,s,n),ll(4,s);break;case 1:if(Bl(i,s,n),"function"==typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){hu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)fs(l[i],o)}catch(c){hu(r,r.return,c)}}n&&64&a&&ul(s),hl(s,s.return);break;case 27:wl(s);case 26:case 5:Bl(i,s,n),n&&null===r&&4&a&&pl(s),hl(s,s.return);break;case 12:Bl(i,s,n);break;case 13:Bl(i,s,n),n&&4&a&&Rl(i,s);break;case 22:null===s.memoizedState&&Bl(i,s,n),hl(s,s.return);break;case 30:break;default:Bl(i,s,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Li(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e))}function Hl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Hl(e,t,n,r),2048&i&&ll(9,t);break;case 1:case 13:default:Hl(e,t,n,r);break;case 3:Hl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Li(e)));break;case 12:if(2048&i){Hl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hu(t,t.return,l)}}else Hl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?Hl(e,t,n,r):Wl(e,t):2&s._visibility?Hl(e,t,n,r):(s._visibility|=2,Kl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Vl(a,t);break;case 24:Hl(e,t,n,r),2048&i&&$l(t.alternate,t)}}function Kl(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Kl(s,a,o,l,i),ll(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Kl(s,a,o,l,i):Wl(s,a):(u._visibility|=2,Kl(s,a,o,l,i)),i&&2048&c&&Vl(a.alternate,a);break;case 24:Kl(s,a,o,l,i),i&&2048&c&&$l(a.alternate,a);break;default:Kl(s,a,o,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&$l(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Gl=8192;function Yl(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 26:Yl(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Hd)throw Error(r(475));var i=Hd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var s=Pd(n.href),a=e.querySelector(Rd(s));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(i.count++,i=Kd.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,void We(a);a=e.ownerDocument||e,n=jd(n),(s=Cd.get(s))&&Fd(n,s),We(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),nd(a,"link",n),t.instance=a}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(i.count++,t=Kd.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Yl(e);break;case 3:case 4:var t=Dl;Dl=Td(e.stateNode.containerInfo),Yl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,Yl(e),Gl=t):Yl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,tc(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Xl(e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,tc(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:cl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Li(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var i=(r=El).sibling,s=r.return;if(_l(r),r===n){El=null;break e}if(null!==i){i.return=s,El=i;break e}El=s}}}var nc={getCacheForType:function(e){var t=Ni(Mi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},rc="function"==typeof WeakMap?WeakMap:Map,ic=0,sc=null,ac=null,oc=0,lc=0,cc=null,uc=!1,dc=!1,hc=!1,fc=0,pc=0,mc=0,gc=0,yc=0,vc=0,bc=0,wc=null,xc=null,Sc=!1,kc=0,Cc=1/0,Ec=null,Tc=null,_c=0,Nc=null,Ic=null,Ac=0,Pc=0,Rc=null,jc=null,Mc=0,Dc=null;function Lc(){if(2&ic&&0!==oc)return oc&-oc;if(null!==L.T){return 0!==Ui?Ui:Pu()}return Re()}function Oc(){0===vc&&(vc=536870912&oc&&!oi?536870912:Ce());var e=so.current;return null!==e&&(e.flags|=32),vc}function Fc(e,t,n){(e!==sc||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(qc(e,0),Vc(e,oc,vc,!1)),_e(e,n),2&ic&&e===sc||(e===sc&&(!(2&ic)&&(gc|=n),4===pc&&Vc(e,oc,vc,!1)),Cu(e))}function Uc(e,t,n){if(6&ic)throw Error(r(327));for(var i=!n&&!(124&t)&&0===(t&e.expiredLanes)||Se(e,t),s=i?function(e,t){var n=ic;ic|=2;var i=Wc(),s=Gc();sc!==e||oc!==t?(Ec=null,Cc=re()+500,qc(e,t)):dc=Se(e,t);e:for(;;)try{if(0!==lc&&null!==ac){t=ac;var a=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,a,1);break;case 2:case 9:if(Qi(a)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||sc!==e||(lc=7),Cu(e)},a.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Qi(a)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,a,7));break;case 5:var o=null;switch(ac.tag){case 26:o=ac.memoizedState;case 5:case 27:var l=ac;if(!o||$d(o)){lc=0,cc=null;var c=l.sibling;if(null!==c)ac=c;else{var u=l.return;null!==u?(ac=u,nu(u)):ac=null}break t}}lc=0,cc=null,tu(e,t,a,5);break;case 6:lc=0,cc=null,tu(e,t,a,6);break;case 8:Hc(),pc=6;break e;default:throw Error(r(462))}}Xc();break}catch(d){Kc(e,d)}return wi=bi=null,L.H=i,L.A=s,ic=n,null!==ac?0:(sc=null,oc=0,Ar(),pc)}(e,t):Jc(e,t,!0),a=i;;){if(0===s){dc&&!i&&Vc(e,t,0,!1);break}if(n=e.current.alternate,!a||Bc(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=wc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,o).flags|=256),2!==(o=Jc(l,o,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=a,gc|=a,s=4;break e}a=xc,xc=s,null!==a&&(null===xc?xc=a:xc.push.apply(xc,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){qc(e,0),Vc(e,t,0,!0);break}e:{switch(i=e,a=s){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Vc(i,t,vc,!uc);break e;case 2:xc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(s=kc+300-re())){if(Vc(i,t,vc,!uc),0!==xe(i,0,!0))break e;i.timeoutHandle=ud(zc.bind(null,i,n,xc,Ec,Sc,t,vc,gc,bc,uc,a,2,-0,0),s)}else zc(i,n,xc,Ec,Sc,t,vc,gc,bc,uc,a,0,-0,0)}break}s=Jc(e,t,!1),a=!1}Cu(e)}function zc(e,t,n,i,s,a,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&(Hd={stylesheets:null,count:0,unsuspend:qd},Jl(t),null!==(h=function(){if(null===Hd)throw Error(r(475));var e=Hd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(iu.bind(null,e,t,a,n,i,s,o,l,c,d,1,f,p)),void Vc(e,a,o,!u);iu(e,t,a,n,i,s,o,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vc(e,t,n,r){t&=~yc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-me(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Ne(e,n,t)}function $c(){return!!(6&ic)||(Eu(0),!1)}function Hc(){if(null!==ac){if(0===lc)var e=ac.return;else wi=bi=null,Us(e=ac),Ja=null,Qa=0,e=ac;for(;null!==e;)ol(e.alternate,e),e=e.return;ac=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,dd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Hc(),sc=e,ac=n=zr(e.current,null),oc=t,lc=0,cc=null,uc=!1,dc=Se(e,t),hc=!1,bc=vc=yc=gc=mc=pc=0,xc=wc=null,Sc=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-me(r),s=1<<i;t|=e[i],r&=~s}return fc=t,Ar(),n}function Kc(e,t){xs=null,L.H=Ka,t===Wi||t===Yi?(t=ts(),lc=3):t===Gi?(t=ts(),lc=4):lc=t===No?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cc=t,null===ac&&(pc=1,ko(e,Tr(t,e.current)))}function Wc(){var e=L.H;return L.H=Ka,null===e?Ka:e}function Gc(){var e=L.A;return L.A=nc,e}function Yc(){pc=4,uc||(4194048&oc)!==oc&&null!==so.current||(dc=!0),!(134217727&mc)&&!(134217727&gc)||null===sc||Vc(sc,oc,vc,!1)}function Jc(e,t,n){var r=ic;ic|=2;var i=Wc(),s=Gc();sc===e&&oc===t||(Ec=null,qc(e,t)),t=!1;var a=pc;e:for(;;)try{if(0!==lc&&null!==ac){var o=ac,l=cc;switch(lc){case 8:Hc(),a=6;break e;case 3:case 2:case 9:case 6:null===so.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,o,l,c),n&&dc){a=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,o,l,c)}}Qc(),a=pc;break}catch(u){Kc(e,u)}return t&&e.shellSuspendCounter++,wi=bi=null,ic=r,L.H=i,L.A=s,null===ac&&(sc=null,oc=0,Ar()),a}function Qc(){for(;null!==ac;)Zc(ac)}function Xc(){for(;null!==ac&&!te();)Zc(ac)}function Zc(e){var t=Zo(e.alternate,e,fc);e.memoizedProps=e.pendingProps,null===t?nu(e):ac=t}function eu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fo(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Fo(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Us(t);default:ol(n,t),t=Zo(n,t=ac=Br(t,fc),fc)}e.memoizedProps=e.pendingProps,null===t?nu(e):ac=t}function tu(e,t,n,i){wi=bi=null,Us(t),Ja=null,Qa=0;var s=t.return;try{if(function(e,t,n,i,s){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&Ei(t,n,s,!0),null!==(n=so.current)){switch(n.tag){case 13:return null===ao?Yc():null===n.alternate&&0===pc&&(pc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Ji?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),fu(e,i,s)),!1;case 22:return n.flags|=65536,i===Ji?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),fu(e,i,s)),!1}throw Error(r(435,n.tag))}return fu(e,i,s),Yc(),!1}if(oi)return null!==(t=so.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==ui&&yi(Tr(e=Error(r(422),{cause:i}),n))):(i!==ui&&yi(Tr(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,i=Tr(i,n),cs(e,s=Eo(e.stateNode,i,s)),4!==pc&&(pc=2)),!1;var a=Error(r(520),{cause:i});if(a=Tr(a,n),null===wc?wc=[a]:wc.push(a),4!==pc&&(pc=2),null===t)return!0;i=Tr(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,cs(n,e=Eo(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Tc&&Tc.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,_o(s=To(s),e,n,i),cs(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,oc))return pc=1,ko(e,Tr(n,e.current)),void(ac=null)}catch(a){if(null!==s)throw ac=s,a;return pc=1,ko(e,Tr(n,e.current)),void(ac=null)}32768&t.flags?(oi||1===i?e=!0:dc||536870912&oc?e=!1:(uc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=so.current)&&13===i.tag&&(i.flags|=16384))),ru(t,e)):nu(t)}function nu(e){var t=e;do{if(32768&t.flags)return void ru(t,uc);e=t.return;var n=sl(t.alternate,t,fc);if(null!==n)return void(ac=n);if(null!==(t=t.sibling))return void(ac=t);ac=t=e}while(null!==t);0===pc&&(pc=5)}function ru(e,t){do{var n=al(e.alternate,e);if(null!==n)return n.flags&=32767,void(ac=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ac=e);ac=e=n}while(null!==e);pc=6,ac=null}function iu(e,t,n,i,s,a,o,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==_c);if(6&ic)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-me(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,a|=Ir,o,l,c),e===sc&&(ac=sc=null,oc=0),Ic=t,Nc=e,Ac=n,Pc=a,Rc=s,jc=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Z(oe,function(){return uu(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=L.T,L.T=null,s=O.p,O.p=2,o=ic,ic|=4;try{!function(e,t){if(e=e.containerInfo,rd=ih,rr(e=nr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},ih=!1,El=t;null!==El;)if(e=(t=El).child,1024&t.subtreeFlags&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(a=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=vo(n.type,s,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(y){hu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))yd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{ic=o,O.p=s,L.T=i}}_c=1,su(),au(),ou()}}function su(){if(1===_c){_c=0;var e=Nc,t=Ic,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=L.T,L.T=null;var r=O.p;O.p=2;var i=ic;ic|=4;try{Ll(t,e);var s=id,a=nr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&tr(o.ownerDocument.documentElement,o)){if(null!==l&&rr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=er(o,m),v=er(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}ih=!!rd,id=rd=null}finally{ic=i,O.p=r,L.T=n}}e.current=t,_c=2}}function au(){if(2===_c){_c=0;var e=Nc,t=Ic,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=L.T,L.T=null;var r=O.p;O.p=2;var i=ic;ic|=4;try{Tl(e,t.alternate,t)}finally{ic=i,O.p=r,L.T=n}}_c=3}}function ou(){if(4===_c||3===_c){_c=0,ne();var e=Nc,t=Ic,n=Ac,r=jc;10256&t.subtreeFlags||10256&t.flags?_c=5:(_c=0,Ic=Nc=null,lu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Tc=null),Pe(n),t=t.stateNode,fe&&"function"==typeof fe.onCommitFiberRoot)try{fe.onCommitFiberRoot(he,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=L.T,i=O.p,O.p=2,L.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{L.T=t,O.p=i}}3&Ac&&cu(),Cu(e),i=e.pendingLanes,4194090&n&&42&i?e===Dc?Mc++:(Mc=0,Dc=e):Mc=0,Eu(0)}}function lu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Li(t)))}function cu(e){return su(),au(),ou(),uu()}function uu(){if(5!==_c)return!1;var e=Nc,t=Pc;Pc=0;var n=Pe(Ac),i=L.T,s=O.p;try{O.p=32>n?32:n,L.T=null,n=Rc,Rc=null;var a=Nc,o=Ac;if(_c=0,Ic=Nc=null,Ac=0,6&ic)throw Error(r(331));var l=ic;if(ic|=4,Zl(a.current),ql(a,a.current,o,n),ic=l,Eu(0,!1),fe&&"function"==typeof fe.onPostCommitFiberRoot)try{fe.onPostCommitFiberRoot(he,a)}catch(c){}return!0}finally{O.p=s,L.T=i,lu(e,t)}}function du(e,t,n){t=Tr(n,t),null!==(e=os(e,t=Eo(e.stateNode,t,2),2))&&(_e(e,2),Cu(e))}function hu(e,t,n){if(3===e.tag)du(e,e,n);else for(;null!==t;){if(3===t.tag){du(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Tc||!Tc.has(r))){e=Tr(n,e),null!==(r=os(t,n=To(2),2))&&(_o(n,r,t,e),_e(r,2),Cu(r));break}}t=t.return}}function fu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(hc=!0,i.add(n),e=pu.bind(null,e,t,n),t.then(e,e))}function pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(oc&n)===n&&(4===pc||3===pc&&(62914560&oc)===oc&&300>re()-kc?!(2&ic)&&qc(e,0):yc|=n,bc===oc&&(bc=0)),Cu(e)}function mu(e,t){0===t&&(t=Ee()),null!==(e=jr(e,t))&&(_e(e,t),Cu(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function yu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),mu(e,n)}var vu=null,bu=null,wu=!1,xu=!1,Su=!1,ku=0;function Cu(e){e!==bu&&null===e.next&&(null===bu?vu=bu=e:bu=bu.next=e),xu=!0,wu||(wu=!0,fd(function(){6&ic?Z(se,Tu):_u()}))}function Eu(e,t){if(!Su&&xu){Su=!0;do{for(var n=!1,r=vu;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-me(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Au(r,s))}else s=oc,!(3&(s=xe(r,r===sc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Se(r,s)||(n=!0,Au(r,s));r=r.next}}while(n);Su=!1}}function Tu(){_u()}function _u(){xu=wu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==cd&&(cd=e,!0);return cd=null,!1}()&&(e=ku),ku=0);for(var t=re(),n=null,r=vu;null!==r;){var i=r.next,s=Nu(r,t);0===s?(r.next=null,null===n?vu=i:n.next=i,null===i&&(bu=n)):(n=r,(0!==e||3&s)&&(xu=!0)),r=i}Eu(e)}function Nu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-me(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ke(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=oc,n=xe(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ee(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Se(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ee(r),Pe(n)){case 2:case 8:n=ae;break;case 32:default:n=oe;break;case 268435456:n=ce}return r=Iu.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ee(r),e.callbackPriority=2,e.callbackNode=null,2}function Iu(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=xe(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Uc(e,r,t),Nu(e,re()),null!=e.callbackNode&&e.callbackNode===n?Iu.bind(null,e):null)}function Au(e,t){if(cu())return null;Uc(e,t,!0)}function Pu(){return 0===ku&&(ku=Ce()),ku}function Ru(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Pt(""+e)}function ju(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Mu=0;Mu<kr.length;Mu++){var Du=kr[Mu];Cr(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}Cr(mr,"onAnimationEnd"),Cr(gr,"onAnimationIteration"),Cr(yr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(vr,"onTransitionRun"),Cr(br,"onTransitionStart"),Cr(wr,"onTransitionCancel"),Cr(xr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Je("onBeforeInput",["compositionend","keypress","textInput","paste"]),Je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Fu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){bo(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){bo(u)}i.currentTarget=null,s=l}}}}function Uu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||($u(t,e,2,!1),n.add(r))}function zu(e,t,n){var r=0;t&&(r|=4),$u(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Bu]){e[Bu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Ou.has(t)||zu(t,!1,e),zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,zu("selectionchange",!1,t))}}function $u(e,t,n,r){switch(dh(t)){case 2:var i=sh;break;case 8:i=ah;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hu(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==l;){if(null===(o=$e(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=a=o;continue e}l=l.parentNode}}r=r.return}Ft(function(){var r=a,i=jt(n),o=[];e:{var l=Sr.get(e);if(void 0!==l){var c=tn,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=ln;break;case"focusout":u="blur",c=ln;break;case"beforeblur":case"afterblur":c=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case mr:case gr:case yr:c=cn;break;case xr:c=wn;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=Sn}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&d.push(qu(m,g,p)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,n,i),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!$e(u)&&!u[Le])&&(c||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?$e(u):null)&&(h=s(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=vn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?l:qe(c),p=null==u?l:qe(u),(l=new d(g,m+"leave",c,n,i)).target=h,l.relatedTarget=p,g=null,$e(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Wu(p))m++;for(p=0,g=f;g;g=Wu(g))p++;for(;0<m-p;)d=Wu(d),m--;for(;0<p-m;)f=Wu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Wu(d),f=Wu(f)}d=null}else d=null;null!==c&&Gu(o,l,c,d,!1),null!==u&&null!==h&&Gu(o,h,u,d,!0)}if("select"===(c=(l=r?qe(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=zn;else if(Mn(l))if(Bn)y=Jn;else{y=Gn;var v=Wn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Nt(r.elementType)&&(y=zn):y=Yn;switch(y&&(y=y(e,r))?Dn(o,y,n,i):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&wt(l,"number",l.value)),v=r?qe(r):window,e){case"focusin":(Mn(v)||"true"===v.contentEditable)&&(sr=v,ar=r,or=null);break;case"focusout":or=ar=sr=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(o,n,i);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":cr(o,n,i)}var b;if(Cn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(_n&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Kt()):(Ht="value"in($t=i)?$t.value:$t.textContent,Rn=!0)),0<(v=Ku(r,w)).length&&(w=new dn(w,e,null,n,i),o.push({event:w,listeners:v}),b?w.data=b:null!==(b=Pn(n))&&(w.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(In=!0,Nn);case"textInput":return(e=t.data)===Nn&&In?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!Cn&&An(e,t)?(e=Kt(),qt=Ht=$t=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Ku(r,"onBeforeInput")).length&&(v=new dn("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Ru((i[De]||null).action),a=r.submitter;a&&null!==(t=(t=a[De]||null)?Ru(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new tn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=a?ju(i,a):new FormData(i);Ra(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"==typeof s&&(o.preventDefault(),e=a?ju(i,a):new FormData(i),Ra(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fu(o,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ku(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ut(e,n))&&r.unshift(qu(e,i,s)),null!=(i=Ut(e,t))&&r.push(qu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Ut(n,s))&&a.unshift(qu(n,c,l)):i||null!=(c=Ut(n,s))&&a.push(qu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yu=/\r\n?/g,Ju=/\u0000|\uFFFD/g;function Qu(e){return("string"==typeof e?e:""+e).replace(Yu,"\n").replace(Ju,"")}function Xu(e,t){return t=Qu(t),Qu(e)===t}function Zu(){}function ed(e,t,n,i,s,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||Ct(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&Ct(e,""+i);break;case"className":it(e,"class",i);break;case"tabIndex":it(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,n,i);break;case"style":_t(e,i,a);break;case"data":if("object"!==t){it(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=Pt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&ed(e,t,"name",s.name,s,null),ed(e,t,"formEncType",s.formEncType,s,null),ed(e,t,"formMethod",s.formMethod,s,null),ed(e,t,"formTarget",s.formTarget,s,null)):(ed(e,t,"encType",s.encType,s,null),ed(e,t,"method",s.method,s,null),ed(e,t,"target",s.target,s,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=Pt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Zu);break;case"onScroll":null!=i&&Uu("scroll",e);break;case"onScrollEnd":null!=i&&Uu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=Pt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Uu("beforetoggle",e),Uu("toggle",e),rt(e,"popover",i);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":rt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&rt(e,n=It.get(n)||n,i)}}function td(e,t,n,i,s,a){switch(n){case"style":_t(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof i?Ct(e,i):("number"==typeof i||"bigint"==typeof i)&&Ct(e,""+i);break;case"onScroll":null!=i&&Uu("scroll",e);break;case"onScrollEnd":null!=i&&Uu("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ye.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"==typeof(a=null!=(a=e[De]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):rt(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s)))}}function nd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Uu("error",e),Uu("load",e);var i,s=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,i,o,n,null)}}return a&&ed(e,t,"srcSet",n.srcSet,n,null),void(s&&ed(e,t,"src",n.src,n,null));case"input":Uu("invalid",e);var l=i=o=a=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:ed(e,t,s,d,n,null)}}return bt(e,i,l,c,u,o,a,!1),void ft(e);case"select":for(a in Uu("invalid",e),s=o=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:ed(e,t,a,l,n,null)}return t=i,n=o,e.multiple=!!s,void(null!=t?xt(e,!!s,t,!1):null!=n&&xt(e,!!s,n,!0));case"textarea":for(o in Uu("invalid",e),i=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:ed(e,t,o,l,n,null)}return kt(e,s,a,i),void ft(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!=typeof s&&"symbol"!=typeof s;else ed(e,t,c,s,n,null);return;case"dialog":Uu("beforetoggle",e),Uu("toggle",e),Uu("cancel",e),Uu("close",e);break;case"iframe":case"object":Uu("load",e);break;case"video":case"audio":for(s=0;s<Lu.length;s++)Uu(Lu[s],e);break;case"image":Uu("error",e),Uu("load",e);break;case"details":Uu("toggle",e);break;case"embed":case"source":case"link":Uu("error",e),Uu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,u,s,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&td(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&ed(e,t,l,s,n,null))}var rd=null,id=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function ad(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cd=null;var ud="function"==typeof setTimeout?setTimeout:void 0,dd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,fd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(pd)}:ud;function pd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function gd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&kd(a.documentElement),2&n&&kd(a.body),4&n)for(kd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i)return e.removeChild(s),void Ih(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ih(t)}function yd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var wd=null;function xd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Sd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Cd=new Map,Ed=new Set;function Td(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=O.d;O.d={f:function(){var e=_d.f(),t=$c();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?Ma(t):_d.r(e)},D:function(e){_d.D(e),Id("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Id("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Nd;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Pd(e);break;case"script":s=Md(e)}Cd.has(s)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Cd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(s))||"script"===t&&r.querySelector(Dd(s))||(nd(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Nd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Md(e)}if(!Cd.has(s)&&(e=c({rel:"modulepreload",href:e},t),Cd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(s)))return}nd(r=n.createElement("link"),"link",e),We(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Nd;if(n&&e){var r=Ke(n).hoistableScripts,i=Md(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=c({src:e,async:!0},t),(t=Cd.get(i))&&Ud(e,t),We(s=n.createElement("script")),nd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){_d.S(e,t,n);var r=Nd;if(r&&e){var i=Ke(r).hoistableStyles,s=Pd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Rd(s)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Cd.get(s))&&Fd(e,n);var l=a=r.createElement("link");We(l),nd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Od(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){_d.M(e,t);var n=Nd;if(n&&e){var r=Ke(n).hoistableScripts,i=Md(e),s=r.get(i);s||((s=n.querySelector(Dd(i)))||(e=c({src:e,async:!0,type:"module"},t),(t=Cd.get(i))&&Ud(e,t),We(s=n.createElement("script")),nd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Nd="undefined"==typeof document?null:document;function Id(e,t,n){var r=Nd;if(r&&"string"==typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),Ed.has(i)||(Ed.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(nd(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Ad(e,t,n,i){var s,a,o,l,c=(c=K.current)?Td(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Pd(n.href),(i=(n=Ke(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Pd(n.href);var u=Ke(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Cd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Cd.set(e,n),u||(s=c,a=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),nd(a,"link",o),We(a),s.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return d}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Md(n),(i=(n=Ke(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Pd(e){return'href="'+yt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function jd(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Md(e){return'[src="'+yt(e)+'"]'}function Dd(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(i)return t.instance=i,We(i),i;var s=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return We(i=(e.ownerDocument||e).createElement("style")),nd(i,"style",s),Od(i,n.precedence,e),t.instance=i;case"stylesheet":s=Pd(n.href);var a=e.querySelector(Rd(s));if(a)return t.state.loading|=4,t.instance=a,We(a),a;i=jd(n),(s=Cd.get(s))&&Fd(i,s),We(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),nd(a,"link",i),t.state.loading|=4,Od(a,n.precedence,e),t.instance=a;case"script":return a=Md(n.src),(s=e.querySelector(Dd(a)))?(t.instance=s,We(s),s):(i=n,(s=Cd.get(a))&&Ud(i=c({},n),s),We(s=(e=e.ownerDocument||e).createElement("script")),nd(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Od(i,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zd=null;function Bd(e,t,n){if(null===zd){var r=new Map,i=zd=new Map;i.set(n,r)}else(r=(i=zd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Be]||s[Me]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function Vd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function $d(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var Hd=null;function qd(){}function Kd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Yd,e),Wd=null,Kd.call(e))}function Yd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=Kd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Jd={$$typeof:b,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Qd(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,s,a,o,l,c,u,d){return e=new Qd(e,t,n,a,o,l,c,d),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},is(s),e}function Zd(e){return e?e=Lr:Lr}function eh(e,t,n,r,i,s){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=as(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=os(e,r,t))&&(Fc(n,0,t),ls(n,e,t))}function th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nh(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function rh(e){if(13===e.tag){var t=jr(e,67108864);null!==t&&Fc(t,0,67108864),nh(e,67108864)}}var ih=!0;function sh(e,t,n,r){var i=L.T;L.T=null;var s=O.p;try{O.p=2,oh(e,t,n,r)}finally{O.p=s,L.T=i}}function ah(e,t,n,r){var i=L.T;L.T=null;var s=O.p;try{O.p=8,oh(e,t,n,r)}finally{O.p=s,L.T=i}}function oh(e,t,n,r){if(ih){var i=lh(r);if(null===i)Hu(e,t,r,ch,n),wh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return fh=xh(fh,e,t,n,r,i),!0;case"dragenter":return ph=xh(ph,e,t,n,r,i),!0;case"mouseover":return mh=xh(mh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return gh.set(s,xh(gh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yh.set(s,xh(yh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(wh(e,r),4&t&&-1<bh.indexOf(e)){for(;null!==i;){var s=He(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=we(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-me(a);o.entanglements[1]|=l,a&=~l}Cu(s),!(6&ic)&&(Cc=re()+500,Eu(0))}}break;case 13:null!==(o=jr(s,2))&&Fc(o,0,2),$c(),nh(s,2)}if(null===(s=lh(r))&&Hu(e,t,r,ch,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hu(e,t,r,null,n)}}function lh(e){return uh(e=jt(e))}var ch=null;function uh(e){if(ch=null,null!==(e=$e(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case se:return 2;case ae:return 8;case oe:case le:return 32;case ce:return 268435456;default:return 32}default:return 32}}var hh=!1,fh=null,ph=null,mh=null,gh=new Map,yh=new Map,vh=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wh(e,t){switch(e){case"focusin":case"focusout":fh=null;break;case"dragenter":case"dragleave":ph=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(t.pointerId)}}function xh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=He(t))&&rh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Sh(e){var t=$e(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,function(){if(13===n.tag){var e=Lc();e=Ae(e);var t=jr(n,e);null!==t&&Fc(t,0,e),nh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=lh(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&rh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function Ch(e,t,n){kh(e)&&n.delete(t)}function Eh(){hh=!1,null!==fh&&kh(fh)&&(fh=null),null!==ph&&kh(ph)&&(ph=null),null!==mh&&kh(mh)&&(mh=null),gh.forEach(Ch),yh.forEach(Ch)}function Th(t,n){t.blockedOn===n&&(t.blockedOn=null,hh||(hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Eh)))}var _h=null;function Nh(t){_h!==t&&(_h=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){_h===t&&(_h=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if("function"!=typeof r){if(null===uh(r||n))continue;break}var s=He(n);null!==s&&(t.splice(e,3),e-=3,Ra(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ih(e){function t(t){return Th(t,e)}null!==fh&&Th(fh,e),null!==ph&&Th(ph,e),null!==mh&&Th(mh,e),gh.forEach(t),yh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)Sh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[De]||null;if("function"==typeof s)a||Nh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[De]||null)o=a.formAction;else if(null!==uh(i))continue}else o=a.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Nh(n)}}}function Ah(e){this._internalRoot=e}function Ph(e){this._internalRoot=e}Ph.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));eh(t.current,Lc(),e,t,null,null)},Ph.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eh(e.current,2,null,e,null,null),$c(),t[Le]=null}},Ph.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&Sh(e)}};var Rh=t.version;if("19.1.1"!==Rh)throw Error(r(527,Rh,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(i=a.return)){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return o(a),e;if(l===i)return o(a),t;l=l.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=l;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,i=l;break}if(u===i){c=!0,i=a,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,i=a;break}if(u===i){c=!0,i=l,n=a;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var jh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{he=Mh.inject(jh),fe=Mh}catch(Lh){}}return x.createRoot=function(e,t){if(!i(e))throw Error(r(299));var n=!1,s="",a=wo,o=xo,l=So;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,s,a,o,l,0,null),e[Le]=t.current,Vu(e),new Ah(t)},x.hydrateRoot=function(e,t,n){if(!i(e))throw Error(r(299));var s=!1,a="",o=wo,l=xo,c=So,u=null;return null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,s,a,o,l,c,0,u)).context=Zd(null),n=t.current,(a=as(s=Ae(s=Lc()))).callback=null,os(n,a,s),n=s,t.current.lanes=n,_e(t,n),Cu(t),e[Le]=t.current,Vu(e),new Ph(t)},x.version="19.1.1",x}var M=(N||(N=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),w.exports=j()),w.exports),D=R();const L=r(D);
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}var F,U;(U=F||(F={})).Pop="POP",U.Push="PUSH",U.Replace="REPLACE";const z="popstate";function B(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=F.Pop,l=null,c=u();null==c&&(c=0,a.replaceState(O({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=F.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:m.location,delta:t})}function h(e,t){o=F.Push;let n=q(m.location,e,t);c=u()+1;let r=H(n,c),d=m.createHref(n);try{a.pushState(r,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}s&&l&&l({action:o,location:m.location,delta:1})}function f(e,t){o=F.Replace;let n=q(m.location,e,t);c=u();let r=H(n,c),i=m.createHref(n);a.replaceState(r,"",i),s&&l&&l({action:o,location:m.location,delta:0})}function p(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:K(e);return n=n.replace(/ $/,"%20"),V(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let m={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(z,d),l=e,()=>{i.removeEventListener(z,d),l=null}},createHref:e=>t(i,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:f,go:e=>a.go(e)};return m}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return q("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:K(t)},0,e)}function V(e,t){if(!1===e||null==e)throw new Error(t)}function $(e,t){if(!e)try{throw new Error(t)}catch(n){}}function H(e,t){return{usr:e.state,key:e.key,idx:t}}function q(e,t,n,r){return void 0===n&&(n=null),O({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?W(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function K(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function W(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var G,Y;function J(e,t,n){return void 0===n&&(n="/"),function(e,t,n){let r="string"==typeof t?W(t):t,i=ue(r.pathname||"/",n);if(null==i)return null;let s=Q(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=ce(i);a=oe(s[o],e)}return a}(e,t,n)}function Q(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(V(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=pe([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(V(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Q(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:ae(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of X(e.path))i(e,t,r);else i(e,t)}),t}function X(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=X(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(Y=G||(G={})).data="data",Y.deferred="deferred",Y.redirect="redirect",Y.error="error";const Z=/^:[\w-]+$/,ee=3,te=2,ne=1,re=10,ie=-2,se=e=>"*"===e;function ae(e,t){let n=e.split("/"),r=n.length;return n.some(se)&&(r+=ie),t&&(r+=te),n.filter(e=>!se(e)).reduce((e,t)=>e+(Z.test(t)?ee:""===t?ne:re),r)}function oe(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],n=o===r.length-1,l="/"===s?t:t.slice(s.length)||"/",c=le({path:e.relativePath,caseSensitive:e.caseSensitive,end:n},l),u=e.route;if(!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:pe([s,c.pathname]),pathnameBase:me(pe([s,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(s=pe([s,c.pathnameBase]))}return a}function le(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);$("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function ce(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return $(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ue(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function de(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function he(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function fe(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=W(e):(i=O({},e),V(!i.pathname||!i.pathname.includes("?"),de("?","pathname","search",i)),V(!i.pathname||!i.pathname.includes("#"),de("#","pathname","hash",i)),V(!i.search||!i.search.includes("#"),de("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?W(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:ge(r),hash:ye(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const pe=e=>e.join("/").replace(/\/\/+/g,"/"),me=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ge=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ye=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const ve=["post","put","patch","delete"];new Set(ve);const be=["get",...ve];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}new Set(be);const xe=m.createContext(null),Se=m.createContext(null),ke=m.createContext(null),Ce=m.createContext(null),Ee=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Te=m.createContext(null);function _e(){return null!=m.useContext(Ce)}function Ne(){return _e()||V(!1),m.useContext(Ce).location}function Ie(e){m.useContext(ke).static||m.useLayoutEffect(e)}function Ae(){let{isDataRoute:e}=m.useContext(Ee);return e?function(){let{router:e}=function(){let e=m.useContext(xe);return e||V(!1),e}(Oe.UseNavigateStable),t=Ue(Fe.UseNavigateStable),n=m.useRef(!1);Ie(()=>{n.current=!0});let r=m.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,we({fromRouteId:t},i)))},[e,t]);return r}():function(){_e()||V(!1);let e=m.useContext(xe),{basename:t,future:n,navigator:r}=m.useContext(ke),{matches:i}=m.useContext(Ee),{pathname:s}=Ne(),a=JSON.stringify(he(i,n.v7_relativeSplatPath)),o=m.useRef(!1);Ie(()=>{o.current=!0});let l=m.useCallback(function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=fe(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:pe([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[t,r,a,s,e]);return l}()}function Pe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=m.useContext(ke),{matches:i}=m.useContext(Ee),{pathname:s}=Ne(),a=JSON.stringify(he(i,r.v7_relativeSplatPath));return m.useMemo(()=>fe(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}function Re(e,t){return function(e,t,n,r){_e()||V(!1);let{navigator:i}=m.useContext(ke),{matches:s}=m.useContext(Ee),a=s[s.length-1],o=a?a.params:{};!a||a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c,u=Ne();if(t){var d;let e="string"==typeof t?W(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||V(!1),c=e}else c=u;let h=c.pathname||"/",f=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=J(e,{pathname:f}),g=function(e,t,n,r){var i;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===r&&(r=null);if(null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=r)&&s.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,o=null==(i=n)?void 0:i.errors;if(null!=o){let e=a.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||V(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let e=a[u];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=u),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let s,u=!1,d=null,h=null;var f;n&&(s=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||Me,l&&(c<0&&0===i?(ze[f="route-fallback"]||(ze[f]=!0),u=!0,h=null):c===i&&(u=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=s?d:u?h:r.route.Component?m.createElement(r.route.Component,null):r.route.element?r.route.element:e,m.createElement(Le,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?m.createElement(De,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:pe([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:pe([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);if(t&&g)return m.createElement(Ce.Provider,{value:{location:we({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:F.Pop}},g);return g}(e,t)}function je(){let e=function(){var e;let t=m.useContext(Te),n=function(){let e=m.useContext(Se);return e||V(!1),e}(),r=Ue();if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:r},n):null,null)}const Me=m.createElement(je,null);class De extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?m.createElement(Ee.Provider,{value:this.props.routeContext},m.createElement(Te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Le(e){let{routeContext:t,match:n,children:r}=e,i=m.useContext(xe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(Ee.Provider,{value:t},r)}var Oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Oe||{}),Fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fe||{});function Ue(e){let t=function(){let e=m.useContext(Ee);return e||V(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||V(!1),n.route.id}const ze={};function Be(e){V(!1)}function Ve(e){let{basename:t="/",children:n=null,location:r,navigationType:i=F.Pop,navigator:s,static:a=!1,future:o}=e;_e()&&V(!1);let l=t.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:l,navigator:s,static:a,future:we({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);"string"==typeof r&&(r=W(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=m.useMemo(()=>{let e=ue(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return null==g?null:m.createElement(ke.Provider,{value:c},m.createElement(Ce.Provider,{children:n,value:g}))}function $e(e){let{children:t,location:n}=e;return Re(He(t),n)}function He(e,t){void 0===t&&(t=[]);let n=[];return m.Children.forEach(e,(e,r)=>{if(!m.isValidElement(e))return;let i=[...t,r];if(e.type===m.Fragment)return void n.push.apply(n,He(e.props.children,i));e.type!==Be&&V(!1),e.props.index&&e.props.children&&V(!1);let s={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=He(e.props.children,i)),n.push(s)}),n}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}new Promise(()=>{});const Ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(wM){}const We=y.startTransition;function Ge(e){let{basename:t,children:n,future:r,window:i}=e,s=m.useRef();null==s.current&&(s.current=B({window:i,v5Compat:!0}));let a=s.current,[o,l]=m.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=m.useCallback(e=>{c&&We?We(()=>l(e)):l(e)},[l,c]);return m.useLayoutEffect(()=>a.listen(u),[a,u]),m.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),m.createElement(Ve,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Ye="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=m.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ke),{basename:f}=m.useContext(ke),p=!1;if("string"==typeof c&&Je.test(c)&&(n=c,Ye))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=ue(t.pathname,f);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:p=!0}catch(wM){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;_e()||V(!1);let{basename:r,navigator:i}=m.useContext(ke),{hash:s,pathname:a,search:o}=Pe(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:pe([r,a])),i.createHref({pathname:l,search:o,hash:s})}(c,{relative:i}),y=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=void 0===t?{}:t,l=Ae(),c=Ne(),u=Pe(e,{relative:a});return m.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:K(c)===K(u);l(e,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,e,s,a,o])}
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});return m.createElement("a",qe({},h,{href:n||g,onClick:p||s?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:l}))});var Xe,Ze,et,tt;(Ze=Xe||(Xe={})).UseScrollRestoration="useScrollRestoration",Ze.UseSubmit="useSubmit",Ze.UseSubmitFetcher="useSubmitFetcher",Ze.UseFetcher="useFetcher",Ze.useViewTransitionState="useViewTransitionState",(tt=et||(et={})).UseFetcher="useFetcher",tt.UseFetchers="useFetchers",tt.UseScrollRestoration="useScrollRestoration";const nt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},rt=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),it=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var st={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>m.createElement("svg",{ref:l,...st,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:rt("lucide",i),...!s&&!it(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>m.createElement(e,t)),...Array.isArray(s)?s:[s]])),ot=(e,t)=>{const n=m.forwardRef(({className:n,...r},i)=>{return m.createElement(at,{ref:i,iconNode:t,className:rt(`lucide-${s=nt(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var s});return n.displayName=nt(e),n},lt=ot("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ct=ot("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ut=ot("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),dt=ot("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ht=ot("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ft=ot("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),pt=ot("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),mt=ot("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),gt=ot("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yt=ot("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),vt=ot("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),bt=ot("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),wt=ot("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),xt=ot("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),St=ot("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),kt=ot("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Ct=ot("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Et=ot("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Tt=ot("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),_t=ot("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Nt=ot("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),It=ot("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),At=ot("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),Pt=ot("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),Rt=ot("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),jt=ot("list-music",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]),Mt=ot("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Dt=ot("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),Lt=ot("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Ot=ot("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]),Ft=ot("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Ut=ot("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),zt=ot("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),Bt=ot("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),Vt=ot("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),$t=ot("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),Ht=ot("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qt=ot("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Kt=ot("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Wt=ot("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Gt=ot("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Yt=ot("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]),Jt=ot("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Qt=ot("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Xt=ot("tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Zt=ot("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),en=ot("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),tn=ot("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),nn=ot("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),rn=ot("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),sn=ot("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),an=ot("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),on=ot("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),ln=ot("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),cn=ot("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),un=ot("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),dn=ot("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hn=ot("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),fn=ot("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function pn(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function mn(...e){return t=>{let n=!1;const r=e.map(e=>{const r=pn(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():pn(e[t],null)}}}}function gn(...e){return m.useCallback(mn(...e),e)}function yn(e){const t=bn(e),n=m.forwardRef((e,n)=>{const{children:r,...i}=e,s=m.Children.toArray(r),a=s.find(xn);if(a){const e=a.props.children,r=s.map(t=>t===a?m.Children.count(e)>1?m.Children.only(null):m.isValidElement(e)?e.props.children:null:t);return u.jsx(t,{...i,ref:n,children:m.isValidElement(e)?m.cloneElement(e,void 0,r):null})}return u.jsx(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var vn=yn("Slot");function bn(e){const t=m.forwardRef((e,t)=>{const{children:n,...r}=e;if(m.isValidElement(n)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{const t=s(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==m.Fragment&&(i.ref=t?mn(t,e):e),m.cloneElement(n,i)}return m.Children.count(n)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wn=Symbol("radix.slottable");function xn(e){return m.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===wn}function Sn(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Sn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function kn(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Sn(e))&&(r&&(r+=" "),r+=t);return r}const Cn=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,En=kn,Tn=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return En(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==s?void 0:s[e];if(null===t)return null;const a=Cn(t)||Cn(r);return i[e][a]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...o}[t]):{...s,...o}[t]===n})?[...e,n,r]:e},[]);return En(e,a,l,null==n?void 0:n.class,null==n?void 0:n.className)},_n=e=>{const t=Pn(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Nn(n,t)||An(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},Nn=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?Nn(e.slice(1),r):void 0;if(i)return i;if(0===t.validators.length)return;const s=e.join("-");return t.validators.find(({validator:e})=>e(s))?.classGroupId},In=/^\[(.+)\]$/,An=e=>{if(In.test(e)){const t=In.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Pn=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Dn(Object.entries(e.classGroups),n).forEach(([e,n])=>{Rn(n,r,e,t)}),r},Rn=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:jn(t,e)).classGroupId=n)}if("function"==typeof e)return Mn(e)?void Rn(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,i])=>{Rn(i,jn(t,e),n,r)})})},jn=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Mn=e=>e.isThemeGetter,Dn=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Ln=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},On=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],s=t.length,a=e=>{const n=[];let a,o=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===o){if(c===i&&(r||e.slice(d,d+s)===t)){n.push(e.slice(l,d)),l=d+s;continue}if("/"===c){a=d;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:a&&a>l?a-l:void 0}};return n?e=>n({className:e,parseClassName:a}):a},Fn=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Un=/\s+/;function zn(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Bn(e))&&(r&&(r+=" "),r+=t);return r}const Bn=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Bn(e[r]))&&(n&&(n+=" "),n+=t);return n};function Vn(e,...t){let n,r,i,s=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Ln(e.cacheSize),parseClassName:On(e),..._n(e)}))(l),r=n.cache.get,i=n.cache.set,s=a,a(o)};function a(e){const t=r(e);if(t)return t;const s=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],a=e.trim().split(Un);let o="";for(let l=a.length-1;l>=0;l-=1){const e=a[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),f=r(h?u.substring(0,d):u);if(!f){if(!h){o=e+(o.length>0?" "+o:o);continue}if(f=r(u),!f){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Fn(t).join(":"),m=c?p+"!":p,g=m+f;if(s.includes(g))continue;s.push(g);const y=i(f,h);for(let n=0;n<y.length;++n){const e=y[n];s.push(m+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return i(e,s),s}return function(){return s(zn.apply(null,arguments))}}const $n=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Hn=/^\[(?:([a-z-]+):)?(.+)\]$/i,qn=/^\d+\/\d+$/,Kn=new Set(["px","full","screen"]),Wn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Qn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xn=e=>er(e)||Kn.has(e)||qn.test(e),Zn=e=>fr(e,"length",pr),er=e=>Boolean(e)&&!Number.isNaN(Number(e)),tr=e=>fr(e,"number",er),nr=e=>Boolean(e)&&Number.isInteger(Number(e)),rr=e=>e.endsWith("%")&&er(e.slice(0,-1)),ir=e=>Hn.test(e),sr=e=>Wn.test(e),ar=new Set(["length","size","percentage"]),or=e=>fr(e,ar,mr),lr=e=>fr(e,"position",mr),cr=new Set(["image","url"]),ur=e=>fr(e,cr,yr),dr=e=>fr(e,"",gr),hr=()=>!0,fr=(e,t,n)=>{const r=Hn.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},pr=e=>Gn.test(e)&&!Yn.test(e),mr=()=>!1,gr=e=>Jn.test(e),yr=e=>Qn.test(e),vr=Vn(()=>{const e=$n("colors"),t=$n("spacing"),n=$n("blur"),r=$n("brightness"),i=$n("borderColor"),s=$n("borderRadius"),a=$n("borderSpacing"),o=$n("borderWidth"),l=$n("contrast"),c=$n("grayscale"),u=$n("hueRotate"),d=$n("invert"),h=$n("gap"),f=$n("gradientColorStops"),p=$n("gradientColorStopPositions"),m=$n("inset"),g=$n("margin"),y=$n("opacity"),v=$n("padding"),b=$n("saturate"),w=$n("scale"),x=$n("sepia"),S=$n("skew"),k=$n("space"),C=$n("translate"),E=()=>["auto",ir,t],T=()=>[ir,t],_=()=>["",Xn,Zn],N=()=>["auto",er,ir],I=()=>["","0",ir],A=()=>[er,ir];return{cacheSize:500,separator:":",theme:{colors:[hr],spacing:[Xn,Zn],blur:["none","",sr,ir],brightness:A(),borderColor:[e],borderRadius:["none","","full",sr,ir],borderSpacing:T(),borderWidth:_(),contrast:A(),grayscale:I(),hueRotate:A(),invert:I(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[rr,Zn],inset:E(),margin:E(),opacity:A(),padding:T(),saturate:A(),scale:A(),sepia:I(),skew:A(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",ir]}],container:["container"],columns:[{columns:[sr]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ir]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nr,ir]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ir]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",nr,ir]}],"grid-cols":[{"grid-cols":[hr]}],"col-start-end":[{col:["auto",{span:["full",nr,ir]},ir]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[hr]}],"row-start-end":[{row:["auto",{span:[nr,ir]},ir]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ir]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ir]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ir,t]}],"min-w":[{"min-w":[ir,t,"min","max","fit"]}],"max-w":[{"max-w":[ir,t,"none","full","min","max","fit","prose",{screen:[sr]},sr]}],h:[{h:[ir,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ir,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ir,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ir,t,"auto","min","max","fit"]}],"font-size":[{text:["base",sr,Zn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tr]}],"font-family":[{font:[hr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ir]}],"line-clamp":[{"line-clamp":["none",er,tr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xn,ir]}],"list-image":[{"list-image":["none",ir]}],"list-style-type":[{list:["none","disc","decimal",ir]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xn,Zn]}],"underline-offset":[{"underline-offset":["auto",Xn,ir]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ir]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ir]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",lr]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",or]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ur]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Xn,ir]}],"outline-w":[{outline:[Xn,Zn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Xn,Zn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",sr,dr]}],"shadow-color":[{shadow:[hr]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",sr,ir]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ir]}],duration:[{duration:A()}],ease:[{ease:["linear","in","out","in-out",ir]}],delay:[{delay:A()}],animate:[{animate:["none","spin","ping","pulse","bounce",ir]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[nr,ir]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ir]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ir]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ir]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Xn,Zn,tr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function br(...e){return vr(kn(e))}const wr=Tn("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xr=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?vn:"button";return u.jsx(a,{className:br(wr({variant:t,size:n,className:e})),ref:s,...i})});function Sr(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}function kr(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>m.createContext(e));return function(n){const r=n?.[e]||t;return m.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=m.createContext(r),s=n.length;n=[...n,r];const a=t=>{const{scope:n,children:r,...a}=t,o=n?.[e]?.[s]||i,l=m.useMemo(()=>a,Object.values(a));return u.jsx(o.Provider,{value:l,children:r})};return a.displayName=t+"Provider",[a,function(n,a){const o=a?.[e]?.[s]||i,l=m.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Cr(r,...t)]}function Cr(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}xr.displayName="Button";var Er=globalThis?.document?m.useLayoutEffect:()=>{},Tr=y[" useId ".trim().toString()]||(()=>{}),_r=0;function Nr(e){const[t,n]=m.useState(Tr());return Er(()=>{n(e=>e??String(_r++))},[e]),e||(t?`radix-${t}`:"")}var Ir=y[" useInsertionEffect ".trim().toString()]||Er;function Ar({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,s,a]=function({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),i=m.useRef(n),s=m.useRef(t);return Ir(()=>{s.current=t},[t]),m.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:i;{const t=m.useRef(void 0!==e);m.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=m.useCallback(t=>{if(o){const n=function(e){return"function"==typeof e}(t)?t(e):t;n!==e&&a.current?.(n)}else s(t)},[o,e,s,a]);return[l,c]}var Pr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=yn(`Primitive.${t}`),r=m.forwardRef((e,r)=>{const{asChild:i,...s}=e,a=i?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),u.jsx(a,{...s,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Rr(e,t){e&&D.flushSync(()=>e.dispatchEvent(t))}function jr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...e)=>t.current?.(...e),[])}var Mr,Dr="dismissableLayer.update",Lr="dismissableLayer.pointerDownOutside",Or="dismissableLayer.focusOutside",Fr=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ur=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=e,c=m.useContext(Fr),[d,h]=m.useState(null),f=d?.ownerDocument??globalThis?.document,[,p]=m.useState({}),g=gn(t,e=>h(e)),y=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=d?y.indexOf(d):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,S=w>=b,k=function(e,t=globalThis?.document){const n=jr(e),r=m.useRef(!1),i=m.useRef(()=>{});return m.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Vr(Lr,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));S&&!n&&(i?.(e),a?.(e),e.defaultPrevented||o?.())},f),C=function(e,t=globalThis?.document){const n=jr(e),r=m.useRef(!1);return m.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Vr(Or,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(s?.(e),a?.(e),e.defaultPrevented||o?.())},f);return function(e,t=globalThis?.document){const n=jr(e);m.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{w===c.layers.size-1&&(r?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},f),m.useEffect(()=>{if(d)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(Mr=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),Br(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=Mr)}},[d,f,n,c]),m.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),Br())},[d,c]),m.useEffect(()=>{const e=()=>p({});return document.addEventListener(Dr,e),()=>document.removeEventListener(Dr,e)},[]),u.jsx(Pr.div,{...l,ref:g,style:{pointerEvents:x?S?"auto":"none":void 0,...e.style},onFocusCapture:Sr(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Sr(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Sr(e.onPointerDownCapture,k.onPointerDownCapture)})});Ur.displayName="DismissableLayer";var zr=m.forwardRef((e,t)=>{const n=m.useContext(Fr),r=m.useRef(null),i=gn(t,r);return m.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),u.jsx(Pr.div,{...e,ref:i})});function Br(){const e=new CustomEvent(Dr);document.dispatchEvent(e)}function Vr(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Rr(i,s):i.dispatchEvent(s)}zr.displayName="DismissableLayerBranch";var $r=Ur,Hr=zr,qr="focusScope.autoFocusOnMount",Kr="focusScope.autoFocusOnUnmount",Wr={bubbles:!1,cancelable:!0},Gr=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=m.useState(null),c=jr(i),d=jr(s),h=m.useRef(null),f=gn(t,e=>l(e)),p=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?h.current=t:Xr(h.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||Xr(h.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Xr(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,o,p.paused]),m.useEffect(()=>{if(o){Zr.add(p);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(qr,Wr);o.addEventListener(qr,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Xr(r,{select:t}),document.activeElement!==n)return}((e=Yr(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Xr(o))}return()=>{o.removeEventListener(qr,c),setTimeout(()=>{const e=new CustomEvent(Kr,Wr);o.addEventListener(Kr,d),o.dispatchEvent(e),e.defaultPrevented||Xr(t??document.body,{select:!0}),o.removeEventListener(Kr,d),Zr.remove(p)},0)}}var e},[o,c,d,p]);const g=m.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[r,s]=function(e){const t=Yr(e),n=Jr(t,e),r=Jr(t.reverse(),e);return[n,r]}(t);r&&s?e.shiftKey||i!==s?e.shiftKey&&i===r&&(e.preventDefault(),n&&Xr(s,{select:!0})):(e.preventDefault(),n&&Xr(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return u.jsx(Pr.div,{tabIndex:-1,...a,ref:f,onKeyDown:g})});function Yr(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jr(e,t){for(const n of e)if(!Qr(n,{upTo:t}))return n}function Qr(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Xr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Gr.displayName="FocusScope";var Zr=function(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=ei(e,t),e.unshift(t)},remove(t){e=ei(e,t),e[0]?.resume()}}}();function ei(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var ti=m.forwardRef((e,t)=>{const{container:n,...r}=e,[i,s]=m.useState(!1);Er(()=>s(!0),[]);const a=n||i&&globalThis?.document?.body;return a?L.createPortal(u.jsx(Pr.div,{...r,ref:t}),a):null});ti.displayName="Portal";var ni=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=m.useState(),r=m.useRef(null),i=m.useRef(e),s=m.useRef("none"),a=e?"mounted":"unmounted",[o,l]=function(e,t){return m.useReducer((e,n)=>t[e][n]??e,e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const e=ri(r.current);s.current="mounted"===o?e:"none"},[o]),Er(()=>{const t=r.current,n=i.current;if(n!==e){const r=s.current,a=ri(t);if(e)l("MOUNT");else if("none"===a||"none"===t?.display)l("UNMOUNT");else{l(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),Er(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,a=s=>{const a=ri(r.current).includes(s.animationName);if(s.target===t&&a&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(s.current=ri(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:m.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):m.Children.only(n),s=gn(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;if(n)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?m.cloneElement(i,{ref:s}):null};function ri(e){return e?.animationName||"none"}ni.displayName="Presence";var ii=0;function si(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ai=function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ai.apply(this,arguments)};function oi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var li="right-scroll-bar-position",ci="width-before-scroll-bar";function ui(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var di="undefined"!=typeof window?m.useLayoutEffect:m.useEffect,hi=new WeakMap;function fi(e,t){var n,r,i,s=(n=null,r=function(t){return e.forEach(function(e){return ui(e,t)})},(i=m.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return di(function(){var t=hi.get(s);if(t){var n=new Set(t),r=new Set(e),i=s.current;n.forEach(function(e){r.has(e)||ui(e,null)}),r.forEach(function(e){n.has(e)||ui(e,i)})}hi.set(s,e)},[e]),s}function pi(e){return e}var mi=function(e){var t=e.sideCar,n=oi(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,ai({},n))};mi.isSideCarExport=!0;var gi=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=pi);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var s=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(s)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=ai({async:!0,ssr:!1},e),t}(),yi=function(){},vi=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:yi,onWheelCapture:yi,onTouchMoveCapture:yi}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noRelative,p=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,b=void 0===v?"div":v,w=e.gapMode,x=oi(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,k=fi([n,t]),C=ai(ai({},x),i);return m.createElement(m.Fragment,null,u&&m.createElement(S,{sideCar:gi,removeScrollBar:c,shards:d,noRelative:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:w}),a?m.cloneElement(m.Children.only(o),ai(ai({},C),{ref:k})):m.createElement(b,ai({},C,{className:l,ref:k}),o))});vi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},vi.classNames={fullWidth:ci,zeroRight:li};function bi(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var wi=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=bi())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xi=function(){var e,t=(e=wi(),function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Si={left:0,top:0,right:0,gap:0},ki=function(e){return parseInt(e||"",10)||0},Ci=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Si;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[ki(n),ki(r),ki(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ei=xi(),Ti="data-scroll-locked",_i=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(Ti,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(li," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(ci," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(li," .").concat(li," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(ci," .").concat(ci," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Ti,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},Ni=function(){var e=parseInt(document.body.getAttribute(Ti)||"0",10);return isFinite(e)?e:0},Ii=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;m.useEffect(function(){return document.body.setAttribute(Ti,(Ni()+1).toString()),function(){var e=Ni()-1;e<=0?document.body.removeAttribute(Ti):document.body.setAttribute(Ti,e.toString())}},[]);var s=m.useMemo(function(){return Ci(i)},[i]);return m.createElement(Ei,{styles:_i(s,!t,i,n?"":"!important")})},Ai=!1;if("undefined"!=typeof window)try{var Pi=Object.defineProperty({},"passive",{get:function(){return Ai=!0,!0}});window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch(xM){Ai=!1}var Ri=!!Ai&&{passive:!1},ji=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Mi=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Di(e,r)){var i=Li(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Di=function(e,t){return"v"===e?function(e){return ji(e,"overflowY")}(t):function(e){return ji(e,"overflowX")}(t)},Li=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Oi=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Fi=function(e){return[e.deltaX,e.deltaY]},Ui=function(e){return e&&"current"in e?e.current:e},zi=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Bi=0,Vi=[];function $i(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Hi=(qi=function(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),i=m.useState(Bi++)[0],s=m.useState(xi)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Ui),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=m.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var i,s=Oi(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=Mi(d,u);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=Mi(d,u)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var f=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,o=t.contains(a),l=!1,c=s>0,u=0,d=0;do{if(!a)break;var h=Li(e,a),f=h[0],p=h[1]-h[2]-i*f;(f||p)&&Di(e,a)&&(u+=p,d+=f);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!o&&a!==document.body||o&&(t.contains(a)||t===a));return(c&&Math.abs(u)<1||!c&&Math.abs(d)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),l=m.useCallback(function(e){var n=e;if(Vi.length&&Vi[Vi.length-1]===s){var r="deltaY"in n?Fi(n):Oi(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(a.current.shards||[]).map(Ui).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!a.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=m.useCallback(function(e,n,r,i){var s={name:e,delta:n,target:r,should:i,shadowParent:$i(r)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=m.useCallback(function(e){n.current=Oi(e),r.current=void 0},[]),d=m.useCallback(function(t){c(t.type,Fi(t),t.target,o(t,e.lockRef.current))},[]),h=m.useCallback(function(t){c(t.type,Oi(t),t.target,o(t,e.lockRef.current))},[]);m.useEffect(function(){return Vi.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ri),document.addEventListener("touchmove",l,Ri),document.addEventListener("touchstart",u,Ri),function(){Vi=Vi.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,Ri),document.removeEventListener("touchmove",l,Ri),document.removeEventListener("touchstart",u,Ri)}},[]);var f=e.removeScrollBar,p=e.inert;return m.createElement(m.Fragment,null,p?m.createElement(s,{styles:zi(i)}):null,f?m.createElement(Ii,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},gi.useMedium(qi),mi);var qi,Ki=m.forwardRef(function(e,t){return m.createElement(vi,ai({},e,{ref:t,sideCar:Hi}))});Ki.classNames=vi.classNames;var Wi=new WeakMap,Gi=new WeakMap,Yi={},Ji=0,Qi=function(e){return e&&(e.host||Qi(e.parentNode))},Xi=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Qi(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Yi[n]||(Yi[n]=new WeakMap);var s=Yi[n],a=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(Wi.get(e)||0)+1,c=(s.get(e)||0)+1;Wi.set(e,l),s.set(e,c),a.push(e),1===l&&i&&Gi.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(wM){}})};return u(t),o.clear(),Ji++,function(){a.forEach(function(e){var t=Wi.get(e)-1,i=s.get(e)-1;Wi.set(e,t),s.set(e,i),t||(Gi.has(e)||e.removeAttribute(r),Gi.delete(e)),i||e.removeAttribute(n)}),--Ji||(Wi=new WeakMap,Wi=new WeakMap,Gi=new WeakMap,Yi={})}},Zi=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Xi(r,i,n,"aria-hidden")):function(){return null}},es="Dialog",[ts,ns]=kr(es),[rs,is]=ts(es),ss=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=m.useRef(null),l=m.useRef(null),[c,d]=Ar({prop:r,defaultProp:i??!1,onChange:s,caller:es});return u.jsx(rs,{scope:t,triggerRef:o,contentRef:l,contentId:Nr(),titleId:Nr(),descriptionId:Nr(),open:c,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(e=>!e),[d]),modal:a,children:n})};ss.displayName=es;var as="DialogTrigger";m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=is(as,n),s=gn(t,i.triggerRef);return u.jsx(Pr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ts(i.open),...r,ref:s,onClick:Sr(e.onClick,i.onOpenToggle)})}).displayName=as;var os="DialogPortal",[ls,cs]=ts(os,{forceMount:void 0}),us=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=is(os,t);return u.jsx(ls,{scope:t,forceMount:n,children:m.Children.map(r,e=>u.jsx(ni,{present:n||s.open,children:u.jsx(ti,{asChild:!0,container:i,children:e})}))})};us.displayName=os;var ds="DialogOverlay",hs=m.forwardRef((e,t)=>{const n=cs(ds,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=is(ds,e.__scopeDialog);return s.modal?u.jsx(ni,{present:r||s.open,children:u.jsx(ps,{...i,ref:t})}):null});hs.displayName=ds;var fs=yn("DialogOverlay.RemoveScroll"),ps=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=is(ds,n);return u.jsx(Ki,{as:fs,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(Pr.div,{"data-state":Ts(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ms="DialogContent",gs=m.forwardRef((e,t)=>{const n=cs(ms,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=is(ms,e.__scopeDialog);return u.jsx(ni,{present:r||s.open,children:s.modal?u.jsx(ys,{...i,ref:t}):u.jsx(vs,{...i,ref:t})})});gs.displayName=ms;var ys=m.forwardRef((e,t)=>{const n=is(ms,e.__scopeDialog),r=m.useRef(null),i=gn(t,n.contentRef,r);return m.useEffect(()=>{const e=r.current;if(e)return Zi(e)},[]),u.jsx(bs,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Sr(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Sr(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Sr(e.onFocusOutside,e=>e.preventDefault())})}),vs=m.forwardRef((e,t)=>{const n=is(ms,e.__scopeDialog),r=m.useRef(!1),i=m.useRef(!1);return u.jsx(bs,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target,a=n.triggerRef.current?.contains(s);a&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),bs=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=is(ms,n),l=m.useRef(null),c=gn(t,l);return m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??si()),document.body.insertAdjacentElement("beforeend",e[1]??si()),ii++,()=>{1===ii&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ii--}},[]),u.jsxs(u.Fragment,{children:[u.jsx(Gr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:u.jsx(Ur,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Ts(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(As,{titleId:o.titleId}),u.jsx(Ps,{contentRef:l,descriptionId:o.descriptionId})]})]})}),ws="DialogTitle",xs=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=is(ws,n);return u.jsx(Pr.h2,{id:i.titleId,...r,ref:t})});xs.displayName=ws;var Ss="DialogDescription",ks=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=is(Ss,n);return u.jsx(Pr.p,{id:i.descriptionId,...r,ref:t})});ks.displayName=Ss;var Cs="DialogClose",Es=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=is(Cs,n);return u.jsx(Pr.button,{type:"button",...r,ref:t,onClick:Sr(e.onClick,()=>i.onOpenChange(!1))})});function Ts(e){return e?"open":"closed"}Es.displayName=Cs;var _s="DialogTitleWarning",[Ns,Is]=function(e,t){const n=m.createContext(t),r=e=>{const{children:t,...r}=e,i=m.useMemo(()=>r,Object.values(r));return u.jsx(n.Provider,{value:i,children:t})};return r.displayName=e+"Provider",[r,function(r){const i=m.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(_s,{contentName:ms,titleName:ws,docsSlug:"dialog"}),As=({titleId:e})=>{const t=Is(_s),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},Ps=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Is("DialogDescriptionWarning").contentName}}.`;return m.useEffect(()=>{const n=e.current?.getAttribute("aria-describedby");if(t&&n){document.getElementById(t)}},[n,e,t]),null},Rs=hs,js=gs,Ms=xs,Ds=ks,Ls=Es;const Os=ss,Fs=us,Us=m.forwardRef(({className:e,...t},n)=>u.jsx(Rs,{ref:n,className:br("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Us.displayName=Rs.displayName;const zs=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(Fs,{children:[u.jsx(Us,{}),u.jsxs(js,{ref:r,className:br("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",e),...n,children:[t,u.jsx(Ls,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:u.jsx("span",{className:"sr-only",children:"Close"})})]})]}));zs.displayName=js.displayName;const Bs=({className:e,...t})=>u.jsx("div",{className:br("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Bs.displayName="DialogHeader";const Vs=({className:e,...t})=>u.jsx("div",{className:br("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vs.displayName="DialogFooter";const $s=m.forwardRef(({className:e,...t},n)=>u.jsx(Ms,{ref:n,className:br("text-lg font-semibold leading-none tracking-tight",e),...t}));$s.displayName=Ms.displayName;const Hs=m.forwardRef(({className:e,...t},n)=>u.jsx(Ds,{ref:n,className:br("text-sm text-muted-foreground",e),...t}));Hs.displayName=Ds.displayName;var qs={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ws={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ks(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Gs;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ys=function(e){return function(e){const t=Ks(e);return Ws.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Js=function(e){try{return Ws.decodeString(e,!0)}catch(wM){}return null};function Qs(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Xs(n)&&(e[n]=Qs(e[n],t[n]));return e}function Xs(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=()=>{try{return Zs().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const e=qs.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(wM){return}const t=e&&Js(e[1]);return t&&JSON.parse(t)})()}catch(wM){return}},ta=e=>{var t,n;return null===(n=null===(t=ea())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},na=e=>{const t=ta(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ra=()=>{var e;return null===(e=ea())||void 0===e?void 0:e.config},ia=e=>{var t;return null===(t=ea())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class sa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ys(JSON.stringify({alg:"none",type:"JWT"})),Ys(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function la(){var e;const t=null===(e=ea())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(wM){return!1}}function ca(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function ua(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function da(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ha(){const e=oa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function fa(){try{return"object"==typeof indexedDB}catch(wM){return!1}}class pa extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(ga,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new pa(r,a,n)}}const ga=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function va(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ba(n)&&ba(s)){if(!va(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ba(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function xa(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Sa(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ka(e,t){const n=new Ca(e,t);return n.subscribe.bind(n)}class Ca{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ea),void 0===r.error&&(r.error=Ea),void 0===r.complete&&(r.complete=Ea);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(wM){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(wM){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ea(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(e){return e&&e._delegate?e._delegate:e}class _a{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new sa;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(wM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(wM){if(r)return null;throw wM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch(wM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(wM){}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Na?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}};class Aa{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ia(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=[];var Ra,ja;(ja=Ra||(Ra={}))[ja.DEBUG=0]="DEBUG",ja[ja.VERBOSE=1]="VERBOSE",ja[ja.INFO=2]="INFO",ja[ja.WARN=3]="WARN",ja[ja.ERROR=4]="ERROR",ja[ja.SILENT=5]="SILENT";const Ma={debug:Ra.DEBUG,verbose:Ra.VERBOSE,info:Ra.INFO,warn:Ra.WARN,error:Ra.ERROR,silent:Ra.SILENT},Da=Ra.INFO,La={[Ra.DEBUG]:"log",[Ra.VERBOSE]:"log",[Ra.INFO]:"info",[Ra.WARN]:"warn",[Ra.ERROR]:"error"},Oa=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!La[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fa{constructor(e){this.name=e,this._logLevel=Da,this._logHandler=Oa,this._userLogHandler=null,Pa.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ra))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ma[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ra.DEBUG,...e),this._logHandler(this,Ra.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ra.VERBOSE,...e),this._logHandler(this,Ra.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ra.INFO,...e),this._logHandler(this,Ra.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ra.WARN,...e),this._logHandler(this,Ra.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ra.ERROR,...e),this._logHandler(this,Ra.ERROR,...e)}}let Ua,za;const Ba=new WeakMap,Va=new WeakMap,$a=new WeakMap,Ha=new WeakMap,qa=new WeakMap;let Ka={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Va.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$a.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ya(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Wa(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(za||(za=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ja(this),t),Ya(Ba.get(this))}:function(...t){return Ya(e.apply(Ja(this),t))}:function(t,...n){const r=e.call(Ja(this),t,...n);return $a.set(r,t.sort?t.sort():[t]),Ya(r)}}function Ga(e){return"function"==typeof e?Wa(e):(e instanceof IDBTransaction&&function(e){if(Va.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Va.set(e,t)}(e),t=e,(Ua||(Ua=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ka):e);var t}function Ya(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ya(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Ba.set(t,e)}).catch(()=>{}),qa.set(t,e),t}(e);if(Ha.has(e))return Ha.get(e);const t=Ga(e);return t!==e&&(Ha.set(e,t),qa.set(t,e)),t}const Ja=e=>qa.get(e);const Qa=["get","getKey","getAll","getAllKeys","count"],Xa=["put","add","delete","clear"],Za=new Map;function eo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Za.get(t))return Za.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Xa.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Qa.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return Za.set(t,s),s}Ka=(e=>({...e,get:(t,n,r)=>eo(t,n)||e.get(t,n,r),has:(t,n)=>!!eo(t,n)||e.has(t,n)}))(Ka);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class to{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const no="@firebase/app",ro="0.10.13",io=new Fa("@firebase/app"),so="@firebase/app-compat",ao="@firebase/analytics-compat",oo="@firebase/analytics",lo="@firebase/app-check-compat",co="@firebase/app-check",uo="@firebase/auth",ho="@firebase/auth-compat",fo="@firebase/database",po="@firebase/data-connect",mo="@firebase/database-compat",go="@firebase/functions",yo="@firebase/functions-compat",vo="@firebase/installations",bo="@firebase/installations-compat",wo="@firebase/messaging",xo="@firebase/messaging-compat",So="@firebase/performance",ko="@firebase/performance-compat",Co="@firebase/remote-config",Eo="@firebase/remote-config-compat",To="@firebase/storage",_o="@firebase/storage-compat",No="@firebase/firestore",Io="@firebase/vertexai-preview",Ao="@firebase/firestore-compat",Po="firebase",Ro="[DEFAULT]",jo={[no]:"fire-core",[so]:"fire-core-compat",[oo]:"fire-analytics",[ao]:"fire-analytics-compat",[co]:"fire-app-check",[lo]:"fire-app-check-compat",[uo]:"fire-auth",[ho]:"fire-auth-compat",[fo]:"fire-rtdb",[po]:"fire-data-connect",[mo]:"fire-rtdb-compat",[go]:"fire-fn",[yo]:"fire-fn-compat",[vo]:"fire-iid",[bo]:"fire-iid-compat",[wo]:"fire-fcm",[xo]:"fire-fcm-compat",[So]:"fire-perf",[ko]:"fire-perf-compat",[Co]:"fire-rc",[Eo]:"fire-rc-compat",[To]:"fire-gcs",[_o]:"fire-gcs-compat",[No]:"fire-fst",[Ao]:"fire-fst-compat",[Io]:"fire-vertex","fire-js":"fire-js",[Po]:"fire-js-all"},Mo=new Map,Do=new Map,Lo=new Map;function Oo(e,t){try{e.container.addComponent(t)}catch(wM){io.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,wM)}}function Fo(e,t){e.container.addOrOverwriteComponent(t)}function Uo(e){const t=e.name;if(Lo.has(t))return io.debug(`There were multiple attempts to register component ${t}.`),!1;Lo.set(t,e);for(const n of Mo.values())Oo(n,e);for(const n of Do.values())Oo(n,e);return!0}function zo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Bo(e){return void 0!==e.options}function Vo(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $o=new ma("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ho=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $o.create("app-deleted",{appName:this._name})}};
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Ho{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jo(no,ro,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Yo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $o.create("server-app-deleted")}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="10.14.1";function Wo(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Ro,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw $o.create("bad-app-name",{appName:String(i)});if(n||(n=ra()),!n)throw $o.create("no-options");const s=Mo.get(i);if(s){if(va(n,s.options)&&va(r,s.config))return s;throw $o.create("duplicate-app",{appName:i})}const a=new Aa(i);for(const l of Lo.values())a.addComponent(l);const o=new Ho(n,r,a);return Mo.set(i,o),o}function Go(e=Ro){const t=Mo.get(e);if(!t&&e===Ro&&ra())return Wo();if(!t)throw $o.create("no-app",{appName:e});return t}async function Yo(e){let t=!1;const n=e.name;if(Mo.has(n))t=!0,Mo.delete(n);else if(Do.has(n)){e.decRefCount()<=0&&(Do.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Jo(e,t,n){var r;let i=null!==(r=jo[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void io.warn(e.join(" "))}Uo(new _a(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function Qo(e,t){if(null!==e&&"function"!=typeof e)throw $o.create("invalid-log-argument");!function(e,t){for(const n of Pa){let r=null;t&&t.level&&(r=Ma[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Ra[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function Xo(e){var t;t=e,Pa.forEach(e=>{e.setLogLevel(t)})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="firebase-heartbeat-store";let el=null;function tl(){return el||(el=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=Ya(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ya(a.result),e.oldVersion,e.newVersion,Ya(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zo)}catch(wM){}}}).catch(e=>{throw $o.create("idb-open",{originalErrorMessage:e.message})})),el}async function nl(e,t){try{const n=(await tl()).transaction(Zo,"readwrite"),r=n.objectStore(Zo);await r.put(t,rl(e)),await n.done}catch(wM){if(wM instanceof pa)io.warn(wM.message);else{const t=$o.create("idb-set",{originalErrorMessage:null==wM?void 0:wM.message});io.warn(t.message)}}}function rl(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new al(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sl();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(wM){io.warn(wM)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=sl(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ol(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ol(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ys(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(wM){return io.warn(wM),""}}}function sl(){return(new Date).toISOString().substring(0,10)}class al{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fa()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await tl()).transaction(Zo),n=await t.objectStore(Zo).get(rl(e));return await t.done,n}catch(wM){if(wM instanceof pa)io.warn(wM.message);else{const t=$o.create("idb-get",{originalErrorMessage:null==wM?void 0:wM.message});io.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return nl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ol(e){return Ys(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ll;ll="",Uo(new _a("platform-logger",e=>new to(e),"PRIVATE")),Uo(new _a("heartbeat",e=>new il(e),"PRIVATE")),Jo(no,ro,ll),Jo(no,ro,"esm2017"),Jo("fire-js","");const cl=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:pa,SDK_VERSION:Ko,_DEFAULT_ENTRY_NAME:Ro,_addComponent:Oo,_addOrOverwriteComponent:Fo,_apps:Mo,_clearComponents:function(){Lo.clear()},_components:Lo,_getProvider:zo,_isFirebaseApp:Bo,_isFirebaseServerApp:Vo,_registerComponent:Uo,_removeServiceInstance:function(e,t,n=Ro){zo(e,t).clearInstance(n)},_serverApps:Do,deleteApp:Yo,getApp:Go,getApps:function(){return Array.from(Mo.values())},initializeApp:Wo,initializeServerApp:function(e,t){if(("undefined"!=typeof window||ca())&&!ca())throw $o.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Bo(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw $o.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var s;const a=Do.get(i);if(a)return a.incRefCount(t.releaseOnDeref),a;const o=new Aa(i);for(const c of Lo.values())o.addComponent(c);const l=new qo(n,t,i,o);return Do.set(i,l),l},onLog:Qo,registerVersion:Jo,setLogLevel:Xo},Symbol.toStringTag,{value:"Module"}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this._delegate=e,this.firebase=t,Oo(e,new _a("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Yo(this._delegate)))}_getService(e,t=Ro){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ro){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Oo(this._delegate,e)}_addOrOverwriteComponent(e){Fo(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new ma("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const hl=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(r,i={}){const s=Wo(r,i);if(ya(t,s.name))return t[s.name];const a=new e(s,n);return t[s.name]=a,a},app:r,registerVersion:Jo,setLogLevel:Xo,onLog:Qo,apps:null,SDK_VERSION:Ko,INTERNAL:{registerComponent:function(t){const i=t.name,s=i.replace("-compat","");if(Uo(t)&&"PUBLIC"===t.type){const a=(e=r())=>{if("function"!=typeof e[s])throw dl.create("invalid-app-argument",{appName:i});return e[s]()};void 0!==t.serviceProps&&Qs(a,t.serviceProps),n[s]=a,e.prototype[s]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:cl}};function r(e){if(!ya(t,e=e||Ro))throw dl.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),r.App=e,n}(ul);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Qs(t,e)},createSubscribe:ka,ErrorFactory:ma,deepExtend:Qs}),t}(),fl=new Fa("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
try{const e=Zs();if(void 0!==e.firebase){fl.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&fl.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(SM){}const pl=hl;!
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){Jo("@firebase/app-compat","0.2.43",e)}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
pl.registerVersion("firebase","10.14.1","app-compat");const ml="facebook.com",gl="github.com",yl="google.com",vl="password",bl="twitter.com",wl="EMAIL_SIGNIN",xl="PASSWORD_RESET",Sl="RECOVER_EMAIL",kl="REVERT_SECOND_FACTOR_ADDITION",Cl="VERIFY_AND_CHANGE_EMAIL",El="VERIFY_EMAIL";function Tl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _l=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Nl=Tl,Il=new ma("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Al=new Fa("@firebase/auth");function Pl(e,...t){Al.logLevel<=Ra.ERROR&&Al.error(`Auth (${Ko}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(e,...t){throw Ol(e,...t)}function jl(e,...t){return Ol(e,...t)}function Ml(e,t,n){const r=Object.assign(Object.assign({},Nl()),{[t]:n});return new ma("auth","Firebase",r).create(t,{appName:e.name})}function Dl(e){return Ml(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ll(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rl(e,"argument-error"),Ml(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ol(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Il.create(e,...t)}function Fl(e,t,...n){if(!e)throw Ol(t,...n)}function Ul(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Pl(t),new Error(t)}function zl(e,t){e||Ul(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vl(){return"http:"===$l()||"https:"===$l()}function $l(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hl{constructor(e,t){this.shortDelay=e,this.longDelay=t,zl(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oa())||da()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vl()||ua()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(e,t){zl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Gl=new Hl(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Jl(e,t,n,r,i={}){return Ql(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=wa(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Kl.fetch()(Zl(e,e.config.apiHost,n,a),l)})}async function Ql(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Wl),t);try{const t=new tc(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw nc(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw nc(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw nc(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw nc(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ml(e,o,a);Rl(e,o)}}catch(wM){if(wM instanceof pa)throw wM;Rl(e,"network-request-failed",{message:String(wM)})}}async function Xl(e,t,n,r,i={}){const s=await Jl(e,t,n,r,i);return"mfaPendingCredential"in s&&Rl(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Zl(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?ql(e.config,i):`${e.config.apiScheme}://${i}`}function ec(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tc{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(jl(this.auth,"network-request-failed")),Gl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nc(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jl(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(e){return void 0!==e&&void 0!==e.getResponse}function ic(e){return void 0!==e&&void 0!==e.enterprise}class sc{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ec(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(e,t){return Jl(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(wM){}}function lc(e){return 1e3*Number(e)}function cc(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Pl("JWT malformed, contained fewer than 3 sections"),null;try{const e=Js(n);return e?JSON.parse(e):(Pl("Failed to decode base64 JWT payload"),null)}catch(wM){return Pl("Caught error parsing JWT payload as JSON",null==wM?void 0:wM.toString()),null}}function uc(e){const t=cc(e);return Fl(t,"internal-error"),Fl(void 0!==t.exp,"internal-error"),Fl(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(e,t,n=!1){if(n)return t;try{return await t}catch(wM){throw wM instanceof pa&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(wM)&&e.auth.currentUser===e&&await e.auth.signOut(),wM}}class hc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(wM){return void("auth/network-request-failed"===(null==wM?void 0:wM.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dc(e,ac(n,{idToken:r}));Fl(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?mc(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function mc(e){return e.map(e=>{var{providerId:t}=e,n=oi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fl(e.idToken,"internal-error"),Fl(void 0!==e.idToken,"internal-error"),Fl(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):uc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fl(0!==e.length,"internal-error");const t=uc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Fl(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ql(e,{},async()=>{const n=wa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Zl(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Kl.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new gc;return n&&(Fl("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Fl("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Fl("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return Ul("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(e,t){Fl("string"==typeof e||void 0===e,"internal-error",{appName:t})}class vc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=oi(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dc(this,this.stsTokenManager.getToken(this.auth,e));return Fl(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Ta(e),r=await n.getIdToken(t),i=cc(r);Fl(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:oc(lc(i.auth_time)),issuedAtTime:oc(lc(i.iat)),expirationTime:oc(lc(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ta(e);await pc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Fl(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fl(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vo(this.auth.app))return Promise.reject(Dl(this.auth));const e=await this.getIdToken();return await dc(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Jl(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:S}=t;Fl(v&&S,e,"internal-error");const k=gc.fromJSON(this.name,S);Fl("string"==typeof v,e,"internal-error"),yc(u,e.name),yc(d,e.name),Fl("boolean"==typeof b,e,"internal-error"),Fl("boolean"==typeof w,e,"internal-error"),yc(h,e.name),yc(f,e.name),yc(p,e.name),yc(m,e.name),yc(g,e.name),yc(y,e.name);const C=new vc({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(C.providerData=x.map(e=>Object.assign({},e))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new gc;r.updateFromServerResponse(t);const i=new vc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await pc(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Fl(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?mc(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new gc;a.updateFromIdToken(n);const o=new vc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new fc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map;function wc(e){zl(e instanceof Function,"Expected a class definition");let t=bc.get(e);return t?(zl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bc.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xc.type="NONE";const Sc=xc;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(e,t,n){return`firebase:${e}:${t}:${n}`}class Cc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kc(this.userKey,r.apiKey,i),this.fullPersistenceKey=kc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Cc(wc(Sc),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||wc(Sc);const s=kc(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){const n=vc._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(SM){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(SM){}})),new Cc(i,e,n)):new Cc(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ic(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Tc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pc(t))return"Blackberry";if(Rc(t))return"Webos";if(_c(t))return"Safari";if((t.includes("chrome/")||Nc(t))&&!t.includes("edge/"))return"Chrome";if(Ac(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Tc(e=oa()){return/firefox\//i.test(e)}function _c(e=oa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Nc(e=oa()){return/crios\//i.test(e)}function Ic(e=oa()){return/iemobile/i.test(e)}function Ac(e=oa()){return/android/i.test(e)}function Pc(e=oa()){return/blackberry/i.test(e)}function Rc(e=oa()){return/webos/i.test(e)}function jc(e=oa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mc(e=oa()){return jc(e)||Ac(e)||Rc(e)||Pc(e)||/windows phone/i.test(e)||Ic(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(e,t=[]){let n;switch(e){case"Browser":n=Ec(oa());break;case"Worker":n=`${Ec(oa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ko}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(wM){r(wM)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(wM){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==wM?void 0:wM.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zc(this),this.idTokenSubscription=new zc(this),this.beforeStateQueue=new Lc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Il,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wc(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Cc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(wM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ac(this,{idToken:e}),n=await vc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(xM){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vo(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(wM){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(wM))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fl(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(wM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(wM){if("auth/network-request-failed"!==(null==wM?void 0:wM.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vo(this.app))return Promise.reject(Dl(this));const t=e?Ta(e):null;return t&&Fl(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fl(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vo(this.app)?Promise.reject(Dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vo(this.app)?Promise.reject(Dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wc(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Jl(e,"GET","/v2/passwordPolicy",Yl(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Oc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ma("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jl(e,"POST","/v2/accounts:revokeToken",Yl(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wc(e)||this._popupRedirectResolver;Fl(t,this,"argument-error"),this.redirectPersistenceManager=await Cc.create(this,[wc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fl(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fl(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Al.logLevel<=Ra.WARN&&Al.warn(`Auth (${Ko}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Uc(e){return Ta(e)}class zc{constructor(e){this.auth=e,this.observer=null,this.addObserver=ka(e=>this.observer=e)}get next(){return Fl(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vc(e){return Bc.loadJS(e)}function $c(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Hc{constructor(e){this.type="recaptcha-enterprise",this.auth=Uc(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return Jl(e,"GET","/v2/recaptchaConfig",Yl(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new sc(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;ic(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&ic(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Bc.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Vc(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function qc(e,t,n,r=!1){const i=new Hc(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kc(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qc(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){const i=await qc(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(e,t,n){const r=Uc(e);Fl(r._canInitEmulator,r,"emulator-config-failed"),Fl(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Gc(t),{host:a,port:o}=function(e){const t=Gc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Yc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yc(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Gc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Jc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ul("not implemented")}_getIdTokenResponse(e){return Ul("not implemented")}_linkToIdToken(e,t){return Ul("not implemented")}_getReauthenticationResolver(e){return Ul("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(e,t){return Jl(e,"POST","/v1/accounts:resetPassword",Yl(e,t))}async function Xc(e,t){return Jl(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Zc(e,t){return Xl(e,"POST","/v1/accounts:signInWithPassword",Yl(e,t))}async function eu(e,t){return Jl(e,"POST","/v1/accounts:sendOobCode",Yl(e,t))}async function tu(e,t){return eu(e,t)}async function nu(e,t){return eu(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ru extends Jc{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ru(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ru(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Kc(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Zc);case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",Yl(e,t))}(e,{email:this._email,oobCode:this._password});default:Rl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Kc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xc);case"emailLink":return async function(e,t){return Xl(e,"POST","/v1/accounts:signInWithEmailLink",Yl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(e,t){return Xl(e,"POST","/v1/accounts:signInWithIdp",Yl(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Jc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new su(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=oi(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new su(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return iu(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,iu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,iu(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wa(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ou extends Jc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ou({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ou({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Xl(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Xl(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,t));if(n.temporaryProof)throw nc(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Xl(e,"POST","/v1/accounts:signInWithPhoneNumber",Yl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),au)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ou({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){var t,n,r,i,s,a;const o=xa(Sa(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Fl(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=xa(Sa(e)).link,n=t?xa(Sa(t)).deep_link_id:null,r=xa(Sa(e)).deep_link_id;return(r?xa(Sa(r)).link:null)||r||n||t||e}(e);try{return new lu(t)}catch(SM){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this.providerId=cu.PROVIDER_ID}static credential(e,t){return ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=lu.parseLink(t);return Fl(n,"argument-error"),ru._fromEmailAndCode(e,n.code,n.tenantId)}}cu.PROVIDER_ID="password",cu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",cu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class uu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends uu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hu extends du{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Fl("providerId"in t&&"signInMethod"in t,"argument-error"),su._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Fl(e.idToken||e.accessToken,"argument-error"),su._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return hu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:a}=e;if(!(n||r||t||i))return null;if(!a)return null;try{return new hu(a)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(wM){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends du{constructor(){super("facebook.com")}static credential(e){return su._fromParams({providerId:fu.PROVIDER_ID,signInMethod:fu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fu.credentialFromTaggedObject(e)}static credentialFromError(e){return fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return fu.credential(e.oauthAccessToken)}catch(SM){return null}}}fu.FACEBOOK_SIGN_IN_METHOD="facebook.com",fu.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pu extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return su._fromParams({providerId:pu.PROVIDER_ID,signInMethod:pu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pu.credentialFromTaggedObject(e)}static credentialFromError(e){return pu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return pu.credential(t,n)}catch(SM){return null}}}pu.GOOGLE_SIGN_IN_METHOD="google.com",pu.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mu extends du{constructor(){super("github.com")}static credential(e){return su._fromParams({providerId:mu.PROVIDER_ID,signInMethod:mu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mu.credentialFromTaggedObject(e)}static credentialFromError(e){return mu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return mu.credential(e.oauthAccessToken)}catch(SM){return null}}}mu.GITHUB_SIGN_IN_METHOD="github.com",mu.PROVIDER_ID="github.com";class gu extends Jc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return iu(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,iu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,iu(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new gu(n,i):null}static _create(e,t){return new gu(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends uu{constructor(e){Fl(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return yu.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return yu.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=gu.fromJSON(e);return Fl(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return gu._create(n,t)}catch(wM){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends du{constructor(){super("twitter.com")}static credential(e,t){return su._fromParams({providerId:vu.PROVIDER_ID,signInMethod:vu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vu.credentialFromTaggedObject(e)}static credentialFromError(e){return vu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return vu.credential(t,n)}catch(SM){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function bu(e,t){return Xl(e,"POST","/v1/accounts:signUp",Yl(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vu.TWITTER_SIGN_IN_METHOD="twitter.com",vu.PROVIDER_ID="twitter.com";class wu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await vc._fromIdTokenResponse(e,n,r),s=xu(n);return new wu({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=xu(n);return new wu({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function xu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Su extends pa{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Su.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Su(e,t,n,r)}}function ku(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Su._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(e,t){const n=Ta(e);await _u(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Cu(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Tu(e,t,n=!1){const r=await dc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wu._forOperation(e,"link",r)}async function _u(e,t,n){await pc(t);const r=!1===e?"provider-already-linked":"no-such-provider";Fl(Cu(t.providerData).has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(e,t,n=!1){const{auth:r}=e;if(Vo(r.app))return Promise.reject(Dl(r));const i="reauthenticate";try{const s=await dc(e,ku(r,i,t,e),n);Fl(s.idToken,r,"internal-error");const a=cc(s.idToken);Fl(a,r,"internal-error");const{sub:o}=a;return Fl(e.uid===o,r,"user-mismatch"),wu._forOperation(e,i,s)}catch(wM){throw"auth/user-not-found"===(null==wM?void 0:wM.code)&&Rl(r,"user-mismatch"),wM}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(e,t,n=!1){if(Vo(e.app))return Promise.reject(Dl(e));const r="signIn",i=await ku(e,r,t),s=await wu._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Au(e,t){return Iu(Uc(e),t)}async function Pu(e,t){const n=Ta(e);return await _u(!1,n,t.providerId),Tu(n,t)}async function Ru(e,t){return Nu(Ta(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ju(e,t){if(Vo(e.app))return Promise.reject(Dl(e));const n=Uc(e),r=await async function(e,t){return Xl(e,"POST","/v1/accounts:signInWithCustomToken",Yl(e,t))}(n,{token:t,returnSecureToken:!0}),i=await wu._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Du._fromServerResponse(e,t):"totpInfo"in t?Lu._fromServerResponse(e,t):Rl(e,"internal-error")}}class Du extends Mu{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Du(t)}}class Lu extends Mu{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Lu(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(e,t,n){var r;Fl((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Fl(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Fl(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Fl(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(e){const t=Uc(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Uu(e,t){await async function(e,t){return Jl(e,"POST","/v1/accounts:update",Yl(e,t))}(Ta(e),{oobCode:t})}async function zu(e,t){const n=Ta(e),r=await Qc(n,{oobCode:t}),i=r.requestType;switch(Fl(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fl(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fl(r.mfaInfo,n,"internal-error");default:Fl(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Mu._fromServerResponse(Uc(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Bu(e,t){const n={identifier:t,continueUri:Vl()?Bl():"http://localhost"},{signinMethods:r}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){return Jl(e,"POST","/v1/accounts:createAuthUri",Yl(e,t))}(Ta(e),n);return r||[]}async function Vu(e,t){const n=Ta(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ou(n.auth,r,t);const{email:i}=await async function(e,t){return eu(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function $u(e,t,n){const r=Ta(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ou(r.auth,i,n);const{email:s}=await async function(e,t){return eu(e,t)}(r.auth,i);s!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Hu(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Ta(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await dc(r,async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}async function qu(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await dc(e,async function(e,t){return Jl(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Wu extends Ku{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Gu extends Ku{constructor(e,t){super(e,"facebook.com",t)}}class Yu extends Wu{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Ju extends Ku{constructor(e,t){super(e,"google.com",t)}}class Qu extends Wu{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Xu(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=cc(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ku(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Gu(s,i);case"github.com":return new Yu(s,i);case"google.com":return new Ju(s,i);case"twitter.com":return new Qu(s,i,e.screenName||null);case"custom":case"anonymous":return new Ku(s,null);default:return new Ku(s,r,i)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zu{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Zu("enroll",e,t)}static _fromMfaPendingCredential(e){return new Zu("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Zu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Zu._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Uc(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>Mu._fromServerResponse(n,e));Fl(r.mfaPendingCredential,n,"internal-error");const s=Zu._fromMfaPendingCredential(r.mfaPendingCredential);return new ed(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const a=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await wu._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Fl(t.user,n,"internal-error"),wu._forOperation(t.user,t.operationType,a);default:Rl(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class td{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Mu._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new td(e)}async getSession(){return Zu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await dc(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await dc(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Jl(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Yl(r,i))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(wM){throw wM}var r,i}}const nd=new WeakMap;const rd="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch(SM){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends id{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ha()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sd.type="LOCAL";const ad=sd;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends id{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}od.type="SESSION";const ld=od;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new cd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ud(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cd.receivers=[];class dd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=ud("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fd(){return void 0!==hd().WorkerGlobalScope&&"function"==typeof hd().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pd="firebaseLocalStorageDb",md="firebaseLocalStorage",gd="fbase_key";class yd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(e,t){return e.transaction([md],t?"readwrite":"readonly").objectStore(md)}function bd(){const e=indexedDB.open(pd,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(md,{keyPath:gd})}catch(wM){n(wM)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(md)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(pd);return new yd(e).toPromise()}(),t(await bd()))})})}async function wd(e,t,n){const r=vd(e,!0).put({[gd]:t,value:n});return new yd(r).toPromise()}function xd(e,t){const n=vd(e,!0).delete(t);return new yd(n).toPromise()}class Sd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await bd()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(wM){if(t++>3)throw wM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cd._getInstance(fd()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new dd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bd();return await wd(e,rd,"1"),await xd(e,rd),!0}catch(SM){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wd(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vd(e,!1).get(t),r=await new yd(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vd(e,!1).getAll();return new yd(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Sd.type="LOCAL";const kd=Sd;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cd=1e12;class Ed{constructor(e){this.auth=e,this.counter=Cd,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Td(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Cd;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Cd;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Cd;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Td{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;Fl(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(wM){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(wM){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _d=$c("rcb"),Nd=new Hl(3e4,6e4);class Id{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=hd().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return Fl(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&rc(hd().grecaptcha)?Promise.resolve(hd().grecaptcha):new Promise((n,r)=>{const i=hd().setTimeout(()=>{r(jl(e,"network-request-failed"))},Nd.get());hd()[_d]=()=>{hd().clearTimeout(i),delete hd()[_d];const s=hd().grecaptcha;if(!s||!rc(s))return void r(jl(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Vc(`${Bc.recaptchaV2Script}?${wa({onload:_d,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(jl(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=hd().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ad{async load(e){return new Ed(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="recaptcha",Rd={theme:"light",type:"image"};let jd=class{constructor(e,t,n=Object.assign({},Rd)){this.parameters=n,this.type=Pd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Uc(e),this.isInvisible="invisible"===this.parameters.size,Fl("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;Fl(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ad:new Id,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(wM){return Promise.reject(wM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Fl(!this.parameters.sitekey,this.auth,"argument-error"),Fl(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fl("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=hd()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){Fl(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Fl(Vl()&&!fd(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Jl(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Fl(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Fl(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};class Md{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ou._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Dd(e,t,n){var r;const i=await n.verify();try{let s;if(Fl("string"==typeof i,e,"argument-error"),Fl(n.type===Pd,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Fl("enroll"===t.type,e,"internal-error");const n=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await function(e,t){return Jl(e,"POST","/v2/accounts/mfaEnrollment:start",Yl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Fl("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Fl(n,e,"missing-multi-factor-info");const a=await function(e,t){return Jl(e,"POST","/v2/accounts/mfaSignIn:start",Yl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Jl(e,"POST","/v1/accounts:sendVerificationCode",Yl(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Ld=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Uc(t)}verifyPhoneNumber(e,t){return Dd(this.auth,e,Ta(t))}static credential(e,t){return ou._fromVerification(e,t)}static credentialFromResult(t){const n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ou._fromTokenResponse(t,n):null}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Od(e,t){return t?wc(t):(Fl(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ld.PROVIDER_ID="phone",Ld.PHONE_SIGN_IN_METHOD="phone";class Fd extends Jc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ud(e){return Iu(e.auth,new Fd(e),e.bypassAuthState)}function zd(e){const{auth:t,user:n}=e;return Fl(n,t,"internal-error"),Nu(n,new Fd(e),e.bypassAuthState)}async function Bd(e){const{auth:t,user:n}=e;return Fl(n,t,"internal-error"),Tu(n,new Fd(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(wM){this.reject(wM)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(wM){this.reject(wM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ud;case"linkViaPopup":case"linkViaRedirect":return Bd;case"reauthViaPopup":case"reauthViaRedirect":return zd;default:Rl(this.auth,"internal-error")}}resolve(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Hl(2e3,1e4);class Hd extends Vd{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hd.currentPopupAction&&Hd.currentPopupAction.cancel(),Hd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fl(e,this.auth,"internal-error"),e}async onExecution(){zl(1===this.filter.length,"Popup operations only handle one event");const e=ud();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(jl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(jl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jl(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,$d.get())};e()}}Hd.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const qd=new Map;class Kd extends Vd{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Jd(t),r=Yd(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(wM){e=()=>Promise.reject(wM)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Wd(e,t){return Yd(e)._set(Jd(t),"true")}function Gd(e,t){qd.set(e._key(),t)}function Yd(e){return wc(e._redirectPersistence)}function Jd(e){return kc("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e,t,n){return async function(e,t,n){if(Vo(e.app))return Promise.reject(Dl(e));const r=Uc(e);Ll(e,t,uu),await r._initializationPromise;const i=Od(r,n);return await Wd(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Xd(e,t,n){return async function(e,t,n){const r=Ta(e);if(Ll(r.auth,t,uu),Vo(r.auth.app))return Promise.reject(Dl(r.auth));await r.auth._initializationPromise;const i=Od(r.auth,n);await Wd(i,r.auth);const s=await th(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Zd(e,t,n){return async function(e,t,n){const r=Ta(e);Ll(r.auth,t,uu),await r.auth._initializationPromise;const i=Od(r.auth,n);await _u(!1,r,t.providerId),await Wd(i,r.auth);const s=await th(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function eh(e,t,n=!1){if(Vo(e.app))return Promise.reject(Dl(e));const r=Uc(e),i=Od(r,t),s=new Kd(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function th(e){const t=ud(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ih(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ih(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rh(e))}saveEventToCache(e){this.cachedEventUids.add(rh(e)),this.lastProcessedEventTime=Date.now()}}function rh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ih({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function sh(e,t={}){return Jl(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oh=/^https?/;function lh(e){const t=Bl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!oh.test(n))return!1;if(ah.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Hl(3e4,6e4);function uh(){const e=hd().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dh(e){return new Promise((t,n)=>{var r,i,s;function a(){uh(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uh(),n(jl(e,"network-request-failed"))},timeout:ch.get()})}if(null===(i=null===(r=hd().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=hd().gapi)||void 0===s?void 0:s.load)){const t=$c("iframefcb");return hd()[t]=()=>{gapi.load?a():n(jl(e,"network-request-failed"))},Vc(`${Bc.gapiScript}?onload=${t}`).catch(e=>n(e))}a()}}).catch(e=>{throw hh=null,e})}let hh=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fh=new Hl(5e3,15e3),ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gh(e){const t=e.config;Fl(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ql(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ko},i=mh.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wa(r).slice(1)}`}async function yh(e){const t=await function(e){return hh=hh||dh(e),hh}(e),n=hd().gapi;return Fl(n,e,"internal-error"),t.open({where:document.body,url:gh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ph,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=jl(e,"network-request-failed"),s=hd().setTimeout(()=>{r(i)},fh.get());function a(){hd().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(wM){}}}function wh(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},vh),{width:r.toString(),height:i.toString(),top:s,left:a}),c=oa().toLowerCase();n&&(o=Nc(c)?"_blank":n),Tc(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=oa()){var t;return jc(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new bh(null);const d=window.open(t||"",o,u);Fl(d,e,"popup-blocked");try{d.focus()}catch(wM){}return new bh(d)}const xh="__/auth/handler",Sh="emulator/auth/handler",kh=encodeURIComponent("fac");async function Ch(e,t,n,r,i,s){Fl(e.config.authDomain,e,"auth-domain-config-required"),Fl(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ko,eventId:i};if(t instanceof uu){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof du){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${kh}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${xh}`;return ql(e,Sh)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${wa(o).slice(1)}${c}`}const Eh="webStorageSupport";const Th=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ld,this._completeRedirectFn=eh,this._overrideRedirectResult=Gd}async _openPopup(e,t,n,r){var i;zl(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return wh(e,await Ch(e,t,n,Bl(),r),ud())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hd().location.href=e}(await Ch(e,t,n,Bl(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await yh(e),n=new nh(e);return t.register("authEvent",t=>{Fl(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eh,{type:Eh},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Eh];void 0!==i&&t(!!i),Rl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await sh(e);for(const n of t)try{if(lh(n))return}catch(SM){}Rl(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mc()||_c()||jc()}};class _h{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ul("unexpected MultiFactorSessionType")}}}class Nh extends _h{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Nh(e)}_finalizeEnroll(e,t,n){return function(e,t){return Jl(e,"POST","/v2/accounts/mfaEnrollment:finalize",Yl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Jl(e,"POST","/v2/accounts/mfaSignIn:finalize",Yl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ih{constructor(){}static assertion(e){return Nh._fromCredential(e)}}Ih.FACTOR_ID="phone";var Ah="@firebase/auth",Ph="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rh{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fl(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const jh=ia("authIdTokenMaxAge")||300;let Mh=null;var Dh;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Lh(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bc={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=jl("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Dh="Browser",Uo(new _a("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;Fl(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:Dh,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dc(Dh)},l=new Fc(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wc);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Uo(new _a("auth-internal",e=>{const t=Uc(e.getProvider("auth").getImmediate());return new Rh(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jo(Ah,Ph,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Dh)),Jo(Ah,Ph,"esm2017");async function Oh(e,t,n){var r;const{BuildInfo:i}=Lh();zl(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(zl(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),a={};return jc()?a.ibi=i.packageName:Ac()?a.apn=i.packageName:Rl(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Ch(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)}function Fh(e){const{cordova:t}=Lh();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=oa()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}class Uh extends nh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function zh(e){const t=await $h()._get(Hh(e));return t&&await $h()._remove(Hh(e)),t}function Bh(e,t){var n,r;const i=function(e){const t=qh(e),n=t.link?decodeURIComponent(t.link):void 0,r=qh(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qh(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=qh(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(wM){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],o=a?jl(a):null;return o?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:o,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Vh(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function $h(){return wc(ad)}function Hh(e){return kc("authEvent",e.config.apiKey,e.name)}function qh(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return xa(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=class{constructor(){this._redirectPersistence=ld,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eh,this._overrideRedirectResult=Gd}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Uh(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Rl(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,a,o,l,c,u;const d=Lh();Fl("function"==typeof(null===(t=null==d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Fl(void 0!==(null===(n=null==d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Fl("function"==typeof(null===(s=null===(i=null===(r=null==d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fl("function"==typeof(null===(l=null===(o=null===(a=null==d?void 0:d.cordova)||void 0===a?void 0:a.plugins)||void 0===o?void 0:o.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Fl("function"==typeof(null===(u=null===(c=null==d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),qd.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Vh(),postBody:null,tenantId:e.tenantId,error:jl(e,"no-auth-event")}}(e,n,r);await function(e,t){return $h()._set(Hh(e),t)}(e,s);const a=await Oh(e,s,t);return async function(e,t,n){const{cordova:r}=Lh();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(jl(e,"redirect-cancelled-by-user"))},2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ac()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),o&&window.clearTimeout(o)}})}finally{i()}}(e,i,await Fh(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Lh(),n={};jc()?n.iosBundleId=t.packageName:Ac()?n.androidPackageName=t.packageName:Rl(e,"operation-not-supported-in-this-environment"),await sh(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Lh(),s=setTimeout(async()=>{await zh(e),t.onEvent(Wh())},500),a=async n=>{clearTimeout(s);const r=await zh(e);let i=null;r&&(null==n?void 0:n.url)&&(i=Bh(r,n.url)),t.onEvent(i||Wh())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const o=r,l=`${i.packageName.toLowerCase()}://`;Lh().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&a({url:e}),"function"==typeof o)try{o(e)}catch(wM){}}}};function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jl("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Yh(e=oa()){return!("file:"!==Gh()&&"ionic:"!==Gh()&&"capacitor:"!==Gh()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jh(e=oa()){return ha()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=oa()){return/Edge\/\d+/.test(e)}(e)}function Qh(){try{const e=self.localStorage,t=ud();if(e)return e.setItem(t,"1"),e.removeItem(t),!Jh()||fa()}catch(wM){return Xh()&&fa()}return!1}function Xh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zh(){return("http:"===Gh()||"https:"===Gh()||ua()||Yh())&&!(da()||la())&&Qh()&&!Xh()}function ef(){return Yh()&&"undefined"!=typeof document}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tf={LOCAL:"local",NONE:"none",SESSION:"session"},nf=Fl,rf="persistence";async function sf(e){await e._initializationPromise;const t=af(),n=kc(rf,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function af(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(wM){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=Fl;class lf{constructor(){this.browserResolver=wc(Th),this.cordovaResolver=wc(Kh),this.underlyingResolver=null,this._redirectPersistence=ld,this._completeRedirectFn=eh,this._overrideRedirectResult=Gd}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ef()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return of(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!ef()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(e){return e.unwrap()}function uf(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code)){t.resolver=new pf(e,function(e,t){var n;const r=Ta(e),i=t;return Fl(t.customData.operationType,r,"argument-error"),Fl(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ed._fromError(r,i)}(e,t))}else if(r){const e=df(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function df(e){const{_tokenResponse:t}=e instanceof pa?e.customData:e;if(!t)return null;if(!(e instanceof pa)&&"temporaryProof"in t&&"phoneNumber"in t)return Ld.credentialFromResult(e);const n=t.providerId;if(!n||n===vl)return null;let r;switch(n){case yl:r=pu;break;case ml:r=fu;break;case gl:r=mu;break;case bl:r=vu;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:a,nonce:o}=t;return i||s||e||a?a?n.startsWith("saml.")?gu._create(n,a):su._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new hu(n).credential({idToken:e,accessToken:i,rawNonce:o}):null}return e instanceof pa?r.credentialFromError(e):r.credentialFromResult(e)}function hf(e,t){return t.catch(t=>{throw t instanceof pa&&uf(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,df(r)),additionalUserInfo:Xu(e),user:mf.getOrCreate(n)};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r})}async function ff(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>hf(e,n.confirm(t))}}class pf{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return hf(cf(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ta(e);return nd.has(t)||nd.set(t,td._fromUser(t)),nd.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return hf(this.auth,Pu(this._delegate,e))}async linkWithPhoneNumber(e,t){return ff(this.auth,async function(e,t,n){const r=Ta(e);await _u(!1,r,"phone");const i=await Dd(r.auth,t,Ta(n));return new Md(i,e=>Pu(r,e))}(this._delegate,e,t))}async linkWithPopup(e){return hf(this.auth,async function(e,t,n){const r=Ta(e);Ll(r.auth,t,uu);const i=Od(r.auth,n);return new Hd(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lf))}async linkWithRedirect(e){return await sf(Uc(this.auth)),Zd(this._delegate,e,lf)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return hf(this.auth,Ru(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ff(this.auth,async function(e,t,n){const r=Ta(e);if(Vo(r.auth.app))return Promise.reject(Dl(r.auth));const i=await Dd(r.auth,t,Ta(n));return new Md(i,e=>Ru(r,e))}(this._delegate,e,t))}reauthenticateWithPopup(e){return hf(this.auth,async function(e,t,n){const r=Ta(e);if(Vo(r.auth.app))return Promise.reject(jl(r.auth,"operation-not-supported-in-this-environment"));Ll(r.auth,t,uu);const i=Od(r.auth,n);return new Hd(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lf))}async reauthenticateWithRedirect(e){return await sf(Uc(this.auth)),Xd(this._delegate,e,lf)}sendEmailVerification(e){return Vu(this._delegate,e)}async unlink(e){return await Eu(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Ta(e);return Vo(n.auth.app)?Promise.reject(Dl(n.auth)):qu(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return qu(Ta(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Ta(e);if(Vo(n.auth.app))return Promise.reject(Dl(n.auth));await Tu(n,t)}(this._delegate,e)}updateProfile(e){return Hu(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return $u(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};mf.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gf=Fl;class yf{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;gf(n,"invalid-api-key",{appName:e.name}),gf(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?lf:void 0;this._delegate=t.initialize({options:{persistence:bf(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(_l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mf.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Wc(this._delegate,e,t)}applyActionCode(e){return Uu(this._delegate,e)}checkActionCode(e){return zu(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Qc(Ta(e),{oobCode:t,newPassword:n}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Fu(e),t})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return hf(this._delegate,async function(e,t,n){if(Vo(e.app))return Promise.reject(Dl(e));const r=Uc(e),i=Kc(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bu),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Fu(e),t}),a=await wu._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Bu(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=lu.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){gf(Zh(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Uc(e)._initializationPromise,eh(e,t,!1)}(this._delegate,lf);return e?hf(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Uc(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=vf(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=vf(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n){const r=Uc(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};var s,a;s=i,Fl((a=n).handleCodeInApp,r,"argument-error"),a&&Ou(r,s,a),await Kc(r,i,"getOobCode",nu)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Uc(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ou(r,i,n),await Kc(r,i,"getOobCode",tu)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){nf(Object.values(tf).includes(t),e,"invalid-persistence-type"),da()?nf(t!==tf.SESSION,e,"unsupported-persistence-type"):la()?nf(t===tf.NONE,e,"unsupported-persistence-type"):Xh()?nf(t===tf.NONE||t===tf.LOCAL&&fa(),e,"unsupported-persistence-type"):nf(t===tf.NONE||Qh(),e,"unsupported-persistence-type")}(this._delegate,e),e){case tf.SESSION:t=ld;break;case tf.LOCAL:t=await wc(kd)._isAvailable()?kd:ad;break;case tf.NONE:t=Sc;break;default:return Rl("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return hf(this._delegate,async function(e){var t;if(Vo(e.app))return Promise.reject(Dl(e));const n=Uc(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new wu({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bu(n,{returnSecureToken:!0}),i=await wu._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return hf(this._delegate,Au(this._delegate,e))}signInWithCustomToken(e){return hf(this._delegate,ju(this._delegate,e))}signInWithEmailAndPassword(e,t){return hf(this._delegate,function(e,t,n){return Vo(e.app)?Promise.reject(Dl(e)):Au(Ta(e),cu.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Fu(e),t})}(this._delegate,e,t))}signInWithEmailLink(e,t){return hf(this._delegate,async function(e,t,n){if(Vo(e.app))return Promise.reject(Dl(e));const r=Ta(e),i=cu.credentialWithLink(t,n||Bl());return Fl(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Au(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ff(this._delegate,async function(e,t,n){if(Vo(e.app))return Promise.reject(Dl(e));const r=Uc(e),i=await Dd(r,t,Ta(n));return new Md(i,e=>Au(r,e))}(this._delegate,e,t))}async signInWithPopup(e){return gf(Zh(),this._delegate,"operation-not-supported-in-this-environment"),hf(this._delegate,async function(e,t,n){if(Vo(e.app))return Promise.reject(jl(e,"operation-not-supported-in-this-environment"));const r=Uc(e);Ll(e,t,uu);const i=Od(r,n);return new Hd(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,lf))}async signInWithRedirect(e){return gf(Zh(),this._delegate,"operation-not-supported-in-this-environment"),await sf(this._delegate),Qd(this._delegate,e,lf)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await zu(Ta(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function vf(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&mf.getOrCreate(e)),error:t,complete:n}}function bf(e,t){const n=function(e,t){const n=af();if(!n)return[];const r=kc(rf,e,t);switch(n.getItem(r)){case tf.NONE:return[Sc];case tf.LOCAL:return[kd,ld];case tf.SESSION:return[ld];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(kd)||n.push(kd),"undefined"!=typeof window)for(const r of[ad,ld])n.includes(r)||n.push(r);return n.includes(Sc)||n.push(Sc),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yf.Persistence=tf;class wf{constructor(){this.providerId="phone",this._delegate=new Ld(cf(pl.auth()))}static credential(e,t){return Ld.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}wf.PHONE_SIGN_IN_METHOD=Ld.PHONE_SIGN_IN_METHOD,wf.PROVIDER_ID=Ld.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xf=Fl;class Sf{constructor(e,t,n=pl.app()){var r;xf(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new jd(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kf;(kf=pl).INTERNAL.registerComponent(new _a("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yf(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wl,PASSWORD_RESET:xl,RECOVER_EMAIL:Sl,REVERT_SECOND_FACTOR_ADDITION:kl,VERIFY_AND_CHANGE_EMAIL:Cl,VERIFY_EMAIL:El}},EmailAuthProvider:cu,FacebookAuthProvider:fu,GithubAuthProvider:mu,GoogleAuthProvider:pu,OAuthProvider:hu,SAMLAuthProvider:yu,PhoneAuthProvider:wf,PhoneMultiFactorGenerator:Ih,RecaptchaVerifier:Sf,TwitterAuthProvider:vu,Auth:yf,AuthCredential:Jc,Error:pa}).setInstantiationMode("LAZY").setMultipleInstances(!1)),kf.registerVersion("@firebase/auth-compat","0.5.14");var Cf,Ef,Tf={exports:{}};const _f=r((Cf||(Cf=1,Ef=Tf,function(){var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function n(e){e&&e.blur&&e!==document.body&&e.blur()}function r(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function i(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function s(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]});else{var t,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var s="DOMNodeRemoved";n|=i.type.substr(0,14)===s,window.clearTimeout(t),t=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,i)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),s.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),a.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}n(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!a.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");!function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}}(this.dialog_.parentElement),this.setOpen(!0),this.openAsModal_=!0,a.needsCentering(this.dialog_)?(a.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var a={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],i=null;try{i=n.cssRules}catch(wM){}if(i)for(var s=0;s<i.length;++s){var a=i[s],o=null;try{o=document.querySelectorAll(a.selectorText)}catch(wM){}if(o&&r(o,e)){var l=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(l&&"auto"!==l||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(e){return!("absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom||a.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if(window.HTMLDialogElement||e.showModal,"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new s(e)},registerDialog:function(e){e.showModal||a.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))}};if(a.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},a.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},a.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},a.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var n,r=0;n=this.pendingDialogStack[r];++r)if(n.dialog===e)return 0===r;e=e.parentElement}return!1},a.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),n(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},a.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},a.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},a.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t||(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),0))},a.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},a.dm=new a.DialogManager,a.formSubmitter=null,a.useValue=null,void 0===window.HTMLDialogElement){var o=document.createElement("form");if(o.setAttribute("method","dialog"),"dialog"!==o.method){var l=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(l){var c=l.get;l.get=function(){return i(this)?"dialog":c.call(this)};var u=l.set;l.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):u.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",l)}}document.addEventListener("click",function(e){if(a.formSubmitter=null,a.useValue=null,!e.defaultPrevented){var n=e.target;if(n&&i(n.form)){if(!("submit"===n.type&&["button","input"].indexOf(n.localName)>-1)){if("input"!==n.localName||"image"!==n.type)return;a.useValue=e.offsetX+","+e.offsetY}t(n)&&(a.formSubmitter=n)}}},!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!i(this))return d.call(this);var e=t(this);e&&e.close()},document.addEventListener("submit",function(e){var n=e.target;if(i(n)){e.preventDefault();var r=t(n);if(r){var s=a.formSubmitter;s&&s.form===n?r.close(a.useValue||s.value):r.close(),a.formSubmitter=null}}},!0)}a.forceRegisterDialog=a.forceRegisterDialog,a.registerDialog=a.registerDialog,"object"==typeof Ef.exports?Ef.exports=a:window.dialogPolyfill=a}()),Tf.exports));var Nf,If={};
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(){if(Nf)return If;Nf=1;var e={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};e=function(){var e=[],t=[],n="mdlComponentConfigInternal_";function r(t,n){for(var r=0;r<e.length;r++)if(e[r].className===t)return void 0!==n&&(e[r]=n),e[r];return!1}function i(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function s(e,t){return-1!==i(e).indexOf(t)}function a(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function o(t,n){if(void 0===t&&void 0===n)for(var i=0;i<e.length;i++)o(e[i].className,e[i].cssClass);else{var s=t;if(void 0===n){var a=r(s);a&&(n=a.cssClass)}for(var c=document.querySelectorAll("."+n),u=0;u<c.length;u++)l(c[u],s)}}function l(o,l){if(!("object"==typeof o&&o instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var c=a("mdl-componentupgrading",!0,!0);if(o.dispatchEvent(c),!c.defaultPrevented){var u=i(o),d=[];if(l)s(o,l)||d.push(r(l));else{var h=o.classList;e.forEach(function(e){h.contains(e.cssClass)&&-1===d.indexOf(e)&&!s(o,e.className)&&d.push(e)})}for(var f,p=0,m=d.length;p<m;p++){if(!(f=d[p]))throw new Error("Unable to find a registered component for the given class.");u.push(f.className),o.setAttribute("data-upgraded",u.join(","));var g=new f.classConstructor(o);g[n]=f,t.push(g);for(var y=0,v=f.callbacks.length;y<v;y++)f.callbacks[y](o);f.widget&&(o[f.className]=g);var b=a("mdl-componentupgraded",!0,!1);o.dispatchEvent(b)}}}function c(e){if(e){var r=t.indexOf(e);t.splice(r,1);var i=e.element_.getAttribute("data-upgraded").split(","),s=i.indexOf(e[n].classAsString);i.splice(s,1),e.element_.setAttribute("data-upgraded",i.join(","));var o=a("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(o)}}return{upgradeDom:o,upgradeElement:l,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,r=0,i=t.length;r<i;r++)(n=t[r])instanceof HTMLElement&&(l(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)o(e[t].className)},registerUpgradedCallback:function(e,t){var n=r(e);n&&n.callbacks.push(t)},register:function(t){var i=!0;void 0===t.widget&&void 0===t.widget||(i=t.widget||t.widget);var s={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(e.forEach(function(e){if(e.cssClass===s.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===s.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have "+n+" defined as a property.");r(t.classAsString,s)||e.push(s)},downgradeElements:function(e){var n=function(e){t.filter(function(t){return t.element_===e}).forEach(c)};if(e instanceof Array||e instanceof NodeList)for(var r=0;r<e.length;r++)n(e[r]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(e)}}}}(),e.ComponentConfigPublic,e.ComponentConfig,e.Component,e.upgradeDom=e.upgradeDom,e.upgradeElement=e.upgradeElement,e.upgradeElements=e.upgradeElements,e.upgradeAllRegistered=e.upgradeAllRegistered,e.registerUpgradedCallback=e.registerUpgradedCallback,e.register=e.register,e.downgradeElements=e.downgradeElements,window.componentHandler=e,window.componentHandler=e,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),e.upgradeAllRegistered()):(e.upgradeElement=function(){},e.register=function(){})})}();var Af,Pf;
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Af||(Af=1,Pf=function(e){this.element_=e,this.init()},window.MaterialButton=Pf,Pf.prototype.Constant_={},Pf.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},Pf.prototype.blurHandler_=function(e){e&&this.element_.blur()},Pf.prototype.disable=function(){this.element_.disabled=!0},Pf.prototype.disable=Pf.prototype.disable,Pf.prototype.enable=function(){this.element_.disabled=!1},Pf.prototype.enable=Pf.prototype.enable,Pf.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:Pf,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0}));var Rf,jf;
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rf||(Rf=1,jf=function(e){this.element_=e,this.init()},window.MaterialProgress=jf,jf.prototype.Constant_={},jf.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},jf.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},jf.prototype.setProgress=jf.prototype.setProgress,jf.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},jf.prototype.setBuffer=jf.prototype.setBuffer,jf.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:jf,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0}));var Mf,Df;
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mf||(Mf=1,Df=function(e){this.element_=e,this.init()},window.MaterialSpinner=Df,Df.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},Df.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},Df.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var s=[n,r,i],a=0;a<s.length;a++){var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),s[a].appendChild(o)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},Df.prototype.createLayer=Df.prototype.createLayer,Df.prototype.stop=function(){this.element_.classList.remove("is-active")},Df.prototype.stop=Df.prototype.stop,Df.prototype.start=function(){this.element_.classList.add("is-active")},Df.prototype.start=Df.prototype.start,Df.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:Df,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0}));var Lf,Of;
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lf||(Lf=1,Of=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=Of,Of.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},Of.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},Of.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},Of.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},Of.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Of.prototype.onReset_=function(e){this.updateClasses_()},Of.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},Of.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},Of.prototype.checkDisabled=Of.prototype.checkDisabled,Of.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},Of.prototype.checkFocus=Of.prototype.checkFocus,Of.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},Of.prototype.checkValidity=Of.prototype.checkValidity,Of.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},Of.prototype.checkDirty=Of.prototype.checkDirty,Of.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},Of.prototype.disable=Of.prototype.disable,Of.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},Of.prototype.enable=Of.prototype.enable,Of.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},Of.prototype.change=Of.prototype.change,Of.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:Of,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})),function(){(function(){var e,t,n="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var r;e:{var i={};try{i.__proto__={xb:!0},r=i.xb;break e}catch(Ge){}r=!1}t=r?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var s=t;function a(e,t){if(e.prototype=n(t.prototype),e.prototype.constructor=e,s)s(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,r);i&&Object.defineProperty(e,r,i)}else e[r]=t[r];e.K=t.prototype}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function c(e,t){if(t){var n=l;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}c("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),c("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}});var u=this;function d(e){return void 0!==e}function h(e){return"string"==typeof e}var f=/^[\w+/_-]+[=]{0,2}$/,p=null;function m(){}function g(e){e.W=void 0,e.Xa=function(){return e.W?e.W:e.W=new e}}function y(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function v(e){return"array"==y(e)}function b(e){var t=y(e);return"array"==t||"object"==t&&"number"==typeof e.length}function w(e){return"function"==y(e)}function x(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function S(e,t,n){return e.call.apply(e.bind,arguments)}function k(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function C(e,t,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:k).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function T(e,t){for(var n in t)e[n]=t[n]}var _,N=Date.now||function(){return+new Date};function I(e,t){e=e.split(".");var n,r=u;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)!e.length&&d(t)?r[n]=t:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function A(e,t){function n(){}n.prototype=t.prototype,e.K=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.vc=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function P(e){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function R(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");P.call(this,n+e[r])}function j(e,t){throw new R("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}A(P,Error),P.prototype.name="CustomError",A(R,P),R.prototype.name="AssertionError";var M=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(h(e))return h(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},D=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=h(e)?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};var L=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,s=h(e)?e.split(""):e,a=0;a<n;a++)if(a in s){var o=s[a];t.call(void 0,o,a,e)&&(r[i++]=o)}return r},O=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=h(e)?e.split(""):e,s=0;s<n;s++)s in i&&(r[s]=t.call(void 0,i[s],s,e));return r},F=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=h(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function U(e,t){return 0<=M(e,t)}function z(e,t){var n;return(n=0<=(t=M(e,t)))&&B(e,t),n}function B(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function V(e,t){!function(e,t){for(var n=h(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,function(n,r){t.call(void 0,n,r,e)&&B(e,r)&&0})}function $(e){return Array.prototype.concat.apply([],arguments)}function H(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function q(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}var K=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},W=/&/g,G=/</g,Y=/>/g,J=/"/g,Q=/'/g,X=/\x00/g,Z=/[\x00&<>"']/;function ee(e,t){return e<t?-1:e>t?1:0}function te(e){return Z.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(W,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(G,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(Y,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(J,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(Q,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(X,"&#0;"))),e}function ne(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function re(e){var t,n={};for(t in e)n[t]=e[t];return n}var ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<ie.length;s++)n=ie[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var ae="StopIteration"in u?u.StopIteration:{message:"StopIteration",stack:""};function oe(){}function le(e){if(e instanceof oe)return e;if("function"==typeof e.ha)return e.ha(!1);if(b(e)){var t=0,n=new oe;return n.next=function(){for(;;){if(t>=e.length)throw ae;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function ce(e){if(b(e))return H(e);e=le(e);var t=[];return function(e,t){if(b(e))try{D(e,t,void 0)}catch(n){if(n!==ae)throw n}else{e=le(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(r){if(r!==ae)throw r}}}(e,function(e){t.push(e)}),t}function ue(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ue)for(n=e.ja(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function de(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];he(e.g,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.h!=e.a.length){var i={};for(n=t=0;t<e.a.length;)he(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function he(e,t){return Object.prototype.hasOwnProperty.call(e,t)}oe.prototype.next=function(){throw ae},oe.prototype.ha=function(){return this},(e=ue.prototype).la=function(){de(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},e.ja=function(){return de(this),this.a.concat()},e.clear=function(){this.g={},this.j=this.h=this.a.length=0},e.get=function(e,t){return he(this.g,e)?this.g[e]:t},e.set=function(e,t){he(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},e.forEach=function(e,t){for(var n=this.ja(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}},e.ha=function(e){de(this);var t=0,n=this.j,r=this,i=new oe;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(t>=r.a.length)throw ae;var i=r.a[t++];return e?i:r.g[i]},i};var fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pe(e,t,n,r){for(var i=n.length;0<=(t=e.indexOf(n,t))&&t<r;){var s=e.charCodeAt(t-1);if(!(38!=s&&63!=s||(s=e.charCodeAt(t+i))&&61!=s&&38!=s&&35!=s))return t;t+=i+1}return-1}var me=/#|$/;function ge(e,t){var n=e.search(me),r=pe(e,0,t,n);if(0>r)return null;var i=e.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=t.length+1,decodeURIComponent(e.substr(r,i-r).replace(/\+/g," "))}var ye=/[?&]($|#)/;function ve(e,t){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,e instanceof ve?(this.i=d(t)?t:e.i,be(this,e.j),this.A=e.A,this.h=e.h,we(this,e.C),this.g=e.g,xe(this,De(e.a)),this.s=e.s):e&&(n=String(e).match(fe))?(this.i=!!t,be(this,n[1]||"",!0),this.A=ke(n[2]||""),this.h=ke(n[3]||"",!0),we(this,n[4]),this.g=ke(n[5]||"",!0),xe(this,n[6]||"",!0),this.s=ke(n[7]||"")):(this.i=!!t,this.a=new Pe(null,this.i))}function be(e,t,n){e.j=n?ke(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function we(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function xe(e,t,n){t instanceof Pe?(e.a=t,function(e,t){t&&!e.j&&(Re(e),e.h=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(je(this,t),je(this,n),0<e.length&&(this.h=null,this.a.set(Le(this,n),H(e)),this.g+=e.length))},e)),e.j=t}(e.a,e.i)):(n||(t=Ce(t,Ie)),e.a=new Pe(t,e.i))}function Se(e){return e instanceof ve?new ve(e):new ve(e,void 0)}function ke(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ce(e,t,n){return h(e)?(e=encodeURI(e).replace(t,Ee),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ee(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ve.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ce(t,Te,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.A)&&e.push(Ce(t,Te,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ce(n,"/"==n.charAt(0)?Ne:_e,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.s)&&e.push("#",Ce(n,Ae)),e.join("")};var Te=/[#\/\?@]/g,_e=/[#\?:]/g,Ne=/[#\?]/g,Ie=/[#\?@]/g,Ae=/#/g;function Pe(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function Re(e){e.a||(e.a=new ue,e.g=0,e.h&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.h,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function je(e,t){Re(e),t=Le(e,t),he(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,he((e=e.a).g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&de(e)))}function Me(e,t){return Re(e),t=Le(e,t),he(e.a.g,t)}function De(e){var t=new Pe;return t.h=e.h,e.a&&(t.a=new ue(e.a),t.g=e.g),t}function Le(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Oe(e){this.a=Se(e)}function Fe(e){return e.a.a.get(Be.Pa)||null}function Ue(e,t){t?e.a.a.set(Be.PROVIDER_ID,t):je(e.a.a,Be.PROVIDER_ID)}(e=Pe.prototype).add=function(e,t){Re(this),this.h=null,e=Le(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},e.clear=function(){this.a=this.h=null,this.g=0},e.forEach=function(e,t){Re(this),this.a.forEach(function(n,r){D(n,function(n){e.call(t,n,r,this)},this)},this)},e.ja=function(){Re(this);for(var e=this.a.la(),t=this.a.ja(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},e.la=function(e){Re(this);var t=[];if(h(e))Me(this,e)&&(t=$(t,this.a.get(Le(this,e))));else{e=this.a.la();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},e.set=function(e,t){return Re(this),this.h=null,Me(this,e=Le(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},e.get=function(e,t){return e&&0<(e=this.la(e)).length?String(e[0]):t},e.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ja(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.la(r);for(var s=0;s<r.length;s++){var a=i;""!==r[s]&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.h=e.join("&")},Oe.prototype.toString=function(){return this.a.toString()};var ze,Be={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var Ve=u.navigator;if(Ve){var $e=Ve.userAgent;if($e){ze=$e;break e}}ze=""}function He(e){return-1!=ze.indexOf(e)}function qe(){return(He("Chrome")||He("CriOS"))&&!He("Edge")}function Ke(e){return Ke[" "](e),e}Ke[" "]=m;var We,Ge,Ye=He("Opera"),Je=He("Trident")||He("MSIE"),Qe=He("Edge"),Xe=Qe||Je,Ze=He("Gecko")&&!(-1!=ze.toLowerCase().indexOf("webkit")&&!He("Edge"))&&!(He("Trident")||He("MSIE"))&&!He("Edge"),et=-1!=ze.toLowerCase().indexOf("webkit")&&!He("Edge"),tt=et&&He("Mobile"),nt=He("Macintosh");function rt(){var e=u.document;return e?e.documentMode:void 0}e:{var it="",st=(Ge=ze,Ze?/rv:([^\);]+)(\)|;)/.exec(Ge):Qe?/Edge\/([\d\.]+)/.exec(Ge):Je?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ge):et?/WebKit\/(\S+)/.exec(Ge):Ye?/(?:Version)[ \/]?(\S+)/.exec(Ge):void 0);if(st&&(it=st?st[1]:""),Je){var at=rt();if(null!=at&&at>parseFloat(it)){We=String(at);break e}}We=it}var ot,lt={};function ct(e){return function(e,t){var n=lt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(){for(var t=0,n=K(String(We)).split("."),r=K(String(e)).split("."),i=Math.max(n.length,r.length),s=0;0==t&&s<i;s++){var a=n[s]||"",o=r[s]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;t=ee(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ee(0==a[2].length,0==o[2].length)||ee(a[2],o[2]),a=a[3],o=o[3]}while(0==t)}return 0<=t})}var ut=u.document;function dt(e,t){this.a=e===ft&&t||"",this.g=ht}ot=ut&&Je?rt()||("CSS1Compat"==ut.compatMode?parseInt(We,10):5):void 0,dt.prototype.ma=!0,dt.prototype.ka=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var ht={},ft={};function pt(){this.a="",this.h=gt}function mt(e){return e instanceof pt&&e.constructor===pt&&e.h===gt?e.a:(j("expected object of type TrustedResourceUrl, got '"+e+"' of type "+y(e)),"type_error:TrustedResourceUrl")}pt.prototype.ma=!0,pt.prototype.ka=function(){return this.a.toString()},pt.prototype.g=function(){return 1},pt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var gt={};function yt(){this.a="",this.h=St}function vt(e){return e instanceof yt&&e.constructor===yt&&e.h===St?e.a:(j("expected object of type SafeUrl, got '"+e+"' of type "+y(e)),"type_error:SafeUrl")}yt.prototype.ma=!0,yt.prototype.ka=function(){return this.a.toString()},yt.prototype.g=function(){return 1},yt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var bt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function wt(e){return e instanceof yt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),bt.test(e)||(e="about:invalid#zClosurez"),kt(e))}function xt(e){return e instanceof yt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),bt.test(e)||(e="about:invalid#zClosurez"),kt(e))}var St={};function kt(e){var t=new yt;return t.a=e,t}function Ct(){this.a="",this.g=Et}kt("about:blank"),Ct.prototype.ma=!0;var Et={};function Tt(){this.a="",this.j=Nt,this.h=null}function _t(e){return e instanceof Tt&&e.constructor===Tt&&e.j===Nt?e.a:(j("expected object of type SafeHtml, got '"+e+"' of type "+y(e)),"type_error:SafeHtml")}Ct.prototype.ka=function(){return this.a},Ct.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Tt.prototype.g=function(){return this.h},Tt.prototype.ma=!0,Tt.prototype.ka=function(){return this.a.toString()},Tt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Nt={};function It(e,t){var n=new Tt;return n.a=e,n.h=t,n}It("<!DOCTYPE html>",0);var At=It("",0);It("<br>",0);var Pt=function(){var e,t=!1;return function(){return t||(e=function(){if("undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=_t(At),!t.parentElement)}(),t=!0),e}}();function Rt(e,t){t=t instanceof yt?t:xt(t),e.assign(vt(t))}function jt(e,t){this.a=d(e)?e:0,this.g=d(t)?t:0}function Mt(e,t){this.width=e,this.height=t}function Dt(e){return e?new qt(Vt(e)):_||(_=new qt)}function Lt(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):Ft(document,e,t)}function Ot(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var r=t||n;e=r.querySelectorAll&&r.querySelector&&e?r.querySelector(e?"."+e:""):Ft(n,e,t)[0]||null}return e||null}function Ft(e,t,n){var r;if((e=n||e).querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var i=e.getElementsByClassName(t);return i}if(i=e.getElementsByTagName("*"),t){var s={};for(n=r=0;e=i[n];n++){var a=e.className;"function"==typeof a.split&&U(a.split(/\s+/),t)&&(s[r++]=e)}return s.length=r,s}return i}jt.prototype.toString=function(){return"("+this.a+", "+this.g+")"},jt.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},jt.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},jt.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(e=Mt.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},e.aspectRatio=function(){return this.width/this.height},e.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Ut={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zt(e){return e.scrollingElement?e.scrollingElement:(et||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function Bt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Vt(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function $t(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(Vt(e).createTextNode(String(t)))}}function Ht(e,t){return t?function(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}(e,function(e){return!t||h(e.className)&&U(e.className.split(/\s+/),t)}):null}function qt(e){this.a=e||u.document||document}qt.prototype.N=function(){return h(void 0)?this.a.getElementById(void 0):void 0};var Kt={Fc:!0},Wt={Hc:!0},Gt={},Yt={Gc:!0};function Jt(){throw Error("Do not instantiate directly")}function Qt(e,t,n,r){if(e=e(t||Zt,void 0,n),r=(r||Dt()).a.createElement("DIV"),(e=function(e){if(!x(e))return te(String(e));if(e instanceof Jt){if(e.fa===Kt)return e.content;if(e.fa===Yt)return te(e.content)}return j("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(Xt),e=It(e,null),Pt())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=_t(e),1==r.childNodes.length&&(1==(e=r.firstChild).nodeType&&(r=e)),r}Jt.prototype.va=null,Jt.prototype.toString=function(){return this.content};var Xt=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,Zt={};function en(){Jt.call(this)}function tn(e){return null!=e&&e.fa===Kt?e:e instanceof Tt?an(_t(e).toString(),e.g()):an(te(String(String(e))),function(e){if(null!=e)switch(e.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(e))}function nn(){Jt.call(this)}function rn(e,t){this.content=String(e),this.va=null!=t?t:null}function sn(e){return new rn(e,void 0)}A(en,Jt),en.prototype.fa=Kt,A(nn,Jt),nn.prototype.fa=Wt,nn.prototype.va=1,A(rn,Jt),rn.prototype.fa=Yt;var an=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.va=n),e}}(en),on=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(nn);function ln(e){return(e=String(e))?new rn(e,void 0):""}var cn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.va=n),e):""}}(en);function un(e){return null!=e&&e.fa===Kt?String(String(e.content).replace(xn,"").replace(Sn,"&lt;")).replace(yn,pn):te(String(e))}function dn(e){return null!=e&&e.fa===Wt?e=String(e).replace(vn,gn):e instanceof yt?e=String(vt(e).toString()).replace(vn,gn):(e=String(e),wn.test(e)?e=e.replace(vn,gn):(j("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}function hn(e){return null!=e&&e.fa===Gt?e=e.content:null==e?e="":e instanceof Ct?e instanceof Ct&&e.constructor===Ct&&e.g===Et?e=e.a:(j("expected object of type SafeStyle, got '"+e+"' of type "+y(e)),e="type_error:SafeStyle"):(e=String(e),bn.test(e)||(j("Bad value `%s` for |filterCssValue",[e]),e="zSoyz")),e}var fn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;","":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function pn(e){return fn[e]}var mn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85","":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","":"%EF%BC%81","":"%EF%BC%83","":"%EF%BC%84","":"%EF%BC%86","":"%EF%BC%87","":"%EF%BC%88","":"%EF%BC%89","":"%EF%BC%8A","":"%EF%BC%8B","":"%EF%BC%8C","":"%EF%BC%8F","":"%EF%BC%9A","":"%EF%BC%9B","":"%EF%BC%9D","":"%EF%BC%9F","":"%EF%BC%A0","":"%EF%BC%BB","":"%EF%BC%BD"};function gn(e){return mn[e]}var yn=/[\x00\x22\x27\x3c\x3e]/g,vn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,bn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,wn=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,xn=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Sn=/</g;function kn(){return sn("Enter a valid phone number")}function Cn(){return sn("Unable to send password reset code to specified email")}function En(){return sn("Something went wrong. Please try again.")}function Tn(){return sn("This email already exists without any means of sign-in. Please reset the password to recover.")}function _n(e){var t="";switch((e=e||{}).code){case"invalid-argument":t+="Client specified an invalid argument.";break;case"invalid-configuration":t+="Client specified an invalid project configuration.";break;case"failed-precondition":t+="Request can not be executed in the current system state.";break;case"out-of-range":t+="Client specified an invalid range.";break;case"unauthenticated":t+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":t+="Client does not have sufficient permission.";break;case"not-found":t+="Specified resource is not found.";break;case"aborted":t+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":t+="The resource that a client tried to create already exists.";break;case"resource-exhausted":t+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":t+="Request cancelled by the client.";break;case"data-loss":t+="Unrecoverable data loss or data corruption.";break;case"unknown":t+="Unknown server error.";break;case"internal":t+="Internal server error.";break;case"not-implemented":t+="API method not implemented by the server.";break;case"unavailable":t+="Service unavailable.";break;case"deadline-exceeded":t+="Request deadline exceeded.";break;case"auth/user-disabled":t+="The user account has been disabled by an administrator.";break;case"auth/timeout":t+="The operation has timed out.";break;case"auth/too-many-requests":t+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":t+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":t+="A network error has occurred. Try again later.";break;case"restart-process":t+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":t+="No sign-in provider is available for the given email, please try with a different email."}return sn(t)}function Nn(){return sn("Please login again to perform this operation")}function In(e,t,n){var r=Error.call(this);if(this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=An+e,!(e=t)){if(e="","firebaseui/merge-conflict"===this.code)e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";else e+=En();e=sn(e).toString()}this.message=e||"",this.credential=n||null}a(In,Error),In.prototype.toJSON=function(){return{code:this.code,message:this.message}};var An="firebaseui/";function Pn(){this.T=this.T,this.C=this.C}function Rn(e,t){e.T?d(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(d(void 0)?C(t,void 0):t))}function jn(e){e&&"function"==typeof e.m&&e.m()}Pn.prototype.T=!1,Pn.prototype.m=function(){!this.T&&(this.T=!0,this.o())},Pn.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Mn=Object.freeze||function(e){return e},Dn=!Je||9<=Number(ot),Ln=Je&&!ct("9"),On=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",m,t),u.removeEventListener("test",m,t)}catch(n){}return e}();function Fn(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.qb=!0}function Un(e,t){if(Fn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ze){e:{try{Ke(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=h(e.pointerType)?e.pointerType:zn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Fn.prototype.stopPropagation=function(){this.h=!0},Fn.prototype.preventDefault=function(){this.qb=!1},A(Un,Fn);var zn=Mn({2:"touch",3:"pen",4:"mouse"});Un.prototype.stopPropagation=function(){Un.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Un.prototype.preventDefault=function(){Un.K.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ln)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var Bn="closure_listenable_"+(1e6*Math.random()|0),Vn=0;function $n(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++Vn,this.sa=this.Ia=!1}function Hn(e){e.sa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function qn(e){this.src=e,this.a={},this.g=0}function Kn(e,t){var n=t.type;n in e.a&&z(e.a[n],t)&&(Hn(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function Wn(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.sa&&s.listener==t&&s.capture==!!n&&s.La==r)return i}return-1}qn.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.a[s])||(e=this.a[s]=[],this.g++);var a=Wn(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new $n(t,this.src,s,!!r,i)).Ia=n,e.push(t)),t};var Gn="closure_lm_"+(1e6*Math.random()|0),Yn={};function Jn(e,t,n,r,i){if(r&&r.once)return Xn(e,t,n,r,i);if(v(t)){for(var s=0;s<t.length;s++)Jn(e,t[s],n,r,i);return null}return n=or(n),e&&e[Bn]?e.J.add(String(t),n,!1,x(r)?!!r.capture:!!r,i):Qn(e,t,n,!1,r,i)}function Qn(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=x(i)?!!i.capture:!!i,o=sr(e);if(o||(e[Gn]=o=new qn(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){var e=ir,t=Dn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)On||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Xn(e,t,n,r,i){if(v(t)){for(var s=0;s<t.length;s++)Xn(e,t[s],n,r,i);return null}return n=or(n),e&&e[Bn]?e.J.add(String(t),n,!0,x(r)?!!r.capture:!!r,i):Qn(e,t,n,!0,r,i)}function Zn(e,t,n,r,i){if(v(t))for(var s=0;s<t.length;s++)Zn(e,t[s],n,r,i);else r=x(r)?!!r.capture:!!r,n=or(n),e&&e[Bn]?(e=e.J,(t=String(t).toString())in e.a&&(-1<(n=Wn(s=e.a[t],n,r,i))&&(Hn(s[n]),B(s,n),0==s.length&&(delete e.a[t],e.g--)))):e&&(e=sr(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Wn(t,n,r,i)),(n=-1<e?t[e]:null)&&er(n))}function er(e){if("number"!=typeof e&&e&&!e.sa){var t=e.src;if(t&&t[Bn])Kn(t.J,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sr(t))?(Kn(n,e),0==n.g&&(n.src=null,t[Gn]=null)):Hn(e)}}}function tr(e){return e in Yn?Yn[e]:Yn[e]="on"+e}function nr(e,t,n,r){var i=!0;if((e=sr(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var s=t[e];s&&s.capture==n&&!s.sa&&(s=rr(s,r),i=i&&!1!==s)}return i}function rr(e,t){var n=e.listener,r=e.La||e.src;return e.Ia&&er(e),n.call(r,t)}function ir(e,t){if(e.sa)return!0;if(!Dn){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Un(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.g;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;!t.h&&0<=i;i--){t.g=r[i];var s=nr(r[i],e,!0,t);n=n&&s}for(i=0;!t.h&&i<r.length;i++)t.g=r[i],s=nr(r[i],e,!1,t),n=n&&s}return n}return rr(e,new Un(t,this))}function sr(e){return(e=e[Gn])instanceof qn?e:null}var ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function or(e){return w(e)?e:(e[ar]||(e[ar]=function(t){return e.handleEvent(t)}),e[ar])}function lr(){Pn.call(this),this.J=new qn(this),this.wb=this,this.Ha=null}function cr(e,t){var n,r=e.Ha;if(r)for(n=[];r;r=r.Ha)n.push(r);if(e=e.wb,r=t.type||t,h(t))t=new Fn(t,e);else if(t instanceof Fn)t.target=t.target||e;else{var i=t;se(t=new Fn(r,e),i)}if(i=!0,n)for(var s=n.length-1;!t.h&&0<=s;s--){var a=t.g=n[s];i=ur(a,r,!0,t)&&i}if(t.h||(i=ur(a=t.g=e,r,!0,t)&&i,t.h||(i=ur(a,r,!1,t)&&i)),n)for(s=0;!t.h&&s<n.length;s++)i=ur(a=t.g=n[s],r,!1,t)&&i;return i}function ur(e,t,n,r){if(!(t=e.J.a[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.sa&&a.capture==n){var o=a.listener,l=a.La||a.src;a.Ia&&Kn(e.J,a),i=!1!==o.call(l,r)&&i}}return i&&0!=r.qb}A(lr,Pn),lr.prototype[Bn]=!0,lr.prototype.Za=function(e){this.Ha=e},lr.prototype.removeEventListener=function(e,t,n,r){Zn(this,e,t,n,r)},lr.prototype.o=function(){if(lr.K.o.call(this),this.J){var e,t=this.J;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Hn(n[r]);delete t.a[e],t.g--}}this.Ha=null};var dr={},hr=0;function fr(e,t){if(!e)throw Error("Event target element must be provided!");if(e=mr(e),dr[e]&&dr[e].length)for(var n=0;n<dr[e].length;n++)cr(dr[e][n],t)}function pr(e){var t=mr(e.N());dr[t]&&dr[t].length&&(function(e,t){e:{for(var n=e.length,r=h(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}0<=t&&B(e,t)}(dr[t],function(t){return t==e}),dr[t].length||delete dr[t])}function mr(e){return void 0===e.a&&(e.a=hr,hr++),e.a}function gr(e){if(!e)throw Error("Event target element must be provided!");lr.call(this),this.a=e}function yr(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function vr(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function br(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function wr(){this.g=this.a=null}a(gr,lr),gr.prototype.N=function(){return this.a},gr.prototype.register=function(){var e=mr(this.N());dr[e]?U(dr[e],this)||dr[e].push(this):dr[e]=[this]},vr.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var xr,Sr,kr=new vr(function(){return new Er},function(e){e.reset()});function Cr(){var e=Ir,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Er(){this.next=this.g=this.a=null}function Tr(e){u.setTimeout(function(){throw e},0)}function _r(e,t){Sr||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);Sr=function(){e.then(Ar)}}else Sr=function(){var e=Ar;!w(u.setImmediate)||u.Window&&u.Window.prototype&&!He("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(xr||(xr=function(){var e=u.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!He("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=C(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!He("Trident")&&!He("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(d(n.next)){var e=(n=n.next).gb;n.gb=null,e()}},function(e){r.next={gb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){u.setTimeout(e,0)}}()),xr(e)):u.setImmediate(e)}}(),Nr||(Sr(),Nr=!0),Ir.add(e,t)}wr.prototype.add=function(e,t){var n=kr.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Er.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Er.prototype.reset=function(){this.next=this.g=this.a=null};var Nr=!1,Ir=new wr;function Ar(){for(var e;e=Cr();){try{e.a.call(e.g)}catch(t){Tr(t)}br(kr,e)}Nr=!1}function Pr(e){if(this.a=Rr,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,e!=m)try{var t=this;e.call(void 0,function(e){$r(t,jr,e)},function(e){if(!(e instanceof Yr))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(n){}$r(t,Mr,e)})}catch(n){$r(this,Mr,n)}}var Rr=0,jr=2,Mr=3;function Dr(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}Dr.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Lr=new vr(function(){return new Dr},function(e){e.reset()});function Or(e,t,n){var r=Lr.get();return r.s=e,r.g=t,r.j=n,r}function Fr(e){if(e instanceof Pr)return e;var t=new Pr(m);return $r(t,jr,e),t}function Ur(e){return new Pr(function(t,n){n(e)})}function zr(e,t){if(e.a==Rr)if(e.h){var n=e.h;if(n.g){for(var r=0,i=null,s=null,a=n.g;a&&(a.h||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(s=a);i&&(n.a==Rr&&1==r?zr(n,t):(s?((r=s).next==n.j&&(n.j=r),r.next=r.next.next):qr(n),Kr(n,i,Mr,t)))}e.h=null}else $r(e,Mr,t)}function Br(e,t){e.g||e.a!=jr&&e.a!=Mr||Hr(e),e.j?e.j.next=t:e.g=t,e.j=t}function Vr(e,t,n,r){var i=Or(null,null,null);return i.a=new Pr(function(e,s){i.s=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){s(a)}}:e,i.g=n?function(t){try{var i=n.call(r,t);!d(i)&&t instanceof Yr?s(t):e(i)}catch(a){s(a)}}:s}),i.a.h=e,Br(e,i),i.a}function $r(e,t,n){if(e.a==Rr){e===n&&(t=Mr,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var r=n,i=e.hc,s=e.ic;if(r instanceof Pr){Br(r,Or(i||m,s||null,e));var a=!0}else if(yr(r))r.then(i,s,e),a=!0;else{if(x(r))try{var o=r.then;if(w(o)){!function(e,t,n,r,i){function s(e){o||(o=!0,r.call(i,e))}function a(e){o||(o=!0,n.call(i,e))}var o=!1;try{t.call(e,a,s)}catch(l){s(l)}}(r,o,i,s,e),a=!0;break e}}catch(l){s.call(e,l),a=!0;break e}a=!1}}a||(e.A=n,e.a=t,e.h=null,Hr(e),t!=Mr||n instanceof Yr||function(e,t){e.s=!0,_r(function(){e.s&&Gr.call(null,t)})}(e,n))}}function Hr(e){e.i||(e.i=!0,_r(e.Hb,e))}function qr(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function Kr(e,t,n,r){if(n==Mr&&t.g&&!t.h)for(;e&&e.s;e=e.h)e.s=!1;if(t.a)t.a.h=null,Wr(t,n,r);else try{t.h?t.s.call(t.j):Wr(t,n,r)}catch(wM){Gr.call(null,wM)}br(Lr,t)}function Wr(e,t,n){t==jr?e.s.call(e.j,n):e.g&&e.g.call(e.j,n)}Pr.prototype.then=function(e,t,n){return Vr(this,w(e)?e:null,w(t)?t:null,n)},Pr.prototype.$goog_Thenable=!0,(e=Pr.prototype).fc=function(e,t){return(e=Or(e,e,t)).h=!0,Br(this,e),this},e.Ca=function(e,t){return Vr(this,null,e,t)},e.cancel=function(e){this.a==Rr&&_r(function(){zr(this,new Yr(e))},this)},e.hc=function(e){this.a=Rr,$r(this,jr,e)},e.ic=function(e){this.a=Rr,$r(this,Mr,e)},e.Hb=function(){for(var e;e=qr(this);)Kr(this,e,this.a,this.A);this.i=!1};var Gr=Tr;function Yr(e){P.call(this,e)}function Jr(e,t,n){t||(t={}),n=n||window;var r=e instanceof yt?e:wt(void 0!==e.href?e.href:String(e));e=t.target||e.target;var i=[];for(s in t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");return(He("iPhone")&&!He("iPod")&&!He("iPad")||He("iPad")||He("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(s=n.document.createElement("A"),r=r instanceof yt?r:xt(r),s.href=vt(r),s.setAttribute("target",e),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),s.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,s),t=vt(r).toString(),n&&(Xe&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=It('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+te(t)+'">',null),n.document.write(_t(t)),n.document.close())):(n=n.open(vt(r).toString(),e,s))&&t.noopener&&(n.opener=null),n}function Qr(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(e){}return!1}function Xr(e){Jr(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function Zr(e,t){if(null==(e=x(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error(t||"Cannot find element.");return e}function ei(){return window.location.href}function ti(e){var t=hi;this.s=[],this.T=t,this.O=e||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function ni(e,t,n){e.a=!0,e.h=n,e.j=!t,ai(e)}function ri(e){if(e.a){if(!e.J)throw new oi;e.J=!1}}function ii(e,t,n){e.s.push([t,n,void 0]),e.a&&ai(e)}function si(e){return F(e.s,function(e){return w(e[1])})}function ai(e){if(e.i&&e.a&&si(e)){var t=e.i,n=ui[t];n&&(u.clearTimeout(n.a),delete ui[t]),e.i=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var r=n=!1;e.s.length&&!e.A;){var i=e.s.shift(),s=i[0],a=i[1];if(i=i[2],s=e.j?a:s)try{var o=s.call(i||e.O,t);d(o)&&(e.j=e.j&&(o==t||o instanceof Error),e.h=t=o),(yr(t)||"function"==typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.A=!0)}catch(l){t=l,e.j=!0,si(e)||(n=!0)}}e.h=t,r&&(o=C(e.L,e,!0),r=C(e.L,e,!1),t instanceof ti?(ii(t,o,r),t.l=!0):t.then(o,r)),n&&(t=new ci(t),ui[t.a]=t,e.i=t.a)}function oi(){P.call(this)}function li(){P.call(this)}function ci(e){this.a=u.setTimeout(C(this.h,this),0),this.g=e}A(Yr,P),Yr.prototype.name="cancel",ti.prototype.cancel=function(e){if(this.a)this.h instanceof ti&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(e=new li,ri(this),ni(this,!1,e))}},ti.prototype.L=function(e,t){this.A=!1,ni(this,e,t)},ti.prototype.callback=function(e){ri(this),ni(this,!0,e)},ti.prototype.then=function(e,t,n){var r,i,s=new Pr(function(e,t){r=e,i=t});return ii(this,r,function(e){e instanceof li?s.cancel():i(e)}),s.then(e,t,n)},ti.prototype.$goog_Thenable=!0,A(oi,P),oi.prototype.message="Deferred has already fired",oi.prototype.name="AlreadyCalledError",A(li,P),li.prototype.message="Deferred was canceled",li.prototype.name="CanceledError",ci.prototype.h=function(){throw delete ui[this.a],this.g};var ui={};function di(e){var t={},n=t.document||document,r=mt(e).toString(),i=document.createElement("SCRIPT"),s={rb:i,sb:void 0},a=new ti(s),o=null,l=null!=t.timeout?t.timeout:5e3;return 0<l&&(o=window.setTimeout(function(){fi(i,!0);var e=new gi(mi,"Timeout reached for loading script "+r);ri(a),ni(a,!1,e)},l),s.sb=o),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(fi(i,t.xc||!1,o),a.callback(null))},i.onerror=function(){fi(i,!0,o);var e=new gi(pi,"Error while loading script "+r);ri(a),ni(a,!1,e)},se(s=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(e,t){ne(t,function(t,n){t&&"object"==typeof t&&t.ma&&(t=t.ka()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Ut.hasOwnProperty(n)?e.setAttribute(Ut[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}(i,s),function(e,t){e.src=mt(t),null===p&&(p=(t=(t=u.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&f.test(t)?t:""),(t=p)&&e.setAttribute("nonce",t)}(i,e),function(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function hi(){if(this&&this.rb){var e=this.rb;e&&"SCRIPT"==e.tagName&&fi(e,!0,this.sb)}}function fi(e,t,n){null!=n&&u.clearTimeout(n),e.onload=m,e.onerror=m,e.onreadystatechange=m,t&&window.setTimeout(function(){Bt(e)},0)}var pi=0,mi=1;function gi(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),P.call(this,n),this.code=e}function yi(){return u.google&&u.google.accounts&&u.google.accounts.id||null}function vi(e){this.a=e||yi(),this.h=!1,this.g=null}function bi(e,t,n){return e.a&&t?(e.h=!0,new Pr(function(r){e.g=r,e.a.initialize({client_id:t,callback:r,auto_select:!n}),e.a.prompt()})):Fr(t?xi.Xa().load().then(function(){return e.a=yi(),bi(e,t,n)}).Ca(function(){return null}):null)}A(gi,P),vi.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},g(vi);var wi=new dt(ft,"https://accounts.google.com/gsi/client");function xi(){this.a=null}function Si(e,t){this.a=e,this.g=t||function(e){throw e}}function ki(e,t,n){this.reset(e,t,n,void 0,void 0)}function Ci(e){this.s=e,this.a=this.h=this.j=this.g=null}function Ei(e,t){this.name=e,this.value=t}xi.prototype.load=function(){var e=this;if(this.a)return this.a;var t=function(){var e=wi;e instanceof dt&&e.constructor===dt&&e.g===ht?e=e.a:(j("expected object of type Const, got '"+e+"'"),e="type_error:Const");var t=new pt;return t.a=e,t}();return yi()?Fr():this.a=function(){var e=null;return new Pr(function(t){"complete"==u.document.readyState?t():(e=function(){t()},Xn(window,"load",e))}).Ca(function(t){throw Zn(window,"load",e),t})}().then(function(){if(!yi())return new Pr(function(n,r){var i=setTimeout(function(){e.a=null,r(Error("Network error!"))},1e4);u.onGoogleLibraryLoad=function(){clearTimeout(i),n()},Fr(di(t)).then(function(){yi()&&n()}).Ca(function(t){clearTimeout(i),e.a=null,r(t)})})})},g(xi),Si.prototype.confirm=function(e){return Fr(this.a.confirm(e)).Ca(this.g)},ki.prototype.a=null,ki.prototype.reset=function(e,t,n,r,i){this.h=r||N(),this.j=e,this.s=t,this.g=n,delete this.a},Ei.prototype.toString=function(){return this.name};var Ti=new Ei("SEVERE",1e3),_i=new Ei("WARNING",900),Ni=new Ei("CONFIG",700);function Ii(e){return e.j?e.j:e.g?Ii(e.g):(j("Root logger has no level set."),null)}Ci.prototype.log=function(e,t,n){if(e.value>=Ii(this).value)for(w(t)&&(t=t()),e=new ki(e,String(t),this.s),n&&(e.a=n),n=this;n;){var r=n,i=e;if(r.a)for(var s=0;t=r.a[s];s++)t(i);n=n.g}};var Ai={},Pi=null;function Ri(){Pi||(Pi=new Ci(""),Ai[""]=Pi,Pi.j=Ni)}function ji(){this.a=N()}var Mi=null;function Di(e){this.j=e||"",Mi||(Mi=new ji),this.s=Mi}function Li(e){return 10>e?"0"+e:String(e)}function Oi(e){Di.call(this,e)}function Fi(){this.s=C(this.h,this),this.a=new Oi,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}ji.prototype.set=function(e){this.a=e},ji.prototype.reset=function(){this.set(N())},ji.prototype.get=function(){return this.a},Di.prototype.a=!0,Di.prototype.g=!0,Di.prototype.h=!1,A(Oi,Di),Fi.prototype.h=function(e){if(!this.j[e.g]){var t=function(e,t){var n=[];if(n.push(e.j," "),e.g){var r=new Date(t.h);n.push("[",Li(r.getFullYear()-2e3)+Li(r.getMonth()+1)+Li(r.getDate())+" "+Li(r.getHours())+":"+Li(r.getMinutes())+":"+Li(r.getSeconds())+"."+Li(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(e,t){t=(e=(e.h-t)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}(t,e.s.get()),"s] "),n.push("[",t.g,"] "),n.push(t.s),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);if(zi)!function(e,t,n,r){e[t]?e[t](n,r||""):e.log(n,r||"")}(zi,function(e){if(e){if(e.value>=Ti.value)return"error";if(e.value>=_i.value)return"warn";if(e.value>=Ni.value)return"log"}return"debug"}(e.j),t,e.a)}};var Ui,zi=u.console;function Bi(e,t){Ui&&Ui.log(Ti,e,t)}Ui=function e(t){var n;if(Ri(),!(n=Ai[t])){n=new Ci(t);var r=t.lastIndexOf("."),i=t.substr(r+1);(r=e(t.substr(0,r))).h||(r.h={}),r.h[i]=n,n.g=r,Ai[t]=n}return n}("firebaseui");var Vi=new Fi;if(1!=Vi.g){var $i;Ri(),$i=Pi;var Hi=Vi.s;$i.a||($i.a=[]),$i.a.push(Hi),Vi.g=!0}function qi(e){Ui&&Ui.log(_i,e,void 0)}function Ki(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function Wi(e){e=(e.a.cookie||"").split(";");for(var t,n,r=[],i=[],s=0;s<e.length;s++)-1==(t=(n=K(e[s])).indexOf("="))?(r.push(""),i.push(n)):(r.push(n.substring(0,t)),i.push(n.substring(t+1)));return{keys:r,values:i}}(e=Ki.prototype).set=function(e,t,n,r,i,s){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');d(n)||(n=-1),i=i?";domain="+i:"",r=r?";path="+r:"",s=s?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(N()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+i+r+n+s},e.get=function(e,t){for(var n,r=e+"=",i=(this.a.cookie||"").split(";"),s=0;s<i.length;s++){if(0==(n=K(i[s])).lastIndexOf(r,0))return n.substr(r.length);if(n==e)return""}return t},e.ja=function(){return Wi(this).keys},e.la=function(){return Wi(this).values},e.clear=function(){for(var e=Wi(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var Gi=new Ki;function Yi(){}function Ji(e,t,n,r){this.h=null!=e?e:-1,this.g=t||null,this.a=n||null,this.j=!!r}function Qi(e,t){this.g=e,this.a=t||null}function Xi(e){return{email:e.g,credential:e.a&&e.a.toJSON()}}function Zi(e){if(e&&e.email){var t=e.credential&&pl.auth.AuthCredential.fromJSON(e.credential);return new Qi(e.email,t)}return null}function es(e){this.a=e||null}function ts(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t}function ns(e){return O(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}function rs(e){for(this.i=e,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(is*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.i[4*e],this.i[4*e+1],this.i[4*e+2],this.i[4*e+3]];var t=Array(4);for(e=this.g;e<is*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,ds(t),t[0]^=ps[e/this.g][0],t[1]^=ps[e/this.g][1],t[2]^=ps[e/this.g][2],t[3]^=ps[e/this.g][3]}else 6<this.g&&4==e%this.g&&ds(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}a(Ji,Yi),Ji.prototype.set=function(e,t){Gi.set(e,t,this.h,this.g,this.a,this.j)},Ji.prototype.get=function(e){return Gi.get(e)||null},Ji.prototype.ra=function(e){var t=this.g,n=this.a;Gi.get(e),Gi.set(e,"",0,t,n)},rs.prototype.A=16;var is=rs.prototype.A/4;function ss(e,t){for(var n,r=0;r<is;r++)for(var i=0;4>i;i++)n=t[n=4*i+r],e.h[r][i]=n}function as(e){for(var t=[],n=0;n<is;n++)for(var r=0;4>r;r++)t[4*r+n]=e.h[n][r];return t}function os(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]^=e.a[4*t+r][n]}function ls(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]=t[e.h[n][r]]}function cs(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][(n+t)%is]}function us(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][(n+t)%is]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][n]}function ds(e){e[0]=hs[e[0]],e[1]=hs[e[1]],e[2]=hs[e[2]],e[3]=hs[e[3]]}var hs=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],fs=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ps=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],ms=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],gs=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],ys=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],vs=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],bs=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],ws=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function xs(e,t){e=new rs(ks(e));for(var n,r=(t=ts(t)).splice(0,16),i="";r.length;){n=16-r.length;for(var s=0;s<n;s++)r.push(0);for(ss(n=e,r),os(n,0),r=1;r<n.j;++r){ls(n,hs),cs(n),s=n.h;for(var a=n.s[0],o=0;4>o;o++)a[0]=s[0][o],a[1]=s[1][o],a[2]=s[2][o],a[3]=s[3][o],s[0][o]=ms[a[0]]^gs[a[1]]^a[2]^a[3],s[1][o]=a[0]^ms[a[1]]^gs[a[2]]^a[3],s[2][o]=a[0]^a[1]^ms[a[2]]^gs[a[3]],s[3][o]=gs[a[0]]^a[1]^a[2]^ms[a[3]];os(n,r)}ls(n,hs),cs(n),os(n,n.j),i+=ns(as(n)),r=t.splice(0,16)}return i}function Ss(e,t){e=new rs(ks(e));for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substring(r,r+2),16));var i=n.splice(0,16);for(t="";i.length;){for(ss(r=e,i),os(r,r.j),i=1;i<r.j;++i){us(r),ls(r,fs),os(r,r.j-i);for(var s=r.h,a=r.s[0],o=0;4>o;o++)a[0]=s[0][o],a[1]=s[1][o],a[2]=s[2][o],a[3]=s[3][o],s[0][o]=ws[a[0]]^vs[a[1]]^bs[a[2]]^ys[a[3]],s[1][o]=ys[a[0]]^ws[a[1]]^vs[a[2]]^bs[a[3]],s[2][o]=bs[a[0]]^ys[a[1]]^ws[a[2]]^vs[a[3]],s[3][o]=vs[a[0]]^bs[a[1]]^ys[a[2]]^ws[a[3]]}if(us(r),ls(r,fs),os(r,0),8192>=(r=as(r)).length)r=String.fromCharCode.apply(null,r);else{for(i="",s=0;s<r.length;s+=8192)i+=String.fromCharCode.apply(null,q(r,s,s+8192));r=i}t+=r,i=n.splice(0,16)}return t.replace(/(\x00)+$/,"")}function ks(e){for(var t=32-(e=ts(e.substring(0,32))).length,n=0;n<t;n++)e.push(0);return e}function Cs(e){var t=[];return Ts(new Es,e,t),t.join("")}function Es(){}function Ts(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(v(t)){var r=t;t=r.length,n.push("[");for(var i="",s=0;s<t;s++)n.push(i),Ts(e,r[s],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(s=t[r])&&(n.push(i),Is(r,n),n.push(":"),Ts(e,s,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Is(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}var _s={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ns=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Is(e,t){t.push('"',e.replace(Ns,function(e){var t=_s[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),_s[e]=t),t}),'"')}function As(e){this.a=e}function Ps(){}function Rs(e){this.a=e}function js(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(t){return!1}}function Ms(){var e=null;try{e=window.localStorage||null}catch(t){}this.a=e}function Ds(){var e=null;try{e=window.sessionStorage||null}catch(t){}this.a=e}function Ls(e,t){this.g=e,this.a=t+"::"}As.prototype.set=function(e,t){d(t)?this.a.set(e,Cs(t)):this.a.ra(e)},As.prototype.get=function(e){try{var t=this.a.get(e)}catch(n){return}if(null!==t)try{return JSON.parse(t)}catch(r){throw"Storage: Invalid value was encountered"}},A(Ps,Yi),Ps.prototype.clear=function(){var e=ce(this.ha(!0)),t=this;D(e,function(e){t.ra(e)})},A(Rs,Ps),(e=Rs.prototype).set=function(e,t){try{this.a.setItem(e,t)}catch(n){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},e.get=function(e){if(!h(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},e.ra=function(e){this.a.removeItem(e)},e.ha=function(e){var t=0,n=this.a,r=new oe;return r.next=function(){if(t>=n.length)throw ae;var r=n.key(t++);if(e)return r;if(!h(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},e.clear=function(){this.a.clear()},e.key=function(e){return this.a.key(e)},A(Ms,Rs),A(Ds,Rs),A(Ls,Ps),Ls.prototype.set=function(e,t){this.g.set(this.a+e,t)},Ls.prototype.get=function(e){return this.g.get(this.a+e)},Ls.prototype.ra=function(e){this.g.ra(this.a+e)},Ls.prototype.ha=function(e){var t=this.g.ha(!0),n=this,r=new oe;return r.next=function(){for(var r=t.next();r.substr(0,n.a.length)!=n.a;)r=t.next();return e?r.substr(n.a.length):n.g.get(r)},r},js(new Ms);var Os=new Ds,Fs=new As(js(Os)?new Ls(Os,"firebaseui"):null),Us={name:"pendingEmailCredential",storage:Fs},zs={name:"redirectStatus",storage:Fs},Bs={name:"redirectUrl",storage:Fs},Vs={name:"emailForSignIn",storage:new As(new Ji(3600,"/"))},$s={name:"pendingEncryptedCredential",storage:new As(new Ji(3600,"/"))};function Hs(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function qs(e,t){e.storage.a.ra(t?e.name+":"+t:e.name)}function Ks(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function Ws(e){return Hs(Bs,e)||null}function Gs(e){return Zi(e=Hs(Us,e)||null)}function Ys(e){qs(Us,e)}function Js(e,t){Ks(Us,Xi(e),t)}function Qs(e){return(e=Hs(zs,e)||null)&&void 0!==e.tenantId?new es(e.tenantId):null}function Xs(){this.W={}}function Zs(e,t,n){if(t.toLowerCase()in e.W)throw Error("Configuration "+t+" has already been defined.");e.W[t.toLowerCase()]=n}function ea(e,t,n){if(!(t.toLowerCase()in e.W))throw Error("Configuration "+t+" is not defined.");e.W[t.toLowerCase()]=n}function ta(e,t){if(!(e=e.get(t)))throw Error("Configuration "+t+" is required.");return e}function na(){this.g=void 0,this.a={}}function ra(e,t,n,r){for(var i=0;i<t.length;i++){var s=t.charAt(i);e.a[s]||(e.a[s]=new na),e=e.a[s]}if(r&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function ia(e,t){for(var n in void 0!==e.g&&t.push(e.g),e.a)ia(e.a[n],t)}function sa(e,t,n){for(var r in void 0!==e.g&&n.push(t),e.a)sa(e.a[r],t+r,n)}function aa(e){for(this.a=e,this.g=new na,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function oa(e,t){var n={},r=0;for(void 0!==(e=e.g).g&&(n[r]=e.g);r<t.length;r++){var i=t.charAt(r);if(!(i in e.a))break;void 0!==(e=e.a[i]).g&&(n[r]=e.g)}for(var s in n)if(n.hasOwnProperty(s))return n[s];return[]}function la(e){for(var t=0;t<ha.length;t++)if(ha[t].c===e)return ha[t];return null}function ca(e){e=e.toUpperCase();for(var t=[],n=0;n<ha.length;n++)ha[n].f===e&&t.push(ha[n]);return t}function ua(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<ha.length;n++)ha[n].b==e&&t.push(ha[n]);e=t}else e=ca(e);return e}function da(e){e.sort(function(e,t){return e.name.localeCompare(t.name,"en")})}Xs.prototype.get=function(e){if(!(e.toLowerCase()in this.W))throw Error("Configuration "+e+" is not defined.");return this.W[e.toLowerCase()]},(e=na.prototype).set=function(e,t){ra(this,e,t,!1)},e.add=function(e,t){ra(this,e,t,!0)},e.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(!(t=t.a[e.charAt(n)])){e=void 0;break e}e=t}return e?e.g:void 0},e.la=function(){var e=[];return ia(this,e),e},e.ja=function(){var e=[];return sa(this,"",e),e},e.clear=function(){this.a={},this.g=void 0};var ha=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Cte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Runion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthlemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"So Tom and Prncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];da(ha);var fa=new aa(ha);function pa(e,t){this.a=e,this.Aa=t}function ma(e){e=K(e);var t=oa(fa,e);return 0<t.length?new pa("1"==t[0].b?"1-US-0":t[0].c,K(e.substr(t[0].b.length+1))):null}function ga(e){var t=la(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.Aa}function ya(e,t){for(var n=0;n<e.length;n++)if(!U(va,e[n])&&(null!==ba&&e[n]in ba||U(t,e[n])))return e[n];return null}var va=["emailLink","password","phone"],ba={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function wa(){this.a=new Xs,Zs(this.a,"autoUpgradeAnonymousUsers"),Zs(this.a,"callbacks"),Zs(this.a,"credentialHelper",Ya),Zs(this.a,"immediateFederatedRedirect",!1),Zs(this.a,"popupMode",!1),Zs(this.a,"privacyPolicyUrl"),Zs(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),Zs(this.a,"queryParameterForWidgetMode","mode"),Zs(this.a,"signInFlow"),Zs(this.a,"signInOptions"),Zs(this.a,"signInSuccessUrl"),Zs(this.a,"siteName"),Zs(this.a,"tosUrl"),Zs(this.a,"widgetUrl"),Zs(this.a,"adminRestrictedOperation")}function xa(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!Va(e)&&Bi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function Sa(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var r=e[n];(r=x(r)?r:{provider:r}).provider&&t.push(r)}return t}function ka(e,t){e=Sa(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function Ca(e){return Sa(e).map(function(e){return e.provider})}function Ea(e,t){e=Ta(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function Ta(e){return Sa(e).map(function(e){if(ba[e.provider]||U(eo,e.provider)){for(var t in e={providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?vt(wt(e.iconUrl)).toString():null})null===e[t]&&delete e[t];return e}return{providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?vt(wt(e.iconUrl)).toString():null,Ob:e.loginHintKey||null}})}function _a(e){var t,n=ka(e,pl.auth.GoogleAuthProvider.PROVIDER_ID);if(t=n&&n.clientId){e:{if("http:"===(window.location&&window.location.protocol)||"https:"===(window.location&&window.location.protocol))for(r in e=e.a.get("credentialHelper"),Ja)if(Ja[r]===e){var r=Ja[r];break e}r=Ya}t=r===Ga}return t&&n.clientId||null}function Na(e){return!!((e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.status)}function Ia(e){return!(!(e=e.a.get("adminRestrictedOperation")||null)||!e.status)}function Aa(e,t){return e=(e=ka(e,t))&&e.scopes,Array.isArray(e)?e:[]}function Pa(e,t){return x(e=(e=ka(e,t))&&e.customParameters)?(e=re(e),t===pl.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===pl.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function Ra(e){if(!(e=ka(e,pl.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if(void 0!==t&&(!Array.isArray(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return ha;if(e=[],t){n={};for(var r=0;r<t.length;r++)for(var i=ua(t[r]),s=0;s<i.length;s++)n[i[s].c]=i[s];for(var a in n)n.hasOwnProperty(a)&&e.push(n[a])}else{for(a={},t=0;t<n.length;t++)for(i=ua(n[t]),r=0;r<i.length;r++)a[i[r].c]=i[r];for(i=0;i<ha.length;i++)null!==a&&ha[i].c in a||e.push(ha[i])}return e}function ja(e){return ta(e.a,"queryParameterForWidgetMode")}function Ma(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&qi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"==typeof t)return t;if("string"==typeof t)return function(){Xr(t)}}return null}function Da(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&qi("Term of Service URL is missing, the link will not be displayed."),t&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){Xr(n)}}return null}function La(e){return!(e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))||void 0===e.requireDisplayName||!!e.requireDisplayName}function Oa(e){return!(!(e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==pl.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function Fa(e){var t=!!e.a.get("immediateFederatedRedirect"),n=Ca(e);return e=Ua(e),t&&1==n.length&&!U(va,n[0])&&e==Qa}function Ua(e){for(var t in e=e.a.get("signInFlow"),Xa)if(Xa[t]==e)return Xa[t];return Qa}function za(e){return $a(e).signInSuccess||null}function Ba(e){return $a(e).signInSuccessWithAuthResult||null}function Va(e){return $a(e).signInFailure||null}function $a(e){return e.a.get("callbacks")||{}}var Ha,qa,Ka,Wa,Ga="googleyolo",Ya="none",Ja={nc:Ga,NONE:Ya},Qa="redirect",Xa={qc:"popup",rc:Qa},Za={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},eo=["anonymous"],to=["sitekey","tabindex","callback","expired-callback"],no={};function ro(e,t,n,r){no[e].apply(null,Array.prototype.slice.call(arguments,1))}function io(e){return e.classList?e.classList:h(e=e.className)&&e.match(/\S+/g)||[]}function so(e,t){return e.classList?e.classList.contains(t):U(io(e),t)}function ao(e,t){e.classList?e.classList.add(t):so(e,t)||(e.className+=0<e.className.length?" "+t:t)}function oo(e,t){e.classList?e.classList.remove(t):so(e,t)&&(e.className=L(io(e),function(e){return e!=t}).join(" "))}function lo(e){var t=e.type;switch(h(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(t=e.selectedIndex)?e.options[t].value:null;case"select-multiple":t=[];for(var n,r=0;n=e.options[r];r++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function co(e,t){var n=e.type;switch(h(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,h(t))for(var r=0;n=e.options[r];r++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(h(t)&&(t=[t]),r=0;n=e.options[r];r++)if(n.selected=!1,t)for(var i,s=0;i=t[s];s++)n.value==i&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function uo(e,t,n,r,i,s){if(et&&!ct("525"))return!0;if(nt&&i)return ho(e);if(i&&!r)return!1;if(!Ze&&("number"==typeof t&&(t=fo(t)),(!n||nt)&&(17==t||18==t||nt&&91==t)||nt&&16==t&&(r||s)))return!1;if((et||Qe)&&r&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Je&&r&&t==e)return!1;switch(e){case 13:return!Ze||!s&&!i&&!(n&&r);case 27:return!(et||Qe||Ze)}return(!Ze||!(r||i||s))&&ho(e)}function ho(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(et||Qe)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return Ze;default:return!1}}function fo(e){if(Ze)e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e);else if(nt&&et&&93===e)e=91;return e}function po(e){lr.call(this),this.a=e,Jn(e,"keydown",this.g,!1,this),Jn(e,"click",this.h,!1,this)}function mo(e,t){var n=new yo(t);if(cr(e,n)){n=new go(t);try{cr(e,n)}finally{t.stopPropagation()}}}function go(e){Un.call(this,e.a),this.type="action"}function yo(e){Un.call(this,e.a),this.type="beforeaction"}function vo(e){lr.call(this),this.a=e,e=Je?"focusout":"blur",this.g=Jn(this.a,Je?"focusin":"focus",this,!Je),this.h=Jn(this.a,e,this,!Je)}function bo(e,t){lr.call(this),this.g=e||1,this.a=t||u,this.h=C(this.gc,this),this.j=N()}function wo(e){e.Ka=!1,e.aa&&(e.a.clearTimeout(e.aa),e.aa=null)}function xo(e){Pn.call(this),this.g=e,this.a={}}A(po,lr),po.prototype.g=function(e){(13==e.keyCode||et&&3==e.keyCode)&&mo(this,e)},po.prototype.h=function(e){mo(this,e)},po.prototype.o=function(){po.K.o.call(this),Zn(this.a,"keydown",this.g,!1,this),Zn(this.a,"click",this.h,!1,this),delete this.a},A(go,Un),A(yo,Un),A(vo,lr),vo.prototype.handleEvent=function(e){var t=new Un(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",cr(this,t)},vo.prototype.o=function(){vo.K.o.call(this),er(this.g),er(this.h),delete this.a},A(bo,lr),(e=bo.prototype).Ka=!1,e.aa=null,e.gc=function(){if(this.Ka){var e=N()-this.j;0<e&&e<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-e):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),cr(this,"tick"),this.Ka&&(wo(this),this.start()))}},e.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=N())},e.o=function(){bo.K.o.call(this),wo(this),delete this.a},A(xo,Pn);var So=[];function ko(e,t,n,r){v(n)||(n&&(So[0]=n.toString()),n=So);for(var i=0;i<n.length;i++){var s=Jn(t,n[i],r||e.handleEvent,!1,e.g||e);if(!s)break;e.a[s.key]=s}}function Co(e){ne(e.a,function(e,t){this.a.hasOwnProperty(t)&&er(e)},e),e.a={}}function Eo(e){lr.call(this),this.a=null,this.g=e,e=Je||Qe||et&&!ct("531")&&"TEXTAREA"==e.tagName,this.h=new xo(this),ko(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function To(e){null!=e.a&&(u.clearTimeout(e.a),e.a=null)}function _o(e){return(e=new Un(e.a)).type="input",e}function No(e,t){lr.call(this),e&&(this.Oa&&jo(this),this.qa=e,this.Na=Jn(this.qa,"keypress",this,t),this.Ya=Jn(this.qa,"keydown",this.Jb,t,this),this.Oa=Jn(this.qa,"keyup",this.Kb,t,this))}xo.prototype.o=function(){xo.K.o.call(this),Co(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},A(Eo,lr),Eo.prototype.handleEvent=function(e){if("input"==e.type)Je&&ct(10)&&0==e.keyCode&&0==e.j||(To(this),cr(this,_o(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(ho(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!Ze;default:return 166>e.keyCode||183<e.keyCode}}(e)){var t="keydown"==e.type?this.g.value:null;Je&&229==e.keyCode&&(t=null);var n=_o(e);To(this),this.a=function(e,t){if(w(e))t&&(e=C(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(0)?-1:u.setTimeout(e,0)}(function(){this.a=null,this.g.value!=t&&cr(this,n)},this)}},Eo.prototype.o=function(){Eo.K.o.call(this),this.h.m(),To(this),delete this.g},A(No,lr),(e=No.prototype).qa=null,e.Na=null,e.Ya=null,e.Oa=null,e.R=-1,e.X=-1,e.Ua=!1;var Io={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ao={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Po=!et||ct("525"),Ro=nt&&Ze;function jo(e){e.Na&&(er(e.Na),er(e.Ya),er(e.Oa),e.Na=null,e.Ya=null,e.Oa=null),e.qa=null,e.R=-1,e.X=-1}function Mo(e,t,n,r){Un.call(this,r),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function Do(e,t,n,r){this.top=e,this.right=t,this.bottom=n,this.left=r}function Lo(e,t){var n=Vt(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""}function Oo(e){try{var t=e.getBoundingClientRect()}catch(n){return{left:0,top:0,right:0,bottom:0}}return Je&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function Fo(e){var t=Vt(e),n=new jt(0,0),r=t?Vt(t):document;return e==(r=!Je||9<=Number(ot)||"CSS1Compat"==Dt(r).a.compatMode?r.documentElement:r.body)||(e=Oo(e),t=zt(r=Dt(t).a),r=r.parentWindow||r.defaultView,t=Je&&ct("10")&&r.pageYOffset!=t.scrollTop?new jt(t.scrollLeft,t.scrollTop):new jt(r.pageXOffset||t.scrollLeft,r.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g),n}(e=No.prototype).Jb=function(e){(et||Qe)&&(17==this.R&&!e.ctrlKey||18==this.R&&!e.altKey||nt&&91==this.R&&!e.metaKey)&&(this.X=this.R=-1),-1==this.R&&(e.ctrlKey&&17!=e.keyCode?this.R=17:e.altKey&&18!=e.keyCode?this.R=18:e.metaKey&&91!=e.keyCode&&(this.R=91)),Po&&!uo(e.keyCode,this.R,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.X=fo(e.keyCode),Ro&&(this.Ua=e.altKey))},e.Kb=function(e){this.X=this.R=-1,this.Ua=e.altKey},e.handleEvent=function(e){var t=e.a,n=t.altKey;if(Je&&"keypress"==e.type)var r=this.X,i=13!=r&&27!=r?t.keyCode:0;else(et||Qe)&&"keypress"==e.type?(r=this.X,i=0<=t.charCode&&63232>t.charCode&&ho(r)?t.charCode:0):Ye&&!et?i=ho(r=this.X)?t.keyCode:0:("keypress"==e.type?(Ro&&(n=this.Ua),t.keyCode==t.charCode?32>t.keyCode?(r=t.keyCode,i=0):(r=this.X,i=t.charCode):(r=t.keyCode||this.X,i=t.charCode||0)):(r=t.keyCode||this.X,i=t.charCode||0),nt&&63==i&&224==r&&(r=191));var s=r=fo(r);r?63232<=r&&r in Io?s=Io[r]:25==r&&e.shiftKey&&(s=9):t.keyIdentifier&&t.keyIdentifier in Ao&&(s=Ao[t.keyIdentifier]),Ze&&Po&&"keypress"==e.type&&!uo(s,this.R,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=s==this.R,this.R=s,(t=new Mo(s,i,e,t)).altKey=n,cr(this,t))},e.N=function(){return this.qa},e.o=function(){No.K.o.call(this),jo(this)},A(Mo,Un),Do.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Do.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Do.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Do.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Uo={thin:2,medium:4,thick:6};function zo(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in Uo)e=Uo[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=r,e=+n}return e}function Bo(){}function Vo(e){lr.call(this),this.s=e||Dt(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function $o(e,t){return e.g?Ot(t,e.g||e.s.a):null}function Ho(e){return e.L||(e.L=new xo(e)),e.L}function qo(e,t){e.Ea&&D(e.Ea,t,void 0)}function Ko(e,t){var n=Ht(e,"firebaseui-textfield");t?(oo(e,"firebaseui-input-invalid"),ao(e,"firebaseui-input"),n&&oo(n,"firebaseui-textfield-invalid")):(oo(e,"firebaseui-input"),ao(e,"firebaseui-input-invalid"),n&&ao(n,"firebaseui-textfield-invalid"))}function Wo(e,t,n){Rn(e,E(jn,t=new Eo(t))),ko(Ho(e),t,"input",n)}function Go(e,t,n){Rn(e,E(jn,t=new No(t))),ko(Ho(e),t,"key",function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))})}function Yo(e,t,n){Rn(e,E(jn,t=new po(t))),ko(Ho(e),t,"action",function(e){e.stopPropagation(),e.preventDefault(),n(e)})}function Jo(e){ao(e,"firebaseui-hidden")}function Qo(e,t){t&&$t(e,t),oo(e,"firebaseui-hidden")}function Xo(e){return!so(e,"firebaseui-hidden")&&"none"!=e.style.display}function Zo(e){var t=(e=e||{}).email,n=e.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return r=e.wc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+un(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',an(r)}function el(e){var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=(e=(e=e||{}).label)?t+tn(e):t+"Next",an(t+"</button>")}function tl(){var e=""+el({label:ln("Sign In")});return an(e)}function nl(){var e=""+el({label:ln("Save")});return an(e)}function rl(){var e=""+el({label:ln("Continue")});return an(e)}function il(e){var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return t=(e=(e=e||{}).label)?t+tn(e):t+"Choose password",an(t+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function sl(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return an((e={}.current?e+"Current password":e+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function al(){return an('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function ol(e){var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=(e=(e=e||{}).label)?t+tn(e):t+"Cancel",an(t+"</button>")}function ll(e){var t="";return e.F&&e.D&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),an(t)}function cl(e){var t="";return e.F&&e.D&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),an(t)}function ul(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+tn(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',an(e)}function dl(e){var t=e.content;return e=e.Ab,an('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+un(e):"")+'">'+tn(t)+"</dialog>")}function hl(e){var t=e.message;return an(dl({content:cn('<div class="firebaseui-dialog-icon-wrapper"><div class="'+un(e.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+tn(t)+"</div>")}))}function fl(e){for(var t='<div class="firebaseui-list-box-actions">',n=(e=e.items).length,r=0;r<n;r++){var i=e[r];t+='<button type="button" data-listboxid="'+un(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+un(i.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+tn(i.label)+"</div></button>"}return t=""+dl({Ab:ln("firebaseui-list-box-dialog"),content:cn(t+"</div>")}),an(t)}function ml(e){return an((e=e||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function gl(e,t){return sn((e=(e=e||{}).ga).S?e.S:t.hb[e.providerId]?""+t.hb[e.providerId]:e.providerId&&0==e.providerId.indexOf("saml.")||e.providerId&&0==e.providerId.indexOf("oidc.")?e.providerId.substring(5):""+e.providerId)}function yl(e){wl(e,"upgradeElement")}function vl(e){wl(e,"downgradeElements")}g(Bo),Bo.prototype.a=0,A(Vo,lr),(e=Vo.prototype).Lb=Bo.Xa(),e.N=function(){return this.g},e.Za=function(e){if(this.Y&&this.Y!=e)throw Error("Method not supported");Vo.K.Za.call(this,e)},e.kb=function(){this.g=this.s.a.createElement("DIV")},e.render=function(e){if(this.na)throw Error("Component already rendered");this.g||this.kb(),e?e.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},e.v=function(){this.na=!0,qo(this,function(e){!e.na&&e.N()&&e.v()})},e.ya=function(){qo(this,function(e){e.na&&e.ya()}),this.L&&Co(this.L),this.na=!1},e.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),qo(this,function(e){e.m()}),this.g&&Bt(this.g),this.Y=this.g=this.oa=this.Ea=null,Vo.K.o.call(this)},e.removeChild=function(e,t){if(e){var n=h(e)?e:e.cb||(e.cb=":"+(e.Lb.a++).toString(36));if(this.oa&&n?e=(null!==(e=this.oa)&&n in e?e[n]:void 0)||null:e=null,n&&e){var r=this.oa;if(n in r&&delete r[n],z(this.Ea,e),t&&(e.ya(),e.g&&Bt(e.g)),null==(t=e))throw Error("Unable to set parent component");t.Y=null,Vo.K.Za.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},ul.a="firebaseui.auth.soy2.element.infoBar",hl.a="firebaseui.auth.soy2.element.progressDialog",fl.a="firebaseui.auth.soy2.element.listBoxDialog",ml.a="firebaseui.auth.soy2.element.busyIndicator";var bl=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function wl(e,t){e&&window.componentHandler&&window.componentHandler[t]&&bl.forEach(function(n){so(e,n)&&window.componentHandler[t](e),D(Lt(n,e),function(e){window.componentHandler[t](e)})})}function xl(e,t,n){if(Sl.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),yl(e),t&&Yo(this,e,function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&Sl.call(this)}),!n){var r=this.N().parentElement||this.N().parentNode;if(r){var i=this;this.da=function(){if(e.open){var t=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,s=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,o=e.getBoundingClientRect().width,l=r.getBoundingClientRect().width;e.style.top=(s+(n-t)/2).toString()+"px",t=a+(l-o)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-o).toString()+"px"}else window.removeEventListener("resize",i.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Sl(){var e=kl.call(this);e&&(vl(e),e.open&&e.close(),Bt(e),this.da&&window.removeEventListener("resize",this.da))}function kl(){return Ot("firebaseui-id-dialog")}function Cl(){Bt(El.call(this))}function El(){return $o(this,"firebaseui-id-info-bar")}function Tl(){return $o(this,"firebaseui-id-dismiss-info-bar")}var _l={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Nl(e,t,n){for(var r in Fn.call(this,e,t),n)this[r]=n[r]}function Il(e,t,n,r,i){Vo.call(this,n),this.fb=e,this.eb=t,this.Fa=!1,this.Ga=r||null,this.A=this.ca=null,this.Z=re(_l),se(this.Z,i||{})}function Al(e){return e.N().parentElement||e.N().parentNode}function Pl(e,t,n){Go(e,t,function(){n.focus()})}function Rl(e,t,n){Go(e,t,function(){n()})}function jl(e,t,n){t=(e=e||{}).Va;var r=e.ia;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Zo(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?ol(null):"")+el(null)+'</div></div><div class="firebaseui-card-footer">'+(r?cl(n):ll(n))+"</div></form></div>",an(e)}function Ml(e,t,n){return t=(e=e||{}).ia,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+Zo(e)+sl()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+al()+'</div><div class="firebaseui-form-actions">'+tl()+'</div></div><div class="firebaseui-card-footer">'+(t?cl(n):ll(n))+"</div></form></div>",an(e)}function Dl(e,t,n){var r=(e=e||{}).Tb;t=e.Ta;var i=e.ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+Zo(e);return r?(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+un(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=an(e)):e="",n=s+e+il(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?ol(null):"")+nl()+'</div></div><div class="firebaseui-card-footer">'+(i?cl(n):ll(n))+"</div></form></div>",an(n)}function Ll(e,t,n){return t=(e=e||{}).Ta,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+Zo(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?ol(null):"")+el({label:ln("Send")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(e)}function Ol(e,t,n){t=e.G;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+tn(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',t&&(r+='<div class="firebaseui-form-actions">'+el({label:ln("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+ll(n)+"</div></div>",an(r)}function Fl(e,t,n){return an('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+ml(null)+"</div></div>")}function Ul(e,t,n){return an('<div class="firebaseui-container firebaseui-id-page-spinner">'+ml({tb:!0})+"</div>")}function zl(){return an('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Bl(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+tn(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+an('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+ol({label:ln("Back")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Vl(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+an('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+ol({label:ln("Back")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(e)}function $l(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+Zo(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol(null)+el(null)+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(e)}function Hl(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol({label:ln("Dismiss")})+"</div></div></div>";return an(e)}function ql(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol({label:ln("Dismiss")})+"</div></div></div>";return an(e)}function Kl(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="Youve already used <strong>"+tn(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+sl()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+al()+'</div><div class="firebaseui-form-actions">'+tl()+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Wl(e,t,n){var r=e.email;return t="",e=ln(e=""+gl(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="Youve already used <strong>"+tn(r)+"</strong>. You can connect your <strong>"+tn(e)+"</strong> account with <strong>"+tn(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+tn(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+tl()+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Gl(e,t,n){t="";var r=""+gl(e,n);return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+tn(r=ln(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+tn(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+rl()+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Yl(e,t,n){var r=e.email;return t="",e=ln(e=""+gl(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="Youve already used <strong>"+tn(r)+"</strong>. Sign in with "+tn(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+el({label:ln("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Jl(e,t,n){var r=(e=e||{}).kc;t=e.yb,e=e.Eb;var i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return r?i+=r="<strong>"+tn(r)+"</strong> is not authorized to view the requested page.":i+="User is not authorized to view the requested page.",i+="</p>",t&&(i+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(t="Please contact <strong>"+tn(t)+"</strong> for authorization.")+"</p>"),i+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',e&&(i+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),i+='</div><div class="firebaseui-form-actions">'+ol({label:ln("Back")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(i)}function Ql(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+tn(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol(null)+el({label:ln("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function Xl(e){var t="";return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+tn(e.email)+"</strong></p>")+il(function(e){function t(){}var n={label:ln("New password")};for(var r in t.prototype=e,e=new t,n)e[r]=n[r];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+nl()+"</div></div></form></div>",an(t)}function Zl(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function ec(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function tc(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+tn(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didnt ask to change your sign-in email, its possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></form></div>",an(n)}function nc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still cant reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function rc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function ic(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function sc(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="You can now sign in with your new email <strong>"+tn(e.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(n)}function ac(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function oc(e){var t=e.factorId,n=e.phoneNumber;e=e.G;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';if("phone"===t)r+=t="The <strong>"+tn(t)+" "+tn(n)+"</strong> was removed as a second authentication step.";else r+="The device or app was removed as a second authentication step.";return r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></form></div>",an(r)}function lc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+rl()+"</div>":"")+"</div></div>",an(e)}function cc(e){var t=e.zb;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+tn(e.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',t&&(e+=el({label:ln("Retry")})),an(e+"</div></div></div>")}function uc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+tn(e.errorMessage)+"</p></div></div>",an(e)}function dc(e,t,n){var r=e.Qb;return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+tn(e.jc)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+tn(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol(null)+el({label:ln("Continue")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form></div>",an(t)}function hc(e,t,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';t=(e=e.Sb).length;for(var i=0;i<t;i++){var s={ga:e[i]},a=n,o=(s=s||{}).ga,l=s,c="";switch((l=l||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}l=(l='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+un(sn(c))+' firebaseui-id-idp-button" data-provider-id="'+un(o.providerId)+'" style="background-color:')+un(hn(sn((c=(c=(c=s)||{}).ga).ta?c.ta:a.wa[c.providerId]?""+a.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+a.wa.saml:0==c.providerId.indexOf("oidc.")?""+a.wa.oidc:""+a.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var u=s;c=a,u=(u=u||{}).ga,c=on(u.za?dn(u.za):c.xa[u.providerId]?dn(c.xa[u.providerId]):0==u.providerId.indexOf("saml.")?dn(c.xa.saml):0==u.providerId.indexOf("oidc.")?dn(c.xa.oidc):dn(c.xa.password)),l=l+un(dn(c))+'"></span>',"password"==o.providerId?(l+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',o.V?l+=tn(o.V):o.S?l+=s="Sign in with "+tn(gl(s,a)):l+="Sign in with email",l+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',l=o.S?l+tn(o.S):l+"Email",l+="</span>"):"phone"==o.providerId?(l+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',o.V?l+=tn(o.V):o.S?l+=s="Sign in with "+tn(gl(s,a)):l+="Sign in with phone",l+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',l=o.S?l+tn(o.S):l+"Phone",l+="</span>"):"anonymous"==o.providerId?(l+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',o.V?l+=tn(o.V):o.S?l+=s="Sign in with "+tn(gl(s,a)):l+="Continue as guest",l+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',l=o.S?l+tn(o.S):l+"Guest",l+="</span>"):(l+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',o.V?l+=tn(o.V):l+=c="Sign in with "+tn(gl(s,a)),l+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(o.S?tn(o.S):tn(gl(s,a)))+"</span>"),r+='<li class="firebaseui-list-item">'+(o=an(l+"</button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+cl(n)+"</div></div>",an(r)}function fc(e,t,n){var r,i=(e=e||{}).Gb,s=e.Va;return t=e.ia,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+un(null!=(e=(e=e||{}).Aa)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+an(e))+(r=i?an('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(s?ol(null):"")+el({label:ln("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.F&&n.D?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=an(t+"</p>")):n=an('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+ll(n),an(r+n+"</div></form></div>")}function pc(e,t,n){var r="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+tn(t=(e=e||{}).phoneNumber)+"</a>",tn(t),t=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(r=an('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ol(null)+el({label:ln("Continue")})+'</div></div><div class="firebaseui-card-footer">'+ll(n)+"</div></form>",e=an('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),an(t+(n+e+"</div>"))}function mc(){return an('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function gc(e,t,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';t=(e=e.ec).length;for(var i=0;i<t;i++){var s=e[i],a="",o=tn(s.displayName),l=s.tenantId?s.tenantId:"top-level-project";a+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+un(l=ln(l))+' firebaseui-id-tenant-selection-button"'+(s.tenantId?'data-tenant-id="'+un(s.tenantId)+'"':"")+'style="background-color:'+un(hn(s.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+un(dn(s.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?a+=tn(s.V):a+=s="Sign in to "+tn(s.displayName),r+='<li class="firebaseui-list-item">'+(a=an(a+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+o+"</span></button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+cl(n)+"</div></div>",an(r)}function yc(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+Zo(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+el(null)+'</div></div><div class="firebaseui-card-footer">'+cl(n)+"</div></form></div>",an(e)}function vc(){return $o(this,"firebaseui-id-submit")}function bc(){return $o(this,"firebaseui-id-secondary-link")}function wc(e,t){Yo(this,vc.call(this),function(t){e(t)});var n=bc.call(this);n&&t&&Yo(this,n,function(e){t(e)})}function xc(){return $o(this,"firebaseui-id-password")}function Sc(){return $o(this,"firebaseui-id-password-error")}function kc(){var e=xc.call(this),t=Sc.call(this);Wo(this,e,function(){Xo(t)&&(Ko(e,!0),Jo(t))})}function Cc(){var e=xc.call(this),t=Sc.call(this);return lo(e)?(Ko(e,!0),Jo(t),t=!0):(Ko(e,!1),Qo(t,sn("Enter your password").toString()),t=!1),t?lo(e):null}function Ec(e,t,n,r,i,s){Il.call(this,Kl,{email:e},s,"passwordLinking",{F:r,D:i}),this.w=t,this.H=n}A(Nl,Fn),A(Il,Vo),(e=Il.prototype).kb=function(){var e=Qt(this.fb,this.eb,this.Z,this.s);yl(e),this.g=e},e.v=function(){if(Il.K.v.call(this),fr(Al(this),new Nl("pageEnter",Al(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var e=this.Z.F;Yo(this,this.bb(),function(){e()})}if(this.ab()&&this.Z.D){var t=this.Z.D;Yo(this,this.ab(),function(){t()})}},e.ya=function(){fr(Al(this),new Nl("pageExit",Al(this),{pageId:this.Ga})),Il.K.ya.call(this)},e.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,vl(this.N()),Il.K.o.call(this)},e.I=function(e,t,n,r){function i(){if(s.T)return null;s.Fa=!1,window.clearTimeout(s.ca),s.ca=null,s.A&&(vl(s.A),Bt(s.A),s.A=null)}var s=this;return s.Fa?null:(function(e){e.Fa=!0;var t=so(e.N(),"firebaseui-use-spinner");e.ca=window.setTimeout(function(){e.N()&&null===e.A&&(e.A=Qt(ml,{tb:t},null,e.s),e.N().appendChild(e.A),yl(e.A))},500)}(s),e.apply(null,t).then(n,r).then(i,i))},T(Il.prototype,{a:function(e){Cl.call(this);var t=Qt(ul,{message:e},null,this.s);this.N().appendChild(t),Yo(this,Tl.call(this),function(){Bt(t)})},yc:Cl,Ac:El,zc:Tl,$:function(e,t){e=Qt(hl,{Ma:e,message:t},null,this.s),xl.call(this,e)},h:Sl,Cb:kl,Cc:function(){return $o(this,"firebaseui-tos")},bb:function(){return $o(this,"firebaseui-tos-link")},ab:function(){return $o(this,"firebaseui-pp-link")},Dc:function(){return $o(this,"firebaseui-tos-list")}}),jl.a="firebaseui.auth.soy2.page.signIn",Ml.a="firebaseui.auth.soy2.page.passwordSignIn",Dl.a="firebaseui.auth.soy2.page.passwordSignUp",Ll.a="firebaseui.auth.soy2.page.passwordRecovery",Ol.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Fl.a="firebaseui.auth.soy2.page.callback",Ul.a="firebaseui.auth.soy2.page.spinner",zl.a="firebaseui.auth.soy2.page.blank",Bl.a="firebaseui.auth.soy2.page.emailLinkSignInSent",Vl.a="firebaseui.auth.soy2.page.emailNotReceived",$l.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Hl.a="firebaseui.auth.soy2.page.differentDeviceError",ql.a="firebaseui.auth.soy2.page.anonymousUserMismatch",Kl.a="firebaseui.auth.soy2.page.passwordLinking",Wl.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",Gl.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Yl.a="firebaseui.auth.soy2.page.federatedLinking",Jl.a="firebaseui.auth.soy2.page.unauthorizedUser",Ql.a="firebaseui.auth.soy2.page.unsupportedProvider",Xl.a="firebaseui.auth.soy2.page.passwordReset",Zl.a="firebaseui.auth.soy2.page.passwordResetSuccess",ec.a="firebaseui.auth.soy2.page.passwordResetFailure",tc.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",nc.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",rc.a="firebaseui.auth.soy2.page.emailVerificationSuccess",ic.a="firebaseui.auth.soy2.page.emailVerificationFailure",sc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",ac.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",oc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",lc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",cc.a="firebaseui.auth.soy2.page.recoverableError",uc.a="firebaseui.auth.soy2.page.unrecoverableError",dc.a="firebaseui.auth.soy2.page.emailMismatch",hc.a="firebaseui.auth.soy2.page.providerSignIn",fc.a="firebaseui.auth.soy2.page.phoneSignInStart",pc.a="firebaseui.auth.soy2.page.phoneSignInFinish",mc.a="firebaseui.auth.soy2.page.signOut",gc.a="firebaseui.auth.soy2.page.selectTenant",yc.a="firebaseui.auth.soy2.page.providerMatchByEmail",a(Ec,Il),Ec.prototype.v=function(){this.P(),this.M(this.w,this.H),Rl(this,this.i(),this.w),this.i().focus(),Il.prototype.v.call(this)},Ec.prototype.o=function(){this.w=null,Il.prototype.o.call(this)},Ec.prototype.j=function(){return lo($o(this,"firebaseui-id-email"))},T(Ec.prototype,{i:xc,B:Sc,P:kc,u:Cc,ea:vc,ba:bc,M:wc});var Tc=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function _c(){return $o(this,"firebaseui-id-email")}function Nc(){return $o(this,"firebaseui-id-email-error")}function Ic(e){var t=_c.call(this),n=Nc.call(this);Wo(this,t,function(){Xo(n)&&(Ko(t,!0),Jo(n))}),e&&Go(this,t,function(){e()})}function Ac(){return K(lo(_c.call(this))||"")}function Pc(){var e=_c.call(this),t=Nc.call(this),n=lo(e)||"";return n?Tc.test(n)?(Ko(e,!0),Jo(t),t=!0):(Ko(e,!1),Qo(t,sn("That email address isn't correct").toString()),t=!1):(Ko(e,!1),Qo(t,sn("Enter your email address to continue").toString()),t=!1),t?K(lo(e)):null}function Rc(e,t,n,r,i,s,a){Il.call(this,Ml,{email:n,ia:!!s},a,"passwordSignIn",{F:r,D:i}),this.w=e,this.H=t}function jc(e,t,n,r,i,s){Il.call(this,e,t,r,i||"notice",s),this.i=n||null}function Mc(e,t,n,r,i){jc.call(this,Ol,{email:e,G:!!t},t,i,"passwordRecoveryEmailSent",{F:n,D:r})}function Dc(e,t){jc.call(this,rc,{G:!!e},e,t,"emailVerificationSuccess")}function Lc(e,t){jc.call(this,ic,{G:!!e},e,t,"emailVerificationFailure")}function Oc(e,t,n){jc.call(this,sc,{email:e,G:!!t},t,n,"verifyAndChangeEmailSuccess")}function Fc(e,t){jc.call(this,ac,{G:!!e},e,t,"verifyAndChangeEmailFailure")}function Uc(e,t){jc.call(this,lc,{G:!!e},e,t,"revertSecondFactorAdditionFailure")}function zc(e){jc.call(this,mc,void 0,void 0,e,"signOut")}function Bc(e,t){jc.call(this,Zl,{G:!!e},e,t,"passwordResetSuccess")}function Vc(e,t){jc.call(this,ec,{G:!!e},e,t,"passwordResetFailure")}function $c(e,t){jc.call(this,nc,{G:!!e},e,t,"emailChangeRevokeFailure")}function Hc(e,t,n){jc.call(this,cc,{errorMessage:e,zb:!!t},t,n,"recoverableError")}function qc(e,t){jc.call(this,uc,{errorMessage:e},void 0,t,"unrecoverableError")}function Kc(e){if("auth/invalid-credential"===e.code&&e.message&&-1!==e.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(e.message&&-1!==e.message.indexOf("HTTP Cloud Function returned an error:")){var t=JSON.parse(e.message.substring(e.message.indexOf("{"),e.message.lastIndexOf("}")+1));return{code:e.code,message:t&&t.error&&t.error.message||e.message}}return e}function Wc(e,t,n,r){function i(n){if(!n.name||"cancel"!=n.name){e:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var s=!0;break e}}catch(a){}s=!1}if(s)n=Al(t),t.m(),eu(e,n,void 0,sn("Your sign-in session has expired. Please try again.").toString());else{if(s=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;s=Jc(n)}t.a(s)}}}if(Ed(e),r)return Gc(e,n),Fr();if(!n.credential)throw Error("No credential found!");if(!md(e).currentUser&&!n.user)throw Error("User not logged in.");try{var s=function(e,t){return Nd(e),Sd(e,function(n){if(e.j&&!e.j.isAnonymous&&xa(_d(e))&&!md(e).currentUser)return Ad(e).then(function(){return"password"==t.credential.providerId&&(t.credential=null),t});if(n)return Ad(e).then(function(){return n.linkWithCredential(t.credential)}).then(function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Pd(e,n,t.credential)});if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Ad(e).then(function(){return gd(e).updateCurrentUser(t.user)}).then(function(){return t.user=gd(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t})})}(e,n)}catch(a){return Bi(a.code||a.message,a),t.a(a.code||a.message),Fr()}return n=s.then(function(t){Gc(e,t)},i).then(void 0,i),Cd(e,s),Fr(n)}function Gc(e,t){if(!t.user)throw Error("No user found");var n=Ba(_d(e));if(za(_d(e))&&n&&qi("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Ba(_d(e));var r=Ws(yd(e))||void 0;qs(Bs,yd(e));var i=!1;Qr()?(n&&!n(t,r)||(i=!0,Rt(window.opener.location,Yc(e,r))),n||window.close()):n&&!n(t,r)||(i=!0,Rt(window.location,Yc(e,r))),i||e.reset()}else{n=t.user,t=t.credential,r=za(_d(e)),i=Ws(yd(e))||void 0,qs(Bs,yd(e));var s=!1;Qr()?(r&&!r(n,t,i)||(s=!0,Rt(window.opener.location,Yc(e,i))),r||window.close()):r&&!r(n,t,i)||(s=!0,Rt(window.location,Yc(e,i))),s||e.reset()}}function Yc(e,t){if(!(e=t||_d(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function Jc(e){var t={code:e.code},n="";switch((t=t||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":case"auth/user-token-expired":n+=Nn();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=kn();break;case"auth/invalid-verification-code":n+=sn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=sn(n).toString())return t;try{return JSON.parse(e.message),Bi("Internal error: "+e.message,void 0),En().toString()}catch(r){return e.message}}function Qc(e,t,n,r){function i(){!function(e,t){Ks(zs,{tenantId:e.a},t)}(new es(e.h.tenantId||null),yd(e)),Cd(e,t.I(C(e.dc,e),[l],function(){if("file:"===(window.location&&window.location.protocol))return Cd(e,hd(e).then(function(n){t.m(),qs(zs,yd(e)),ro("callback",e,o,Fr(n))},s))},a))}function s(r){if(qs(zs,yd(e)),!r.name||"cancel"!=r.name)switch(r=Kc(r),r.code){case"auth/popup-blocked":i();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.a(Jc(r));break;case"auth/admin-restricted-operation":t.m(),Ia(_d(e))?ro("handleUnauthorizedUser",e,o,null,n):ro("callback",e,o,Ur(r));break;default:t.m(),ro("callback",e,o,Ur(r))}}function a(n){qs(zs,yd(e)),n.name&&"cancel"==n.name||(Bi("signInWithRedirect: "+n.code,void 0),n=Jc(n),"blank"==t.Ga&&Fa(_d(e))?(t.m(),ro("providerSignIn",e,o,n)):t.a(n))}var o=Al(t),l=function(e,t,n){var r=ba[t]&&pl.auth[ba[t]]?new pl.auth[ba[t]]:0==t.indexOf("saml.")?new pl.auth.SAMLAuthProvider(t):new pl.auth.OAuthProvider(t);if(!r)throw Error("Invalid Firebase Auth provider!");var i=Aa(_d(e),t);if(r.addScope)for(var s=0;s<i.length;s++)r.addScope(i[s]);return i=Pa(_d(e),t)||{},n&&(e=t==pl.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==pl.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=Ea(_d(e),t))&&e.Ob)&&(i[e]=n),r.setCustomParameters&&r.setCustomParameters(i),r}(e,n,r);Ua(_d(e))==Qa?i():Cd(e,function(e,t){return Nd(e),Sd(e,function(n){return n&&!Gs(yd(e))?n.linkWithPopup(t).then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Pd(e,t)}):md(e).signInWithPopup(t)})}(e,l).then(function(n){t.m(),ro("callback",e,o,Fr(n))},s))}function Xc(e){return 1==(e=Ca(_d(e))).length&&e[0]==pl.auth.EmailAuthProvider.PROVIDER_ID}function Zc(e){return 1==(e=Ca(_d(e))).length&&e[0]==pl.auth.PhoneAuthProvider.PROVIDER_ID}function eu(e,t,n,r){Xc(e)?r?ro("signIn",e,t,n,r):iu(e,t,n):e&&Zc(e)&&!r?ro("phoneSignInStart",e,t):e&&Fa(_d(e))&&!r?ro("federatedRedirect",e,t,n):ro("providerSignIn",e,t,r,n)}function tu(e,t,n,r){var i=Al(t);Cd(e,t.I(C(md(e).fetchSignInMethodsForEmail,md(e)),[n],function(s){t.m(),nu(e,i,s,n,r)},function(e){e=Jc(e),t.a(e)}))}function nu(e,t,n,r,i,s){n.length||Oa(_d(e))&&!Oa(_d(e))?U(n,pl.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ro("passwordSignIn",e,t,r,s):1==n.length&&n[0]===pl.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Oa(_d(e))?ro("sendEmailLinkForSignIn",e,t,r,function(){ro("signIn",e,t)}):ro("unsupportedProvider",e,t,r):(n=ya(n,Ca(_d(e))))?(Js(new Qi(r),yd(e)),ro("federatedSignIn",e,t,r,n,i)):ro("unsupportedProvider",e,t,r):Na(_d(e))?ro("handleUnauthorizedUser",e,t,r,pl.auth.EmailAuthProvider.PROVIDER_ID):Oa(_d(e))?ro("sendEmailLinkForSignIn",e,t,r,function(){ro("signIn",e,t)}):ro("passwordSignUp",e,t,r,void 0,void 0,s)}function ru(e,t,n,r,i,s){var a=Al(t);Cd(e,t.I(C(e.Ib,e),[n,s],function(){t.m(),ro("emailLinkSignInSent",e,a,n,r,s)},i))}function iu(e,t,n){n?ro("prefilledEmailSignIn",e,t,n):ro("signIn",e,t)}function su(){return ge(ei(),"oobCode")}function au(){var e=ge(ei(),"continueUrl");return e?function(){Rt(window.location,e)}:null}function ou(e,t){Il.call(this,ql,void 0,t,"anonymousUserMismatch"),this.i=e}function lu(e){Il.call(this,Fl,void 0,e,"callback")}function cu(e,t,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=Gs(yd(e)),s=i&&i.g;if(s&&!function(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}(n.user,s))!function(e,t,n){var r=Al(t);Cd(e,Ad(e).then(function(){t.m(),ro("emailMismatch",e,r,n)},function(e){e.name&&"cancel"==e.name||(e=Jc(e.code),t.a(e))}))}(e,t,r);else{var a=i&&i.a;a?Cd(e,n.user.linkWithCredential(a).then(function(n){r={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},uu(e,t,r)},function(n){du(e,t,n)})):uu(e,t,r)}}else n=Al(t),t.m(),Ys(yd(e)),eu(e,n)}function uu(e,t,n){Ys(yd(e)),Wc(e,t,n)}function du(e,t,n){var r=Al(t);Ys(yd(e)),n=Jc(n),t.m(),eu(e,r,void 0,n)}function hu(e,t,n,r){var i=Al(t);Cd(e,md(e).fetchSignInMethodsForEmail(n).then(function(s){t.m(),s.length?U(s,pl.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?ro("passwordLinking",e,i,n):1==s.length&&s[0]===pl.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?ro("emailLinkSignInLinking",e,i,n):(s=ya(s,Ca(_d(e))))?ro("federatedLinking",e,i,n,s,r):(Ys(yd(e)),ro("unsupportedProvider",e,i,n)):(Ys(yd(e)),ro("passwordRecovery",e,i,n,!1,Tn().toString()))},function(n){du(e,t,n)}))}function fu(e,t){Il.call(this,Hl,void 0,t,"differentDeviceError"),this.i=e}function pu(e,t,n,r){Il.call(this,tc,{email:e,G:!!n},r,"emailChangeRevoke"),this.l=t,this.i=n||null}function mu(){return $o(this,"firebaseui-id-new-password")}function gu(){return $o(this,"firebaseui-id-password-toggle")}function yu(){this.Ra=!this.Ra;var e=gu.call(this),t=mu.call(this);this.Ra?(t.type="text",ao(e,"firebaseui-input-toggle-off"),oo(e,"firebaseui-input-toggle-on")):(t.type="password",ao(e,"firebaseui-input-toggle-on"),oo(e,"firebaseui-input-toggle-off")),t.focus()}function vu(){return $o(this,"firebaseui-id-new-password-error")}function bu(){this.Ra=!1;var e=mu.call(this);e.type="password";var t=vu.call(this);Wo(this,e,function(){Xo(t)&&(Ko(e,!0),Jo(t))});var n=gu.call(this);ao(n,"firebaseui-input-toggle-on"),oo(n,"firebaseui-input-toggle-off"),function(e,t,n){Rn(e,E(jn,t=new vo(t))),ko(Ho(e),t,"focusin",n)}(this,e,function(){ao(n,"firebaseui-input-toggle-focus"),oo(n,"firebaseui-input-toggle-blur")}),function(e,t,n){Rn(e,E(jn,t=new vo(t))),ko(Ho(e),t,"focusout",n)}(this,e,function(){ao(n,"firebaseui-input-toggle-blur"),oo(n,"firebaseui-input-toggle-focus")}),Yo(this,n,C(yu,this))}function wu(){var e=mu.call(this),t=vu.call(this);return lo(e)?(Ko(e,!0),Jo(t),t=!0):(Ko(e,!1),Qo(t,sn("Enter your password").toString()),t=!1),t?lo(e):null}function xu(e,t,n){Il.call(this,Xl,{email:e},n,"passwordReset"),this.l=t}function Su(e,t,n,r,i){Il.call(this,oc,{factorId:e,phoneNumber:n||null,G:!!r},i,"revertSecondFactorAdditionSuccess"),this.l=t,this.i=r||null}function ku(e,t,n,r){"auth/weak-password"==(r&&r.code)?(e=Jc(r),Ko(n.i(),!1),Qo(n.w(),e),n.i().focus()):(n&&n.m(),(n=new Vc).render(t),fd(e,n))}function Cu(e,t){try{var n="number"==typeof e.selectionStart}catch(r){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):Je&&!ct("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",t),e.select())}function Eu(e,t,n,r,i,s){Il.call(this,$l,{email:n},s,"emailLinkSignInConfirmation",{F:r,D:i}),this.l=e,this.u=t}function Tu(e,t,n,r,i){Il.call(this,Gl,{ga:e},i,"emailLinkSignInLinkingDifferentDevice",{F:n,D:r}),this.i=t}function _u(e){Il.call(this,zl,void 0,e,"blank")}function Nu(e,t,n,r,i){var s=new _u,a=new Oe(n),o=a.a.a.get(Be.$a)||"",l=a.a.a.get(Be.Sa)||"",c="1"===a.a.a.get(Be.Qa),u=Fe(a),d=a.a.a.get(Be.PROVIDER_ID)||null;a=a.a.a.get(Be.vb)||null,Td(e,a);var h=!Hs(Vs,yd(e)),f=r||function(e,t){var n=null;if(t=Hs(Vs,t))try{var r=Ss(e,t),i=JSON.parse(r);n=i&&i.email||null}catch(s){}return n}(l,yd(e)),p=(r=function(e,t){var n=null;if(t=Hs($s,t))try{var r=Ss(e,t);n=JSON.parse(r)}catch(i){}return Zi(n||null)}(l,yd(e)))&&r.a;d&&p&&p.providerId!==d&&(p=null),s.render(t),fd(e,s),Cd(e,s.I(function(){var t=Fr(null);t=u&&h||h&&c?Ur(Error("anonymous-user-not-found")):function(e,t){var n=Fe(new Oe(t));return n?(t=new Pr(function(t,r){var i=gd(e).onAuthStateChanged(function(e){i(),e&&e.isAnonymous&&e.uid===n?t(e):e&&e.isAnonymous&&e.uid!==n?r(Error("anonymous-user-mismatch")):r(Error("anonymous-user-not-found"))});Cd(e,i)}),Cd(e,t),t):Fr(null)}(e,n).then(function(e){if(d&&!p)throw Error("pending-credential-not-found");return e});var r=null;return t.then(function(t){return r=t,i?null:md(e).checkActionCode(o)}).then(function(){return r})},[],function(r){f?function(e,t,n,r,i,s){var a=Al(t);t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sn("Signing in...").toString());var o=null;i=(s?function(e,t,n,r,i){Nd(e);var s=i||null,a=pl.auth.EmailAuthProvider.credentialWithLink(n,r);return n=s?md(e).signInWithEmailLink(n,r).then(function(e){return e.user.linkWithCredential(s)}).then(function(){return Ad(e)}).then(function(){return Pd(e,{code:"auth/email-already-in-use"},s)}):md(e).fetchSignInMethodsForEmail(n).then(function(n){return n.length?Pd(e,{code:"auth/email-already-in-use"},a):t.linkWithCredential(a)}),Cd(e,n),n}(e,s,n,r,i):function(e,t,n,r){Nd(e);var i,s=r||null;return t=md(e).signInWithEmailLink(t,n).then(function(e){if(i={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},s)return e.user.linkWithCredential(s).then(function(e){i={user:e.user,credential:s,operationType:i.operationType,additionalUserInfo:e.additionalUserInfo}})}).then(function(){Ad(e)}).then(function(){return gd(e).updateCurrentUser(i.user)}).then(function(){return i.user=gd(e).currentUser,i}),Cd(e,t),t}(e,n,r,i)).then(function(n){qs($s,yd(e)),qs(Vs,yd(e)),t.h(),t.$("firebaseui-icon-done",sn("Signed in!").toString()),o=setTimeout(function(){t.h(),Wc(e,t,n,!0)},1e3),Cd(e,function(){t&&(t.h(),t.m()),clearTimeout(o)})},function(i){if(t.h(),t.m(),!i.name||"cancel"!=i.name){var s=Jc(i=Kc(i));"auth/email-already-in-use"==i.code||"auth/credential-already-in-use"==i.code?(qs($s,yd(e)),qs(Vs,yd(e))):"auth/invalid-email"==i.code?(s=sn("The email provided does not match the current sign-in session.").toString(),ro("emailLinkConfirmation",e,a,r,Iu,null,s)):eu(e,a,n,s)}}),Cd(e,i)}(e,s,f,n,p,r):c?(s.m(),ro("differentDeviceError",e,t)):(s.m(),ro("emailLinkConfirmation",e,t,n,Iu))},function(r){var i=void 0;if(!r||!r.name||"cancel"!=r.name)switch(s.m(),r&&r.message){case"anonymous-user-not-found":ro("differentDeviceError",e,t);break;case"anonymous-user-mismatch":ro("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":ro("emailLinkNewDeviceLinking",e,t,n,Au);break;default:r&&(i=Jc(r)),eu(e,t,void 0,i)}}))}function Iu(e,t,n,r){Nu(e,t,r,n,!0)}function Au(e,t,n){Nu(e,t,n)}function Pu(e,t,n,r,i,s){Il.call(this,Wl,{email:e,ga:t},s,"emailLinkSignInLinking",{F:r,D:i}),this.i=n}function Ru(e,t,n,r,i,s){Il.call(this,Bl,{email:e},s,"emailLinkSignInSent",{F:r,D:i}),this.u=t,this.i=n}function ju(e,t,n,r,i,s,a){Il.call(this,dc,{jc:e,Qb:t},a,"emailMismatch",{F:i,D:s}),this.l=n,this.i=r}function Mu(e,t,n,r,i){Il.call(this,Vl,void 0,i,"emailNotReceived",{F:n,D:r}),this.l=e,this.i=t}function Du(e,t,n,r,i,s){Il.call(this,Yl,{email:e,ga:t},s,"federatedLinking",{F:r,D:i}),this.i=n}function Lu(e,t,n,r,i,s){Il.call(this,Ll,{email:n,Ta:!!t},s,"passwordRecovery",{F:r,D:i}),this.l=e,this.u=t}function Ou(){return $o(this,"firebaseui-id-name")}function Fu(){return $o(this,"firebaseui-id-name-error")}function Uu(e,t,n,r,i,s,a,o,l){Il.call(this,Dl,{email:r,Tb:e,name:i,Ta:!!n,ia:!!o},l,"passwordSignUp",{F:s,D:a}),this.w=t,this.H=n,this.B=e}function zu(e,t){var n=La(_d(e)),r=t.j(),i=null;n&&(i=t.M());var s=t.P();if(r){if(n){if(!i)return void t.u().focus();i=te(i)}if(s){var a=pl.auth.EmailAuthProvider.credential(r,s);Cd(e,t.I(C(e.Yb,e),[r,s],function(r){var s={user:r.user,credential:a,operationType:r.operationType,additionalUserInfo:r.additionalUserInfo};return n?(r=r.user.updateProfile({displayName:i}).then(function(){return Wc(e,t,s)}),Cd(e,r),r):Wc(e,t,s)},function(n){if(!n.name||"cancel"!=n.name){var i=Kc(n);switch(n=Jc(i),i.code){case"auth/email-already-in-use":return function(e,t,n,r){function i(){var e=Jc(r);Ko(t.i(),!1),Qo(t.U(),e),t.i().focus()}var s=md(e).fetchSignInMethodsForEmail(n).then(function(r){r.length?i():(r=Al(t),t.m(),ro("passwordRecovery",e,r,n,!1,Tn().toString()))},function(){i()});return Cd(e,s),s}(e,t,r,i);case"auth/too-many-requests":n=sn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Ko(t.l(),!1),Qo(t.ba(),n);break;case"auth/admin-restricted-operation":Ia(_d(e))?(n=Al(t),t.m(),ro("handleUnauthorizedUser",e,n,r,pl.auth.EmailAuthProvider.PROVIDER_ID)):t.a(n);break;default:Bi(i="setAccountInfo: "+Cs(i),void 0),t.a(n)}}}))}else t.l().focus()}else t.i().focus()}function Bu(){return $o(this,"firebaseui-id-phone-confirmation-code")}function Vu(){return $o(this,"firebaseui-id-phone-confirmation-code-error")}function $u(){return $o(this,"firebaseui-id-resend-countdown")}function Hu(e,t,n,r,i,s,a,o,l){Il.call(this,pc,{phoneNumber:i},l,"phoneSignInFinish",{F:a,D:o}),this.jb=s,this.i=new bo(1e3),this.B=s,this.P=e,this.l=t,this.H=n,this.M=r}a(Rc,Il),Rc.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Pl(this,this.l(),this.i()),Rl(this,this.i(),this.w),lo(this.l())?this.i().focus():this.l().focus(),Il.prototype.v.call(this)},Rc.prototype.o=function(){this.H=this.w=null,Il.prototype.o.call(this)},T(Rc.prototype,{l:_c,U:Nc,P:Ic,M:Ac,j:Pc,i:xc,B:Sc,ea:kc,u:Cc,ua:vc,pa:bc,ba:wc}),A(jc,Il),jc.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),jc.K.v.call(this)},jc.prototype.o=function(){this.i=null,jc.K.o.call(this)},T(jc.prototype,{l:vc,w:bc,u:wc}),A(Mc,jc),A(Dc,jc),A(Lc,jc),A(Oc,jc),A(Fc,jc),A(Uc,jc),A(zc,jc),A(Bc,jc),A(Vc,jc),A($c,jc),A(Hc,jc),A(qc,jc),a(ou,Il),ou.prototype.v=function(){var e=this;Yo(this,this.l(),function(){e.i()}),this.l().focus(),Il.prototype.v.call(this)},ou.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(ou.prototype,{l:bc}),no.anonymousUserMismatch=function(e,t){var n=new ou(function(){n.m(),eu(e,t)});n.render(t),fd(e,n)},a(lu,Il),lu.prototype.I=function(e,t,n,r){return e.apply(null,t).then(n,r)},no.callback=function(e,t,n){var r=new lu;r.render(t),fd(e,r),n=n||hd(e),Cd(e,n.then(function(t){cu(e,r,t)},function(n){if((n=Kc(n))&&("auth/account-exists-with-different-credential"==n.code||"auth/email-already-in-use"==n.code)&&n.email&&n.credential)Js(new Qi(n.email,n.credential),yd(e)),hu(e,r,n.email);else if(n&&"auth/user-cancelled"==n.code){var i=Gs(yd(e)),s=Jc(n);i&&i.a?hu(e,r,i.g,s):i?tu(e,r,i.g,s):du(e,r,n)}else n&&"auth/credential-already-in-use"==n.code||(n&&"auth/operation-not-supported-in-this-environment"==n.code&&Xc(e)?cu(e,r,{user:null,credential:null}):n&&"auth/admin-restricted-operation"==n.code&&Ia(_d(e))?(r.m(),Ys(yd(e)),ro("handleUnauthorizedUser",e,t,null,null)):du(e,r,n))}))},a(fu,Il),fu.prototype.v=function(){var e=this;Yo(this,this.l(),function(){e.i()}),this.l().focus(),Il.prototype.v.call(this)},fu.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(fu.prototype,{l:bc}),no.differentDeviceError=function(e,t){var n=new fu(function(){n.m(),eu(e,t)});n.render(t),fd(e,n)},a(pu,Il),pu.prototype.v=function(){var e=this;Yo(this,$o(this,"firebaseui-id-reset-password-link"),function(){e.l()}),this.i&&(this.w(this.i),this.u().focus()),Il.prototype.v.call(this)},pu.prototype.o=function(){this.l=this.i=null,Il.prototype.o.call(this)},T(pu.prototype,{u:vc,B:bc,w:wc}),a(xu,Il),xu.prototype.v=function(){this.H(),this.B(this.l),Rl(this,this.i(),this.l),this.i().focus(),Il.prototype.v.call(this)},xu.prototype.o=function(){this.l=null,Il.prototype.o.call(this)},T(xu.prototype,{i:mu,w:vu,M:gu,H:bu,u:wu,U:vc,P:bc,B:wc}),a(Su,Il),Su.prototype.v=function(){var e=this;Yo(this,$o(this,"firebaseui-id-reset-password-link"),function(){e.l()}),this.i&&(this.w(this.i),this.u().focus()),Il.prototype.v.call(this)},Su.prototype.o=function(){this.l=this.i=null,Il.prototype.o.call(this)},T(Su.prototype,{u:vc,B:bc,w:wc}),no.passwordReset=function(e,t,n,r){Cd(e,md(e).verifyPasswordResetCode(n).then(function(i){var s=new xu(i,function(){!function(e,t,n,r,i){var s=n.u();s&&Cd(e,n.I(C(md(e).confirmPasswordReset,md(e)),[r,s],function(){n.m();var r=new Bc(i);r.render(t),fd(e,r)},function(r){ku(e,t,n,r)}))}(e,t,s,n,r)});s.render(t),fd(e,s)},function(){ku(e,t)}))},no.emailChangeRevocation=function(e,t,n){var r=null;Cd(e,md(e).checkActionCode(n).then(function(t){return r=t.data.email,md(e).applyActionCode(n)}).then(function(){!function(e,t,n){var r=new pu(n,function(){Cd(e,r.I(C(md(e).sendPasswordResetEmail,md(e)),[n],function(){r.m(),(r=new Mc(n,void 0,Ma(_d(e)),Da(_d(e)))).render(t),fd(e,r)},function(){r.a(Cn().toString())}))});r.render(t),fd(e,r)}(e,t,r)},function(){var n=new $c;n.render(t),fd(e,n)}))},no.emailVerification=function(e,t,n,r){Cd(e,md(e).applyActionCode(n).then(function(){var n=new Dc(r);n.render(t),fd(e,n)},function(){var n=new Lc;n.render(t),fd(e,n)}))},no.revertSecondFactorAddition=function(e,t,n){var r=null,i=null;Cd(e,md(e).checkActionCode(n).then(function(t){return r=t.data.email,i=t.data.multiFactorInfo,md(e).applyActionCode(n)}).then(function(){!function(e,t,n,r){var i=new Su(r.factorId,function(){i.I(C(md(e).sendPasswordResetEmail,md(e)),[n],function(){i.m(),(i=new Mc(n,void 0,Ma(_d(e)),Da(_d(e)))).render(t),fd(e,i)},function(){i.a(Cn().toString())})},r.phoneNumber);i.render(t),fd(e,i)}(e,t,r,i)},function(){var n=new Uc;n.render(t),fd(e,n)}))},no.verifyAndChangeEmail=function(e,t,n,r){var i=null;Cd(e,md(e).checkActionCode(n).then(function(t){return i=t.data.email,md(e).applyActionCode(n)}).then(function(){var n=new Oc(i,r);n.render(t),fd(e,n)},function(){var n=new Fc;n.render(t),fd(e,n)}))},a(Eu,Il),Eu.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Cu(this.i(),(this.i().value||"").length),Il.prototype.v.call(this)},Eu.prototype.o=function(){this.u=this.l=null,Il.prototype.o.call(this)},T(Eu.prototype,{i:_c,M:Nc,w:Ic,H:Ac,j:Pc,U:vc,P:bc,B:wc}),no.emailLinkConfirmation=function(e,t,n,r,i,s){var a=new Eu(function(){var i=a.j();i?(a.m(),r(e,t,i,n)):a.i().focus()},function(){a.m(),eu(e,t,i||void 0)},i||void 0,Ma(_d(e)),Da(_d(e)));a.render(t),fd(e,a),s&&a.a(s)},a(Tu,Il),Tu.prototype.v=function(){this.u(this.i),this.l().focus(),Il.prototype.v.call(this)},Tu.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(Tu.prototype,{l:vc,u:wc}),no.emailLinkNewDeviceLinking=function(e,t,n,r){var i=new Oe(n);if(n=i.a.a.get(Be.PROVIDER_ID)||null,Ue(i,null),n){var s=new Tu(Ea(_d(e),n),function(){s.m(),r(e,t,i.toString())},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s)}else eu(e,t)},a(_u,Il),no.emailLinkSignInCallback=Nu,a(Pu,Il),Pu.prototype.v=function(){this.u(this.i),this.l().focus(),Il.prototype.v.call(this)},Pu.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(Pu.prototype,{l:vc,u:wc}),no.emailLinkSignInLinking=function(e,t,n){var r=Gs(yd(e));if(Ys(yd(e)),r){var i=r.a.providerId,s=new Pu(n,Ea(_d(e),i),function(){!function(e,t,n,r){var i=Al(t);ru(e,t,n,function(){eu(e,i,n)},function(r){if(!r.name||"cancel"!=r.name){var s=Jc(r);r&&"auth/network-request-failed"==r.code?t.a(s):(t.m(),eu(e,i,n,s))}},r)}(e,s,n,r)},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s)}else eu(e,t)},a(Ru,Il),Ru.prototype.v=function(){var e=this;Yo(this,this.l(),function(){e.i()}),Yo(this,$o(this,"firebaseui-id-trouble-getting-email-link"),function(){e.u()}),this.l().focus(),Il.prototype.v.call(this)},Ru.prototype.o=function(){this.i=this.u=null,Il.prototype.o.call(this)},T(Ru.prototype,{l:bc}),no.emailLinkSignInSent=function(e,t,n,r,i){var s=new Ru(n,function(){s.m(),ro("emailNotReceived",e,t,n,r,i)},function(){s.m(),r()},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s)},a(ju,Il),ju.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Il.prototype.v.call(this)},ju.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(ju.prototype,{u:vc,B:bc,w:wc}),no.emailMismatch=function(e,t,n){var r=Gs(yd(e));if(r){var i=new ju(n.user.email,r.g,function(){var t=i;Ys(yd(e)),Wc(e,t,n)},function(){var t=n.credential.providerId,s=Al(i);i.m(),r.a?ro("federatedLinking",e,s,r.g,t):ro("federatedSignIn",e,s,r.g,t)},Ma(_d(e)),Da(_d(e)));i.render(t),fd(e,i)}else eu(e,t)},a(Mu,Il),Mu.prototype.v=function(){var e=this;Yo(this,this.u(),function(){e.i()}),Yo(this,this.Da(),function(){e.l()}),this.u().focus(),Il.prototype.v.call(this)},Mu.prototype.Da=function(){return $o(this,"firebaseui-id-resend-email-link")},Mu.prototype.o=function(){this.i=this.l=null,Il.prototype.o.call(this)},T(Mu.prototype,{u:bc}),no.emailNotReceived=function(e,t,n,r,i){var s=new Mu(function(){ru(e,s,n,r,function(e){e=Jc(e),s.a(e)},i)},function(){s.m(),eu(e,t,n)},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s)},a(Du,Il),Du.prototype.v=function(){this.u(this.i),this.l().focus(),Il.prototype.v.call(this)},Du.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(Du.prototype,{l:vc,u:wc}),no.federatedLinking=function(e,t,n,r,i){var s=Gs(yd(e));if(s&&s.a){var a=new Du(n,Ea(_d(e),r),function(){Qc(e,a,r,n)},Ma(_d(e)),Da(_d(e)));a.render(t),fd(e,a),i&&a.a(i)}else eu(e,t)},no.federatedRedirect=function(e,t,n){var r=new _u;r.render(t),fd(e,r),Qc(e,r,t=Ca(_d(e))[0],n)},no.federatedSignIn=function(e,t,n,r,i){var s=new Du(n,Ea(_d(e),r),function(){Qc(e,s,r,n)},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s),i&&s.a(i)},no.passwordLinking=function(e,t,n){var r=Gs(yd(e));Ys(yd(e));var i=r&&r.a;if(i){var s=new Ec(n,function(){!function(e,t,n,r){var i=t.u();i?Cd(e,t.I(C(e.Xb,e),[n,i],function(n){return n=n.user.linkWithCredential(r).then(function(n){return Wc(e,t,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),Cd(e,n),n},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":Ko(t.i(),!1),Qo(t.B(),Jc(e));break;case"auth/too-many-requests":t.a(Jc(e));break;default:Bi("signInWithEmailAndPassword: "+e.message,void 0),t.a(Jc(e))}})):t.i().focus()}(e,s,n,i)},function(){s.m(),ro("passwordRecovery",e,t,n)},Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s)}else eu(e,t)},a(Lu,Il),Lu.prototype.v=function(){this.B(),this.H(this.l,this.u),lo(this.i())||this.i().focus(),Rl(this,this.i(),this.l),Il.prototype.v.call(this)},Lu.prototype.o=function(){this.u=this.l=null,Il.prototype.o.call(this)},T(Lu.prototype,{i:_c,w:Nc,B:Ic,M:Ac,j:Pc,U:vc,P:bc,H:wc}),no.passwordRecovery=function(e,t,n,r,i){var s=new Lu(function(){!function(e,t){var n=t.j();if(n){var r=Al(t);Cd(e,t.I(C(md(e).sendPasswordResetEmail,md(e)),[n],function(){t.m();var i=new Mc(n,function(){i.m(),eu(e,r)},Ma(_d(e)),Da(_d(e)));i.render(r),fd(e,i)},function(e){Ko(t.i(),!1),Qo(t.w(),Jc(e))}))}else t.i().focus()}(e,s)},r?void 0:function(){s.m(),eu(e,t)},n,Ma(_d(e)),Da(_d(e)));s.render(t),fd(e,s),i&&s.a(i)},no.passwordSignIn=function(e,t,n,r){var i=new Rc(function(){!function(e,t){var n=t.j(),r=t.u();if(n)if(r){var i=pl.auth.EmailAuthProvider.credential(n,r);Cd(e,t.I(C(e.bc,e),[n,r],function(n){return Wc(e,t,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})},function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":Ko(t.l(),!1),Qo(t.U(),Jc(e));break;case"auth/too-many-requests":case"auth/wrong-password":Ko(t.i(),!1),Qo(t.B(),Jc(e));break;default:Bi("verifyPassword: "+e.message,void 0),t.a(Jc(e))}}))}else t.i().focus();else t.l().focus()}(e,i)},function(){var n=i.M();i.m(),ro("passwordRecovery",e,t,n)},n,Ma(_d(e)),Da(_d(e)),r);i.render(t),fd(e,i)},a(Uu,Il),Uu.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Pl(this,this.i(),this.u()),Pl(this,this.u(),this.l())):Pl(this,this.i(),this.l()),this.w&&Rl(this,this.l(),this.w),lo(this.i())?this.B&&!lo(this.u())?this.u().focus():this.l().focus():this.i().focus(),Il.prototype.v.call(this)},Uu.prototype.o=function(){this.H=this.w=null,Il.prototype.o.call(this)},T(Uu.prototype,{i:_c,U:Nc,ea:Ic,jb:Ac,j:Pc,u:Ou,Bc:Fu,Ja:function(){var e=Ou.call(this),t=Fu.call(this);Wo(this,e,function(){Xo(t)&&(Ko(e,!0),Jo(t))})},M:function(){var e=Ou.call(this),t=Fu.call(this),n=lo(e);return Ko(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(Jo(t),t=!0):(Qo(t,sn("Enter your account name").toString()),t=!1),t?K(lo(e)):null},l:mu,ba:vu,lb:gu,ua:bu,P:wu,Nb:vc,Mb:bc,pa:wc}),no.passwordSignUp=function(e,t,n,r,i,s){var a=new Uu(La(_d(e)),function(){zu(e,a)},i?void 0:function(){a.m(),eu(e,t)},n,r,Ma(_d(e)),Da(_d(e)),s);a.render(t),fd(e,a)},a(Hu,Il),Hu.prototype.v=function(){var e=this;this.U(this.jb),Jn(this.i,"tick",this.w,!1,this),this.i.start(),Yo(this,$o(this,"firebaseui-id-change-phone-number-link"),function(){e.P()}),Yo(this,this.Da(),function(){e.M()}),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Il.prototype.v.call(this)},Hu.prototype.o=function(){this.M=this.H=this.l=this.P=null,wo(this.i),Zn(this.i,"tick",this.w),this.i=null,Il.prototype.o.call(this)},Hu.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(wo(this.i),Zn(this.i,"tick",this.w),this.ua(),this.lb())},T(Hu.prototype,{u:Bu,pa:Vu,Ja:function(e){var t=Bu.call(this),n=Vu.call(this);Wo(this,t,function(){Xo(n)&&(Ko(t,!0),Jo(n))}),e&&Go(this,t,function(){e()})},ba:function(){var e=K(lo(Bu.call(this))||"");return/^\d{6}$/.test(e)?e:null},Fb:$u,U:function(e){$t($u.call(this),sn("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ua:function(){Jo(this.Fb())},Da:function(){return $o(this,"firebaseui-id-resend-link")},lb:function(){Qo(this.Da())},Nb:vc,Mb:bc,ea:wc}),no.phoneSignInFinish=function(e,t,n,r,i,s){var a=new Hu(function(){a.m(),ro("phoneSignInStart",e,t,n)},function(){!function(e,t,n,r){function i(e){t.u().focus(),Ko(t.u(),!1),Qo(t.pa(),e)}var s=t.ba();s?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sn("Verifying...").toString()),Cd(e,t.I(C(r.confirm,r),[s],function(n){t.h(),t.$("firebaseui-icon-done",sn("Verified!").toString());var r=setTimeout(function(){t.h(),t.m();var r={user:gd(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Wc(e,t,r,!0)},1e3);Cd(e,function(){t&&t.h(),clearTimeout(r)})},function(r){if(r.name&&"cancel"==r.name)t.h();else{var s=Kc(r);switch(r=Jc(s),s.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":s=Al(t),t.h(),t.m(),ro("phoneSignInStart",e,s,n,r);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),i(r);break;default:t.h(),t.a(r)}}}))):i(sn("Wrong code. Try again.").toString())}(e,a,n,i)},function(){a.m(),eu(e,t)},function(){a.m(),ro("phoneSignInStart",e,t,n)},ga(n),r,Ma(_d(e)),Da(_d(e)));a.render(t),fd(e,a),s&&a.a(s)};var qu=!(Je||He("Safari")&&!(qe()||He("Coast")||He("Opera")||He("Edge")||He("Firefox")||He("FxiOS")||He("Silk")||He("Android")));function Ku(e,t){return/-[a-z]/.test(t)?null:qu&&e.dataset?!He("Android")||qe()||He("Firefox")||He("FxiOS")||He("Opera")||He("Silk")||t in e.dataset?void 0===(e=e.dataset[t])?null:e:null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function Wu(e,t,n){var r=this;e=Qt(fl,{items:e},null,this.s),xl.call(this,e,!0,!0),n&&(n=function(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(Ku(e[n],"listboxid")===t)return e[n];return null}(e,n))&&(n.focus(),function(e,t){var n=(t=t||zt(document))||zt(document),r=Fo(e),i=Fo(n);if(!Je||9<=Number(ot)){a=Lo(n,"borderLeftWidth");var s=Lo(n,"borderRightWidth");o=Lo(n,"borderTopWidth"),l=Lo(n,"borderBottomWidth"),s=new Do(parseFloat(o),parseFloat(s),parseFloat(l),parseFloat(a))}else{var a=zo(n,"borderLeft");s=zo(n,"borderRight");var o=zo(n,"borderTop"),l=zo(n,"borderBottom");s=new Do(o,s,l,a)}n==zt(document)?(a=r.a-n.scrollLeft,r=r.g-n.scrollTop,!Je||10<=Number(ot)||(a+=s.left,r+=s.top)):(a=r.a-i.a-s.left,r=r.g-i.g-s.top),i=e.offsetWidth,s=e.offsetHeight,o=et&&!i&&!s,e=d(i)&&!o||!e.getBoundingClientRect?new Mt(i,s):new Mt((e=Oo(e)).right-e.left,e.bottom-e.top),i=n.clientHeight-e.height,s=n.scrollLeft,o=n.scrollTop,n=new jt(s+=Math.min(a,Math.max(a-(n.clientWidth-e.width),0)),o+=Math.min(r,Math.max(r-i,0))),t.scrollLeft=n.a,t.scrollTop=n.g}(n,e)),Yo(this,e,function(e){(e=(e=Ht(e.target,"firebaseui-id-list-box-dialog-button"))&&Ku(e,"listboxid"))&&(Sl.call(r),t(e))})}function Gu(){return $o(this,"firebaseui-id-phone-number")}function Yu(){return $o(this,"firebaseui-id-country-selector")}function Ju(){return $o(this,"firebaseui-id-phone-number-error")}function Qu(e,t){var n=e.a,r=Xu("1-US-0",n),i=null;if(!(i=t&&Xu(t,n)?t:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");td.call(this,i,e)}function Xu(e,t){return!(!(e=la(e))||!U(t,e))}function Zu(e){return"firebaseui-flag-"+e.f}function ed(e){var t=this;Wu.call(this,function(e){return e.map(function(e){return{id:e.c,Ma:"firebaseui-flag "+Zu(e),label:e.name+" +"+e.b}})}(e.a),function(n){td.call(t,n,e,!0),t.O().focus()},this.Ba)}function td(e,t,n){var r=la(e);r&&(n&&((t=oa(t,n=K(lo(Gu.call(this))||""))).length&&t[0].b!=r.b&&(n="+"+r.b+n.substr(t[0].b.length+1),co(Gu.call(this),n))),t=la(this.Ba),this.Ba=e,e=$o(this,"firebaseui-id-country-selector-flag"),t&&oo(e,Zu(t)),ao(e,Zu(r)),$t($o(this,"firebaseui-id-country-selector-code"),"+"+r.b))}function nd(e,t,n,r,i,s,a,o,l,c){Il.call(this,fc,{Gb:t,Aa:l||null,Va:!!n,ia:!!s},c,"phoneSignInStart",{F:r,D:i}),this.H=o||null,this.M=t,this.l=e,this.w=n||null,this.pa=a||null}function rd(e,t,n,r){try{var i=t.U(Ka)}catch(s){return}i?Ha?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",sn("Verifying...").toString()),Cd(e,t.I(C(e.cc,e),[ga(i),n],function(n){var r=Al(t);t.$("firebaseui-icon-done",sn("Code sent!").toString());var s=setTimeout(function(){t.h(),t.m(),ro("phoneSignInFinish",e,r,i,15,n)},1e3);Cd(e,function(){t&&t.h(),clearTimeout(s)})},function(n){if(t.h(),!n.name||"cancel"!=n.name){grecaptcha.reset(Wa),Ha=null;var r=n&&n.message||"";if(n.code)switch(n.code){case"auth/too-many-requests":r=sn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.O().focus(),void Qo(t.B(),kn().toString());case"auth/admin-restricted-operation":if(Ia(_d(e)))return n=Al(t),t.m(),void ro("handleUnauthorizedUser",e,n,ga(i),pl.auth.PhoneAuthProvider.PROVIDER_ID);r=Jc(n);break;default:r=Jc(n)}t.a(r)}}))):qa?Qo(t.u(),sn("Solve the reCAPTCHA").toString()):!qa&&r&&t.i().click():(t.O().focus(),Qo(t.B(),kn().toString()))}function id(e,t,n,r,i){Il.call(this,hc,{Sb:t},i,"providerSignIn",{F:n,D:r}),this.i=e}function sd(e,t,n,r,i,s,a){Il.call(this,jl,{email:n,Va:!!t,ia:!!s},a,"signIn",{F:r,D:i}),this.i=e,this.u=t}function ad(e,t,n,r,i,s,a){Il.call(this,Jl,{kc:e,yb:n,Eb:!!r},a,"unauthorizedUser",{F:i,D:s}),this.l=t,this.i=r}function od(e,t,n,r,i,s){Il.call(this,Ql,{email:e},s,"unsupportedProvider",{F:r,D:i}),this.l=t,this.i=n}function ld(e,t){this.$=!1;var n=dd(t);if(ud[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');ud[n]=this,this.a=e,this.u=null,this.Y=!1,cd(this.a),this.h=pl.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),(e=e.emulatorConfig)&&(n=e.port,this.h.useEmulator(e.protocol+"://"+e.host+(null===n?"":":"+n),e.options)),cd(this.h),this.h.setPersistence&&this.h.setPersistence(pl.auth.Auth.Persistence.SESSION),this.oa=t,this.ca=new wa,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=vi.Xa(),this.j=this.C=null,this.da=this.A=!1}function cd(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}a(nd,Il),nd.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Pl(this,this.O(),this.i()),Rl(this,this.i(),this.l),this.O().focus(),Cu(this.O(),(this.O().value||"").length),Il.prototype.v.call(this)},nd.prototype.o=function(){this.w=this.l=null,Il.prototype.o.call(this)},T(nd.prototype,{Cb:kl,O:Gu,B:Ju,ea:function(e,t,n){var r=this,i=Gu.call(this),s=Yu.call(this),a=Ju.call(this),o=e||fa,l=o.a;if(0==l.length)throw Error("No available countries provided.");Qu.call(r,o,t),Yo(this,s,function(){ed.call(r,o)}),Wo(this,i,function(){Xo(a)&&(Ko(i,!0),Jo(a));var e=K(lo(i)||""),t=la(this.Ba),n=oa(o,e);e=Xu("1-US-0",l),n.length&&n[0].b!=t.b&&(t=n[0],td.call(r,"1"==t.b&&e?"1-US-0":t.c,o))}),n&&Go(this,i,function(){n()})},U:function(e){var t=K(lo(Gu.call(this))||""),n=(e=e||fa).a,r=oa(fa,t);if(r.length&&!U(n,r[0]))throw co(Gu.call(this)),Gu.call(this).focus(),Qo(Ju.call(this),sn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=la(this.Ba),r.length&&r[0].b!=n.b&&td.call(this,r[0].c,e),r.length&&(t=t.substr(r[0].b.length+1)),t?new pa(this.Ba,t):null},Ja:Yu,ba:function(){return $o(this,"firebaseui-recaptcha-container")},u:function(){return $o(this,"firebaseui-id-recaptcha-error")},i:vc,ua:bc,P:wc}),no.phoneSignInStart=function(e,t,n,r){var i=function(e){var t=null;if(Sa(e).forEach(function(e){e.provider==pl.auth.PhoneAuthProvider.PROVIDER_ID&&x(e.recaptchaParameters)&&!Array.isArray(e.recaptchaParameters)&&(t=re(e.recaptchaParameters))}),t){var n=[];to.forEach(function(e){void 0!==t[e]&&(n.push(e),delete t[e])}),n.length&&qi('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}(_d(e))||{};Ha=null,qa=!(i&&"invisible"===i.size);var s=Zc(e),a=function(e){var t=(e=ka(e,pl.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&ca(t);var n=null;return e&&"string"==typeof e.loginHint&&(n=ma(e.loginHint)),t&&t[0]||n&&la(n.a)||null}(_d(e)),o=s?function(e){var t=null;return(e=ka(e,pl.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof e.loginHint&&(t=ma(e.loginHint)),e&&e.defaultNationalNumber||t&&t.Aa||null}(_d(e)):null;a=n&&n.a||a&&a.c||null,n=n&&n.Aa||o,(o=Ra(_d(e)))&&da(o),Ka=o?new aa(Ra(_d(e))):fa;var l=new nd(function(t){rd(e,l,c,!(!t||!t.keyCode))},qa,s?null:function(){c.clear(),l.m(),eu(e,t)},Ma(_d(e)),Da(_d(e)),s,Ka,a,n);l.render(t),fd(e,l),r&&l.a(r),i.callback=function(t){l.u()&&Jo(l.u()),Ha=t,qa||rd(e,l,c)},i["expired-callback"]=function(){Ha=null};var c=new pl.auth.RecaptchaVerifier(qa?l.ba():l.i(),i,gd(e).app);Cd(e,l.I(C(c.render,c),[],function(e){Wa=e},function(n){n.name&&"cancel"==n.name||(n=Jc(n),l.m(),eu(e,t,void 0,n))}))},no.prefilledEmailSignIn=function(e,t,n){var r=new _u;r.render(t),fd(e,r),Cd(e,r.I(C(md(e).fetchSignInMethodsForEmail,md(e)),[n],function(i){r.m();var s=!(!Xc(e)||!vd(e));nu(e,t,i,n,void 0,s)},function(i){i=Jc(i),r.m(),ro("signIn",e,t,n,i)}))},a(id,Il),id.prototype.v=function(){this.l(this.i),Il.prototype.v.call(this)},id.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(id.prototype,{l:function(e){function t(t){e(t)}for(var n=this.g?Lt("firebaseui-id-idp-button",this.g||this.s.a):[],r=0;r<n.length;r++){var i=n[r];Yo(this,i,E(t,Ku(i,"providerId")))}}}),no.providerSignIn=function(e,t,n,r){var i=new id(function(n){n==pl.auth.EmailAuthProvider.PROVIDER_ID?(i.m(),iu(e,t,r)):n==pl.auth.PhoneAuthProvider.PROVIDER_ID?(i.m(),ro("phoneSignInStart",e,t)):"anonymous"==n?function(e,t){Cd(e,t.I(C(e.$b,e),[],function(n){return t.m(),Wc(e,t,n,!0)},function(e){e.name&&"cancel"==e.name||(Bi("ContinueAsGuest: "+e.code,void 0),e=Jc(e),t.a(e))}))}(e,i):Qc(e,i,n,r),Nd(e),e.l.cancel()},Ta(_d(e)),Ma(_d(e)),Da(_d(e)));i.render(t),fd(e,i),n&&i.a(n),function(e){Nd(e);try{bi(e.l,_a(_d(e)),function(e){var t;return Nd(e),(t=e.Z)||(e=_d(e),e=Pa(e,pl.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}(e)).then(function(t){return!!e.g&&function(e,t,n){if(n&&n.credential&&n.clientId===_a(_d(e))){if(Aa(_d(e),pl.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var r=JSON.parse(atob(n.credential.split(".")[1])).email}catch(i){}return Qc(e,t,pl.auth.GoogleAuthProvider.PROVIDER_ID,r),Fr(!0)}return i=pl.auth.GoogleAuthProvider.credential(n.credential),s=!1,i=t.I(C(e.ac,e),[i],function(n){var r=Al(t);t.m(),ro("callback",e,r,Fr(n)),s=!0},function(n){if(!(n.name&&"cancel"==n.name||n&&"auth/credential-already-in-use"==n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var r=Al(t);t.m(),ro("callback",e,r,Ur(n))}else n&&"auth/admin-restricted-operation"==n.code&&Ia(_d(e))?(n=Al(t),t.m(),ro("handleUnauthorizedUser",e,n,null,pl.auth.GoogleAuthProvider.PROVIDER_ID)):(n=Jc(n),t.a(n))}),Cd(e,i),i.then(function(){return s},function(){return!1})}var i,s;return n&&t.a(sn("The selected credential for the authentication provider is not supported!").toString()),Fr(!1)}(e,e.g,t)})}catch(t){}}(e)},no.sendEmailLinkForSignIn=function(e,t,n,r){var i=new lu;i.render(t),fd(e,i),ru(e,i,n,r,function(r){i.m(),r&&"auth/admin-restricted-operation"==r.code&&Ia(_d(e))?ro("handleUnauthorizedUser",e,t,n,pl.auth.EmailAuthProvider.PROVIDER_ID):(r=Jc(r),ro("signIn",e,t,n,r))})},a(sd,Il),sd.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Cu(this.l(),(this.l().value||"").length),Il.prototype.v.call(this)},sd.prototype.o=function(){this.u=this.i=null,Il.prototype.o.call(this)},T(sd.prototype,{l:_c,M:Nc,w:Ic,H:Ac,j:Pc,U:vc,P:bc,B:wc}),no.signIn=function(e,t,n,r){var i=Xc(e),s=new sd(function(){var t=s,n=t.j()||"";n&&tu(e,t,n)},i?null:function(){s.m(),eu(e,t,n)},n,Ma(_d(e)),Da(_d(e)),i);s.render(t),fd(e,s),r&&s.a(r)},a(ad,Il),ad.prototype.v=function(){var e=this,t=$o(this,"firebaseui-id-unauthorized-user-help-link");this.i&&t&&Yo(this,t,function(){e.i()}),Yo(this,this.u(),function(){e.l()}),this.u().focus(),Il.prototype.v.call(this)},ad.prototype.o=function(){this.i=this.l=null,Il.prototype.o.call(this)},T(ad.prototype,{u:bc}),no.handleUnauthorizedUser=function(e,t,n,r){function i(){eu(e,t)}r===pl.auth.EmailAuthProvider.PROVIDER_ID?i=function(){iu(e,t)}:r===pl.auth.PhoneAuthProvider.PROVIDER_ID&&(i=function(){ro("phoneSignInStart",e,t)});var s=null,a=null;r===pl.auth.EmailAuthProvider.PROVIDER_ID&&Na(_d(e))?(s=function(e){return(e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.adminEmail||null}(_d(e)),a=function(e){if((e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp){var t=e.disableSignUp.helpLink||null;if(t&&"string"==typeof t)return function(){Xr(t)}}return null}(_d(e))):Ia(_d(e))&&(s=function(e){return(e=e.a.get("adminRestrictedOperation"))&&e.adminEmail?e.adminEmail:null}(_d(e)),a=function(e){if(e=e.a.get("adminRestrictedOperation")||null){var t=e.helpLink||null;if(t&&"string"==typeof t)return function(){Xr(t)}}return null}(_d(e)));var o=new ad(n,function(){o.m(),i()},s,a,Ma(_d(e)),Da(_d(e)));o.render(t),fd(e,o)},a(od,Il),od.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Il.prototype.v.call(this)},od.prototype.o=function(){this.i=this.l=null,Il.prototype.o.call(this)},T(od.prototype,{u:vc,B:bc,w:wc}),no.unsupportedProvider=function(e,t,n){var r=new od(n,function(){r.m(),ro("passwordRecovery",e,t,n)},function(){r.m(),eu(e,t,n)},Ma(_d(e)),Da(_d(e)));r.render(t),fd(e,r)};var ud={};function dd(e){return e||"[DEFAULT]"}function hd(e){return Nd(e),e.i||(e.i=Sd(e,function(t){return t&&!Gs(yd(e))?Fr(gd(e).getRedirectResult().then(function(e){return e},function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Pd(e,t)})):Fr(md(e).getRedirectResult().then(function(t){return xa(_d(e))&&!t.user&&e.j&&!e.j.isAnonymous?gd(e).getRedirectResult():t}))})),e.i}function fd(e,t){Nd(e),e.g=t}var pd=null;function md(e){return Nd(e),e.h}function gd(e){return Nd(e),e.a}function yd(e){return Nd(e),e.oa}function vd(e){return Nd(e),e.O?e.O.emailHint:void 0}function bd(e){return"signIn"===((e=new Oe(e)).a.a.get(Be.ub)||null)&&!!e.a.a.get(Be.$a)}function wd(e,t,n,r){Nd(e),void 0!==e.a.languageCode&&(e.u=e.a.languageCode);var i="en".replace(/_/g,"-");e.a.languageCode=i,e.h.languageCode=i,e.Y=!0,void 0!==e.a.tenantId&&(e.h.tenantId=e.a.tenantId),e.ib(n),e.O=r||null;var s=u.document;e.C?e.C.then(function(){"complete"==s.readyState?xd(e,t):Xn(window,"load",function(){xd(e,t)})}):"complete"==s.readyState?xd(e,t):Xn(window,"load",function(){xd(e,t)})}function xd(e,t){var n=Zr(t,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),pd){var r=pd;Nd(r),Gs(yd(r))&&qi("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),pd.reset()}if(pd=e,e.T=n,function(e,t){e.L=null,e.J=new gr(t),e.J.register(),Jn(e.J,"pageEnter",function(t){if(t=t&&t.pageId,e.L!=t){var n=_d(e);(n=$a(n).uiChanged||null)&&n(e.L,t),e.L=t}})}(e,n),js(new Ms)&&js(new Ds)){t=Zr(t,"Could not find the FirebaseUI widget element on the page."),n=(n=ge(n=ei(),r=ta(_d(e).a,"queryParameterForSignInSuccessUrl")))?vt(wt(n)).toString():null;e:{r=ei();var i=ja(_d(e));for(s in r=ge(r,i)||"",Za)if(Za[s].toLowerCase()==r.toLowerCase()){var s=Za[s];break e}s="callback"}switch(s){case"callback":n&&(s=yd(e),Ks(Bs,n,s)),e.nb()?ro("callback",e,t):eu(e,t,vd(e));break;case"resetPassword":ro("passwordReset",e,t,su(),au());break;case"recoverEmail":ro("emailChangeRevocation",e,t,su());break;case"revertSecondFactorAddition":ro("revertSecondFactorAddition",e,t,su());break;case"verifyEmail":ro("emailVerification",e,t,su(),au());break;case"verifyAndChangeEmail":ro("verifyAndChangeEmail",e,t,su(),au());break;case"signIn":ro("emailLinkSignInCallback",e,t,ei()),Id();break;case"select":n&&(s=yd(e),Ks(Bs,n,s)),eu(e,t);break;default:throw Error("Unhandled widget operation.")}(t=$a(t=_d(e)).uiShown||null)&&t()}else t=Zr(t,"Could not find the FirebaseUI widget element on the page."),(s=new qc(sn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(t),fd(e,s);t=e.g&&"blank"==e.g.Ga&&Fa(_d(e)),Qs(yd(e))&&!t&&(Td(e,(t=Qs(yd(e))).a),qs(zs,yd(e)))}function Sd(e,t){if(e.A)return t(kd(e));if(Cd(e,function(){e.A=!1}),xa(_d(e))){var n=new Pr(function(n){Cd(e,e.a.onAuthStateChanged(function(r){e.j=r,e.A||(e.A=!0,n(t(kd(e))))}))});return Cd(e,n),n}return e.A=!0,t(null)}function kd(e){return Nd(e),xa(_d(e))&&e.j&&e.j.isAnonymous?e.j:null}function Cd(e,t){if(Nd(e),t){e.s.push(t);var n=function(){V(e.s,function(e){return e==t})};"function"!=typeof t&&t.then(n,n)}}function Ed(e){void 0!==e.a.languageCode&&e.Y&&(e.Y=!1,e.a.languageCode=e.u)}function Td(e,t){e.a.tenantId=t,e.h.tenantId=t}function _d(e){return Nd(e),e.ca}function Nd(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Id(){var e=ei();if(bd(e)){for(var t in e=new Oe(e),Be)Be.hasOwnProperty(t)&&je(e.a.a,Be[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=u.document.title;u.history&&u.history.replaceState&&u.history.replaceState(t,n,e.toString())}}function Ad(e){return Nd(e),md(e).signOut()}function Pd(e,t,n){if(Nd(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var r=Va(_d(e));return Fr().then(function(){return r(new In("anonymous-upgrade-merge-conflict",null,n||t.credential))}).then(function(){throw e.g&&(e.g.m(),e.g=null),t})}return Ur(t)}function Rd(e,t,n,r){Il.call(this,yc,void 0,r,"providerMatchByEmail",{F:t,D:n}),this.i=e}function jd(e,t,n,r,i){Il.call(this,gc,{ec:t},i,"selectTenant",{F:n,D:r}),this.i=e}function Md(e){Il.call(this,Ul,void 0,e,"spinner")}function Dd(e){for(var t in this.a=new Xs,Zs(this.a,"authDomain"),Zs(this.a,"displayMode",$d),Zs(this.a,"tenants"),Zs(this.a,"callbacks"),Zs(this.a,"tosUrl"),Zs(this.a,"privacyPolicyUrl"),e)if(e.hasOwnProperty(t))try{ea(this.a,t,e[t])}catch(n){Bi('Invalid config: "'+t+'"',void 0)}}function Ld(e){return e.a.get("callbacks")||{}}function Od(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&qi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"==typeof t)return t;if("string"==typeof t)return function(){Xr(t)}}return null}function Fd(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&qi("Terms of Service URL is missing, the link will not be displayed."),t&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){Xr(n)}}return null}function Ud(e,t){if(!(e=e.a.get("tenants"))||!e.hasOwnProperty(t)&&!e.hasOwnProperty(qd))throw Error("Invalid tenant configuration!")}function zd(e,t,n){if(!(e=e.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(e=e[t]||e[qd]))return Bi("Invalid tenant configuration: "+t+" is not configured!",void 0),r;if(!(t=e.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return t.forEach(function(e){if("string"==typeof e)r.push(e);else if("string"==typeof e.provider){var t=e.hd;t&&n?(t instanceof RegExp?t:new RegExp("@"+t.replace(".","\\.")+"$")).test(n)&&r.push(e.provider):r.push(e.provider)}else Bi(e="Invalid tenant configuration: signInOption "+JSON.stringify(e)+" is invalid!",void 0)}),r}function Bd(e,t,n){return e=function(e,t){var n=Vd,r=void 0===r?{}:r;return Ud(e,t),e=e.a.get("tenants"),function(e,t,n){return n=void 0===n?{}:n,Object.keys(e).filter(function(e){return t.includes(e)}).reduce(function(t,n){return t[n]=e[n],t},n)}(e[t]||e[qd],n,r)}(e,t),(t=e.signInOptions)&&n&&(t=t.filter(function(e){return"string"==typeof e?n.includes(e):n.includes(e.provider)}),e.signInOptions=t),e}(e=ld.prototype).nb=function(){return Nd(this),!!Qs(yd(this))||bd(ei())},e.start=function(e,t){wd(this,e,t)},e.Db=function(){Nd(this),this.Z=!0},e.reset=function(){Nd(this);var e=this;this.T&&this.T.removeAttribute("lang"),this.J&&pr(this.J),Ed(this),this.O=null,Id(),qs(zs,yd(this)),Nd(this),this.l.cancel(),this.i=Fr({user:null,credential:null}),pd==this&&(pd=null),this.T=null;for(var t=0;t<this.s.length;t++)"function"==typeof this.s[t]?this.s[t]():this.s[t].cancel&&this.s[t].cancel();this.s=[],Ys(yd(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Ad(this).then(function(){e.C=null},function(){e.C=null}))},e.ib=function(e){Nd(this);var t,n=this.ca;for(t in e)try{ea(n.a,t,e[t])}catch(r){Bi('Invalid config: "'+t+'"',void 0)}tt&&ea(n.a,"popupMode",!1),Ra(n),!this.da&&za(_d(this))&&(qi("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},e.Wb=function(){Nd(this);var e=_d(this),t=ta(e.a,"widgetUrl");e=ja(e);for(var n,r=t.search(me),i=0,s=[];0<=(n=pe(t,i,e,r));)s.push(t.substring(i,n)),i=Math.min(t.indexOf("&",n)+1||r,r);s.push(t.substr(i)),t=s.join("").replace(ye,"$1"),(e+=r="="+encodeURIComponent("select"))?(0>(r=t.indexOf("#"))&&(r=t.length),0>(i=t.indexOf("?"))||i>r?(i=r,n=""):n=t.substring(i+1,r),r=(t=[t.substr(0,i),n,t.substr(r)])[1],t[1]=e?r?r+"&"+e:e:r,r=t[0]+(t[1]?"?"+t[1]:"")+t[2]):r=t,_d(this).a.get("popupMode")?(r=r||"about:blank",(e={width:500,height:600,top:0<(e=(window.screen.availHeight-600)/2)?e:0,left:0<(t=(window.screen.availWidth-500)/2)?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||r.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=Jr(r,e))&&e.focus()):Rt(window.location,r)},e.Wa=function(){var e=this;return Nd(this),this.h.app.delete().then(function(){var t=dd(yd(e));delete ud[t],e.reset(),e.$=!0})},e.Ib=function(e,t){Nd(this);var n=this,r=function(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();if(!Oa(_d(this)))return Ur(Error("Email link sign-in should be enabled to trigger email sending."));var i=function(e){if(Oa(e)){var t={url:ei(),handleCodeInApp:!0};(e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof e.emailLinkSignIn&&se(t,e.emailLinkSignIn()),e=t.url;var n=ei();n instanceof ve||(n=Se(n)),e instanceof ve||(e=Se(e));var r=n;n=new ve(r);var i=!!e.j;i?be(n,e.j):i=!!e.A,i?n.A=e.A:i=!!e.h,i?n.h=e.h:i=null!=e.C;var s=e.g;if(i)we(n,e.C);else if(i=!!e.g)if("/"!=s.charAt(0)&&(r.h&&!r.g?s="/"+s:-1!=(r=n.g.lastIndexOf("/"))&&(s=n.g.substr(0,r+1)+s)),".."==s||"."==s)s="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");for(var a=[],o=0;o<s.length;){var l=s[o++];"."==l?r&&o==s.length&&a.push(""):".."==l?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==s.length&&a.push("")):(a.push(l),r=!0)}s=a.join("/")}return i?n.g=s:i=""!==e.a.toString(),i?xe(n,De(e.a)):i=!!e.s,i&&(n.s=e.s),t.url=n.toString(),t}return null}(_d(this)),s=new Oe(i.url);return function(e,t){t?e.a.a.set(Be.Sa,t):je(e.a.a,Be.Sa)}(s,r),t&&t.a&&(function(e,t,n){Ks($s,xs(e,JSON.stringify(Xi(t))),n)}(r,t,yd(this)),Ue(s,t.a.providerId)),function(e,t){null!==t?e.a.a.set(Be.Qa,t?"1":"0"):je(e.a.a,Be.Qa)}(s,function(e){return!(!(e=ka(e,pl.auth.EmailAuthProvider.PROVIDER_ID))||!e.forceSameDevice)}(_d(this))),Sd(this,function(t){return t&&((t=t.uid)?s.a.a.set(Be.Pa,t):je(s.a.a,Be.Pa)),i.url=s.toString(),md(n).sendSignInLinkToEmail(e,i)}).then(function(){var t=yd(n),i={};i.email=e,Ks(Vs,xs(r,JSON.stringify(i)),t)},function(e){throw qs($s,yd(n)),qs(Vs,yd(n)),e})},e.bc=function(e,t){Nd(this);var n=this;return md(this).signInWithEmailAndPassword(e,t).then(function(r){return Sd(n,function(i){return i?Ad(n).then(function(){return Pd(n,{code:"auth/email-already-in-use"},pl.auth.EmailAuthProvider.credential(e,t))}):r})})},e.Yb=function(e,t){Nd(this);var n=this;return Sd(this,function(r){if(r){var i=pl.auth.EmailAuthProvider.credential(e,t);return r.linkWithCredential(i)}return md(n).createUserWithEmailAndPassword(e,t)})},e.ac=function(e){Nd(this);var t=this;return Sd(this,function(n){return n?n.linkWithCredential(e).then(function(e){return e},function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Pd(t,n,e)}):md(t).signInWithCredential(e)})},e.dc=function(e){Nd(this);var t=this,n=this.i;return this.i=null,Sd(this,function(n){return n&&!Gs(yd(t))?n.linkWithRedirect(e):md(t).signInWithRedirect(e)}).then(function(){},function(e){throw t.i=n,e})},e.cc=function(e,t){Nd(this);var n=this;return Sd(this,function(r){return r?r.linkWithPhoneNumber(e,t).then(function(e){return new Si(e,function(e){if("auth/credential-already-in-use"==e.code)return Pd(n,e);throw e})}):gd(n).signInWithPhoneNumber(e,t).then(function(e){return new Si(e)})})},e.$b=function(){return Nd(this),gd(this).signInAnonymously()},e.Xb=function(e,t){return Nd(this),md(this).signInWithEmailAndPassword(e,t)},a(Rd,Il),Rd.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Cu(this.l(),(this.l().value||"").length),Il.prototype.v.call(this)},Rd.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},T(Rd.prototype,{l:_c,H:Nc,u:Ic,B:Ac,j:Pc,M:vc,w:wc}),a(jd,Il),jd.prototype.v=function(){!function(e,t){function n(e){t(e)}for(var r=e.g?Lt("firebaseui-id-tenant-selection-button",e.g||e.s.a):[],i=0;i<r.length;i++){var s=r[i];Yo(e,s,E(n,Ku(s,"tenantId")))}}(this,this.i),Il.prototype.v.call(this)},jd.prototype.o=function(){this.i=null,Il.prototype.o.call(this)},a(Md,Il);var Vd=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],$d="optionFirst",Hd={pc:$d,oc:"identifierFirst"},qd="*";function Kd(e,t){var n=this;this.s=Zr(e),this.a={},Object.keys(t).forEach(function(e){n.a[e]=new Dd(t[e])}),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(e){this.ob=e||null},enumerable:!1})}function Wd(e){e.j&&e.j.reset(),e.mb(),e.g&&e.g.m()}(e=Kd.prototype).Ub=function(e,t){var n=this;Wd(this);var r=e.apiKey;return new Pr(function(e,i){if(n.a.hasOwnProperty(r)){var s=Ld(n.a[r]).selectTenantUiHidden||null;if(function(e){for(var t in e=e.a.get("displayMode"),Hd)if(Hd[t]===e)return Hd[t];return $d}(n.a[r])===$d){var a=[];t.forEach(function(e){e=e||"_";var t=n.a[r].a.get("tenants");if(!t)throw Error("Invalid tenant configuration!");(t=t[e]||t[qd])?e={tenantId:"_"!==e?e:null,V:t.fullLabel||null,displayName:t.displayName,za:t.iconUrl,ta:t.buttonColor}:(Bi("Invalid tenant configuration: "+e+" is not configured!",void 0),e=null),e&&a.push(e)});var o=function(t){t={tenantId:t,providerIds:zd(n.a[r],t||"_")},e(t)};if(1===a.length)return void o(a[0].tenantId);n.g=new jd(function(e){Wd(n),s&&s(),o(e)},a,Od(n.a[r]),Fd(n.a[r]))}else n.g=new Rd(function(){var i=n.g.j();if(i){for(var a=0;a<t.length;a++){var o=zd(n.a[r],t[a]||"_",i);if(0!==o.length)return i={tenantId:t[a],providerIds:o,email:i},Wd(n),s&&s(),void e(i)}n.g.a(_n({code:"no-matching-tenant-for-email"}).toString())}},Od(n.a[r]),Fd(n.a[r]));n.g.render(n.s),(i=Ld(n.a[r]).selectTenantUiShown||null)&&i()}else{var l=Error("Invalid project configuration: API key is invalid!");l.code="invalid-configuration",n.pb(l),i(l)}})},e.Pb=function(e,t){if(!this.a.hasOwnProperty(e))throw Error("Invalid project configuration: API key is invalid!");var n=t||void 0;Ud(this.a[e],t||"_");try{this.i=pl.app(n).auth()}catch(wM){var r=this.a[e].a.get("authDomain");if(!r)throw Error("Invalid project configuration: authDomain is required!");(e=pl.initializeApp({apiKey:e,authDomain:r},n)).auth().tenantId=t,this.i=e.auth()}return this.i},e.Zb=function(e,t){var n=this;return new Pr(function(r,i){function s(t,r){n.j=new ld(e),wd(n.j,n.s,t,r)}var a=e.app.options.apiKey;n.a.hasOwnProperty(a)||i(Error("Invalid project configuration: API key is invalid!"));var o=Bd(n.a[a],e.tenantId||"_",t&&t.providerIds);Wd(n),i={signInSuccessWithAuthResult:function(e){return r(e),!1}};var l,c=Ld(n.a[a]).signInUiShown||null,u=!1;i.uiChanged=function(t,r){null===t&&"callback"===r?((t=Ot("firebaseui-id-page-callback",n.s))&&Jo(t),n.h=new Md,n.h.render(n.s)):u||null===t&&"spinner"===r||"blank"===r||(n.h&&(n.h.m(),n.h=null),u=!0,c&&c(e.tenantId))},o.callbacks=i,o.credentialHelper="none",t&&t.email&&(l={emailHint:t.email}),n.j?n.j.Wa().then(function(){s(o,l)}):s(o,l)})},e.reset=function(){var e=this;return Fr().then(function(){e.j&&e.j.Wa()}).then(function(){e.j=null,Wd(e)})},e.Vb=function(){var e=this;this.h||this.A||(this.A=window.setTimeout(function(){Wd(e),e.h=new Md,e.g=e.h,e.h.render(e.s),e.A=null},500))},e.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},e.Bb=function(){return Wd(this),this.g=new zc,this.g.render(this.s),Fr()},e.pb=function(e){var t,n=this,r=_n({code:e.code}).toString()||e.message;Wd(this),e.retry&&"function"==typeof e.retry&&(t=function(){n.reset(),e.retry()}),this.g=new Hc(r,t),this.g.render(this.s)},e.Rb=function(e){var t=this;return Fr().then(function(){var n=t.i&&t.i.app.options.apiKey;if(!t.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(Ud(t.a[n],e.tenantId||"_"),!t.i.currentUser||t.i.currentUser.uid!==e.uid)throw Error("The user being processed does not match the signed in user!");return(n=Ld(t.a[n]).beforeSignInSuccess||null)?n(e):e}).then(function(t){if(t.uid!==e.uid)throw Error("User with mismatching UID returned.");return t})},I("firebaseui.auth.FirebaseUiHandler",Kd),I("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Kd.prototype.Ub),I("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Kd.prototype.Pb),I("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Kd.prototype.Zb),I("firebaseui.auth.FirebaseUiHandler.prototype.reset",Kd.prototype.reset),I("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Kd.prototype.Vb),I("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Kd.prototype.mb),I("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Kd.prototype.Bb),I("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Kd.prototype.pb),I("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Kd.prototype.Rb),I("firebaseui.auth.AuthUI",ld),I("firebaseui.auth.AuthUI.getInstance",function(e){return e=dd(e),ud[e]?ud[e]:null}),I("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",ld.prototype.Db),I("firebaseui.auth.AuthUI.prototype.start",ld.prototype.start),I("firebaseui.auth.AuthUI.prototype.setConfig",ld.prototype.ib),I("firebaseui.auth.AuthUI.prototype.signIn",ld.prototype.Wb),I("firebaseui.auth.AuthUI.prototype.reset",ld.prototype.reset),I("firebaseui.auth.AuthUI.prototype.delete",ld.prototype.Wa),I("firebaseui.auth.AuthUI.prototype.isPendingRedirect",ld.prototype.nb),I("firebaseui.auth.AuthUIError",In),I("firebaseui.auth.AuthUIError.prototype.toJSON",In.prototype.toJSON),I("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",Ga),I("firebaseui.auth.CredentialHelper.NONE",Ya),I("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Pr.prototype.catch=Pr.prototype.Ca,Pr.prototype.finally=Pr.prototype.fc}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:window)}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=_f);var Ff=firebaseui.auth;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Jo("firebase","10.14.1","app");var Uf,zf,Bf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||0<c.l(e);)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,zf=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Uf=r}).apply(void 0!==Bf?Bf:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Vf,$f,Hf,qf,Kf,Wf,Gf,Yf,Jf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Jf&&Jf];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,N=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);_=()=>{e.then(P)}};var P=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}N=!1};function R(){this.s=this.s,this.C=this.C}function j(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},j.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(j.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,j);var L={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=Z(n),e&&e[O]?e.K(t,n,!!a(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Q(e);if(l||(e[H]=l=new B(e)),n=l.add(t,n,r,o,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Z(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(V(n,e),0==n.h&&(n.src=null,t[H]=null)):z(e)}}}function Y(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function Q(e){return(e=e[H])instanceof B?e:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[X]||(e[X]=function(t){return e.handleEvent(t)}),e[X])}function ee(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new j(t,e);else if(t instanceof j)t.target=t.target||e;else{var i=t;x(t=new j(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ne(a,r,!0,t)&&i}if(i=ne(a=t.g=e,r,!0,t)&&i,i=ne(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(a=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,R),ee.prototype[O]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){R.call(this),this.h=e,this.g={}}d(ae,R);var oe=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,ue=i.JSON.parse,de=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}he.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){j.call(this,"d")}function ye(){j.call(this,"c")}d(ge,j),d(ye,j);var ve={},be=null;function we(){return be=be||new ee}function xe(e){j.call(this,ve.La,e)}function Se(e){const t=we();te(t,new xe(t))}function ke(e,t){j.call(this,ve.STAT_EVENT,e),this.stat=t}function Ce(e){const t=we();te(t,new ke(t,e))}function Ee(e,t){j.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function _e(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",d(xe,j),ve.STAT_EVENT="statevent",d(ke,j),ve.Ma="timingevent",d(Ee,j),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Ie,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Re,he),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ie=new Re;var De={},Le={};function Oe(e,t,n){e.L=1,e.v=ct(it(t)),e.m=n,e.P=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),Be(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ue(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?De:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,Ve(e,e.I)}function Ve(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function $e(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||sn(e.j,e)}function qe(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Qe(n.h,e)))if(!e.K&&Qe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Wt(n)}en(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else on(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Xe(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),a.K){Ze(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&($e(o),Be(o)),r.g=a}else Zt(r);0<n.i.length&&Yt(n)}else"stop"!=c[0]&&"close"!=c[0]||on(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?on(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Vt(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const h=Vt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=h||7==t||Se(),$e(this);var n=this.g.Z();this.X=n;t:if(Ue(this)){var r=$t(this.g);e="";var s=r.length,a=4==Vt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qe(this),He(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),qe(this),He(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Le){4==h&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==De){this.s=4,Ce(15),Ne(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ke(this,e)}if(Ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tn(d),d.M=!0,Ce(11))}}else Ne(this.i,this.l,o,"[Invalid Chunked Response]"),qe(this),He(this)}else Ne(this.i,this.l,o,null),Ke(this,o);4==h&&qe(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Vt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),qe(this),He(this)}}}catch(h){}},je.prototype.cancel=function(){this.J=!0,qe(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ce(17)),qe(this),this.s=2,He(this)):Ve(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xe(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ge.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),at(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(bt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function wt(e,t){bt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return bt(e),t=kt(e,t),e.g.has(t)}function St(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),h(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Et(){this.g=new de}function Tt(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;a(e)&&(i=ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(wM){throw t.push(r+"type="+encodeURIComponent("_badmap")),wM}}function _t(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function It(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Mt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){bt(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){bt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){bt(this);let t=[];if("string"==typeof e)xt(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return bt(this),this.i=null,xt(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(_t,he),_t.prototype.g=function(){return new Nt(this.l,this.j)},_t.prototype.i=function(e){return function(){return e}}({}),d(Nt,ee),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;It(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):Pt(this),3==this.readyState&&It(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Qa=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ee);var Dt=/^https?$/i,Lt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),zt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ut(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Vt(e)||2!=e.Z()))if(e.u&&4==Vt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==Vt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(nt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Dt.test(a?a.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<Vt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(wM){}}}function Bt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Vt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Da=new Et,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Gt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Qt(e,n),(t=new je(e,e.j,t)).L=2,t.v=ct(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}ln(e)}function Wt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Gt(e){Wt(e),e.u&&(i.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||A(),N||(_(),N=!0),I.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Qt(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Xt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Xe(e.h,n),Oe(n,r,t)}function Qt(e,t){e.H&&v(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Xt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{Tt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||A(),N||(_(),N=!0),I.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),an(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Qt(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(it(t)),n.m=null,n.P=!0,Fe(n,e)}function rn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=we(),new Ee(r,n)),Yt(e)}else Zt(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),an(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:on(e,5);break;case 4:on(e,10);break;case 3:on(e,6);break;default:on(e,2)}}function an(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function on(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ct(r),t?function(e,t){const n=new _e;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ct(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ct(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),ln(e),Gt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),at(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new rt(null);r&&st(a,r),t&&(a.g=t),s&&at(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Qt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new _t({eb:n})):new Mt(e.pa)).Ha(e.J),t}function dn(){}function hn(){}function fn(e,t){ee.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ie.g(),this.v=this.o?fe(this.o):fe(Ie),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ot(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Lt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ot(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Qt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&jt(n,this.m,s)),Xe(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Oe(i,n,null)):Oe(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Ye(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Wt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Wt(this),en(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=dn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},hn.prototype.g=function(e,t){return new fn(e,t)},d(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Kt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Yt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,fn.aa.N.call(this)},d(pn,ge),d(mn,ye),d(gn,dn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},hn.prototype.createWebChannel=hn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Yf=function(){return new hn},Gf=function(){return we()},Wf=ve,Kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,qf=Ae,Pe.COMPLETE="complete",Hf=Pe,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,$f=pe,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Vf=Mt}).apply(void 0!==Jf?Jf:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Qf="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xf.UNAUTHENTICATED=new Xf(null),Xf.GOOGLE_CREDENTIALS=new Xf("google-credentials-uid"),Xf.FIRST_PARTY=new Xf("first-party-uid"),Xf.MOCK_USER=new Xf("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Zf="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=new Fa("@firebase/firestore");function tp(){return ep.logLevel}function np(e,...t){if(ep.logLevel<=Ra.DEBUG){const n=t.map(sp);ep.debug(`Firestore (${Zf}): ${e}`,...n)}}function rp(e,...t){if(ep.logLevel<=Ra.ERROR){const n=t.map(sp);ep.error(`Firestore (${Zf}): ${e}`,...n)}}function ip(e,...t){if(ep.logLevel<=Ra.WARN){const n=t.map(sp);ep.warn(`Firestore (${Zf}): ${e}`,...n)}}function sp(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(e="Unexpected state"){const t=`FIRESTORE (${Zf}) INTERNAL ASSERTION FAILED: `+e;throw rp(t),new Error(t)}function op(e,t){e||ap()}function lp(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class up extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xf.UNAUTHENTICATED))}shutdown(){}}class pp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mp{constructor(e){this.t=e,this.currentUser=Xf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){op(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new dp;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dp,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{np("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(np("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dp)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(np("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(op("string"==typeof t.accessToken),new hp(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return op(null===e||"string"==typeof e),new Xf(e)}}class gp{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Xf.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yp{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Xf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bp{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){op(void 0===this.o);const n=e=>{null!=e.error&&np("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,np("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{np("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):np("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(op("string"==typeof e.token),this.R=e.token,new vp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=wp(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Sp(e,t){return e<t?-1:e>t?1:0}function kp(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new up(cp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new up(cp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new up(cp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new up(cp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cp.fromMillis(Date.now())}static fromDate(e){return Cp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Cp(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sp(this.nanoseconds,e.nanoseconds):Sp(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ep(e)}static min(){return new Ep(new Cp(0,0))}static max(){return new Ep(new Cp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,n){void 0===t?t=0:t>e.length&&ap(),void 0===n?n=e.length-t:n>e.length-t&&ap(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Tp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tp?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _p extends Tp{construct(e,t,n){return new _p(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new up(cp.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new _p(t)}static emptyPath(){return new _p([])}}const Np=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ip extends Tp{construct(e,t,n){return new Ip(e,t,n)}static isValidIdentifier(e){return Np.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ip.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ip(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new up(cp.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new up(cp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new up(cp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new up(cp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ip(t)}static emptyPath(){return new Ip([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.path=e}static fromPath(e){return new Ap(_p.fromString(e))}static fromName(e){return new Ap(_p.fromString(e).popFirst(5))}static empty(){return new Ap(_p.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_p.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _p.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ap(new _p(e.slice()))}}function Pp(e){return new Rp(e.readTime,e.key,-1)}class Rp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rp(Ep.min(),Ap.empty(),-1)}static max(){return new Rp(Ep.max(),Ap.empty(),-1)}}function jp(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ap.comparator(e.documentKey,t.documentKey),0!==n?n:Sp(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Mp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(e){if(e.code!==cp.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;np("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ap(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Lp((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Lp?t:Lp.resolve(t)}catch(t){return Lp.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Lp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Lp.reject(t)}static resolve(e){return new Lp((t,n)=>{t(e)})}static reject(e){return new Lp((t,n)=>{n(e)})}static waitFor(e){return new Lp((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Lp.resolve(!1);for(const n of e)t=t.next(e=>e?Lp.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Lp((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Lp((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Op(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Up(e){return null==e}function zp(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bp(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vp(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $p(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fp.oe=-1;class Hp{constructor(e,t){this.comparator=e,this.root=t||Kp.EMPTY}insert(e,t){return new Hp(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kp.BLACK,null,null))}remove(e){return new Hp(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kp.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qp(this.root,e,this.comparator,!0)}}class qp{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kp{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Kp.RED,this.left=null!=r?r:Kp.EMPTY,this.right=null!=i?i:Kp.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Kp(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kp.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Kp.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kp.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ap();if(this.right.isRed())throw ap();const e=this.left.check();if(e!==this.right.check())throw ap();return e+(this.isRed()?0:1)}}Kp.EMPTY=null,Kp.RED=!0,Kp.BLACK=!1,Kp.EMPTY=new class{constructor(){this.size=0}get key(){throw ap()}get value(){throw ap()}get color(){throw ap()}get left(){throw ap()}get right(){throw ap()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Kp(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wp{constructor(e){this.comparator=e,this.data=new Hp(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gp(this.data.getIterator())}getIteratorFrom(e){return new Gp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Wp))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wp(this.comparator);return t.data=e,t}}class Gp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.fields=e,e.sort(Ip.comparator)}static empty(){return new Yp([])}unionWith(e){let t=new Wp(Ip.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yp(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kp(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Jp("Invalid base64 string: "+t):t}}(e);return new Qp(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sp(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qp.EMPTY_BYTE_STRING=new Qp("");const Xp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zp(e){if(op(!!e),"string"==typeof e){let t=0;const n=Xp.exec(e);if(op(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:em(e.seconds),nanos:em(e.nanos)}}function em(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tm(e){return"string"==typeof e?Qp.fromBase64String(e):Qp.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rm(e){const t=e.mapValue.fields.__previous_value__;return nm(t)?rm(t):t}function im(e){const t=Zp(e.mapValue.fields.__local_write_time__.timestampValue);return new Cp(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class am{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new am("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof am&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om={};function lm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nm(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(e)?10:11:ap()}function cm(e,t){if(e===t)return!0;const n=lm(e);if(n!==lm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return im(e).isEqual(im(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zp(e.timestampValue),r=Zp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,tm(e.bytesValue).isEqual(tm(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return em(e.geoPointValue.latitude)===em(t.geoPointValue.latitude)&&em(e.geoPointValue.longitude)===em(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return em(e.integerValue)===em(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=em(e.doubleValue),r=em(t.doubleValue);return n===r?zp(n)===zp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kp(e.arrayValue.values||[],t.arrayValue.values||[],cm);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Bp(n)!==Bp(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cm(n[i],r[i])))return!1;return!0}(e,t);default:return ap()}var r}function um(e,t){return void 0!==(e.values||[]).find(e=>cm(e,t))}function dm(e,t){if(e===t)return 0;const n=lm(e),r=lm(t);if(n!==r)return Sp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sp(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=em(e.integerValue||e.doubleValue),r=em(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hm(e.timestampValue,t.timestampValue);case 4:return hm(im(e),im(t));case 5:return Sp(e.stringValue,t.stringValue);case 6:return function(e,t){const n=tm(e),r=tm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sp(n[i],r[i]);if(0!==e)return e}return Sp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sp(em(e.latitude),em(t.latitude));return 0!==n?n:Sp(em(e.longitude),em(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return fm(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Sp((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:fm(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===om&&t===om)return 0;if(e===om)return 1;if(t===om)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Sp(r[a],s[a]);if(0!==e)return e;const t=dm(n[r[a]],i[s[a]]);if(0!==t)return t}return Sp(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ap()}}function hm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sp(e,t);const n=Zp(e),r=Zp(t),i=Sp(n.seconds,r.seconds);return 0!==i?i:Sp(n.nanos,r.nanos)}function fm(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=dm(n[i],r[i]);if(e)return e}return Sp(n.length,r.length)}function pm(e){return mm(e)}function mm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zp(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?tm(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Ap.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${mm(e.fields[i])}`;return n+"}"}(e.mapValue):ap()}function gm(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ym(e){return!!e&&"integerValue"in e}function vm(e){return!!e&&"arrayValue"in e}function bm(e){return!!e&&"nullValue"in e}function wm(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xm(e){return!!e&&"mapValue"in e}function Sm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vp(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Sm(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Sm(e.arrayValue.values[n]);return t}return Object.assign({},e)}class km{constructor(e){this.value=e}static empty(){return new km({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sm(t)}setAll(e){let t=Ip.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Sm(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cm(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vp(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new km(Sm(this.value))}}function Cm(e){const t=[];return Vp(e.fields,(e,n)=>{const r=new Ip([e]);if(xm(n)){const e=Cm(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Yp(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Em{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Em(e,0,Ep.min(),Ep.min(),Ep.min(),km.empty(),0)}static newFoundDocument(e,t,n,r){return new Em(e,1,t,Ep.min(),n,r,0)}static newNoDocument(e,t){return new Em(e,2,t,Ep.min(),Ep.min(),km.empty(),0)}static newUnknownDocument(e,t){return new Em(e,3,t,Ep.min(),Ep.min(),km.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ep.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=km.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=km.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ep.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Em&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Em(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.position=e,this.inclusive=t}}function _m(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Ap.comparator(Ap.fromName(a.referenceValue),n.key):dm(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Nm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cm(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,t="asc"){this.field=e,this.dir=t}}function Am(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{}class Rm extends Pm{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Um(e,t,n):"array-contains"===t?new $m(e,n):"in"===t?new Hm(e,n):"not-in"===t?new qm(e,n):"array-contains-any"===t?new Km(e,n):new Rm(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zm(e,n):new Bm(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(dm(t,this.value)):null!==t&&lm(this.value)===lm(t)&&this.matchesComparison(dm(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ap()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jm extends Pm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jm(e,t)}matches(e){return Mm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Mm(e){return"and"===e.op}function Dm(e){return function(e){for(const t of e.filters)if(t instanceof jm)return!1;return!0}(e)&&Mm(e)}function Lm(e){if(e instanceof Rm)return e.field.canonicalString()+e.op.toString()+pm(e.value);if(Dm(e))return e.filters.map(e=>Lm(e)).join(",");{const t=e.filters.map(e=>Lm(e)).join(",");return`${e.op}(${t})`}}function Om(e,t){return e instanceof Rm?(n=e,(r=t)instanceof Rm&&n.op===r.op&&n.field.isEqual(r.field)&&cm(n.value,r.value)):e instanceof jm?function(e,t){return t instanceof jm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Om(n,t.filters[r]),!0)}(e,t):void ap();var n,r}function Fm(e){return e instanceof Rm?`${(t=e).field.canonicalString()} ${t.op} ${pm(t.value)}`:e instanceof jm?function(e){return e.op.toString()+" {"+e.getFilters().map(Fm).join(" ,")+"}"}(e):"Filter";var t}class Um extends Rm{constructor(e,t,n){super(e,t,n),this.key=Ap.fromName(n.referenceValue)}matches(e){const t=Ap.comparator(e.key,this.key);return this.matchesComparison(t)}}class zm extends Rm{constructor(e,t){super(e,"in",t),this.keys=Vm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bm extends Rm{constructor(e,t){super(e,"not-in",t),this.keys=Vm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ap.fromName(e.referenceValue))}class $m extends Rm{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&um(t.arrayValue,this.value)}}class Hm extends Rm{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&um(this.value.arrayValue,t)}}class qm extends Rm{constructor(e,t){super(e,"not-in",t)}matches(e){if(um(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!um(this.value.arrayValue,t)}}class Km extends Rm{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>um(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Gm(e,t=null,n=[],r=[],i=null,s=null,a=null){return new Wm(e,t,n,r,i,s,a)}function Ym(e){const t=lp(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Lm(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Up(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>pm(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>pm(e)).join(",")),t.ue=e}return t.ue}function Jm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Am(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Om(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nm(e.startAt,t.startAt)&&Nm(e.endAt,t.endAt)}function Qm(e){return Ap.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zm(e){return new Xm(e)}function eg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tg(e){return null!==e.collectionGroup}function ng(e){const t=lp(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new Wp(Ip.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Im(r,n))}),e.has(Ip.keyField().canonicalString())||t.ce.push(new Im(Ip.keyField(),n))}return t.ce}function rg(e){const t=lp(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return Gm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Im(e.field,t)});const n=e.endAt?new Tm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tm(e.startAt.position,e.startAt.inclusive):null;return Gm(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,ng(e))),t.le}function ig(e,t){const n=e.filters.concat([t]);return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sg(e,t,n){return new Xm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ag(e,t){return Jm(rg(e),rg(t))&&e.limitType===t.limitType}function og(e){return`${Ym(rg(e))}|lt:${e.limitType}`}function lg(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Fm(e)).join(", ")}]`),Up(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>pm(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>pm(e)).join(",")),`Target(${t})`}(rg(e))}; limitType=${e.limitType})`}function cg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ap.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ng(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=_m(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,ng(n),r)||n.endAt&&!function(e,t,n){const r=_m(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,ng(n),r)));var n,r}function ug(e){return(t,n)=>{let r=!1;for(const i of ng(e)){const e=dg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function dg(e,t,n){const r=e.field.isKeyField()?Ap.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?dm(r,i):ap()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ap()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vp(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return $p(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Hp(Ap.comparator);function pg(){return fg}const mg=new Hp(Ap.comparator);function gg(...e){let t=mg;for(const n of e)t=t.insert(n.key,n);return t}function yg(e){let t=mg;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function vg(){return wg()}function bg(){return wg()}function wg(){return new hg(e=>e.toString(),(e,t)=>e.isEqual(t))}const xg=new Hp(Ap.comparator),Sg=new Wp(Ap.comparator);function kg(...e){let t=Sg;for(const n of e)t=t.add(n);return t}const Cg=new Wp(Sp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Eg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zp(t)?"-0":t}}function Tg(e){return{integerValue:""+e}}function _g(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!zp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Tg(t):Eg(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this._=void 0}}function Ig(e,t,n){return e instanceof Rg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&nm(t)&&(t=rm(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof jg?Mg(e,t):e instanceof Dg?Lg(e,t):function(e,t){const n=Pg(e,t),r=Fg(n)+Fg(e.Pe);return ym(n)&&ym(e.Pe)?Tg(r):Eg(e.serializer,r)}(e,t)}function Ag(e,t,n){return e instanceof jg?Mg(e,t):e instanceof Dg?Lg(e,t):n}function Pg(e,t){return e instanceof Og?ym(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Rg extends Ng{}class jg extends Ng{constructor(e){super(),this.elements=e}}function Mg(e,t){const n=Ug(t);for(const r of e.elements)n.some(e=>cm(e,r))||n.push(r);return{arrayValue:{values:n}}}class Dg extends Ng{constructor(e){super(),this.elements=e}}function Lg(e,t){let n=Ug(t);for(const r of e.elements)n=n.filter(e=>!cm(e,r));return{arrayValue:{values:n}}}class Og extends Ng{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fg(e){return em(e.integerValue||e.doubleValue)}function Ug(e){return vm(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class zg{constructor(e,t){this.version=e,this.transformResults=t}}class Bg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bg}static exists(e){return new Bg(void 0,e)}static updateTime(e){return new Bg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class $g{}function Hg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ey(e.key,Bg.none()):new Yg(e.key,e.data,Bg.none());{const n=e.data,r=km.empty();let i=new Wp(Ip.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Jg(e.key,r,new Yp(i.toArray()),Bg.none())}}function qg(e,t,n){var r;e instanceof Yg?function(e,t,n){const r=e.value.clone(),i=Xg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Jg?function(e,t,n){if(!Vg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function Kg(e,t,n,r){return e instanceof Yg?function(e,t,n,r){if(!Vg(e.precondition,t))return n;const i=e.value.clone(),s=Zg(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Jg?function(e,t,n,r){if(!Vg(e.precondition,t))return n;const i=Zg(e.fieldTransforms,r,t),s=t.data;return s.setAll(Qg(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,Vg(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function Wg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Pg(r.transform,e||null);null!=i&&(null===n&&(n=km.empty()),n.set(r.field,i))}return n||null}function Gg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&kp(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof jg&&r instanceof jg||n instanceof Dg&&r instanceof Dg?kp(n.elements,r.elements,cm):n instanceof Og&&r instanceof Og?cm(n.Pe,r.Pe):n instanceof Rg&&r instanceof Rg);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class Yg extends $g{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Jg extends $g{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qg(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xg(e,t,n){const r=new Map;op(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Ag(a,o,n[i]))}return r}function Zg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ig(e,s,t))}return r}class ey extends $g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ty extends $g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&qg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=bg();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Hg(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Ep.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kg())}isEqual(e){return this.batchId===e.batchId&&kp(this.mutations,e.mutations,(e,t)=>Gg(e,t))&&kp(this.baseMutations,e.baseMutations,(e,t)=>Gg(e,t))}}class ry{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){op(e.mutations.length===n.length);let r=function(){return xg}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ry(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay,oy;function ly(e){if(void 0===e)return rp("GRPC error has no .code"),cp.UNKNOWN;switch(e){case ay.OK:return cp.OK;case ay.CANCELLED:return cp.CANCELLED;case ay.UNKNOWN:return cp.UNKNOWN;case ay.DEADLINE_EXCEEDED:return cp.DEADLINE_EXCEEDED;case ay.RESOURCE_EXHAUSTED:return cp.RESOURCE_EXHAUSTED;case ay.INTERNAL:return cp.INTERNAL;case ay.UNAVAILABLE:return cp.UNAVAILABLE;case ay.UNAUTHENTICATED:return cp.UNAUTHENTICATED;case ay.INVALID_ARGUMENT:return cp.INVALID_ARGUMENT;case ay.NOT_FOUND:return cp.NOT_FOUND;case ay.ALREADY_EXISTS:return cp.ALREADY_EXISTS;case ay.PERMISSION_DENIED:return cp.PERMISSION_DENIED;case ay.FAILED_PRECONDITION:return cp.FAILED_PRECONDITION;case ay.ABORTED:return cp.ABORTED;case ay.OUT_OF_RANGE:return cp.OUT_OF_RANGE;case ay.UNIMPLEMENTED:return cp.UNIMPLEMENTED;case ay.DATA_LOSS:return cp.DATA_LOSS;default:return ap()}}(oy=ay||(ay={}))[oy.OK=0]="OK",oy[oy.CANCELLED=1]="CANCELLED",oy[oy.UNKNOWN=2]="UNKNOWN",oy[oy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oy[oy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oy[oy.NOT_FOUND=5]="NOT_FOUND",oy[oy.ALREADY_EXISTS=6]="ALREADY_EXISTS",oy[oy.PERMISSION_DENIED=7]="PERMISSION_DENIED",oy[oy.UNAUTHENTICATED=16]="UNAUTHENTICATED",oy[oy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oy[oy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oy[oy.ABORTED=10]="ABORTED",oy[oy.OUT_OF_RANGE=11]="OUT_OF_RANGE",oy[oy.UNIMPLEMENTED=12]="UNIMPLEMENTED",oy[oy.INTERNAL=13]="INTERNAL",oy[oy.UNAVAILABLE=14]="UNAVAILABLE",oy[oy.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cy=new Uf([4294967295,4294967295],0);function uy(e){const t=(new TextEncoder).encode(e),n=new zf;return n.update(t),new Uint8Array(n.digest())}function dy(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Uf([n,r],0),new Uf([i,s],0)]}class hy{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new fy(`Invalid padding: ${t}`);if(n<0)throw new fy(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new fy(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new fy(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Uf.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Uf.fromNumber(n)));return 1===r.compare(cy)&&(r=new Uf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=uy(e),[n,r]=dy(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new hy(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=uy(e),[n,r]=dy(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class fy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,my.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new py(Ep.min(),r,new Hp(Sp),pg(),kg())}}class my{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new my(n,t,kg(),kg(),kg())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class yy{constructor(e,t){this.targetId=e,this.me=t}}class vy{constructor(e,t,n=Qp.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class by{constructor(){this.fe=0,this.ge=Sy(),this.pe=Qp.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kg(),t=kg(),n=kg();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ap()}}),new my(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Sy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,op(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class wy{constructor(e){this.Le=e,this.Be=new Map,this.ke=pg(),this.qe=xy(),this.Qe=new Hp(Sp)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:ap()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Qm(i))if(0===n){const e=new Ap(i.path);this.Ue(t,e,Em.newNoDocument(e,Ep.min()))}else op(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=tm(n).toUint8Array()}catch(o){if(o instanceof Jp)return ip("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new hy(s,r,i)}catch(o){return ip(o instanceof fy?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Qm(i.target)){const t=new Ap(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Em.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=kg();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new py(e,t,this.Qe,this.ke,n);return this.ke=pg(),this.qe=xy(),this.Qe=new Hp(Sp),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new by,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Wp(Sp),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||np("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new by),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xy(){return new Hp(Ap.comparator)}function Sy(){return new Hp(Ap.comparator)}const ky=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Cy=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Ey=(()=>({and:"AND",or:"OR"}))();class Ty{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _y(e,t){return e.useProto3Json||Up(t)?t:{value:t}}function Ny(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Iy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ay(e,t){return Ny(e,t.toTimestamp())}function Py(e){return op(!!e),Ep.fromTimestamp(function(e){const t=Zp(e);return new Cp(t.seconds,t.nanos)}(e))}function Ry(e,t){return jy(e,t).canonicalString()}function jy(e,t){const n=(r=e,new _p(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function My(e){const t=_p.fromString(e);return op(Xy(t)),t}function Dy(e,t){return Ry(e.databaseId,t.path)}function Ly(e,t){const n=My(t);if(n.get(1)!==e.databaseId.projectId)throw new up(cp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new up(cp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ap(Uy(n))}function Oy(e,t){return Ry(e.databaseId,t)}function Fy(e){return new _p(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uy(e){return op(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zy(e,t,n){return{name:Dy(e,t),fields:n.value.mapValue.fields}}function By(e,t){return{documents:[Oy(e,t.path)]}}function Vy(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Oy(e,i);const s=function(e){if(0!==e.length)return Jy(jm.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>{return{field:Gy((t=e).field),direction:qy(t.dir)};var t})}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=_y(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i};var l}function $y(e){let t=function(e){const t=My(e);return 4===t.length?_p.emptyPath():Uy(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){op(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Hy(e);return t instanceof jm&&Dm(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(e=>{return new Im(Yy((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Up(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Tm(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Tm(n,t)}(n.endAt)),function(e,t,n,r,i,s,a,o){return new Xm(e,t,n,r,i,s,a,o)}(t,i,a,s,o,"F",l,c)}function Hy(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yy(e.unaryFilter.field);return Rm.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yy(e.unaryFilter.field);return Rm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yy(e.unaryFilter.field);return Rm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yy(e.unaryFilter.field);return Rm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ap()}}(e):void 0!==e.fieldFilter?(t=e,Rm.create(Yy(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ap()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return jm.create(e.compositeFilter.filters.map(e=>Hy(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ap()}}(e.compositeFilter.op))}(e):ap();var t}function qy(e){return ky[e]}function Ky(e){return Cy[e]}function Wy(e){return Ey[e]}function Gy(e){return{fieldPath:e.canonicalString()}}function Yy(e){return Ip.fromServerFormat(e.fieldPath)}function Jy(e){return e instanceof Rm?function(e){if("=="===e.op){if(wm(e.value))return{unaryFilter:{field:Gy(e.field),op:"IS_NAN"}};if(bm(e.value))return{unaryFilter:{field:Gy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wm(e.value))return{unaryFilter:{field:Gy(e.field),op:"IS_NOT_NAN"}};if(bm(e.value))return{unaryFilter:{field:Gy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gy(e.field),op:Ky(e.op),value:e.value}}}(e):e instanceof jm?function(e){const t=e.getFilters().map(e=>Jy(e));return 1===t.length?t[0]:{compositeFilter:{op:Wy(e.op),filters:t}}}(e):ap()}function Qy(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Xy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t,n,r,i=Ep.min(),s=Ep.min(),a=Qp.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Zy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.ct=e}}function tv(e){const t=$y({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sg(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.un=new rv}addToCollectionParentIndex(e,t){return this.un.add(t),Lp.resolve()}getCollectionParents(e,t){return Lp.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Lp.resolve()}deleteFieldIndex(e,t){return Lp.resolve()}deleteAllFieldIndexes(e){return Lp.resolve()}createTargetIndexes(e,t){return Lp.resolve()}getDocumentsMatchingTarget(e,t){return Lp.resolve(null)}getIndexType(e,t){return Lp.resolve(0)}getFieldIndexes(e,t){return Lp.resolve([])}getNextCollectionGroupToUpdate(e){return Lp.resolve(null)}getMinOffset(e,t){return Lp.resolve(Rp.min())}getMinOffsetFromCollectionGroup(e,t){return Lp.resolve(Rp.min())}updateCollectionGroup(e,t,n){return Lp.resolve()}updateIndexEntries(e,t){return Lp.resolve()}}class rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wp(_p.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wp(_p.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new iv(0)}static kn(){return new iv(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.changes=new hg(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Em.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Lp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Kg(n.mutation,e,Yp.empty(),Cp.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,kg()).next(()=>t))}getLocalViewOfDocuments(e,t,n=kg()){const r=vg();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=gg();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=vg();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,kg()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=pg();const s=wg(),a=wg();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Jg)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Kg(a.mutation,t,a.mutation.getFieldMask(),Cp.now())):s.set(t.key,Yp.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new av(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=wg();let r=new Hp((e,t)=>e-t),i=kg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Yp.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||kg()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=bg();l.forEach(e=>{if(!i.has(e)){const r=Hg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Lp.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,Ap.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):tg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Lp.resolve(vg());let a=-1,o=i;return s.next(t=>Lp.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Lp.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,kg())).next(e=>({batchId:a,changes:yg(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ap(t)).next(e=>{let t=gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=gg();return this.indexManager.getCollectionParents(e,i).next(a=>Lp.forEach(a,a=>{const o=(l=t,c=a.child(i),new Xm(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Em.newInvalidDocument(r)))});let n=gg();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Kg(s.mutation,r,Yp.empty(),Cp.now()),cg(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Lp.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(n=t).id,version:n.version,createTime:Py(n.createTime)}),Lp.resolve();var n}getNamedQuery(e,t){return Lp.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(n=t).name,query:tv(n.bundledQuery),readTime:Py(n.readTime)}),Lp.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.overlays=new Hp(Ap.comparator),this.Ir=new Map}getOverlay(e,t){return Lp.resolve(this.overlays.get(t))}getOverlays(e,t){const n=vg();return Lp.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),Lp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),Lp.resolve()}getOverlaysForCollection(e,t,n){const r=vg(),i=t.length+1,s=new Ap(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Lp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Hp((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=vg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=vg(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Lp.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new iy(t,n));let i=this.Ir.get(t);void 0===i&&(i=kg(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.sessionToken=Qp.EMPTY_BYTE_STRING}getSessionToken(e){return Lp.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Lp.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.Tr=new Wp(hv.Er),this.dr=new Wp(hv.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new hv(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new hv(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Ap(new _p([])),n=new hv(t,e),r=new hv(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ap(new _p([])),n=new hv(t,e),r=new hv(t,e+1);let i=kg();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new hv(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class hv{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ap.comparator(e.key,t.key)||Sp(e.wr,t.wr)}static Ar(e,t){return Sp(e.wr,t.wr)||Ap.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Wp(hv.Er)}checkEmpty(e){return Lp.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ny(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new hv(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Lp.resolve(s)}lookupMutationBatch(e,t){return Lp.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Lp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Lp.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Lp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hv(t,0),r=new hv(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),Lp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wp(Sp);return t.forEach(e=>{const t=new hv(e,0),r=new hv(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),Lp.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ap.isDocumentKey(i)||(i=i.child(""));const s=new hv(new Ap(i),0);let a=new Wp(Sp);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),Lp.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){op(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Lp.forEach(t.mutations,r=>{const i=new hv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new hv(t,0),r=this.br.firstAfterOrEqual(n);return Lp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Lp.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){this.Mr=e,this.docs=new Hp(Ap.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Lp.resolve(n?n.document.mutableCopy():Em.newInvalidDocument(t))}getEntries(e,t){let n=pg();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Em.newInvalidDocument(e))}),Lp.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=pg();const s=t.path,a=new Ap(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||jp(Pp(a),n)<=0||(r.has(a.key)||cg(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Lp.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ap()}Or(e,t){return Lp.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new mv(this)}getSize(e){return Lp.resolve(this.size)}}class mv extends sv{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),Lp.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){this.persistence=e,this.Nr=new hg(e=>Ym(e),Jm),this.lastRemoteSnapshotVersion=Ep.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dv,this.targetCount=0,this.kr=iv.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),Lp.resolve()}getLastRemoteSnapshotVersion(e){return Lp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Lp.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Lp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Lp.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new iv(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Lp.resolve()}updateTargetData(e,t){return this.Kn(t),Lp.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Lp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Lp.waitFor(i).next(()=>r)}getTargetCount(e){return Lp.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Lp.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Lp.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Lp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Lp.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Lp.resolve(n)}containsKey(e,t){return Lp.resolve(this.Br.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Fp(0),this.Kr=!1,this.Kr=!0,this.$r=new uv,this.referenceDelegate=e(this),this.Ur=new gv(this),this.indexManager=new nv,this.remoteDocumentCache=new pv(e=>this.referenceDelegate.Wr(e)),this.serializer=new ev(t),this.Gr=new lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new fv(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){np("MemoryPersistence","Starting transaction:",e);const r=new vv(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return Lp.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class vv extends Mp{constructor(e){super(),this.currentSequenceNumber=e}}class bv{constructor(e){this.persistence=e,this.Jr=new dv,this.Yr=null}static Zr(e){return new bv(e)}get Xr(){if(this.Yr)return this.Yr;throw ap()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Lp.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Lp.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Lp.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lp.forEach(this.Xr,n=>{const r=Ap.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ep.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Lp.or([()=>Lp.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=kg(),r=kg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new wv(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=!la()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(oa())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new xv;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(tp()<=Ra.DEBUG&&np("QueryEngine","SDK will not create cache indexes for query:",lg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Lp.resolve()):(tp()<=Ra.DEBUG&&np("QueryEngine","Query:",lg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(tp()<=Ra.DEBUG&&np("QueryEngine","The SDK decides to create cache indexes for query:",lg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rg(t))):Lp.resolve())}Yi(e,t){if(eg(t))return Lp.resolve(null);let n=rg(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=sg(t,null,"F"),n=rg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=kg(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,sg(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return eg(t)||r.isEqual(Ep.min())?Lp.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?Lp.resolve(null):(tp()<=Ra.DEBUG&&np("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lg(t)),this.rs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ep.fromTimestamp(1e9===r?new Cp(n+1,0):new Cp(n,r));return new Rp(i,Ap.empty(),t)}(r,-1)).next(e=>e))})}ts(e,t){let n=new Wp(ug(e));return t.forEach((t,r)=>{cg(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return tp()<=Ra.DEBUG&&np("QueryEngine","Using full collection scan to execute query:",lg(t)),this.Ji.getDocumentsMatchingQuery(e,t,Rp.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Hp(Sp),this._s=new hg(e=>Ym(e),Jm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ov(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}async function Cv(e,t){const n=lp(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=kg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ev(e){const t=lp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Tv(e,t){const n=lp(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);var u,d,h;null!==t.targetMismatches.get(o)?c=c.withResumeToken(Qp.EMPTY_BYTE_STRING,Ep.min()).withLastLimboFreeSnapshotVersion(Ep.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),d=c,h=s,(0===(u=l).resumeToken.approximateByteSize()||d.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(e,c))});let o=pg(),l=kg();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(function(e,t,n){let r=kg(),i=kg();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=pg();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ep.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):np("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Ep.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Lp.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}function _v(e,t){const n=lp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function Nv(e,t,n){const r=lp(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(a){if(!Op(a))throw a;np("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Iv(e,t,n){const r=lp(e);let i=Ep.min(),s=kg();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=lp(e),i=r._s.get(n);return void 0!==i?Lp.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,rg(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ep.min(),n?s:kg())).next(e=>(function(e,t,n){let r=e.us.get(t)||Ep.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ts:s})))}class Av{constructor(){this.activeTargetIds=Cg}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pv{constructor(){this.so=new Av,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Av,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{_o(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){np("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){np("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mv=null;function Dv(){return null===Mv?Mv=268435456+Math.round(2147483648*Math.random()):Mv++,"0x"+Mv.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Lv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="WebChannelConnection";class Uv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Dv(),a=this.xo(e,t.toUriEncodedString());np("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(np("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw ip("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Lv[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Dv();return new Promise((s,a)=>{const o=new Vf;o.setWithCredentials(!0),o.listenOnce(Hf.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case qf.NO_ERROR:const t=o.getResponseJson();np(Fv,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case qf.TIMEOUT:np(Fv,`RPC '${e}' ${i} timed out`),a(new up(cp.DEADLINE_EXCEEDED,"Request time out"));break;case qf.HTTP_ERROR:const n=o.getStatus();if(np(Fv,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(cp).indexOf(t)>=0?t:cp.UNKNOWN}(t.status);a(new up(e,t.message))}else a(new up(cp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new up(cp.UNAVAILABLE,"Connection failed."));break;default:ap()}}finally{np(Fv,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);np(Fv,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Dv(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Yf(),a=Gf(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");np(Fv,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);let d=!1,h=!1;const f=new Ov({Io:t=>{h?np(Fv,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(np(Fv,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),np(Fv,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,$f.EventType.OPEN,()=>{h||(np(Fv,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,$f.EventType.CLOSE,()=>{h||(h=!0,np(Fv,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,$f.EventType.ERROR,t=>{h||(h=!0,ip(Fv,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new up(cp.UNAVAILABLE,"The operation could not be completed")))}),p(u,$f.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];op(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){np(Fv,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=ay[e];if(void 0!==t)return ly(t)}(t),i=a.message;void 0===n&&(n=cp.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new up(n,i)),u.close()}else np(Fv,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(a,Wf.STAT_EVENT,t=>{t.stat===Kf.PROXY?np(Fv,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Kf.NOPROXY&&np(Fv,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function zv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(e){return new Ty(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&np("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vv(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===cp.RESOURCE_EXHAUSTED?(rp(t.toString()),rp("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===cp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Yo===t&&this.P_(e,n)},t=>{e(()=>{const e=new up(cp.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return np("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(np("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hv extends $v{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:ap(),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(op(void 0===t||"string"==typeof t),Qp.fromBase64String(t||"")):(op(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Qp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?cp.UNKNOWN:ly(e.code);return new up(t,e.message||"")}(o);n=new vy(i,s,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ly(e,r.document.name),s=Py(r.document.updateTime),a=r.document.createTime?Py(r.document.createTime):Ep.min(),o=new km({mapValue:{fields:r.document.fields}}),l=Em.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new gy(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ly(e,r.document),s=r.readTime?Py(r.readTime):Ep.min(),a=Em.newNoDocument(i,s),o=r.removedTargetIds||[];n=new gy([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ly(e,r.document),s=r.removedTargetIds||[];n=new gy([],s,i,null)}else{if(!("filter"in t))return ap();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new sy(r,i),a=e.targetId;n=new yy(a,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ep.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ep.min():t.readTime?Py(t.readTime):Ep.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Fy(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Qm(r)?{documents:By(e,r)}:{query:Vy(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Iy(e,t.resumeToken);const r=_y(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ep.min())>0){n.readTime=Ny(e,t.snapshotVersion.toTimestamp());const r=_y(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ap()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Fy(this.serializer),t.removeTarget=e,this.a_(t)}}class qv extends $v{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return op(!!e.streamToken),this.lastStreamToken=e.streamToken,op(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){op(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(op(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Py(e.updateTime):Py(t);return n.isEqual(Ep.min())&&(n=Py(t)),new zg(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Py(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Fy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Yg)n={update:zy(e,t.key,t.value)};else if(t instanceof ey)n={delete:Dy(e,t.key)};else if(t instanceof Jg)n={update:zy(e,t.key,t.data),updateMask:Qy(t.fieldMask)};else{if(!(t instanceof ty))return ap();n={verify:Dy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Rg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof jg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Og)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw ap()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Ay(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ap())),n;var r,i}(this.serializer,e))};this.a_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new up(cp.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Mo(e,jy(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===cp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new up(cp.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,jy(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===cp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new up(cp.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Wv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rp(t),this.D_=!1):np("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{rb(this)&&(np("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=lp(e);t.L_.add(4),await Jv(t),t.q_.set("Unknown"),t.L_.delete(4),await Yv(t)}(this))})}),this.q_=new Wv(n,r)}}async function Yv(e){if(rb(e))for(const t of e.B_)await t(!0)}async function Jv(e){for(const t of e.B_)await t(!1)}function Qv(e,t){const n=lp(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),nb(n)?tb(n):xb(n).r_()&&Zv(n,t))}function Xv(e,t){const n=lp(e),r=xb(n);n.N_.delete(t),r.r_()&&eb(n,t),0===n.N_.size&&(r.r_()?r.o_():rb(n)&&n.q_.set("Unknown"))}function Zv(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ep.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xb(e).A_(t)}function eb(e,t){e.Q_.xe(t),xb(e).R_(t)}function tb(e){e.Q_=new wy({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),xb(e).start(),e.q_.v_()}function nb(e){return rb(e)&&!xb(e).n_()&&e.N_.size>0}function rb(e){return 0===lp(e).L_.size}function ib(e){e.Q_=void 0}async function sb(e){e.q_.set("Online")}async function ab(e){e.N_.forEach((t,n)=>{Zv(e,t)})}async function ob(e,t){ib(e),nb(e)?(e.q_.M_(t),tb(e)):e.q_.set("Unknown")}async function lb(e,t,n){if(e.q_.set("Online"),t instanceof vy&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(r){np("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await cb(e,r)}else if(t instanceof gy?e.Q_.Ke(t):t instanceof yy?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ep.min()))try{const t=await Ev(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Qp.EMPTY_BYTE_STRING,r.snapshotVersion)),eb(e,t);const i=new Zy(r.target,t,n,r.sequenceNumber);Zv(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){np("RemoteStore","Failed to raise snapshot:",i),await cb(e,i)}}async function cb(e,t,n){if(!Op(t))throw t;e.L_.add(1),await Jv(e),e.q_.set("Offline"),n||(n=()=>Ev(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{np("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Yv(e)})}function ub(e,t){return t().catch(n=>cb(e,n,t))}async function db(e){const t=lp(e),n=Sb(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;hb(t);)try{const e=await _v(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,fb(t,e)}catch(i){await cb(t,i)}pb(t)&&mb(t)}function hb(e){return rb(e)&&e.O_.length<10}function fb(e,t){e.O_.push(t);const n=Sb(e);n.r_()&&n.V_&&n.m_(t.mutations)}function pb(e){return rb(e)&&!Sb(e).n_()&&e.O_.length>0}function mb(e){Sb(e).start()}async function gb(e){Sb(e).p_()}async function yb(e){const t=Sb(e);for(const n of e.O_)t.m_(n.mutations)}async function vb(e,t,n){const r=e.O_.shift(),i=ry.from(r,t,n);await ub(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await db(e)}async function bb(e,t){t&&Sb(e).V_&&await async function(e,t){if(function(e){switch(e){default:return ap();case cp.CANCELLED:case cp.UNKNOWN:case cp.DEADLINE_EXCEEDED:case cp.RESOURCE_EXHAUSTED:case cp.INTERNAL:case cp.UNAVAILABLE:case cp.UNAUTHENTICATED:return!1;case cp.INVALID_ARGUMENT:case cp.NOT_FOUND:case cp.ALREADY_EXISTS:case cp.PERMISSION_DENIED:case cp.FAILED_PRECONDITION:case cp.ABORTED:case cp.OUT_OF_RANGE:case cp.UNIMPLEMENTED:case cp.DATA_LOSS:return!0}}(n=t.code)&&n!==cp.ABORTED){const n=e.O_.shift();Sb(e).s_(),await ub(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await db(e)}var n}(e,t),pb(e)&&mb(e)}async function wb(e,t){const n=lp(e);n.asyncQueue.verifyOperationInProgress(),np("RemoteStore","RemoteStore received new credentials");const r=rb(n);n.L_.add(3),await Jv(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Yv(n)}function xb(e){return e.K_||(e.K_=function(e,t,n){const r=lp(e);return r.w_(),new Hv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:sb.bind(null,e),Ro:ab.bind(null,e),mo:ob.bind(null,e),d_:lb.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),nb(e)?tb(e):e.q_.set("Unknown")):(await e.K_.stop(),ib(e))})),e.K_}function Sb(e){return e.U_||(e.U_=function(e,t,n){const r=lp(e);return r.w_(),new qv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gb.bind(null,e),mo:bb.bind(null,e),f_:yb.bind(null,e),g_:vb.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await db(e)):(await e.U_.stop(),e.O_.length>0&&(np("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class kb{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new dp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new kb(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new up(cp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cb(e,t){if(rp("AsyncQueue",`${t}: ${e}`),Op(e))return new up(cp.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ap.comparator(t.key,n.key):(e,t)=>Ap.comparator(e.key,t.key),this.keyedMap=gg(),this.sortedSet=new Hp(this.comparator)}static emptySet(e){return new Eb(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eb))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Eb;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.W_=new Hp(Ap.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ap():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class _b{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new _b(e,t,Eb.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ib{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=lp(e),r=n.queries;n.queries=Ab(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new up(cp.ABORTED,"Firestore shutting down"))}}function Ab(){return new hg(e=>og(e),ag)}async function Pb(e,t){const n=lp(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Nb,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const e=Cb(a,`Initialization of query '${lg(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Db(n)}async function Rb(e,t){const n=lp(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jb(e,t){const n=lp(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Db(n)}function Mb(e,t,n){const r=lp(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Db(e){e.Y_.forEach(e=>{e.next()})}var Lb,Ob;(Ob=Lb||(Lb={})).ea="default",Ob.Cache="cache";class Fb{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new _b(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=_b.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lb.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.key=e}}class zb{constructor(e){this.key=e}}class Bb{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kg(),this.mutatedKeys=kg(),this.Aa=ug(e),this.Ra=new Eb(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Tb,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=cg(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ap()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new _b(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kg(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new zb(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Ub(n))}),t}ba(e){this.Ta=e.Ts,this.da=kg();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _b.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Vb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class $b{constructor(e){this.key=e,this.va=!1}}class Hb{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new hg(e=>og(e),ag),this.Ma=new Map,this.xa=new Set,this.Oa=new Hp(Ap.comparator),this.Na=new Map,this.La=new dv,this.Ba={},this.ka=new Map,this.qa=iv.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function qb(e,t,n=!0){const r=hw(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Wb(r,t,n,!0),i}async function Kb(e,t){const n=hw(e);await Wb(n,t,!0,!1)}async function Wb(e,t,n,r){const i=await function(e,t){const n=lp(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,Lp.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Zy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}(e.localStore,rg(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await async function(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Iv(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,i)));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return aw(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await Iv(e.localStore,t,!0),a=new Bb(t,s.Ts),o=a.ma(s.documents),l=my.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);aw(e,n,c.wa);const u=new Vb(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Qv(e.remoteStore,i),o}async function Gb(e,t,n){const r=lp(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!ag(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xv(r.remoteStore,i.targetId),iw(r,i.targetId)}).catch(Dp)):(iw(r,i.targetId),await Nv(r.localStore,i.targetId,!0))}async function Yb(e,t){const n=lp(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xv(n.remoteStore,r.targetId))}async function Jb(e,t,n){const r=function(e){const t=lp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ew.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tw.bind(null,t),t}(e);try{const e=await function(e,t){const n=lp(e),r=Cp.now(),i=t.reduce((e,t)=>e.add(t.key),kg());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=pg(),l=kg();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Wg(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Jg(e.key,t,Cm(t.value.mapValue),Bg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:yg(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Hp(Sp)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await cw(r,e.changes),await db(r.remoteStore)}catch(i){const e=Cb(i,"Failed to persist write");n.reject(e)}}async function Qb(e,t){const n=lp(e);try{const e=await Tv(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(op(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?op(r.va):e.removedDocuments.size>0&&(op(r.va),r.va=!1))}),await cw(n,e,t)}catch(r){await Dp(r)}}function Xb(e,t,n){const r=lp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=lp(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&Db(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Zb(e,t,n){const r=lp(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Hp(Ap.comparator);e=e.insert(s,Em.newNoDocument(s,Ep.min()));const n=kg().add(s),i=new py(Ep.min(),new Map,new Hp(Sp),e,n);await Qb(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),lw(r)}else await Nv(r.localStore,t,!1).then(()=>iw(r,t,n)).catch(Dp)}async function ew(e,t){const n=lp(e),r=t.batch.batchId;try{const e=await function(e,t){const n=lp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Lp.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);op(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=kg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);rw(n,r,null),nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cw(n,e)}catch(i){await Dp(i)}}async function tw(e,t,n){const r=lp(e);try{const e=await function(e,t){const n=lp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(op(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);rw(r,t,n),nw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cw(r,e)}catch(i){await Dp(i)}}function nw(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function rw(e,t,n){const r=lp(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function iw(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||sw(e,t)})}function sw(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Xv(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),lw(e))}function aw(e,t,n){for(const r of n)r instanceof Ub?(e.La.addReference(r.key,t),ow(e,r)):r instanceof zb?(np("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||sw(e,r.key)):ap()}function ow(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(np("SyncEngine","New document in limbo: "+n),e.xa.add(r),lw(e))}function lw(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ap(_p.fromString(t)),r=e.qa.next();e.Na.set(r,new $b(n)),e.Oa=e.Oa.insert(n,r),Qv(e.remoteStore,new Zy(rg(Zm(n.path)),r,"TargetPurposeLimboResolution",Fp.oe))}}async function cw(e,t,n){const r=lp(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=wv.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=lp(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Lp.forEach(t,t=>Lp.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Lp.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!Op(r))throw r;np("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function uw(e,t){const n=lp(e);if(!n.currentUser.isEqual(t)){np("SyncEngine","User change. New user:",t.toKey());const e=await Cv(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).ka.forEach(e=>{e.forEach(e=>{e.reject(new up(cp.CANCELLED,i))})}),r.ka.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await cw(n,e.hs)}var r,i}function dw(e,t){const n=lp(e),r=n.Na.get(t);if(r&&r.va)return kg().add(r.key);{let e=kg();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function hw(e){const t=lp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zb.bind(null,t),t.Ca.d_=jb.bind(null,t.eventManager),t.Ca.$a=Mb.bind(null,t.eventManager),t}class fw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bv(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return function(e,t,n,r){return new kv(e,t,n,r)}(this.persistence,new Sv,e.initialUser,this.serializer)}Ga(e){return new yv(bv.Zr,this.serializer)}Wa(e){return new Pv}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fw.provider={build:()=>new fw};class pw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Xb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=uw.bind(null,this.syncEngine),await async function(e,t){const n=lp(e);t?(n.L_.delete(2),await Yv(n)):t||(n.L_.add(2),await Jv(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ib}createDatastore(e){const t=Bv(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Uv(r));var r;return function(e,t,n,r){return new Kv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Xb(this.syncEngine,e,0),s=jv.D()?new jv:new Rv,new Gv(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Hb(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=lp(e);np("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Jv(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}pw.provider={build:()=>new pw};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rp("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Xf.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{np("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(np("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cb(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yw(e,t){e.asyncQueue.verifyOperationInProgress(),np("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Cv(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function vw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){np("FirestoreClient","Using user provided OfflineComponentProvider");try{await yw(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===cp.FAILED_PRECONDITION||n.code===cp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;ip("Error using user provided cache. Falling back to memory cache: "+i),await yw(e,new fw)}}else np("FirestoreClient","Using default OfflineComponentProvider"),await yw(e,new fw);var n;return e._offlineComponents}(e);np("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>wb(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>wb(t.remoteStore,n)),e._onlineComponents=t}async function bw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(np("FirestoreClient","Using user provided OnlineComponentProvider"),await vw(e,e._uninitializedComponentsProvider._online)):(np("FirestoreClient","Using default OnlineComponentProvider"),await vw(e,new pw))),e._onlineComponents}async function ww(e){const t=await bw(e),n=t.eventManager;return n.onListen=qb.bind(null,t.syncEngine),n.onUnlisten=Gb.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Kb.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yb.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Sw=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(e,t,n){if(!n)throw new up(cp.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Cw(e){if(!Ap.isDocumentKey(e))throw new up(cp.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ew(e){if(Ap.isDocumentKey(e))throw new up(cp.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Tw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":ap()}function _w(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new up(cp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tw(e);throw new up(cp.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new up(cp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new up(cp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new up(cp.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new up(cp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new up(cp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new up(cp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Iw{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new up(cp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new up(cp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new fp;switch(e.type){case"firstParty":return new yp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new up(cp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sw.get(e);t&&(np("ComponentProvider","Removing Datastore"),Sw.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Aw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Aw(this.firestore,e,this._query)}}class Pw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rw(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pw(this.firestore,e,this._key)}}class Rw extends Aw{constructor(e,t,n){super(e,t,Zm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pw(this.firestore,null,new Ap(e))}withConverter(e){return new Rw(this.firestore,e,this._path)}}function jw(e,t,...n){if(e=Ta(e),1===arguments.length&&(t=xp.newId()),kw("doc","path",t),e instanceof Iw){const r=_p.fromString(t,...n);return Cw(r),new Pw(e,null,new Ap(r))}{if(!(e instanceof Pw||e instanceof Rw))throw new up(cp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_p.fromString(t,...n));return Cw(r),new Pw(e.firestore,e instanceof Rw?e.converter:null,new Ap(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vv(this,"async_queue_retry"),this.Vu=()=>{const e=zv();e&&np("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=zv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=zv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new dp;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(wM){if(!Op(wM))throw wM;np("AsyncQueue","Operation failed with retryable error: "+wM)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;throw rp("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=kb.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&ap()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Dw extends Iw{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Mw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mw(e),this._firestoreClient=void 0,await e}}}function Lw(e){if(e._terminated)throw new up(cp.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new sm(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,xw(c.experimentalLongPollingOptions),c.useFetchStreams));var a,o,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new gw(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class Ow{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ow(Qp.fromBase64String(e))}catch(t){throw new up(cp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ow(Qp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new up(cp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ip(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new up(cp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new up(cp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sp(this._lat,e._lat)||Sp(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=/^__.*__$/;class $w{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Jg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yg(e,this.data,t,this.fieldTransforms)}}function Hw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ap()}}class qw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Hw(this.Cu)&&Vw.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Kw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Bv(e)}Qu(e,t,n,r=!1){return new qw({Cu:e,methodName:t,qu:n,path:Ip.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ww(e){const t=e._freezeSettings(),n=Bv(e._databaseId);return new Kw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gw(e,t,n,r,i,s={}){const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);Xw("Data must be an object, but it was:",a,r);const o=Jw(r,a);let l,c;if(s.merge)l=new Yp(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Zw(t,r,n);if(!a.contains(i))throw new up(cp.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);rx(e,i)||e.push(i)}l=new Yp(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new $w(new km(o),l,c)}function Yw(e,t){if(Qw(e=Ta(e)))return Xw("Unsupported field value:",t,e),Jw(e,t);if(e instanceof Uw)return function(e,t){if(!Hw(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Yw(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ta(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _g(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Cp.fromDate(e);return{timestampValue:Ny(t.serializer,n)}}if(e instanceof Cp){const n=new Cp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ny(t.serializer,n)}}if(e instanceof zw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ow)return{bytesValue:Iy(t.serializer,e._byteString)};if(e instanceof Pw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ry(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Bw)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw n.Bu("VectorValues must only contain numeric values.");return Eg(n.serializer,e)})}}}}};var n;throw t.Bu(`Unsupported field value: ${Tw(e)}`)}(e,t)}function Jw(e,t){const n={};return $p(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vp(e,(e,r)=>{const i=Yw(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Qw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cp||e instanceof zw||e instanceof Ow||e instanceof Pw||e instanceof Uw||e instanceof Bw)}function Xw(e,t,n){if(!Qw(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=Tw(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}var r}function Zw(e,t,n){if((t=Ta(t))instanceof Fw)return t._internalPath;if("string"==typeof t)return tx(e,t);throw nx("Field path arguments must be of type string or ",e,!1,void 0,n)}const ex=new RegExp("[~\\*/\\[\\]]");function tx(e,t,n){if(t.search(ex)>=0)throw nx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Fw(...t.split("."))._internalPath}catch(r){throw nx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function nx(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new up(cp.INVALID_ARGUMENT,o+e+l)}function rx(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ax("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sx extends ix{data(){return super.data()}}function ax(e,t){return"string"==typeof t?tx(e,t):t instanceof Fw?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{}class lx extends ox{}class cx extends lx{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cx(e,t,n)}_apply(e){const t=this._parse(e);return px(e._query,t),new Aw(e.firestore,e.converter,ig(e._query,t))}_parse(e){const t=Ww(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new up(cp.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){fx(a,s);const t=[];for(const n of a)t.push(hx(r,e,n));o={arrayValue:{values:t}}}else o=hx(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||fx(a,s),o=function(e,t,n,r=!1){return Yw(n,e.Qu(r?4:3,t))}(n,t,a,"in"===s||"not-in"===s);return Rm.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ux extends ox{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ux(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:jm.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)px(n,i),n=ig(n,i)}(e._query,t),new Aw(e.firestore,e.converter,ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dx extends lx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dx(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new up(cp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new up(cp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Im(t,n)}(e._query,this._field,this._direction);return new Aw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Xm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function hx(e,t,n){if("string"==typeof(n=Ta(n))){if(""===n)throw new up(cp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tg(t)&&-1!==n.indexOf("/"))throw new up(cp.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_p.fromString(n));if(!Ap.isDocumentKey(r))throw new up(cp.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gm(e,new Ap(r))}if(n instanceof Pw)return gm(e,n._key);throw new up(cp.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tw(n)}.`)}function fx(e,t){if(!Array.isArray(e)||0===e.length)throw new up(cp.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function px(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new up(cp.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new up(cp.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class mx{convertValue(e,t="none"){switch(lm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return em(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ap()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Vp(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>em(e.doubleValue));return new Bw(i)}convertGeoPoint(e){return new zw(em(e.latitude),em(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=rm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(im(e));default:return null}}convertTimestamp(e){const t=Zp(e);return new Cp(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_p.fromString(e);op(Xy(n));const r=new am(n.get(1),n.get(3)),i=new Ap(n.popFirst(5));return r.isEqual(t)||rp(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yx extends ix{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ax("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class vx extends yx{data(e={}){return super.data(e)}}class bx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new vx(this._firestore,this._userDataWriter,n.key,n,new gx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new up(cp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new vx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new gx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new vx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:wx(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ap()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e){e=_w(e,Pw);const t=_w(e.firestore,Dw);return function(e,t,n={}){const r=new dp;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new mw({next:o=>{s.Za(),t.enqueueAndForget(()=>Rb(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new up(cp.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new up(cp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Fb(Zm(n.path),s,{includeMetadataChanges:!0,_a:!0});return Pb(e,a)}(await ww(e),e.asyncQueue,t,n,r)),r.promise}(Lw(t),e._key).then(n=>function(e,t,n){const r=n.docs.get(t._key),i=new Sx(e);return new yx(e,i,t._key,r,new gx(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n))}class Sx extends mx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ow(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pw(this.firestore,null,t)}}function kx(e){e=_w(e,Aw);const t=_w(e.firestore,Dw),n=Lw(t),r=new Sx(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new up(cp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new dp;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new mw({next:n=>{s.Za(),t.enqueueAndForget(()=>Rb(e,a)),n.fromCache&&"server"===r.source?i.reject(new up(cp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Fb(n,s,{includeMetadataChanges:!0,_a:!0});return Pb(e,a)}(await ww(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new bx(t,r,e,n))}function Cx(e,t){return function(e,t){const n=new dp;return e.asyncQueue.enqueueAndForget(async()=>Jb(await function(e){return bw(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Lw(e),t)}!function(e,t=!0){Zf=Ko,Uo(new _a("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Dw(new mp(e.getProvider("auth-internal")),new bp(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new up(cp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),Jo(Qf,"4.7.3",e),Jo(Qf,"4.7.3","esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ex="functions";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(wM){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(wM){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="us-central1";class Nx{constructor(e,t,n,r,i=_x,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Tx(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=_x}catch(wM){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const Ix="@firebase/functions",Ax="0.11.8";!function(e,t){Uo(new _a(Ex,(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("messaging-internal"),a=t.getProvider("app-check-internal");return new Nx(r,i,s,a,n,e)},"PUBLIC").setMultipleInstances(!0)),Jo(Ix,Ax,t),Jo(Ix,Ax,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(fetch.bind(self));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Px="firebasestorage.googleapis.com";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rx extends pa{constructor(e,t,n=0){super(Ox(e),`Firebase Storage: ${t} (${Ox(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rx.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ox(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var jx,Mx,Dx,Lx;function Ox(e){return"storage/"+e}function Fx(e){return new Rx(jx.INVALID_ARGUMENT,e)}function Ux(){return new Rx(jx.APP_DELETED,"The Firebase app was deleted.")}(Mx=jx||(jx={})).UNKNOWN="unknown",Mx.OBJECT_NOT_FOUND="object-not-found",Mx.BUCKET_NOT_FOUND="bucket-not-found",Mx.PROJECT_NOT_FOUND="project-not-found",Mx.QUOTA_EXCEEDED="quota-exceeded",Mx.UNAUTHENTICATED="unauthenticated",Mx.UNAUTHORIZED="unauthorized",Mx.UNAUTHORIZED_APP="unauthorized-app",Mx.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Mx.INVALID_CHECKSUM="invalid-checksum",Mx.CANCELED="canceled",Mx.INVALID_EVENT_NAME="invalid-event-name",Mx.INVALID_URL="invalid-url",Mx.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Mx.NO_DEFAULT_BUCKET="no-default-bucket",Mx.CANNOT_SLICE_BLOB="cannot-slice-blob",Mx.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Mx.NO_DOWNLOAD_URL="no-download-url",Mx.INVALID_ARGUMENT="invalid-argument",Mx.INVALID_ARGUMENT_COUNT="invalid-argument-count",Mx.APP_DELETED="app-deleted",Mx.INVALID_ROOT_OPERATION="invalid-root-operation",Mx.INVALID_FORMAT="invalid-format",Mx.INTERNAL_ERROR="internal-error",Mx.UNSUPPORTED_ENVIRONMENT="unsupported-environment";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zx{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=zx.makeFromUrl(e,t)}catch(wM){return new zx(e,"")}if(""===n.path)return n;throw r=e,new Rx(jx.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Px?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new zx(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Rx(jx.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Bx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(e,t,n,r){if(r<t)throw Fx(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Fx(`Invalid value for '${e}'. Expected ${n} or less.`)}(Lx=Dx||(Dx={}))[Lx.NO_ERROR=0]="NO_ERROR",Lx[Lx.NETWORK_ERROR=1]="NETWORK_ERROR",Lx[Lx.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $x{constructor(e,t,n,r,i,s,a,o,l,c,u,d=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Hx(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Dx.NO_ERROR,i=n.getStatus();if(!t||
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Dx.ABORT;return void e(!1,new Hx(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Hx(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0!==e}(e)?n():n(e)}catch(wM){r(wM)}else if(null!==i){const e=new Rx(jx.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Ux():new Rx(jx.CANCELED,"User canceled the upload/download."))}else{r(new Rx(jx.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Hx(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(...e){c||(c=!0,t.apply(null,e))}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e,...t){if(c)return void h();if(e)return h(),void u.call(null,e,...t);if(l()||a)return h(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===o?(o=2,n=0):n=1e3*(r+Math.random()),d(n)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Hx{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function qx(e,t,n,r,i,s,a=!0){const o=function(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new $x(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kx{constructor(e,t){this._service=e,this._location=t instanceof zx?t:zx.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kx(e,t)}get root(){const e=new zx(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new zx(this._location.bucket,e);return new Kx(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Rx(jx.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Wx(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:zx.makeFromBucketSpec(n,e)}class Gx{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Px,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?zx.makeFromBucketSpec(r,this._host):Wx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=zx.makeFromBucketSpec(this._url,e):this._bucket=Wx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Vx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Vx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kx(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new Bx(Ux());{const s=qx(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Yx="@firebase/storage",Jx="0.13.2",Qx="storage";function Xx(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Gx(n,r,i,t,Ko)}Uo(new _a(Qx,Xx,"PUBLIC").setMultipleInstances(!0)),Jo(Yx,Jx,""),Jo(Yx,Jx,"esm2017");const Zx={apiKey:"AIzaSyDBLjHyR3kiZNsoz63ZGpRcHfMoARgnRAA",authDomain:"chop-stop.firebaseapp.com",projectId:"chop-stop",storageBucket:"chop-stop.firebasestorage.app",messagingSenderId:"285885896798",appId:"1:285885896798:web:05ffbca2d4ead63140bccf"};let eS,tS,nS,rS,iS;try{eS=Wo(Zx),tS=function(e){const t="string"==typeof e?e:"(default)",n=zo("object"==typeof e?e:Go(),"firestore").getImmediate({identifier:t});if(!n._initialized){const e=na("firestore");e&&function(e,t,n,r={}){var i;const s=(e=_w(e,Iw))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&ip("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Xf.MOCK_USER;else{t=aa(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new up(cp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Xf(s)}e._authCredentials=new pp(new hp(t,n))}}(n,...e)}return n}(eS),nS=function(e=Go()){const t=zo(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=zo(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(va(n.getOptions(),null!=t?t:{}))return e;Rl(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Th,persistence:[kd,ad,ld]}),r=ia("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>jh)return;const r=null==t?void 0:t.token;Mh!==r&&(Mh=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Ta(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Ta(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=ta("auth");return s&&Wc(n,`http://${s}`),n}(eS),rS=function(e=Go(),t=_x){const n=zo(Ta(e),Ex).getImmediate({identifier:t}),r=na("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}(Ta(e),t,n)}(n,...r),n}(eS),iS=function(e=Go(),t){const n=zo(e=Ta(e),Qx).getImmediate({identifier:t}),r=na("storage");return r&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:aa(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(eS)}catch(kM){throw kM}const sS=({onSuccess:e})=>{const t=m.useRef(null);return m.useEffect(()=>{if(t.current){(Ff.AuthUI.getInstance()||new Ff.AuthUI(nS)).start(t.current,{signInFlow:"popup",signInOptions:[pu.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:(t,n)=>(e?.(t.user),!1)}})}},[e]),u.jsx("div",{ref:t,id:"firebaseui-auth-container"})};function aS({isOpen:e,onOpenChange:t}){return u.jsx(Os,{open:e,onOpenChange:t,children:u.jsxs(zs,{className:"sm:max-w-[425px]",children:[u.jsxs(Bs,{children:[u.jsx($s,{children:"Sign In / Sign Up"}),u.jsx(Hs,{children:"Access your saved sessions and personalize your experience."})]}),u.jsx(sS,{onSuccess:()=>t(!1)})]})})}const oS=m.createContext(),lS=({children:e})=>{const[t,n]=m.useState(null),[r,i]=m.useState(!0);return m.useEffect(()=>{const e=(t=e=>{n(e),i(!1)},Ta(nS).onAuthStateChanged(t,r,s));var t,r,s;return()=>e()},[]),u.jsx(oS.Provider,{value:{user:t,logout:()=>{Ta(nS).signOut()},loading:r},children:e})},cS=()=>m.useContext(oS),uS=[{name:"Chopper",href:"/",icon:Ut},{name:"Sequencer",href:"/sequencer",icon:Tt},{name:"My Sessions",href:"/my-sessions",icon:_t},{name:"Latency Test",href:"/latency-test",icon:fn}];function dS({children:e}){const t=Ne(),[n,r]=m.useState(!1),{user:i,logout:s}=cS();return u.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 text-white font-sans",children:[u.jsxs("div",{className:"relative min-h-screen w-full backdrop-blur-sm",children:[u.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:u.jsxs("div",{className:"container mx-auto flex justify-between items-center p-3 bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg",children:[u.jsxs(Qe,{to:"/",className:"flex items-center gap-3",children:[u.jsx(Ut,{className:"w-8 h-8 text-cyan-400"}),u.jsx("h1",{className:"text-2xl font-bold tracking-tighter",children:"The Chop Shop"})]}),u.jsxs("nav",{className:"flex items-center gap-2 p-1 bg-white/10 rounded-full border border-white/10",children:[uS.map(e=>u.jsxs(Qe,{to:e.href,className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300\n                    "+(t.pathname===e.href?"bg-cyan-400 text-black shadow-md":"text-gray-300 hover:bg-white/10"),children:[u.jsx(e.icon,{className:"w-4 h-4"}),u.jsx("span",{children:e.name})]},e.name)),i?u.jsxs(xr,{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 bg-red-500 hover:bg-red-600 text-white",children:[u.jsx(Lt,{className:"w-4 h-4"}),u.jsx("span",{children:"Logout"})]}):u.jsxs(xr,{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 bg-green-500 hover:bg-green-600 text-white",children:[u.jsx(Dt,{className:"w-4 h-4"}),u.jsx("span",{children:"Sign In"})]})]})]})}),u.jsx("main",{className:"pt-28 pb-10",children:u.jsx("div",{className:"container mx-auto",children:e})}),u.jsx("footer",{className:"fixed bottom-0 left-0 right-0 p-4",children:u.jsx("div",{className:"container mx-auto text-center text-xs text-white/40",children:u.jsx("p",{children:"For educational and auditioning purposes only. Please support artists by purchasing their music."})})})]}),u.jsx(aS,{isOpen:n,onOpenChange:r})]})}const hS=m.createContext({});function fS(e){const t=m.useRef(null);return null===t.current&&(t.current=e()),t.current}const pS=m.createContext(null),mS=m.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class gS extends m.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yS({children:e,isPresent:t}){const n=m.useId(),r=m.useRef(null),i=m.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=m.useContext(mS);return m.useInsertionEffect(()=>{const{width:e,height:a,top:o,left:l}=i.current;if(t||!r.current||!e||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${a}px !important;\n            top: ${o}px !important;\n            left: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}},[t]),u.jsx(gS,{isPresent:t,childRef:r,sizeRef:i,children:m.cloneElement(e,{ref:r})})}const vS=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=fS(bS),l=m.useId(),c=m.useCallback(e=>{o.set(e,!0);for(const t of o.values())if(!t)return;r&&r()},[o,r]),d=m.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c,register:e=>(o.set(e,!1),()=>o.delete(e))}),s?[Math.random(),c]:[n,c]);return m.useMemo(()=>{o.forEach((e,t)=>o.set(t,!1))},[n]),m.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),"popLayout"===a&&(e=u.jsx(yS,{isPresent:n,children:e})),u.jsx(pS.Provider,{value:d,children:e})};function bS(){return new Map}function wS(e=!0){const t=m.useContext(pS);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=m.useId();m.useEffect(()=>{e&&i(s)},[e]);const a=m.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,a]:[!0]}const xS=e=>e.key||"";function SS(e){const t=[];return m.Children.forEach(e,e=>{m.isValidElement(e)&&t.push(e)}),t}const kS="undefined"!=typeof window,CS=kS?m.useLayoutEffect:m.useEffect,ES=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=wS(a),c=m.useMemo(()=>SS(e),[e]),d=a&&!o?[]:c.map(xS),h=m.useRef(!0),f=m.useRef(c),p=fS(()=>new Map),[g,y]=m.useState(c),[v,b]=m.useState(c);CS(()=>{h.current=!1,f.current=c;for(let e=0;e<v.length;e++){const t=xS(v[e]);d.includes(t)?p.delete(t):!0!==p.get(t)&&p.set(t,!1)}},[v,d.length,d.join("-")]);const w=[];if(c!==g){let e=[...c];for(let t=0;t<v.length;t++){const n=v[t],r=xS(n);d.includes(r)||(e.splice(t,0,n),w.push(n))}return"wait"===s&&w.length&&(e=w),b(SS(e)),void y(c)}const{forceRender:x}=m.useContext(hS);return u.jsx(u.Fragment,{children:v.map(e=>{const m=xS(e),g=!(a&&!o)&&(c===v||d.includes(m));return u.jsx(vS,{isPresent:g,initial:!(h.current&&!n)&&void 0,custom:g?void 0:t,presenceAffectsLayout:i,mode:s,onExitComplete:g?void 0:()=>{if(!p.has(m))return;p.set(m,!0);let e=!0;p.forEach(t=>{t||(e=!1)}),e&&(null==x||x(),b(f.current),a&&(null==l||l()),r&&r())},children:e},m)})})},TS=e=>e;let _S=TS;function NS(e){let t;return()=>(void 0===t&&(t=e()),t)}const IS=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},AS=e=>1e3*e,PS=e=>e/1e3,RS=!1;const jS=["read","resolveKeyframes","update","preRender","render","postRender"];function MS(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=jS.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,i=!1,a=!1)=>{const o=a&&r?t:n;return i&&s.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),s.delete(e)},process:e=>{a=e,r?i=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(e)))}};return l}(s),e),{}),{read:o,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=a,f=()=>{const s=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:jS.reduce((t,s)=>{const o=a[s];return t[s]=(t,s=!1,a=!1)=>(n||(n=!0,r=!0,i.isProcessing||e(f)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<jS.length;t++)a[jS[t]].cancel(e)},state:i,steps:a}}const{schedule:DS,cancel:LS,state:OS,steps:FS}=MS("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:TS,!0),US=m.createContext({strict:!1}),zS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},BS={};for(const CM in zS)BS[CM]={isEnabled:e=>zS[CM].some(t=>!!e[t])};const VS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $S(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||VS.has(e)}let HS=e=>!$S(e);try{(qS=require("@emotion/is-prop-valid").default)&&(HS=e=>e.startsWith("on")?!$S(e):qS(e))}catch(SM){}var qS;function KS(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy((...t)=>e(...t),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const WS=m.createContext({});function GS(e){return"string"==typeof e||Array.isArray(e)}function YS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}const JS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],QS=["initial",...JS];function XS(e){return YS(e.animate)||QS.some(t=>GS(e[t]))}function ZS(e){return Boolean(XS(e)||e.variants)}function ek(e){const{initial:t,animate:n}=function(e,t){if(XS(e)){const{initial:t,animate:n}=e;return{initial:!1===t||GS(t)?t:void 0,animate:GS(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,m.useContext(WS));return m.useMemo(()=>({initial:t,animate:n}),[tk(t),tk(n)])}function tk(e){return Array.isArray(e)?e.join(" "):e}const nk=Symbol.for("motionComponentSymbol");function rk(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ik(e,t,n){return m.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):rk(n)&&(n.current=r))},[t])}const sk=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ak="data-"+sk("framerAppearId"),{schedule:ok}=MS(queueMicrotask,!1),lk=m.createContext({});function ck(e,t,n,r,i){var s,a;const{visualElement:o}=m.useContext(WS),l=m.useContext(US),c=m.useContext(pS),u=m.useContext(mS).reducedMotion,d=m.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:u}));const h=d.current,f=m.useContext(lk);!h||h.projection||!i||"html"!==h.type&&"svg"!==h.type||function(e,t,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:uk(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(a)||o&&rk(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}(d.current,n,i,f);const p=m.useRef(!1);m.useInsertionEffect(()=>{h&&p.current&&h.update(n,c)});const g=n[ak],y=m.useRef(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return CS(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),ok.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),m.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)}),y.current=!1))}),h}function uk(e){if(e)return!1!==e.options.allowProjection?e.projection:uk(e.parent)}function dk({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var s,a;function o(e,s){let a;const o={...m.useContext(mS),...e,layoutId:hk(e)},{isStatic:l}=o,c=ek(e),d=r(e,l);if(!l&&kS){m.useContext(US).strict;const e=function(e){const{drag:t,layout:n}=BS;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);a=e.MeasureLayout,c.visualElement=ck(i,d,o,t,e.ProjectionNode)}return u.jsxs(WS.Provider,{value:c,children:[a&&c.visualElement?u.jsx(a,{visualElement:c.visualElement,...o}):null,n(i,e,ik(d,c.visualElement,s),d,l,c.visualElement)]})}e&&function(e){for(const t in e)BS[t]={...BS[t],...e[t]}}(e),o.displayName=`motion.${"string"==typeof i?i:`create(${null!==(a=null!==(s=i.displayName)&&void 0!==s?s:i.name)&&void 0!==a?a:""})`}`;const l=m.forwardRef(o);return l[nk]=i,l}function hk({layoutId:e}){const t=m.useContext(hS).id;return t&&void 0!==e?t+"-"+e:e}const fk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pk(e){return"string"==typeof e&&!e.includes("-")&&!!(fk.indexOf(e)>-1||/[A-Z]/u.test(e))}function mk(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function gk(e,t,n,r){if("function"==typeof t){const[i,s]=mk(r);t=t(void 0!==n?n:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,s]=mk(r);t=t(void 0!==n?n:e.custom,i,s)}return t}const yk=e=>Array.isArray(e),vk=e=>yk(e)?e[e.length-1]||0:e,bk=e=>Boolean(e&&e.getVelocity);function wk(e){const t=bk(e)?e.get():e;return n=t,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const xk=e=>(t,n)=>{const r=m.useContext(WS),i=m.useContext(pS),s=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){const a={latestValues:Sk(r,i,s,e),renderState:t()};return n&&(a.onMount=e=>n({props:r,current:e,...a}),a.onUpdate=e=>n(e)),a}(e,t,r,i);return n?s():fS(s)};function Sk(e,t,n,r){const i={},s=r(e,{});for(const h in s)i[h]=wk(s[h]);let{initial:a,animate:o}=e;const l=XS(e),c=ZS(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!=typeof d&&!YS(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=gk(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const kk=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ck=new Set(kk),Ek=e=>t=>"string"==typeof t&&t.startsWith(e),Tk=Ek("--"),_k=Ek("var(--"),Nk=e=>!!_k(e)&&Ik.test(e.split("/*")[0].trim()),Ik=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ak=(e,t)=>t&&"number"==typeof e?t.transform(e):e,Pk=(e,t,n)=>n>t?t:n<e?e:n,Rk={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},jk={...Rk,transform:e=>Pk(0,1,e)},Mk={...Rk,default:1},Dk=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Lk=Dk("deg"),Ok=Dk("%"),Fk=Dk("px"),Uk=Dk("vh"),zk=Dk("vw"),Bk={...Ok,parse:e=>Ok.parse(e)/100,transform:e=>Ok.transform(100*e)},Vk={borderWidth:Fk,borderTopWidth:Fk,borderRightWidth:Fk,borderBottomWidth:Fk,borderLeftWidth:Fk,borderRadius:Fk,radius:Fk,borderTopLeftRadius:Fk,borderTopRightRadius:Fk,borderBottomRightRadius:Fk,borderBottomLeftRadius:Fk,width:Fk,maxWidth:Fk,height:Fk,maxHeight:Fk,top:Fk,right:Fk,bottom:Fk,left:Fk,padding:Fk,paddingTop:Fk,paddingRight:Fk,paddingBottom:Fk,paddingLeft:Fk,margin:Fk,marginTop:Fk,marginRight:Fk,marginBottom:Fk,marginLeft:Fk,backgroundPositionX:Fk,backgroundPositionY:Fk},$k={rotate:Lk,rotateX:Lk,rotateY:Lk,rotateZ:Lk,scale:Mk,scaleX:Mk,scaleY:Mk,scaleZ:Mk,skew:Lk,skewX:Lk,skewY:Lk,distance:Fk,translateX:Fk,translateY:Fk,translateZ:Fk,x:Fk,y:Fk,z:Fk,perspective:Fk,transformPerspective:Fk,opacity:jk,originX:Bk,originY:Bk,originZ:Fk},Hk={...Rk,transform:Math.round},qk={...Vk,...$k,zIndex:Hk,size:Fk,fillOpacity:jk,strokeOpacity:jk,numOctaves:Hk},Kk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Wk=kk.length;function Gk(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(Ck.has(l))a=!0;else if(Tk(l))i[l]=e;else{const t=Ak(e,qk[l]);l.startsWith("origin")?(o=!0,s[l]=t):r[l]=t}}if(t.transform||(a||n?r.transform=function(e,t,n){let r="",i=!0;for(let s=0;s<Wk;s++){const a=kk[s],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=Ak(o,qk[a]);l||(i=!1,r+=`${Kk[a]||a}(${e}) `),n&&(t[a]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=s;r.transformOrigin=`${e} ${t} ${n}`}}const Yk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Jk={offset:"strokeDashoffset",array:"strokeDasharray"};function Qk(e,t,n){return"string"==typeof e?e:Fk.transform(t+n*e)}function Xk(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,d){if(Gk(e,c,d),u)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:f,dimensions:p}=e;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(void 0!==i||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,n){return`${Qk(t,e.x,e.width)} ${Qk(n,e.y,e.height)}`}(p,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(h.x=t),void 0!==n&&(h.y=n),void 0!==r&&(h.scale=r),void 0!==a&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Yk:Jk;e[s.offset]=Fk.transform(-r);const a=Fk.transform(t),o=Fk.transform(n);e[s.array]=`${a} ${o}`}(h,a,o,l,!1)}const Zk=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),eC=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),tC=e=>"string"==typeof e&&"svg"===e.toLowerCase();function nC(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const rC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iC(e,t,n,r){nC(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(rC.has(i)?i:sk(i),t.attrs[i])}const sC={};function aC(e,{layout:t,layoutId:n}){return Ck.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!sC[e]||"opacity"===e)}function oC(e,t,n){var r;const{style:i}=e,s={};for(const a in i)(bk(i[a])||t.style&&bk(t.style[a])||aC(a,e)||void 0!==(null===(r=null==n?void 0:n.getValue(a))||void 0===r?void 0:r.liveStyle))&&(s[a]=i[a]);return s}function lC(e,t,n){const r=oC(e,t,n);for(const i in e)if(bk(e[i])||bk(t[i])){r[-1!==kk.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const cC=["x","y","width","height","cx","cy","r"],uC={useVisualState:xk({scrapeMotionValuesFromProps:lC,createRenderState:eC,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!e.drag;if(!s)for(const o in i)if(Ck.has(o)){s=!0;break}if(!s)return;let a=!t;if(t)for(let o=0;o<cC.length;o++){const n=cC[o];e[n]!==t[n]&&(a=!0)}a&&DS.read(()=>{!function(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(wM){t.dimensions={x:0,y:0,width:0,height:0}}}(n,r),DS.render(()=>{Xk(r,i,tC(n.tagName),e.transformTemplate),iC(n,r)})})}})},dC={useVisualState:xk({scrapeMotionValuesFromProps:oC,createRenderState:Zk})};function hC(e,t,n){for(const r in t)bk(t[r])||aC(r,n)||(e[r]=t[r])}function fC(e,t){const n={};return hC(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return m.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return Gk(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function pC(e,t){const n={},r=fC(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function mC(e,t,n,r){const i=m.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Xk(n,t,tC(r),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};hC(t,e.style,e),i.style={...t,...i.style}}return i}function gC(e=!1){return(t,n,r,{latestValues:i},s)=>{const a=(pk(t)?mC:pC)(n,i,s,t),o=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(HS(i)||!0===n&&$S(i)||!t&&!$S(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"==typeof t,e),l=t!==m.Fragment?{...o,...a,ref:r}:{},{children:c}=n,u=m.useMemo(()=>bk(c)?c.get():c,[c]);return m.createElement(t,{...l,children:u})}}function yC(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){return dk({...pk(n)?uC:dC,preloadedFeatures:e,useRender:gC(r),createVisualElement:t,Component:n})}}function vC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function bC(e,t,n){const r=e.getProps();return gk(r,t,void 0!==n?n:r.custom,e)}const wC=NS(()=>void 0!==window.ScrollTimeline);class xC{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(n=>wC()&&n.attachTimeline?n.attachTimeline(e):"function"==typeof t?t(n):void 0);return()=>{n.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class SC extends xC{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function kC(e,t){return e?e[t]||e.default||e:void 0}const CC=2e4;function EC(e){let t=0;let n=e.next(t);for(;!n.done&&t<CC;)t+=50,n=e.next(t);return t>=CC?1/0:t}function TC(e){return"function"==typeof e}function _C(e,t){e.timeline=t,e.onfinish=null}const NC=e=>Array.isArray(e)&&"number"==typeof e[0],IC={linearEasing:void 0};function AC(e,t){const n=NS(e);return()=>{var e;return null!==(e=IC[t])&&void 0!==e?e:n()}}const PC=AC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(wM){return!1}return!0},"linearEasing"),RC=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=e(IS(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function jC(e){return Boolean("function"==typeof e&&PC()||!e||"string"==typeof e&&(e in DC||PC())||NC(e)||Array.isArray(e)&&e.every(jC))}const MC=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,DC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:MC([0,.65,.55,1]),circOut:MC([.55,0,1,.45]),backIn:MC([.31,.01,.66,-.59]),backOut:MC([.33,1.53,.69,.99])};function LC(e,t){return e?"function"==typeof e&&PC()?RC(e,t):NC(e)?MC(e):Array.isArray(e)?e.map(e=>LC(e,t)||DC.easeOut):DC[e]:void 0}const OC={x:!1,y:!1};function FC(){return OC.x||OC.y}function UC(e,t){const n=function(e){if(e instanceof Element)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function zC(e){return t=>{"touch"===t.pointerType||FC()||e(t)}}const BC=(e,t)=>!!t&&(e===t||BC(e,t.parentElement)),VC=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,$C=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const HC=new WeakSet;function qC(e){return t=>{"Enter"===t.key&&e(t)}}function KC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function WC(e){return VC(e)&&!FC()}function GC(e,t,n={}){const[r,i,s]=UC(e,n),a=e=>{const r=e.currentTarget;if(!WC(e)||HC.has(r))return;HC.add(r);const s=t(e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),WC(e)&&HC.has(r)&&(HC.delete(r),"function"==typeof s&&s(e,{success:t}))},o=e=>{a(e,n.useGlobalTarget||BC(r,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{(function(e){return $C.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(n.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=qC(()=>{if(HC.has(n))return;KC(n,"down");const e=qC(()=>{KC(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>KC(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i),i)}),s}const YC=new Set(["width","height","top","left","right","bottom",...kk]);let JC;function QC(){JC=void 0}const XC={now:()=>(void 0===JC&&XC.set(OS.isProcessing||RS?OS.timestamp:performance.now()),JC),set:e=>{JC=e,queueMicrotask(QC)}};function ZC(e,t){-1===e.indexOf(t)&&e.push(t)}function eE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class tE{constructor(){this.subscriptions=[]}add(e){return ZC(this.subscriptions,e),()=>eE(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function nE(e,t){return t?e*(1e3/t):0}class rE{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const n=XC.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=XC.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tE);const n=this.events[e].add(t);return"change"===e?()=>{n(),DS.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=XC.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return nE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function iE(e,t){return new rE(e,t)}function sE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,iE(n))}function aE(e,t){const n=e.getValue("willChange");if(r=n,Boolean(bk(r)&&r.add))return n.add(t);var r}function oE(e){return e.props[ak]}const lE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function cE(e,t,n,r){if(e===t&&n===r)return TS;const i=t=>function(e,t,n,r,i){let s,a,o=0;do{a=t+(n-t)/2,s=lE(a,r,i)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:lE(i(e),t,r)}const uE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,dE=e=>t=>1-e(1-t),hE=cE(.33,1.53,.69,.99),fE=dE(hE),pE=uE(fE),mE=e=>(e*=2)<1?.5*fE(e):.5*(2-Math.pow(2,-10*(e-1))),gE=e=>1-Math.sin(Math.acos(e)),yE=dE(gE),vE=uE(gE),bE=e=>/^0[^.\s]+$/u.test(e);function wE(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||bE(e))}const xE=e=>Math.round(1e5*e)/1e5,SE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const kE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,CE=(e,t)=>n=>Boolean("string"==typeof n&&kE.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),EE=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[i,s,a,o]=r.match(SE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},TE={...Rk,transform:e=>Math.round((e=>Pk(0,255,e))(e))},_E={test:CE("rgb","red"),parse:EE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+TE.transform(e)+", "+TE.transform(t)+", "+TE.transform(n)+", "+xE(jk.transform(r))+")"};const NE={test:CE("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:_E.transform},IE={test:CE("hsl","hue"),parse:EE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ok.transform(xE(t))+", "+Ok.transform(xE(n))+", "+xE(jk.transform(r))+")"},AE={test:e=>_E.test(e)||NE.test(e)||IE.test(e),parse:e=>_E.test(e)?_E.parse(e):IE.test(e)?IE.parse(e):NE.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?_E.transform(e):IE.transform(e)},PE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const RE="number",jE="color",ME=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function DE(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=t.replace(ME,e=>(AE.test(e)?(r.color.push(s),i.push(jE),n.push(AE.parse(e))):e.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(e)):(r.number.push(s),i.push(RE),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:a,indexes:r,types:i}}function LE(e){return DE(e).values}function OE(e){const{split:t,types:n}=DE(e),r=t.length;return e=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],void 0!==e[s]){const t=n[s];i+=t===RE?xE(e[s]):t===jE?AE.transform(e[s]):e[s]}return i}}const FE=e=>"number"==typeof e?0:e;const UE={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(SE))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(PE))||void 0===n?void 0:n.length)||0)>0},parse:LE,createTransformer:OE,getAnimatableNone:function(e){const t=LE(e);return OE(e)(t.map(FE))}},zE=new Set(["brightness","contrast","saturate","opacity"]);function BE(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(SE)||[];if(!r)return e;const i=n.replace(r,"");let s=zE.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const VE=/\b([a-z-]*)\(.*?\)/gu,$E={...UE,getAnimatableNone:e=>{const t=e.match(VE);return t?t.map(BE).join(" "):e}},HE={...qk,color:AE,backgroundColor:AE,outlineColor:AE,fill:AE,stroke:AE,borderColor:AE,borderTopColor:AE,borderRightColor:AE,borderBottomColor:AE,borderLeftColor:AE,filter:$E,WebkitFilter:$E},qE=e=>HE[e];function KE(e,t){let n=qE(e);return n!==$E&&(n=UE),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const WE=new Set(["auto","none","0"]);const GE=e=>e===Rk||e===Fk,YE=(e,t)=>parseFloat(e.split(", ")[t]),JE=(e,t)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return YE(i[1],t);{const t=r.match(/^matrix\((.+)\)$/u);return t?YE(t[1],e):0}},QE=new Set(["x","y","z"]),XE=kk.filter(e=>!QE.has(e));const ZE={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:JE(4,13),y:JE(5,14)};ZE.translateX=ZE.x,ZE.translateY=ZE.y;const eT=new Set;let tT=!1,nT=!1;function rT(){if(nT){const e=Array.from(eT).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return XE.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null===(r=e.getValue(t))||void 0===r||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}nT=!1,tT=!1,eT.forEach(e=>e.complete()),eT.clear()}function iT(){eT.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(nT=!0)})}class sT{constructor(e,t,n,r,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(eT.add(this),tT||(tT=!0,DS.read(iT),DS.resolveKeyframes(rT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null==r?void 0:r.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,s);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=s),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),eT.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,eT.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const aT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),oT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lT(e,t,n=1){const[r,i]=function(e){const t=oT.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${null!=n?n:r}`,i]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return aT(e)?parseFloat(e):e}return Nk(i)?lT(i,t,n+1):i}const cT=e=>t=>t.test(e),uT=[Rk,Fk,Ok,Lk,zk,Uk,{test:e=>"auto"===e,parse:e=>e}],dT=e=>uT.find(cT(e));class hT extends sT{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),Nk(n))){const r=lT(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!YC.has(n)||2!==e.length)return;const[r,i]=e,s=dT(r),a=dT(i);if(s!==a)if(GE(s)&&GE(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)wE(e[r])&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"==typeof t&&!WE.has(t)&&DE(t).values.length&&(r=e[i]),i++}if(r&&n)for(const s of t)e[s]=KE(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ZE[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=ZE[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const fT=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!UE.test(e)&&"0"!==e||e.startsWith("url(")));const pT=e=>null!==e;function mT(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(pT),s=t&&"loop"!==n&&t%2==1?0:i.length-1;return s&&void 0!==r?r:i[s]}class gT{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=XC.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(iT(),rT()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=XC.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:s,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],a=fT(i,t),o=fT(s,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||TC(n))&&r)}(e,n,r,i)){if(!s)return o&&o(mT(e,this.options,t)),a&&a(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yT=(e,t,n)=>e+(t-e)*n;function vT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bT(e,t){return n=>n>0?t:e}const wT=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},xT=[NE,_E,IE];function ST(e){const t=(n=e,xT.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===IE&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,s=0,a=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;i=vT(o,r,e+1/3),s=vT(o,r,e),a=vT(o,r,e-1/3)}else i=s=a=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(r)),r}const kT=(e,t)=>{const n=ST(e),r=ST(t);if(!n||!r)return bT(e,t);const i={...n};return e=>(i.red=wT(n.red,r.red,e),i.green=wT(n.green,r.green,e),i.blue=wT(n.blue,r.blue,e),i.alpha=yT(n.alpha,r.alpha,e),_E.transform(i))},CT=(e,t)=>n=>t(e(n)),ET=(...e)=>e.reduce(CT),TT=new Set(["none","hidden"]);function _T(e,t){return n=>yT(e,t,n)}function NT(e){return"number"==typeof e?_T:"string"==typeof e?Nk(e)?bT:AE.test(e)?kT:PT:Array.isArray(e)?IT:"object"==typeof e?AE.test(e)?kT:AT:bT}function IT(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>NT(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function AT(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=NT(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const PT=(e,t)=>{const n=UE.createTransformer(t),r=DE(e),i=DE(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?TT.has(e)&&!i.values.length||TT.has(t)&&!r.values.length?function(e,t){return TT.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):ET(IT(function(e,t){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][i[a]],l=null!==(n=e.values[o])&&void 0!==n?n:0;r[s]=l,i[a]++}return r}(r,i),i.values),n):bT(e,t)};function RT(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return yT(e,t,n);return NT(e)(e,t)}function jT(e,t,n){const r=Math.max(t-5,0);return nE(n-e(r),t-r)}const MT=100,DT=10,LT=1,OT=0,FT=800,UT=.3,zT=.3,BT={granular:.01,default:2},VT={granular:.005,default:.5},$T=.01,HT=10,qT=.05,KT=1,WT=.001;function GT({duration:e=FT,bounce:t=UT,velocity:n=OT,mass:r=LT}){let i,s,a=1-t;a=Pk(qT,KT,a),e=Pk($T,HT,PS(e)),a<1?(i=t=>{const r=t*a,i=r*e,s=r-n,o=JT(t,a),l=Math.exp(-i);return WT-s/o*l},s=t=>{const r=t*a*e,s=r*n+n,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=JT(Math.pow(t,2),a);return(-i(t)+WT>0?-1:1)*((s-o)*l)/c}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,s=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let i=1;i<YT;i++)r-=e(r)/t(r);return r}(i,s,5/e);if(e=AS(e),isNaN(o))return{stiffness:MT,damping:DT,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*a*Math.sqrt(r*t),duration:e}}}const YT=12;function JT(e,t){return e*Math.sqrt(1-t*t)}const QT=["duration","bounce"],XT=["stiffness","damping","mass"];function ZT(e,t){return t.some(t=>void 0!==e[t])}function e_(e=zT,t=UT){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:OT,stiffness:MT,damping:DT,mass:LT,isResolvedFromDuration:!1,...e};if(!ZT(e,XT)&&ZT(e,QT))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*Pk(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:LT,stiffness:i,damping:s}}else{const n=GT(e);t={...t,...n,mass:LT},t.isResolvedFromDuration=!0}return t}({...n,velocity:-PS(n.velocity||0)}),p=h||0,m=c/(2*Math.sqrt(l*u)),g=a-s,y=PS(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?BT.granular:BT.default),i||(i=v?VT.granular:VT.default),m<1){const e=JT(y,m);b=t=>{const n=Math.exp(-m*y*t);return a-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)b=e=>a-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);b=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return a-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const w={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let n=0;m<1&&(n=0===e?AS(p):jT(b,e,t));const s=Math.abs(n)<=r,l=Math.abs(a-t)<=i;o.done=s&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(EC(w),CC),t=RC(t=>w.next(e*t).value,e,30);return e+"ms "+t}};return w}function t_({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},f=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=n*t;const m=d+p,g=void 0===a?m:a(m);g!==m&&(p=g-d);const y=e=>-p*Math.exp(-e/r),v=e=>g+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let w,x;const S=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(w=e,x=e_({keyframes:[h.value,f(h.value)],velocity:jT(v,e,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return x||void 0!==w||(t=!0,b(e),S(e)),void 0!==w&&e>=w?x.next(e-w):(!t&&b(e),h)}}}const n_=cE(.42,0,1,1),r_=cE(0,0,.58,1),i_=cE(.42,0,.58,1),s_={linear:TS,easeIn:n_,easeInOut:i_,easeOut:r_,circIn:gE,circInOut:vE,circOut:yE,backIn:fE,backInOut:pE,backOut:hE,anticipate:mE},a_=e=>{if(NC(e)){_S(4===e.length);const[t,n,r,i]=e;return cE(t,n,r,i)}return"string"==typeof e?s_[e]:e};function o_(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(_S(s===t.length),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],i=n||RT,s=e.length-1;for(let a=0;a<s;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||TS:t;n=ET(e,n)}r.push(n)}return r}(t,r,i),l=o.length,c=n=>{if(a&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=IS(e[r],e[r+1],n);return o[r](i)};return n?t=>c(Pk(e[0],e[s-1],t)):c}function l_(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=IS(0,t,r);e.push(yT(n,1,i))}}(t,e.length-1),t}function c_({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(a_):a_(r),s={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:l_(t),e),o=o_(a,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map(()=>c||i_).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(s.value=o(t),s.done=t>=e,s)}}const u_=e=>{const t=({timestamp:t})=>e(t);return{start:()=>DS.update(t,!0),stop:()=>LS(t),now:()=>OS.isProcessing?OS.timestamp:XC.now()}},d_={decay:t_,inertia:t_,tween:c_,keyframes:c_,spring:e_},h_=e=>e/100;class f_ extends gT{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:r,keyframes:i}=this.options,s=(null==r?void 0:r.KeyframeResolver)||sT;this.resolver=new s(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=this.options,a=TC(t)?t:d_[t]||c_;let o,l;a!==c_&&"number"!=typeof e[0]&&(o=ET(h_,RT(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});"mirror"===i&&(l=a({...this.options,keyframes:[...e].reverse(),velocity:-s})),null===c.calculatedDuration&&(c.calculatedDuration=EC(c));const{calculatedDuration:u}=c,d=u+r;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-r}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,b=i;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===f?(n=1-n,p&&(n-=p/u)):"mirror"===f&&(b=s)),v=Pk(0,1,n)*u}const w=y?{done:!1,value:o[0]}:b.next(v);a&&(w.value=a(w.value));let{done:x}=w;y||null===l||(x=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return S&&void 0!==r&&(w.value=mT(o,this.options,r)),m&&m(w.value),S&&this.finish(),w}get duration(){const{resolved:e}=this;return e?PS(e.calculatedDuration):0}get time(){return PS(this.currentTime)}set time(e){e=AS(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=PS(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=u_,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const p_=new Set(["opacity","clipPath","filter","transform"]);function m_(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const u=LC(o,i);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}const g_=NS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));const y_={anticipate:mE,backInOut:pE,circInOut:vE};class v_ extends gT{constructor(e){super(e);const{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new hT(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:r,ease:i,type:s,motionValue:a,name:o,startTime:l}=this.options;if(!a.owner||!a.owner.current)return!1;if("string"==typeof i&&PC()&&i in y_&&(i=y_[i]),function(e){return TC(e.type)||"spring"===e.type||!jC(e.ease)}(this.options)){const{onComplete:t,onUpdate:a,motionValue:o,element:l,...c}=this.options,u=function(e,t){const n=new f_({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const i=[];let s=0;for(;!r.done&&s<2e4;)r=n.sample(s),i.push(r.value),s+=10;return{times:void 0,keyframes:i,duration:s-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),n=u.duration,r=u.times,i=u.ease,s="keyframes"}const c=m_(a.owner.current,o,e,{...this.options,duration:n,times:r,ease:i});return c.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(_C(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:n}=this.options;a.set(mT(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:n,times:r,type:s,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return PS(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return PS(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=AS(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return TS;const{animation:n}=t;_C(n,e)}else this.pendingTimeline=e;return TS}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:r,type:i,ease:s,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:o,element:l,...c}=this.options,u=new f_({...c,keyframes:n,duration:r,type:i,ease:s,times:a,isGenerator:!0}),d=AS(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return g_()&&n&&p_.has(n)&&!o&&!l&&!r&&"mirror"!==i&&0!==s&&"inertia"!==a}}const b_={type:"spring",stiffness:500,damping:25,restSpeed:10},w_={type:"keyframes",duration:.8},x_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},S_=(e,{keyframes:t})=>t.length>2?w_:Ck.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:b_:x_;const k_=(e,t,n,r={},i,s)=>a=>{const o=kC(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=AS(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(o)||(u={...u,...S_(e,u)}),u.duration&&(u.duration=AS(u.duration)),u.repeatDelay&&(u.repeatDelay=AS(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),d&&!s&&void 0!==t.get()){const e=mT(u.keyframes,o);if(void 0!==e)return DS.update(()=>{u.onUpdate(e),u.onComplete()}),new SC([])}return!s&&v_.supports(u)?new v_(u):new f_(u)};function C_({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function E_(e,t,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const t=e.getValue(d,null!==(s=e.latestValues[d])&&void 0!==s?s:null),r=l[d];if(void 0===r||u&&C_(u,d))continue;const i={delay:n,...kC(a||{},d)};let o=!1;if(window.MotionHandoffAnimation){const t=oE(e);if(t){const e=window.MotionHandoffAnimation(t,d,DS);null!==e&&(i.startTime=e,o=!0)}}aE(e,d),t.start(k_(d,t,r,e.shouldReduceMotion&&YC.has(d)?{type:!1}:i,e,o));const h=t.animation;h&&c.push(h)}return o&&Promise.all(c).then(()=>{DS.update(()=>{o&&function(e,t){const n=bC(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s)sE(e,a,vk(s[a]))}(e,o)})}),c}function T_(e,t,n={}){var r;const i=bC(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(E_(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,l=1===i?(e=0)=>e*r:(e=0)=>o-e*r;return Array.from(e.variantChildren).sort(__).forEach((e,r)=>{e.notify("AnimationStart",t),a.push(T_(e,t,{...s,delay:n+l(r)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,i+r,a,o,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}return Promise.all([a(),o(n.delay)])}function __(e,t){return e.sortNodePosition(t)}const N_=QS.length;function I_(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&I_(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<N_;n++){const r=QS[n],i=e.props[r];(GS(i)||!1===i)&&(t[r]=i)}return t}const A_=[...JS].reverse(),P_=JS.length;function R_(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>T_(e,t,n));r=Promise.all(i)}else if("string"==typeof t)r=T_(e,t,n);else{const i="function"==typeof t?bC(e,t,n.custom):t;r=Promise.all(E_(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function j_(e){let t=R_(e),n=L_(),r=!0;const i=t=>(n,r)=>{var i;const s=bC(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function s(s){const{props:a}=e,o=I_(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<P_;t++){const h=A_[t],f=n[h],p=void 0!==a[h]?a[h]:o[h],m=GS(p),g=h===s?f.isActive:null;!1===g&&(d=t);let y=p===o[h]&&p!==a[h]&&m;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!p&&!f.prevProp||YS(p)||"boolean"==typeof p)continue;const v=M_(f.prevProp,p);let b=v||h===s&&f.isActive&&!y&&m||t>d&&m,w=!1;const x=Array.isArray(p)?p:[p];let S=x.reduce(i(h),{});!1===g&&(S={});const{prevResolvedValues:k={}}=f,C={...k,...S},E=t=>{b=!0,c.has(t)&&(w=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in C){const t=S[e],n=k[e];if(u.hasOwnProperty(e))continue;let r=!1;r=yk(t)&&yk(n)?!vC(t,n):t!==n,r?null!=t?E(e):c.add(e):void 0!==t&&c.has(e)?E(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=S,f.isActive&&(u={...u,...S}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||w)&&l.push(...x.map(e=>({animation:e,options:{type:h}})))}if(c.size){const t={};c.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!=r?r:null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=s(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=L_(),r=!0}}}function M_(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!vC(t,e)}function D_(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function L_(){return{animate:D_(!0),whileInView:D_(),whileHover:D_(),whileTap:D_(),whileDrag:D_(),whileFocus:D_(),exit:D_()}}class O_{constructor(e){this.isMounted=!1,this.node=e}update(){}}let F_=0;const U_={animation:{Feature:class extends O_{constructor(e){super(e),e.animationState||(e.animationState=j_(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends O_{constructor(){super(...arguments),this.id=F_++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function z_(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function B_(e){return{point:{x:e.pageX,y:e.pageY}}}function V_(e,t,n,r){return z_(e,t,(e=>t=>VC(t)&&e(t,B_(t)))(n),r)}const $_=(e,t)=>Math.abs(e-t);class H_{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=W_(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=$_(e.x,t.x),r=$_(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=OS;this.history.push({...r,timestamp:i});const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=q_(t,this.transformPagePoint),DS.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=W_("pointercancel"===e.type?this.lastMoveEventInfo:q_(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!VC(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const s=q_(B_(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=OS;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,W_(s,this.history)),this.removeListeners=ET(V_(this.contextWindow,"pointermove",this.handlePointerMove),V_(this.contextWindow,"pointerup",this.handlePointerUp),V_(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),LS(this.updatePoint)}}function q_(e,t){return t?{point:t(e.point)}:e}function K_(e,t){return{x:e.x-t.x,y:e.y-t.y}}function W_({point:e},t){return{point:e,delta:K_(e,Y_(t)),offset:K_(e,G_(t)),velocity:J_(t,.1)}}function G_(e){return e[0]}function Y_(e){return e[e.length-1]}function J_(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Y_(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>AS(t)));)n--;if(!r)return{x:0,y:0};const s=PS(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Q_(e){return e.max-e.min}function X_(e,t,n,r=.5){e.origin=r,e.originPoint=yT(t.min,t.max,e.origin),e.scale=Q_(n)/Q_(t),e.translate=yT(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Z_(e,t,n,r){X_(e.x,t.x,n.x,r?r.originX:void 0),X_(e.y,t.y,n.y,r?r.originY:void 0)}function eN(e,t,n){e.min=n.min+t.min,e.max=e.min+Q_(t)}function tN(e,t,n){e.min=t.min-n.min,e.max=e.min+Q_(t)}function nN(e,t,n){tN(e.x,t.x,n.x),tN(e.y,t.y,n.y)}function rN(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function iN(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const sN=.35;function aN(e,t,n){return{min:oN(e,t),max:oN(e,n)}}function oN(e,t){return"number"==typeof e?e:e[t]||0}const lN=()=>({x:{min:0,max:0},y:{min:0,max:0}});function cN(e){return[e("x"),e("y")]}function uN({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function dN(e){return void 0===e||1===e}function hN({scale:e,scaleX:t,scaleY:n}){return!dN(e)||!dN(t)||!dN(n)}function fN(e){return hN(e)||pN(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function pN(e){return mN(e.x)||mN(e.y)}function mN(e){return e&&"0%"!==e}function gN(e,t,n){return n+t*(e-n)}function yN(e,t,n,r,i){return void 0!==i&&(e=gN(e,i,r)),gN(e,n,r)+t}function vN(e,t=0,n=1,r,i){e.min=yN(e.min,t,n,r,i),e.max=yN(e.max,t,n,r,i)}function bN(e,{x:t,y:n}){vN(e.x,t.translate,t.scale,t.originPoint),vN(e.y,n.translate,n.scale,n.originPoint)}const wN=.999999999999,xN=1.0000000000001;function SN(e,t){e.min=e.min+t,e.max=e.max+t}function kN(e,t,n,r,i=.5){vN(e,t,n,yT(e.min,e.max,i),r)}function CN(e,t){kN(e.x,t.x,t.scaleX,t.scale,t.originX),kN(e.y,t.y,t.scaleY,t.scale,t.originY)}function EN(e,t){return uN(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const TN=({current:e})=>e?e.ownerDocument.defaultView:null,_N=new WeakMap;class NN{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new H_(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(B_(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?OC[s]?null:(OC[s]=!0,()=>{OC[s]=!1}):OC.x||OC.y?null:(OC.x=OC.y=!0,()=>{OC.x=OC.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cN(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ok.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Q_(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&DS.postRender(()=>i(e,t)),aE(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>cN(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:TN(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&DS.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!IN(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?yT(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?yT(n,e,r.max):Math.min(e,n)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&rk(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:rN(e.x,n,i),y:rN(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=sN){return!1===e?e=0:!0===e&&(e=sN),{x:aN(e,"left","right"),y:aN(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cN(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!rk(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=EN(e,n),{scroll:i}=t;return i&&(SN(r.x,i.offset.x),SN(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:iN(e.x,t.x),y:iN(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=uN(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=cN(a=>{if(!IN(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return aE(this.visualElement,e),n.start(k_(e,n,0,t,this.visualElement,!1))}stopAnimation(){cN(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cN(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){cN(t=>{const{drag:n}=this.getProps();if(!IN(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-yT(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!rk(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};cN(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Q_(e),i=Q_(t);return i>r?n=IS(t.min,t.max-r,e.min):r>i&&(n=IS(e.min,e.max-i,t.min)),Pk(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cN(t=>{if(!IN(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(yT(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;_N.set(this.visualElement,this);const e=V_(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();rk(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),DS.read(t);const i=z_(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(cN(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=sN,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function IN(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const AN=e=>(t,n)=>{e&&DS.postRender(()=>e(t,n))};const PN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function RN(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const jN={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Fk.test(e))return e;e=parseFloat(e)}return`${RN(e,t.target.x)}% ${RN(e,t.target.y)}%`}},MN={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=UE.parse(e);if(i.length>5)return r;const s=UE.createTransformer(e),a="number"!=typeof i[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=yT(o,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=c),"number"==typeof i[3+a]&&(i[3+a]/=c),s(i)}};class DN extends m.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var s;s=ON,Object.assign(sC,s),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),PN.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||DS.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ok.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LN(e){const[t,n]=wS(),r=m.useContext(hS);return u.jsx(DN,{...e,layoutGroup:r,switchLayoutGroup:m.useContext(lk),isPresent:t,safeToRemove:n})}const ON={borderRadius:{...jN,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jN,borderTopRightRadius:jN,borderBottomLeftRadius:jN,borderBottomRightRadius:jN,boxShadow:MN};const FN=(e,t)=>e.depth-t.depth;class UN{constructor(){this.children=[],this.isDirty=!1}add(e){ZC(this.children,e),this.isDirty=!0}remove(e){eE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FN),this.isDirty=!1,this.children.forEach(e)}}const zN=["TopLeft","TopRight","BottomLeft","BottomRight"],BN=zN.length,VN=e=>"string"==typeof e?parseFloat(e):e,$N=e=>"number"==typeof e||Fk.test(e);function HN(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const qN=WN(0,.5,yE),KN=WN(.5,.95,TS);function WN(e,t,n){return r=>r<e?0:r>t?1:n(IS(e,t,r))}function GN(e,t){e.min=t.min,e.max=t.max}function YN(e,t){GN(e.x,t.x),GN(e.y,t.y)}function JN(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function QN(e,t,n,r,i){return e=gN(e-=t,1/n,r),void 0!==i&&(e=gN(e,1/i,r)),e}function XN(e,t,[n,r,i],s,a){!function(e,t=0,n=1,r=.5,i,s=e,a=e){Ok.test(t)&&(t=parseFloat(t),t=yT(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=yT(s.min,s.max,r);e===s&&(o-=t),e.min=QN(e.min,t,n,o,i),e.max=QN(e.max,t,n,o,i)}(e,t[n],t[r],t[i],t.scale,s,a)}const ZN=["x","scaleX","originX"],eI=["y","scaleY","originY"];function tI(e,t,n,r){XN(e.x,t,ZN,n?n.x:void 0,r?r.x:void 0),XN(e.y,t,eI,n?n.y:void 0,r?r.y:void 0)}function nI(e){return 0===e.translate&&1===e.scale}function rI(e){return nI(e.x)&&nI(e.y)}function iI(e,t){return e.min===t.min&&e.max===t.max}function sI(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function aI(e,t){return sI(e.x,t.x)&&sI(e.y,t.y)}function oI(e){return Q_(e.x)/Q_(e.y)}function lI(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class cI{constructor(){this.members=[]}add(e){ZC(this.members,e),e.scheduleRender()}remove(e){if(eE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const uI={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},dI="undefined"!=typeof window&&void 0!==window.MotionDebug,hI=["","X","Y","Z"],fI={visibility:"hidden"};let pI=0;function mI(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function gI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=oE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",DS,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&gI(r)}function yI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=pI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,dI&&(uI.totalNodes=uI.resolvedTargetDeltas=uI.recalculatedProjection=0),this.nodes.forEach(wI),this.nodes.forEach(_I),this.nodes.forEach(NI),this.nodes.forEach(xI),dI&&window.MotionDebug.record(uI)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new UN)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tE),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=t)instanceof SVGElement&&"svg"!==r.tagName,this.instance=t;const{layoutId:i,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=XC.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(LS(r),e(s-t))};return DS.read(r,!0),()=>LS(r)}(r,250),PN.hasAnimatedSinceResize&&(PN.hasAnimatedSinceResize=!1,this.nodes.forEach(TI))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||MI,{onLayoutAnimationStart:s,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!aI(this.targetLayout,r)||n,c=!t&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...kC(i,"layout"),onPlay:s,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||TI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,LS(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(II),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(kI);this.isUpdating||this.nodes.forEach(CI),this.isUpdating=!1,this.nodes.forEach(EI),this.nodes.forEach(vI),this.nodes.forEach(bI),this.clearAllSnapshots();const e=XC.now();OS.delta=Pk(0,1e3/60,e-OS.timestamp),OS.timestamp=e,OS.isProcessing=!0,FS.update.process(OS),FS.preRender.process(OS),FS.render.process(OS),OS.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ok.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SI),this.sharedNodes.forEach(AI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,DS.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){DS.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!rI(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||fN(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),OI((r=n).x),OI(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(UI))){const{scroll:e}=this.root;e&&(SN(n.x,e.offset.x),SN(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(YN(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:s}=t;t!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&YN(n,e),SN(n.x,i.offset.x),SN(n.y,i.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};YN(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&CN(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),fN(e.latestValues)&&CN(n,e.latestValues)}return fN(this.latestValues)&&CN(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};YN(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!fN(e.latestValues))continue;hN(e.latestValues)&&e.updateSnapshot();const r=lN();YN(r,e.measurePageBox()),tI(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return fN(this.latestValues)&&tI(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==OS.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=OS.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nN(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),YN(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,eN(a.x,o.x,l.x),eN(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):YN(this.target,this.layout.layoutBox),bN(this.target,this.targetDelta)):YN(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nN(this.relativeTargetOrigin,this.target,e.target),YN(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}dI&&uI.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!hN(this.parent.latestValues)&&!pN(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===OS.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;YN(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&CN(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,bN(e,a)),r&&fN(s.latestValues)&&CN(e,s.latestValues))}t.x<xN&&t.x>wN&&(t.x=1),t.y<xN&&t.y>wN&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(JN(this.prevProjectionDelta.x,this.projectionDelta.x),JN(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Z_(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&lI(this.projectionDelta.x,this.prevProjectionDelta.x)&&lI(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),dI&&uI.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(jI));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h;PI(s.x,e.x,n),PI(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nN(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){RI(e.x,t.x,n.x,r),RI(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&(l=this.relativeTarget,h=d,iI(l.x,h.x)&&iI(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),YN(d,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=yT(0,void 0!==n.opacity?n.opacity:1,qN(r)),e.opacityExit=yT(void 0!==t.opacity?t.opacity:1,0,KN(r))):s&&(e.opacity=yT(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<BN;a++){const i=`border${zN[a]}Radius`;let s=HN(t,i),o=HN(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||$N(s)===$N(o)?(e[i]=Math.max(yT(VN(s),VN(o),r),0),(Ok.test(o)||Ok.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=yT(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(LS(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=DS.update(()=>{PN.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=bk(e)?e:iE(e);return r.start(k_("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&FI(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Q_(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Q_(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}YN(t,n),CN(t,i),Z_(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new cI);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&mI("z",e,r,this.animationValues);for(let i=0;i<hI.length;i++)mI(`rotate${hI[i]}`,e,r,this.animationValues),mI(`skew${hI[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fI;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=wk(null==e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=wk(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!fN(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),s&&(r+=`rotateY(${s}deg) `),a&&(r+=`skewX(${a}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in sC){if(void 0===a[c])continue;const{correct:e,applyTo:t}=sC[c],n="none"===r.transform?a[c]:e(a[c],s);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=s===this?wk(null==e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(kI),this.root.sharedNodes.clear()}}}function vI(e){e.updateLayout()}function bI(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?cN(e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=Q_(r);r.min=t[e].min,r.max=r.min+i}):FI(i,n.layoutBox,t)&&cN(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],a=Q_(t[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Z_(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?Z_(o,e.applyTransform(r,!0),n.measuredBox):Z_(o,t,n.layoutBox);const l=!rI(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};nN(a,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};nN(o,t,s.layoutBox),aI(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function wI(e){dI&&uI.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SI(e){e.clearSnapshot()}function kI(e){e.clearMeasurements()}function CI(e){e.isLayoutDirty=!1}function EI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function TI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _I(e){e.resolveTargetDelta()}function NI(e){e.calcProjection()}function II(e){e.resetSkewAndRotation()}function AI(e){e.removeLeadSnapshot()}function PI(e,t,n){e.translate=yT(t.translate,0,n),e.scale=yT(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function RI(e,t,n,r){e.min=yT(t.min,n.min,r),e.max=yT(t.max,n.max,r)}function jI(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const MI={duration:.45,ease:[.4,0,.1,1]},DI=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),LI=DI("applewebkit/")&&!DI("chrome/")?Math.round:TS;function OI(e){e.min=LI(e.min),e.max=LI(e.max)}function FI(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=oI(t),i=oI(n),s=.2,!(Math.abs(r-i)<=s));var r,i,s}function UI(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const zI=yI({attachResizeListener:(e,t)=>z_(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),BI={current:void 0},VI=yI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!BI.current){const e=new zI({});e.mount(window),e.setOptions({layoutScroll:!0}),BI.current=e}return BI.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),$I={pan:{Feature:class extends O_{constructor(){super(...arguments),this.removePointerDownListener=TS}onPointerDown(e){this.session=new H_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TN(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:AN(e),onStart:AN(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&DS.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=V_(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends O_{constructor(e){super(e),this.removeGroupControls=TS,this.removeListeners=TS,this.controls=new NN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||TS}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:VI,MeasureLayout:LN}};function HI(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&DS.postRender(()=>i(t,B_(t)))}function qI(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&DS.postRender(()=>i(t,B_(t)))}const KI=new WeakMap,WI=new WeakMap,GI=e=>{const t=KI.get(e.target);t&&t(e)},YI=e=>{e.forEach(GI)};function JI(e,t,n){const r=function({root:e,...t}){const n=e||document;WI.has(n)||WI.set(n,{});const r=WI.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(YI,{root:e,...t})),r[i]}(t);return KI.set(e,n),r.observe(e),()=>{KI.delete(e),r.unobserve(e)}}const QI={some:0,all:1};const XI={inView:{Feature:class extends O_{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:QI[r]};return JI(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends O_{mount(){const{current:e}=this.node;e&&(this.unmount=GC(e,e=>(qI(this.node,e,"Start"),(e,{success:t})=>qI(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends O_{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(wM){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ET(z_(this.node.current,"focus",()=>this.onFocus()),z_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends O_{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,i,s]=UC(e,n),a=zC(e=>{const{target:n}=e,r=t(e);if("function"!=typeof r||!n)return;const s=zC(e=>{r(e),n.removeEventListener("pointerleave",s)});n.addEventListener("pointerleave",s,i)});return r.forEach(e=>{e.addEventListener("pointerenter",a,i)}),s}(e,e=>(HI(this.node,e,"Start"),e=>HI(this.node,e,"End"))))}unmount(){}}}},ZI={layout:{ProjectionNode:VI,MeasureLayout:LN}},eA={current:null},tA={current:!1};const nA=[...uT,AE,UE],rA=new WeakMap;const iA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sA{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=XC.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,DS.render(this.render,!1,!0))};const{latestValues:o,renderState:l,onUpdate:c}=s;this.onUpdate=c,this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=XS(t),this.isVariantNode=ZS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const h in d){const e=d[h];void 0!==o[h]&&bk(e)&&e.set(o[h],!1)}}mount(e){this.current=e,rA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),tA.current||function(){if(tA.current=!0,kS)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eA.current=e.matches;e.addListener(t),t()}else eA.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||eA.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){rA.delete(this.current),this.projection&&this.projection.unmount(),LS(this.notifyUpdate),LS(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Ck.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&DS.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in BS){const t=BS[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<iA.length;n++){const t=iA[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],s=n[r];if(bk(i))e.addValue(r,i);else if(bk(s))e.addValue(r,iE(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,iE(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=iE(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return null!=r&&("string"==typeof r&&(aT(r)||bE(r))?r=parseFloat(r):(i=r,!nA.find(cT(i))&&UE.test(t)&&(r=KE(e,t))),this.setBaseTarget(e,bk(r)?r.get():r)),bk(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const i=gk(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||bk(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new tE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class aA extends sA{constructor(){super(...arguments),this.KeyframeResolver=hT}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;bk(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class oA extends aA{constructor(){super(...arguments),this.type="html",this.renderInstance=nC}readValueFromInstance(e,t){if(Ck.has(t)){const e=qE(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(Tk(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return EN(e,t)}build(e,t,n){Gk(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return oC(e,t,n)}}class lA extends aA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lN}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ck.has(t)){const e=qE(t);return e&&e.default||0}return t=rC.has(t)?t:sk(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return lC(e,t,n)}build(e,t,n){Xk(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){iC(e,t,0,r)}mount(e){this.isSVGTag=tC(e.tagName),super.mount(e)}}const cA=(e,t)=>pk(e)?new lA(t):new oA(t,{allowProjection:e!==m.Fragment}),uA=KS(yC({...U_,...XI,...$I,...ZI},cA));const dA=new class{constructor(){this.dbName="YouTubeAudioSampler",this.dbVersion=1,this.storeName="audioCache",this.db=null,this.isInitialized=!1,this.config={maxStorageSize:524288e3,maxEntries:50,cleanupThreshold:.8,entryTTL:864e5,retryAttempts:3,retryDelay:1e3},this.init=this.init.bind(this),this.store=this.store.bind(this),this.retrieve=this.retrieve.bind(this),this.remove=this.remove.bind(this),this.cleanup=this.cleanup.bind(this),this.clear=this.clear.bind(this),this.getStorageInfo=this.getStorageInfo.bind(this)}async init(){if(!this.isInitialized||!this.db)return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=()=>{t(new Error(`IndexedDB initialization failed: ${n.error?.message}`))},n.onsuccess=()=>{this.db=n.result,this.isInitialized=!0,this.db.onerror=e=>{},e()},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){const e=t.createObjectStore(this.storeName,{keyPath:"id"});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("size","size",{unique:!1}),e.createIndex("youtubeUrl","youtubeUrl",{unique:!1})}}})}async store(e,t,n=null){try{await this.ensureInitialized();const r=this.generateId(e),i=this.serializeAudioBuffer(t),s=this.calculateSize(i,n);await this.ensureStorageSpace(s);const a={id:r,youtubeUrl:e,audioData:i,waveformData:n,size:s,timestamp:Date.now(),format:"audiobuffer",sampleRate:t.sampleRate,numberOfChannels:t.numberOfChannels,duration:t.duration};return await this.performStore(a),!0}catch(kM){if("QuotaExceededError"===kM.name)try{return await this.performEmergencyCleanup(),await this.performStore(entry),!0}catch(r){}throw new Error(`Storage failed: ${kM.message}`)}}async retrieve(e){try{await this.ensureInitialized();const t=this.generateId(e),n=await this.performRetrieve(t);if(!n)return null;if(this.isExpired(n))return await this.remove(e),null;const r=this.deserializeAudioBuffer(n.audioData,n.sampleRate,n.numberOfChannels);return await this.updateAccessTime(t),{audioBuffer:r,waveformData:n.waveformData,metadata:{duration:n.duration,sampleRate:n.sampleRate,numberOfChannels:n.numberOfChannels,size:n.size,timestamp:n.timestamp}}}catch(kM){return null}}async remove(e){try{await this.ensureInitialized();const t=this.generateId(e);return new Promise((e,n)=>{const r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);r.onsuccess=()=>{e(!0)},r.onerror=()=>{n(new Error(`Failed to remove entry: ${r.error?.message}`))}})}catch(kM){return!1}}async has(e){try{await this.ensureInitialized();const t=this.generateId(e),n=await this.performRetrieve(t);return!!n&&(!this.isExpired(n)||(await this.remove(e),!1))}catch(kM){return!1}}async cleanup(){try{await this.ensureInitialized();const e=await this.getAllEntries();Date.now();let t=0;e.sort((e,t)=>e.timestamp-t.timestamp);const n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);for(const r of e){let i=!1;this.isExpired(r)&&(i=!0),e.length-t>this.config.maxEntries&&(i=!0),i&&(await new Promise((e,t)=>{const i=n.delete(r.id);i.onsuccess=()=>e(),i.onerror=()=>t(i.error)}),t++)}return t}catch(kM){return 0}}async clear(){try{return await this.ensureInitialized(),new Promise((e,t)=>{const n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();n.onsuccess=()=>{e(!0)},n.onerror=()=>{t(new Error(`Failed to clear storage: ${n.error?.message}`))}})}catch(kM){return!1}}async getStorageInfo(){try{await this.ensureInitialized();const e=await this.getAllEntries(),t=e.reduce((e,t)=>e+(t.size||0),0),n=e.filter(e=>this.isExpired(e)).length;let r=null,i=null;if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate();r=e.quota,i=e.usage}catch(kM){}return{entryCount:e.length,expiredCount:n,totalSize:t,totalSizeMB:Math.round(t/1048576*100)/100,maxEntries:this.config.maxEntries,maxSize:this.config.maxStorageSize,maxSizeMB:Math.round(this.config.maxStorageSize/1048576),quota:r,usage:i,utilizationPercent:r?Math.round(i/r*100):null,oldestEntry:e.length>0?Math.min(...e.map(e=>e.timestamp)):null,newestEntry:e.length>0?Math.max(...e.map(e=>e.timestamp)):null}}catch(kM){return{entryCount:0,expiredCount:0,totalSize:0,error:kM.message}}}async ensureInitialized(){this.isInitialized||await this.init()}generateId(e){const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?`yt_${t[1]}`:`url_${btoa(e).replace(/[^a-zA-Z0-9]/g,"")}`}serializeAudioBuffer(e){const t=[];for(let n=0;n<e.numberOfChannels;n++){const r=e.getChannelData(n);t.push(Array.from(r))}return{channels:t,sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels,duration:e.duration}}deserializeAudioBuffer(e,t,n){const r=new(window.AudioContext||window.webkitAudioContext),i=e.channels[0].length,s=r.createBuffer(n,i,t);for(let a=0;a<n;a++){const t=s.getChannelData(a),n=e.channels[a];for(let e=0;e<i;e++)t[e]=n[e]}return s}calculateSize(e,t){let n=0;if(e&&e.channels)for(const r of e.channels)n+=4*r.length;return t&&(n+=4*t.length),n+=1024,n}async ensureStorageSpace(e){(await this.getStorageInfo()).totalSize+e>this.config.maxStorageSize*this.config.cleanupThreshold&&await this.cleanup();if((await this.getStorageInfo()).totalSize+e>this.config.maxStorageSize)throw new Error("Insufficient storage space available")}async performEmergencyCleanup(){const e=await this.getAllEntries();e.sort((e,t)=>e.timestamp-t.timestamp);const t=e.slice(0,Math.floor(e.length/2)),n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName);for(const r of t)await new Promise((e,t)=>{const i=n.delete(r.id);i.onsuccess=()=>e(),i.onerror=()=>t(i.error)})}async performStore(e){return new Promise((t,n)=>{const r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}async performRetrieve(e){return new Promise((t,n)=>{const r=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);r.onsuccess=()=>t(r.result),r.onerror=()=>n(r.error)})}async updateAccessTime(e){try{const t=await this.performRetrieve(e);t&&(t.lastAccessed=Date.now(),await this.performStore(t))}catch(kM){}}async getAllEntries(){return new Promise((e,t)=>{const n=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();n.onsuccess=()=>e(n.result||[]),n.onerror=()=>t(n.error)})}isExpired(e){return Date.now()-e.timestamp>this.config.entryTTL}formatSize(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}async close(){this.db&&(this.db.close(),this.db=null,this.isInitialized=!1)}};dA.init().catch(e=>{}),"undefined"!=typeof window&&(window.addEventListener("beforeunload",()=>{dA.close()}),setInterval(()=>{dA.cleanup().catch(e=>{})},18e5));const hA=new class{constructor(){this.metrics=new Map,this.memorySnapshots=[],this.performanceObserver=null,this.isMonitoring=!1,this.config={maxMetricsHistory:100,memorySnapshotInterval:5e3,maxMemorySnapshots:50,performanceThresholds:{audioDownload:3e4,audioProcessing:1e4,waveformGeneration:5e3,memoryUsage:524288e3,gcTriggerThreshold:.8}},this.startMonitoring=this.startMonitoring.bind(this),this.stopMonitoring=this.stopMonitoring.bind(this),this.recordMetric=this.recordMetric.bind(this),this.getMetrics=this.getMetrics.bind(this),this.cleanup=this.cleanup.bind(this)}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.startMemoryMonitoring(),this.initializePerformanceObserver())}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.memoryInterval&&(clearInterval(this.memoryInterval),this.memoryInterval=null),this.performanceObserver&&(this.performanceObserver.disconnect(),this.performanceObserver=null))}recordMetric(e,t,n={}){const r={operation:e,duration:t,timestamp:Date.now(),metadata:{...n}};this.metrics.has(e)||this.metrics.set(e,[]);const i=this.metrics.get(e);return i.push(r),i.length>this.config.maxMetricsHistory&&i.shift(),this.checkPerformanceThresholds(e,t,n),r}startMeasurement(e){const t=performance.now(),n=this.getCurrentMemoryUsage();return(r={})=>{const i=performance.now()-t,s=this.getCurrentMemoryUsage(),a={...r,startMemory:n,endMemory:s,memoryDelta:s.usedJSHeapSize-n.usedJSHeapSize};return this.recordMetric(e,i,a)}}getMetrics(e=null){if(e){const t=this.metrics.get(e)||[];return this.calculateMetricsSummary(t,e)}const t={};for(const[n,r]of this.metrics)t[n]=this.calculateMetricsSummary(r,n);return{operations:t,memory:this.getMemoryMetrics(),system:this.getSystemMetrics()}}getCurrentMemoryUsage(){return"memory"in performance?{usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,timestamp:Date.now()}:{usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0,timestamp:Date.now(),unavailable:!0}}shouldTriggerGC(){const e=this.getCurrentMemoryUsage();if(e.unavailable)return!1;return e.usedJSHeapSize/e.jsHeapSizeLimit>this.config.performanceThresholds.gcTriggerThreshold}triggerGC(){if(window.gc&&"function"==typeof window.gc)try{this.getCurrentMemoryUsage();window.gc();this.getCurrentMemoryUsage();return!0}catch(kM){}return!1}getMemoryOptimizationRecommendations(){const e=[],t=this.getCurrentMemoryUsage();if(t.unavailable)return["Memory monitoring unavailable in this environment"];const n=t.usedJSHeapSize/t.jsHeapSizeLimit;if(n>.9?e.push("Critical: Memory usage above 90%. Consider clearing audio cache."):n>.8&&e.push("Warning: Memory usage above 80%. Monitor closely."),this.memorySnapshots.length>=10){const t=this.memorySnapshots.slice(-10);this.calculateMemoryTrend(t)>.1&&e.push("Potential memory leak detected. Consider restarting the application.")}const r=this.metrics.get("audio_processing")||[];if(r.length>0){r.reduce((e,t)=>e+(t.metadata.memoryDelta||0),0)/r.length>52428800&&e.push("Audio processing consuming significant memory. Consider optimizing buffer management.")}return e}getPerformanceOptimizationRecommendations(){const e=[],t=this.metrics.get("audio_download")||[];if(t.length>0){t.reduce((e,t)=>e+t.duration,0)/t.length>this.config.performanceThresholds.audioDownload&&e.push("Audio downloads are slow. Check network connection or server performance.")}const n=this.metrics.get("waveform_generation")||[];if(n.length>0){n.reduce((e,t)=>e+t.duration,0)/n.length>this.config.performanceThresholds.waveformGeneration&&e.push("Waveform generation is slow. Consider using Web Workers or reducing sample count.")}return e}startMemoryMonitoring(){this.memoryInterval=setInterval(()=>{const e=this.getCurrentMemoryUsage();this.memorySnapshots.push(e),this.memorySnapshots.length>this.config.maxMemorySnapshots&&this.memorySnapshots.shift(),this.shouldTriggerGC()&&this.triggerGC()},this.config.memorySnapshotInterval)}initializePerformanceObserver(){if("PerformanceObserver"in window)try{this.performanceObserver=new PerformanceObserver(e=>{const t=e.getEntries();for(const n of t)"measure"===n.entryType&&this.recordMetric(`browser_${n.name}`,n.duration,{entryType:n.entryType,startTime:n.startTime})}),this.performanceObserver.observe({entryTypes:["measure","navigation"]})}catch(kM){}}checkPerformanceThresholds(e,t,n){this.config.performanceThresholds[e]}calculateMetricsSummary(e,t){if(0===e.length)return{operation:t,count:0,avgDuration:0,minDuration:0,maxDuration:0,totalDuration:0};const n=e.map(e=>e.duration),r=n.reduce((e,t)=>e+t,0);return{operation:t,count:e.length,avgDuration:Math.round(r/e.length),minDuration:Math.min(...n),maxDuration:Math.max(...n),totalDuration:Math.round(r),recentMetrics:e.slice(-5)}}getMemoryMetrics(){if(0===this.memorySnapshots.length)return{unavailable:!0};const e=this.memorySnapshots[this.memorySnapshots.length-1],t=this.calculateMemoryTrend(this.memorySnapshots.slice(-10));return{current:{used:this.formatBytes(e.usedJSHeapSize),total:this.formatBytes(e.totalJSHeapSize),limit:this.formatBytes(e.jsHeapSizeLimit),usagePercent:Math.round(e.usedJSHeapSize/e.jsHeapSizeLimit*100)},trend:{direction:t>.05?"increasing":t<-.05?"decreasing":"stable",percentage:Math.round(100*t)},snapshots:this.memorySnapshots.length}}getSystemMetrics(){const e={timestamp:Date.now(),userAgent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency||"unknown"};return"connection"in navigator&&(e.connection={effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}),e}calculateMemoryTrend(e){if(e.length<2)return 0;const t=e[0].usedJSHeapSize;return(e[e.length-1].usedJSHeapSize-t)/t}formatBytes(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}cleanup(){this.stopMonitoring(),this.metrics.clear(),this.memorySnapshots=[]}};hA.startMonitoring(),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{hA.cleanup()});const fA=new class{constructor(){this.audioBuffers=new Map,this.bufferMetadata=new Map,this.cleanupCallbacks=new Set,this.isMonitoring=!1,this.config={maxMemoryUsage:419430400,cleanupThreshold:.8,maxBufferAge:18e5,maxBufferCount:20,gcInterval:6e4,memoryCheckInterval:1e4,priorityLevels:{HIGH:3,MEDIUM:2,LOW:1}},this.registerBuffer=this.registerBuffer.bind(this),this.unregisterBuffer=this.unregisterBuffer.bind(this),this.getBuffer=this.getBuffer.bind(this),this.cleanup=this.cleanup.bind(this),this.startMonitoring=this.startMonitoring.bind(this),this.stopMonitoring=this.stopMonitoring.bind(this)}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.gcInterval=setInterval(()=>{this.performGarbageCollection()},this.config.gcInterval),this.memoryCheckInterval=setInterval(()=>{this.checkMemoryUsage()},this.config.memoryCheckInterval))}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=null),this.memoryCheckInterval&&(clearInterval(this.memoryCheckInterval),this.memoryCheckInterval=null))}registerBuffer(e,t,n={}){try{if(!t||!e)throw new Error("Invalid buffer or ID provided");const r=this.calculateBufferSize(t);this.shouldTriggerCleanup(r)&&this.performEmergencyCleanup(r);const i={id:e,size:r,createdAt:Date.now(),lastAccessed:Date.now(),accessCount:0,priority:n.priority||this.config.priorityLevels.MEDIUM,persistent:n.persistent||!1,tags:n.tags||[],source:n.source||"unknown"};return this.audioBuffers.set(e,t),this.bufferMetadata.set(e,i),!0}catch(kM){return!1}}unregisterBuffer(e){try{const t=this.bufferMetadata.get(e);if(t)for(const n of this.cleanupCallbacks)try{n(e,t)}catch(kM){}return this.audioBuffers.delete(e),this.bufferMetadata.delete(e),!0}catch(kM){return!1}}getBuffer(e){const t=this.audioBuffers.get(e);if(t){const t=this.bufferMetadata.get(e);t&&(t.lastAccessed=Date.now(),t.accessCount++)}return t||null}hasBuffer(e){return this.audioBuffers.has(e)}getBufferMetadata(e){return this.bufferMetadata.get(e)||null}updateBufferPriority(e,t){const n=this.bufferMetadata.get(e);n&&(n.priority=t)}addCleanupCallback(e){this.cleanupCallbacks.add(e)}removeCleanupCallback(e){this.cleanupCallbacks.delete(e)}getMemoryStats(){let e=0,t=null,n=null;const r={HIGH:0,MEDIUM:0,LOW:0};for(const[s,a]of this.bufferMetadata){e+=a.size,(!t||a.createdAt<t.createdAt)&&(t=a),(!n||a.createdAt>n.createdAt)&&(n=a);const i=Object.keys(this.config.priorityLevels).find(e=>this.config.priorityLevels[e]===a.priority)||"UNKNOWN";r[i]=(r[i]||0)+1}const i=hA.getCurrentMemoryUsage();return{audioBuffers:{count:this.audioBuffers.size,totalSize:e,totalSizeMB:Math.round(e/1048576*100)/100,maxSize:this.config.maxMemoryUsage,maxSizeMB:Math.round(this.config.maxMemoryUsage/1048576),usagePercent:Math.round(e/this.config.maxMemoryUsage*100),oldestBuffer:t?{id:t.id,age:Date.now()-t.createdAt,size:this.formatBytes(t.size)}:null,newestBuffer:n?{id:n.id,age:Date.now()-n.createdAt,size:this.formatBytes(n.size)}:null,byPriority:r},system:{jsHeapUsed:i.usedJSHeapSize,jsHeapTotal:i.totalJSHeapSize,jsHeapLimit:i.jsHeapSizeLimit,jsHeapUsedMB:Math.round(i.usedJSHeapSize/1048576*100)/100},recommendations:this.getMemoryRecommendations()}}listBuffers(){const e=[];for(const[t,n]of this.bufferMetadata)e.push({id:t,size:this.formatBytes(n.size),age:Date.now()-n.createdAt,lastAccessed:Date.now()-n.lastAccessed,accessCount:n.accessCount,priority:n.priority,persistent:n.persistent,tags:n.tags,source:n.source});return e.sort((e,t)=>t.lastAccessed-e.lastAccessed)}performGarbageCollection(){const e=hA.startMeasurement("memory_gc");try{let t=0,n=0;const r=Date.now(),i=Array.from(this.bufferMetadata.entries()).map(([e,t])=>({id:e,...t})).sort(this.getCleanupPriority.bind(this));for(const e of i){let i=!1;const s=r-e.createdAt;!e.persistent&&s>this.config.maxBufferAge&&(i=!0),this.audioBuffers.size>this.config.maxBufferCount&&(i=!0),i&&(n+=e.size,this.unregisterBuffer(e.id),t++)}e({cleanedCount:t,freedBytes:n})}catch(kM){e({error:kM.message})}}performEmergencyCleanup(e=0){const t=hA.startMeasurement("emergency_cleanup");try{let n=0,r=0;const i=Array.from(this.bufferMetadata.entries()).map(([e,t])=>({id:e,...t})).sort(this.getCleanupPriority.bind(this)).reverse();for(const t of i){if(t.persistent)continue;if(n+=t.size,this.unregisterBuffer(t.id),r++,e>0&&n>=e)break;if(this.getCurrentMemoryUsage()<this.config.maxMemoryUsage*this.config.cleanupThreshold)break}t({cleanedCount:r,freedBytes:n,requiredBytes:e})}catch(kM){t({error:kM.message})}}checkMemoryUsage(){this.getCurrentMemoryUsage()>this.config.maxMemoryUsage*this.config.cleanupThreshold&&this.performGarbageCollection()}calculateBufferSize(e){return e.numberOfChannels*e.length*4}getCurrentMemoryUsage(){let e=0;for(const t of this.bufferMetadata.values())e+=t.size;return e}shouldTriggerCleanup(e=0){return this.getCurrentMemoryUsage()+e>this.config.maxMemoryUsage*this.config.cleanupThreshold||this.audioBuffers.size>=this.config.maxBufferCount}getCleanupPriority(e,t){return e.priority!==t.priority?t.priority-e.priority:e.persistent!==t.persistent?t.persistent-e.persistent:e.lastAccessed!==t.lastAccessed?t.lastAccessed-e.lastAccessed:e.accessCount!==t.accessCount?t.accessCount-e.accessCount:t.createdAt-e.createdAt}getMemoryRecommendations(){const e=[];let t=0,n=null;for(const[i,s]of this.bufferMetadata)t+=s.size,(!n||s.createdAt<n.createdAt)&&(n=s);const r=Math.round(t/this.config.maxMemoryUsage*100);if(r>90?e.push("Critical: Audio buffer memory usage above 90%. Consider clearing unused buffers."):r>80&&e.push("Warning: Audio buffer memory usage above 80%. Monitor closely."),this.audioBuffers.size>.8*this.config.maxBufferCount&&e.push("High buffer count detected. Consider implementing more aggressive cleanup."),n){Date.now()-n.createdAt>this.config.maxBufferAge&&e.push("Old audio buffers detected. Consider manual cleanup.")}return e}formatBytes(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}cleanup(){this.stopMonitoring();for(const[e,t]of this.bufferMetadata)for(const n of this.cleanupCallbacks)try{n(e,t)}catch(kM){}this.audioBuffers.clear(),this.bufferMetadata.clear(),this.cleanupCallbacks.clear()}};fA.startMonitoring(),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{fA.cleanup()});class pA{constructor(){this.audioContext=null,this.masterGainNode=null,this.activeSources=new Map,this.audioBuffer=null,this.storageManager=dA,this.isInitialized=!1,this.masterVolume=1,this.initializeAudioContext=this.initializeAudioContext.bind(this),this.cleanup=this.cleanup.bind(this)}async initializeAudioContext(){try{return this.audioContext&&"closed"!==this.audioContext.state||(this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.connect(this.audioContext.destination),this.masterGainNode.gain.value=this.masterVolume),"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.isInitialized=!0,!0}catch(kM){throw new Error(`AudioContext initialization failed: ${kM.message}`)}}async loadAudioBuffer(e,t=null){try{await this.initializeAudioContext();let n=t;if(!n){const t=await this.storageManager.getAudioData(e);if(!t||!t.audioBuffer)throw new Error(`No audio buffer found for ID: ${e}`);n=t.audioBuffer}return this.audioBuffer=await this.audioContext.decodeAudioData(n.slice()),this.audioBuffer}catch(kM){throw new Error(`Audio buffer loading failed: ${kM.message}`)}}async playSample(e,t=null,n=null,r=null){const i=hA.startMeasurement("sample_playback");try{if(!this.audioBuffer)throw new Error("No audio buffer loaded");await this.initializeAudioContext();const s=r||`sample_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(e<0||e>=this.audioBuffer.duration)throw new Error(`Invalid start time: ${e}. Must be between 0 and ${this.audioBuffer.duration}`);const a=this.audioBuffer.duration-e,o=t?Math.min(t,a):a,l=this.audioContext.createBufferSource();l.buffer=this.audioBuffer;const c=this.audioContext.createGain(),u=null!==n?n:this.masterVolume;c.gain.value=u,l.connect(c),c.connect(this.masterGainNode),this.activeSources.set(s,{source:l,gainNode:c,startTime:e,duration:o,startedAt:this.audioContext.currentTime}),l.onended=()=>{this.activeSources.delete(s)};const d=this.audioContext.currentTime;l.start(d,e,o);const h={id:s,startTime:e,duration:o,volume:u};return i({success:!0,sampleId:s,startTime:e,duration:o,activeSamples:this.activeSources.size}),h}catch(kM){throw i({error:kM.message,startTime:e,duration:t}),new Error(`Sample playback failed: ${kM.message}`)}}stopSample(e){try{const t=this.activeSources.get(e);return!!t&&(t.source.stop(),this.activeSources.delete(e),!0)}catch(kM){return!1}}stopAllSamples(){try{for(const[e,t]of this.activeSources)try{t.source.stop()}catch(kM){}this.activeSources.clear()}catch(kM){}}setMasterVolume(e){try{this.masterVolume=Math.max(0,Math.min(1,e)),this.masterGainNode&&(this.masterGainNode.gain.value=this.masterVolume)}catch(kM){}}setSampleVolume(e,t){try{const n=this.activeSources.get(e);if(n){const e=Math.max(0,Math.min(1,t));return n.gainNode.gain.value=e,!0}return!1}catch(kM){return!1}}getActiveSamples(){const e=[],t=this.audioContext?this.audioContext.currentTime:0;for(const[n,r]of this.activeSources){const i=t-r.startedAt,s=Math.max(0,r.duration-i);e.push({id:n,startTime:r.startTime,duration:r.duration,elapsed:i,remaining:s,volume:r.gainNode.gain.value})}return e}async jumpToTimestamp(e,t=!0){const n=hA.startMeasurement("timestamp_jump");try{if(!this.audioBuffer)throw new Error("No audio buffer loaded");if(e<0||e>=this.audioBuffer.duration)throw new Error(`Invalid timestamp: ${e}. Must be between 0 and ${this.audioBuffer.duration}`);const r=this.activeSources.size;let i;return this.stopAllSamples(),i=t?await this.playSample(e):{timestamp:e,playing:!1},n({success:!0,newTimestamp:e,maintainPlayback:t,previousSampleCount:r,newSampleId:i.id||null}),i}catch(kM){throw n({error:kM.message,newTimestamp:e,maintainPlayback:t}),new Error(`Timestamp jump failed: ${kM.message}`)}}getStatus(){return{isInitialized:this.isInitialized,audioContextState:this.audioContext?this.audioContext.state:"not-created",hasAudioBuffer:!!this.audioBuffer,audioBufferDuration:this.audioBuffer?this.audioBuffer.duration:0,activeSamplesCount:this.activeSources.size,masterVolume:this.masterVolume}}async preloadSample(e){try{return await this.initializeAudioContext(),!0}catch(kM){return!1}}async playSampleAtTime(e,t=1,n=0){try{await this.initializeAudioContext();const e=n||this.audioContext.currentTime,r=`seq_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.activeSources.set(r,{source:null,gainNode:null,startTime:0,duration:.5,startedAt:e}),setTimeout(()=>{this.activeSources.delete(r)},500),{id:r,startTime:0,duration:.5,volume:t}}catch(kM){throw kM}}async cleanup(){try{this.stopAllSamples(),this.audioContext&&"closed"!==this.audioContext.state&&await this.audioContext.close(),this.audioContext=null,this.masterGainNode=null,this.audioBuffer=null,this.isInitialized=!1,this.activeSources.clear()}catch(kM){}}}function mA({youtubeUrl:e,setPlayerState:t,volume:n,onPlayerReady:r,audioBuffer:i,onSyncError:s}){const[a,o]=m.useState(""),[l,c]=m.useState(null),[d,h]=m.useState(!1),f=m.useRef(null),p=m.useRef(null),[g,y]=m.useState(!1),[v,b]=m.useState(null),w=m.useRef(0),x=m.useRef(!1);m.useEffect(()=>{const t=e.match(/(?:v=)([^&?]+)/)||e.match(/(?:youtu.be\/)([^&?]+)/),n=t?t[1]:"";o(n)},[e]),m.useEffect(()=>{(async()=>{try{p.current||(p.current=new pA),i?(await p.current.loadAudioBuffer("video-sync",i),y(!0),b(null)):y(!1)}catch(kM){b(`Engine initialization failed: ${kM.message}`),y(!1),s?.(kM)}})()},[i,s]),m.useEffect(()=>{if(window.YT&&window.YT.Player)h(!0);else if(!window.onYouTubeIframeAPIReady){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{h(!0)}}},[]),m.useEffect(()=>{if(!d||!a)return;const e=new window.YT.Player("youtube-player",{height:"100%",width:"100%",videoId:a,playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,enablejsapi:1},events:{onReady:e=>{c(e.target);const n=e.target.getDuration();t(e=>({...e,duration:n}));const i={...e.target,syncToTimestamp:C,handleSampleTriggered:E,getSyncStatus:T,sampleEngine:p.current};r?.(i)},onStateChange:e=>{const n=e.data===window.YT.PlayerState.PLAYING;t(e=>({...e,isPlaying:n})),n?S():k()}}});return()=>{e&&e.destroy&&e.destroy(),k()}},[d,a,t,r]),m.useEffect(()=>()=>{p.current&&p.current.cleanup().catch(e=>{})},[a]);const S=()=>{f.current&&clearInterval(f.current),f.current=setInterval(()=>{if(l&&l.getCurrentTime){const e=l.getCurrentTime();if(t(t=>({...t,currentTime:e})),g&&p.current)try{p.current.getActiveSamples()}catch(kM){}}},100)},k=()=>{f.current&&(clearInterval(f.current),f.current=null)},C=m.useCallback(async(e,n=!0)=>{try{if(!l||!g||!p.current)throw new Error("Video player or audio engine not ready for synchronization");if(x.current)return;x.current=!0,w.current=e;const r=l.getPlayerState()===window.YT.PlayerState.PLAYING;l.seekTo(e,!0),n&&r?await p.current.jumpToTimestamp(e,!0):await p.current.jumpToTimestamp(e,!1),t(t=>({...t,currentTime:e,isPlaying:n&&r})),b(null)}catch(kM){b(`Sync failed: ${kM.message}`),s?.(kM)}finally{x.current=!1}},[l,g,t,s]),E=m.useCallback(async e=>{try{if(!g||!p.current)throw new Error("Audio engine not ready for sample playback");const t=l?.getCurrentTime()||0;Math.abs(t-e)>.5&&await C(e,!0),await p.current.playSample(e)}catch(kM){b(`Sample trigger failed: ${kM.message}`),s?.(kM)}},[l,g,C,s]),T=m.useCallback(()=>({isEngineReady:g,hasAudioBuffer:!!i,syncError:v,lastSeekTime:w.current,isSyncing:x.current,engineStatus:p.current?.getStatus()||null}),[g,i,v]);return m.useEffect(()=>{l&&l.setVolume&&l.setVolume(100*n)},[l,n]),u.jsx(uA.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"aspect-video w-full bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg overflow-hidden relative",children:a?u.jsxs(u.Fragment,{children:[u.jsx("div",{id:"youtube-player",className:"w-full h-full"}),i&&u.jsxs("div",{className:"absolute top-2 right-2 flex items-center space-x-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+(g?"bg-green-400":"bg-yellow-400"),title:g?"Audio sync ready":"Audio sync initializing"}),v&&u.jsx("div",{className:"bg-red-500/80 text-white text-xs px-2 py-1 rounded",title:v,children:"Sync Error"})]})]}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx("p",{className:"text-white/50",children:"Enter a YouTube URL to get started"})})})}function gA({padId:e,keyLabel:t,isAssigned:n,isSelected:r,color:i,onClick:s,onEdit:a,onDelete:o,chop:l,isPadGridFocused:c=!1}){const[d,h]=m.useState(!1),[f,p]=m.useState(!1),[g,y]=m.useState({x:0,y:0}),v=m.useCallback(e=>{if(!n)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.getBoundingClientRect();y({x:e.clientX-t.left,y:e.clientY-t.top}),p(!0)},[n]),b=m.useCallback(t=>{t.stopPropagation(),p(!1),a&&a(e)},[e,a]),w=m.useCallback(t=>{t.stopPropagation(),p(!1),o&&o(e)},[e,o]);m.useEffect(()=>{const e=()=>p(!1);if(f)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[f]);const x=m.useCallback(e=>{if(isNaN(e)||e<0)return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},[]);m.useEffect(()=>{if(d){const e=setTimeout(()=>h(!1),150);return()=>clearTimeout(e)}},[d]);const S={idle:{scale:1,boxShadow:"0px 4px 10px rgba(0,0,0,0.3)"},triggered:{scale:.95,boxShadow:`0px 0px 20px ${i||"#06b6d4"}`}};return u.jsxs("div",{className:"relative w-full h-full",children:[u.jsxs(uA.button,{variants:S,animate:d?"triggered":"idle",transition:{type:"spring",stiffness:500,damping:15},onClick:()=>{s(),h(!0),p(!1)},onContextMenu:v,className:`relative w-full h-full rounded-lg transition-all duration-300 focus:outline-none flex flex-col justify-between p-2\n                    ${r?"ring-2 ring-offset-2 ring-offset-black/20 ring-cyan-400":""}\n                    ${c?n?"bg-white/20 hover:bg-white/30":"bg-black/30 hover:bg-black/40":n?"bg-white/10":"bg-black/20"}\n                    ${c?"opacity-100":"opacity-60"}\n                `,style:{backgroundColor:n?`${i}${c?"4D":"20"}`:"",border:`1px solid ${n?i:c?"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)"}`},children:[u.jsx("span",{className:"absolute top-1 left-2 text-xs font-mono transition-colors duration-300 "+(c?"text-white/40":"text-white/20"),children:e}),n&&a&&c&&u.jsx("div",{className:"absolute top-1 right-2",children:u.jsx(Vt,{className:"w-3 h-3 text-white/30"})}),!c&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg",children:u.jsx("div",{className:"text-xs text-white/30 font-medium",children:"Click to activate"})}),u.jsx("span",{className:"text-2xl font-bold self-center transition-colors duration-300 "+(c?"text-white/80":"text-white/40"),children:t?.toUpperCase()}),n&&l&&c&&u.jsxs("div",{className:"absolute bottom-6 left-2 right-2 text-xs text-white/60 text-center",children:[x(l.startTime)," - ",x(l.endTime)]}),u.jsx("div",{className:"w-full h-1 absolute bottom-1 left-0",children:n&&u.jsx("div",{className:"h-full rounded-full mx-auto transition-opacity duration-300 "+(c?"opacity-100":"opacity-40"),style:{backgroundColor:i,width:"30%"}})})]}),u.jsx(ES,{children:f&&u.jsxs(uA.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute z-50 bg-black/90 backdrop-blur-lg border border-white/20 rounded-lg shadow-lg py-1 min-w-[120px]",style:{left:Math.min(g.x,window.innerWidth-140),top:Math.min(g.y,window.innerHeight-80)},onClick:e=>e.stopPropagation(),children:[u.jsxs("button",{onClick:b,className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-white/10 flex items-center gap-2",children:[u.jsx(bt,{className:"w-3 h-3"}),"Edit Timestamp"]}),u.jsxs("button",{onClick:w,className:"w-full px-3 py-2 text-left text-sm text-red-300 hover:bg-red-500/20 flex items-center gap-2",children:[u.jsx(tn,{className:"w-3 h-3"}),"Delete Sample"]})]})})]})}const yA=m.forwardRef(({className:e,type:t,...n},r)=>u.jsx("input",{type:t,className:br("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));function vA({chop:e,audioDuration:t,onSave:n,onCancel:r,onPreview:i,isPreviewPlaying:s=!1,className:a=""}){const[o,l]=m.useState(e?.startTime||0),[c,d]=m.useState(e?.endTime||0),[h,f]=m.useState({}),[p,g]=m.useState(!1),y=m.useRef(null),v=m.useRef(null);m.useEffect(()=>{e&&(l(e.startTime),d(e.endTime),g(!1),f({}))},[e]);const b=m.useCallback(e=>{if(isNaN(e)||e<0)return"00:00.000";const t=Math.floor(e/60),n=Math.floor(e%60),r=Math.floor(e%1*1e3);return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`},[]),w=m.useCallback(e=>{if(!e)return 0;const t=e.match(/^(\d{1,2}):(\d{1,2})(?:\.(\d{1,3}))?$/);if(t){const[,e,n,r="0"]=t,i=60*parseInt(e)+parseInt(n)+parseInt(r.padEnd(3,"0"))/1e3;return Math.max(0,i)}const n=parseFloat(e);return isNaN(n)?0:Math.max(0,n)},[]),x=m.useCallback((e,n)=>{const r={};e<0&&(r.startTime="Start time cannot be negative"),n<0&&(r.endTime="End time cannot be negative"),t&&e>=t&&(r.startTime=`Start time cannot exceed audio duration (${b(t)})`),t&&n>t&&(r.endTime=`End time cannot exceed audio duration (${b(t)})`),e>=n&&(r.endTime="End time must be greater than start time");const i=n-e;return i<.1&&(r.endTime="Sample must be at least 0.1 seconds long"),i>30&&(r.endTime="Sample cannot be longer than 30 seconds"),r},[t,b]),S=m.useCallback(e=>{const t=w(e);l(t),g(!0);const n=x(t,c);f(n)},[c,w,x]),k=m.useCallback(e=>{const t=w(e);d(t),g(!0);const n=x(o,t);f(n)},[o,w,x]),C=m.useCallback(()=>{const t=x(o,c);Object.keys(t).length>0?f(t):n({...e,startTime:o,endTime:c})},[e,o,c,x,n]),E=m.useCallback(()=>{l(e?.startTime||0),d(e?.endTime||0),g(!1),f({}),r()},[e,r]),T=m.useCallback(()=>{l(e?.startTime||0),d(e?.endTime||0),g(!1),f({})},[e]),_=m.useCallback(()=>{Object.keys(h).length>0||i({startTime:o,endTime:c,duration:c-o})},[o,c,h,i]);if(m.useEffect(()=>{const e=e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),C()):"Escape"===e.key?(e.preventDefault(),E()):" "===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),_())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C,E,_]),!e)return null;const N=c-o,I=Object.keys(h).length>0;return u.jsxs(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`bg-black/80 backdrop-blur-lg border border-white/20 rounded-lg p-4 ${a}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(bt,{className:"w-4 h-4 text-blue-400"}),u.jsxs("h3",{className:"text-sm font-medium text-white",children:["Edit Timestamp - Pad ",e.padId]}),p&&u.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-300 mb-1",children:"Start Time"}),u.jsx(yA,{ref:y,type:"text",value:b(o),onChange:e=>S(e.target.value),placeholder:"00:00.000",className:"bg-black/40 border-white/20 text-white "+(h.startTime?"border-red-500":"")}),h.startTime&&u.jsx("p",{className:"text-xs text-red-400 mt-1",children:h.startTime})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs text-gray-300 mb-1",children:"End Time"}),u.jsx(yA,{ref:v,type:"text",value:b(c),onChange:e=>k(e.target.value),placeholder:"00:00.000",className:"bg-black/40 border-white/20 text-white "+(h.endTime?"border-red-500":"")}),h.endTime&&u.jsx("p",{className:"text-xs text-red-400 mt-1",children:h.endTime})]}),u.jsx("div",{className:"bg-black/20 rounded p-2",children:u.jsxs("div",{className:"flex justify-between text-xs text-gray-300",children:[u.jsx("span",{children:"Duration:"}),u.jsx("span",{className:N>0?"text-green-400":"text-red-400",children:b(N)})]})}),u.jsx(xr,{onClick:_,disabled:I,variant:"outline",size:"sm",className:"w-full bg-blue-600/20 border-blue-500/50 text-blue-300 hover:bg-blue-600/30",children:s?u.jsxs(u.Fragment,{children:[u.jsx(Bt,{className:"w-3 h-3 mr-2"}),"Stop Preview"]}):u.jsxs(u.Fragment,{children:[u.jsx($t,{className:"w-3 h-3 mr-2"}),"Preview Sample"]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(xr,{onClick:C,disabled:!p||I,size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[u.jsx(ut,{className:"w-3 h-3 mr-2"}),"Save"]}),p&&u.jsx(xr,{onClick:T,variant:"outline",size:"sm",className:"bg-yellow-600/20 border-yellow-500/50 text-yellow-300 hover:bg-yellow-600/30",children:u.jsx(Kt,{className:"w-3 h-3"})}),u.jsx(xr,{onClick:E,variant:"outline",size:"sm",className:"bg-red-600/20 border-red-500/50 text-red-300 hover:bg-red-600/30",children:u.jsx(dn,{className:"w-3 h-3"})})]}),u.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[u.jsx("div",{children:"Ctrl+Enter: Save  Escape: Cancel  Ctrl+Space: Preview"}),u.jsx("div",{children:'Format: MM:SS.mmm or seconds (e.g., "1:30.500" or "90.5")'})]})]})]})}yA.displayName="Input";const bA={q:0,w:1,e:2,r:3,a:4,s:5,d:6,f:7,z:8,x:9,c:10,v:11,t:12,y:13,u:14,i:15};function wA({chops:e,activeBank:t,selectedPadId:n,setSelectedPadId:r,playerState:i,onCreateSample:s,onUpdateSample:a,onDeleteSample:o,youtubePlayer:l,audioBuffer:c,waveformAPI:d=null}){const h=m.useRef(i),f=m.useRef(null),[p,g]=m.useState(null),[y,v]=m.useState(!1);m.useEffect(()=>{h.current=i},[i]);const b=m.useCallback(t=>{e.filter(e=>e.endTime>t&&e.startTime<t).forEach(e=>{const n={...e,endTime:t};a?.(n)})},[e,a]),w=m.useCallback(e=>{const t=["video","#youtube-player video","#youtube-player iframe",'iframe[src*="youtube"]','[id*="player"] video'];for(const n of t){const t=document.querySelector(n);if(t)if("VIDEO"===t.tagName)try{return t.currentTime=e,void(t.paused&&t.play().catch(e=>{}))}catch(wM){}else if("IFRAME"===t.tagName)try{return void t.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"*")}catch(wM){}}if(l)try{if(l.seekTo)return void l.seekTo(e,!0);if(l.getCurrentTime&&l.playVideo)return l.pauseVideo(),void setTimeout(()=>{l.seekTo(e,!0),l.playVideo()},100)}catch(wM){}try{const t=document.querySelector("#youtube-player iframe");if(t&&t.contentWindow)return void t.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[e,!0]}),"https://www.youtube.com")}catch(wM){}},[l]),x=m.useCallback(t=>{r(t);const n=e.find(e=>e.padId===t);n&&w(n.startTime)},[e,r,w]),S=m.useCallback(e=>{r(e)},[r]),k=m.useCallback((n,i=null,a=null)=>{const o=`${t}${n}`;if(null!==i&&null!==a)return s(o,i,a),r(o),void b(i);let c=0,u="fallback";if(l&&l.getCurrentTime)try{c=l.getCurrentTime(),u="youtube-api"}catch(wM){}if(0===c){const e=document.querySelector("video");e&&e.currentTime&&(c=e.currentTime,u="video-element")}0===c&&(c=h.current.currentTime,u="player-state");const d=h.current.duration||180;let f;const p=e.filter(e=>e.startTime>c).sort((e,t)=>e.startTime-t.startTime);if(p.length>0)f=p[0].startTime;else{const e=4;f=Math.min(c+e,d)}f-c<.1&&(f=Math.min(c+.1,d)),s(o,c,f),r(o),b(c)},[t,s,r,l,e,b]);m.useEffect(()=>{const e=()=>v(!0),t=e=>{f.current&&!f.current.contains(e.relatedTarget)&&v(!1)},n=e=>{f.current&&!f.current.contains(e.target)&&v(!1)},r=f.current;if(r)return r.addEventListener("focusin",e),r.addEventListener("focusout",t),document.addEventListener("click",n),()=>{r.removeEventListener("focusin",e),r.removeEventListener("focusout",t),document.removeEventListener("click",n)}},[]),m.useEffect(()=>{const n=n=>{if("INPUT"===n.target.tagName||"TEXTAREA"===n.target.tagName)return;if(!y)return;const r=bA[n.key.toLowerCase()];if(void 0!==r){n.preventDefault(),n.stopPropagation();const i=`${t}${r}`;e.find(e=>e.padId===i)?x(i):h.current.isPlaying?k(r):S(i)}},r={capture:!0,passive:!1};return document.addEventListener("keydown",n,r),()=>document.removeEventListener("keydown",n,r)},[e,t,x,k,S,y]);const C=m.useCallback(e=>{g(e),r(e)},[r]),E=m.useCallback(e=>{a?.(e),g(null)},[a]),T=m.useCallback(()=>{g(null)},[]),_=m.useCallback(e=>{o?.(e),n===e&&r(null),p===e&&g(null)},[o,n,p,r]),N=m.useCallback(e=>{w(e.startTime)},[w]),I={createSampleFromWaveform:m.useCallback((e,t)=>{if(!n)return!1;const r=parseInt(n.slice(1),10);return k(r,e,t),!0},[n,k]),getSelectedPadId:()=>n,selectPad:S,triggerPad:x,jumpToTimestamp:w};m.useEffect(()=>{d&&"object"==typeof d&&(d.padGrid=I)},[d,I]);return u.jsxs("div",{className:"relative",children:[u.jsxs(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 flex items-center justify-between text-sm backdrop-blur-sm rounded-xl p-4 border transition-all duration-300 "+(y?"bg-cyan-500/20 border-cyan-400/50":"bg-black/30 border-white/10"),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 transition-colors duration-300 "+(y?"text-cyan-300":"text-white/60"),children:[u.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 "+(y?"bg-cyan-400":"bg-white/30")}),u.jsx("span",{className:"font-medium",children:y?" Pads Active":" Click Pad Area to Activate"})]}),y&&e.length>0&&u.jsxs("div",{className:"flex items-center gap-1 text-cyan-200",children:[u.jsx("span",{className:"text-green-400",children:""}),u.jsxs("span",{children:[e.length," samples"]})]})]}),!y&&u.jsx("div",{className:"text-xs text-white/40 italic",children:"Click on the pad grid to enable keyboard shortcuts"}),y&&u.jsx("div",{className:"text-xs text-cyan-200/80",children:"Press Q-W-E-R, A-S-D-F, Z-X-C-V, T-Y-U-I to trigger pads"})]}),u.jsx(uA.div,{ref:f,initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:y?1.02:1},transition:{delay:.2,scale:{type:"spring",stiffness:300,damping:20}},onClick:()=>{v(!0)},tabIndex:0,className:"grid grid-cols-4 grid-rows-4 gap-3 aspect-square backdrop-blur-lg rounded-2xl shadow-lg p-4 transition-all duration-300 cursor-pointer focus:outline-none "+(y?"bg-black/30 border-2 border-cyan-400/60 shadow-xl shadow-cyan-500/20":"bg-black/20 border border-white/20 hover:border-white/30"),children:Array.from({length:16}).map((r,i)=>{const s=`${t}${i}`,a=e.find(e=>e.padId===s),o=Object.keys(bA).find(e=>bA[e]===i);return u.jsx(gA,{padId:s,keyLabel:o,isAssigned:!!a,isSelected:n===s,color:a?.color,chop:a,isPadGridFocused:y,onEdit:C,onDelete:_,onClick:()=>{v(!0),a?x(s):S(s)}},s)})}),u.jsx(ES,{children:p&&u.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:u.jsx(vA,{chop:e.find(e=>e.padId===p),audioDuration:i.duration,onSave:E,onCancel:T,onPreview:N,isPreviewPlaying:!1,className:"max-w-md w-full mx-4"})})})]})}function xA(e,[t,n]){return Math.min(n,Math.max(t,e))}var SA=m.createContext(void 0);function kA(e){const t=e+"CollectionProvider",[n,r]=kr(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:n}=e,r=g.useRef(null),s=g.useRef(new Map).current;return u.jsx(i,{scope:t,itemMap:s,collectionRef:r,children:n})};a.displayName=t;const o=e+"CollectionSlot",l=yn(o),c=g.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=gn(t,s(o,n).collectionRef);return u.jsx(l,{ref:i,children:r})});c.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=yn(d),p=g.forwardRef((e,t)=>{const{scope:n,children:r,...i}=e,a=g.useRef(null),o=gn(t,a),l=s(d,n);return g.useEffect(()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)})),u.jsx(f,{[h]:"",ref:o,children:r})});return p.displayName=d,[{Provider:a,Slot:c,ItemSlot:p},function(t){const n=s(e+"CollectionConsumer",t);return g.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},r]}var CA=["PageUp","PageDown"],EA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],TA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},_A="Slider",[NA,IA,AA]=kA(_A),[PA,RA]=kr(_A,[AA]),[jA,MA]=PA(_A),DA=m.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...y}=e,v=m.useRef(new Set),b=m.useRef(0),w="horizontal"===a?FA:UA,[x=[],S]=Ar({prop:d,defaultProp:c,onChange:e=>{const t=[...v.current];t[b.current]?.focus(),h(e)}}),k=m.useRef(x);function C(e,t,{commit:n}={commit:!1}){const a=function(e){return(String(e).split(".")[1]||"").length}(s),o=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/s)*s+r,a),c=xA(o,[r,i]);S((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,c,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,l*s)){b.current=r.indexOf(c);const t=String(r)!==String(e);return t&&n&&f(r),t?r:e}return e})}return u.jsx(jA,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:b,thumbs:v.current,values:x,orientation:a,form:g,children:u.jsx(NA.Provider,{scope:e.__scopeSlider,children:u.jsx(NA.Slot,{scope:e.__scopeSlider,children:u.jsx(w,{"aria-disabled":o,"data-disabled":o?"":void 0,...y,ref:t,onPointerDown:Sr(y.onPointerDown,()=>{o||(k.current=x)}),min:r,max:i,inverted:p,onSlideStart:o?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(x,e);C(e,t)},onSlideMove:o?void 0:function(e){C(e,b.current)},onSlideEnd:o?void 0:function(){const e=k.current[b.current];x[b.current]!==e&&f(x)},onHomeKeyDown:()=>!o&&C(r,0,{commit:!0}),onEndKeyDown:()=>!o&&C(i,x.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!o){const n=CA.includes(e.key)||e.shiftKey&&EA.includes(e.key)?10:1,r=b.current;C(x[r]+s*n*t,r,{commit:!0})}}})})})})});DA.displayName=_A;var[LA,OA]=PA(_A,{startEdge:"left",endEdge:"right",size:"width",direction:1}),FA=m.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,[h,f]=m.useState(null),p=gn(t,e=>f(e)),g=m.useRef(void 0),y=function(e){const t=m.useContext(SA);return e||t||"ltr"}(i),v="ltr"===y,b=v&&!s||!v&&s;function w(e){const t=g.current||h.getBoundingClientRect(),i=JA([0,t.width],b?[n,r]:[r,n]);return g.current=t,i(e-t.left)}return u.jsx(LA,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:u.jsx(zA,{dir:y,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=w(e.clientX);a?.(t)},onSlideMove:e=>{const t=w(e.clientX);o?.(t)},onSlideEnd:()=>{g.current=void 0,l?.()},onStepKeyDown:e=>{const t=TA[b?"from-left":"from-right"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),UA=m.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=e,d=m.useRef(null),h=gn(t,d),f=m.useRef(void 0),p=!i;function g(e){const t=f.current||d.current.getBoundingClientRect(),i=JA([0,t.height],p?[r,n]:[n,r]);return f.current=t,i(e-t.top)}return u.jsx(LA,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:u.jsx(zA,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=g(e.clientY);s?.(t)},onSlideMove:e=>{const t=g(e.clientY);a?.(t)},onSlideEnd:()=>{f.current=void 0,o?.()},onStepKeyDown:e=>{const t=TA[p?"from-bottom":"from-top"].includes(e.key);l?.({event:e,direction:t?-1:1})}})})}),zA=m.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=e,d=MA(_A,n);return u.jsx(Pr.span,{...c,ref:t,onKeyDown:Sr(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(o(e),e.preventDefault()):CA.concat(EA).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Sr(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():r(e)}),onPointerMove:Sr(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:Sr(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),s(e))})})}),BA="SliderTrack",VA=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=MA(BA,n);return u.jsx(Pr.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});VA.displayName=BA;var $A="SliderRange",HA=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=MA($A,n),s=OA($A,n),a=gn(t,m.useRef(null)),o=i.values.length,l=i.values.map(e=>YA(e,i.min,i.max)),c=o>1?Math.min(...l):0,d=100-Math.max(...l);return u.jsx(Pr.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...e.style,[s.startEdge]:c+"%",[s.endEdge]:d+"%"}})});HA.displayName=$A;var qA="SliderThumb",KA=m.forwardRef((e,t)=>{const n=IA(e.__scopeSlider),[r,i]=m.useState(null),s=gn(t,e=>i(e)),a=m.useMemo(()=>r?n().findIndex(e=>e.ref.current===r):-1,[n,r]);return u.jsx(WA,{...e,ref:s,index:a})}),WA=m.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...s}=e,a=MA(qA,n),o=OA(qA,n),[l,c]=m.useState(null),d=gn(t,e=>c(e)),h=!l||(a.form||!!l.closest("form")),f=function(e){const[t,n]=m.useState(void 0);return Er(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,s;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,s=t.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(l),p=a.values[r],g=void 0===p?0:YA(p,a.min,a.max),y=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(r,a.values.length),v=f?.[o.size],b=v?function(e,t,n){const r=e/2,i=JA([0,50],[0,r]);return(r-i(t)*n)*n}(v,g,o.direction):0;return m.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${b}px)`},children:[u.jsx(NA.ItemSlot,{scope:e.__scopeSlider,children:u.jsx(Pr.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:d,style:void 0===p?{display:"none"}:e.style,onFocus:Sr(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&u.jsx(GA,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},r)]})});KA.displayName=qA;var GA=m.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=m.useRef(null),s=gn(i,r),a=function(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(t);return m.useEffect(()=>{const e=i.current;if(!e)return;const n=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(a!==t&&r){const n=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[a,t]),u.jsx(Pr.input,{style:{display:"none"},...n,ref:s,defaultValue:t})});function YA(e,t,n){return xA(100/(n-t)*(e-t),[0,100])}function JA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}GA.displayName="RadioBubbleInput";var QA=DA,XA=VA,ZA=HA,eP=KA;const tP=m.forwardRef(({className:e,...t},n)=>u.jsxs(QA,{ref:n,className:br("relative flex w-full touch-none select-none items-center",e),...t,children:[u.jsx(XA,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:u.jsx(ZA,{className:"absolute h-full bg-primary"})}),u.jsx(eP,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));tP.displayName=QA.displayName;const nP=function(e,t,...n){if(e=Ta(e),kw("collection","path",t),e instanceof Iw){const r=_p.fromString(t,...n);return Ew(r),new Rw(e,null,r)}{if(!(e instanceof Pw||e instanceof Rw))throw new up(cp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_p.fromString(t,...n));return Ew(r),new Rw(e.firestore,null,r)}}(tS,"chopSessions"),rP={async create(e){try{const t=nS.currentUser;if(!t)throw new Error("User not authenticated");const n=e.chops.map(({audioData:e,...t})=>t);return(await function(e,t){const n=_w(e.firestore,Dw),r=jw(e),i=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return Cx(n,[Gw(Ww(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bg.exists(!1))]).then(()=>r)}(nP,{...e,chops:n,userId:t.uid,created_date:new Date})).id}catch(wM){throw wM}},async list(e="-created_date"){try{const t=nS.currentUser;if(!t)return[];const n=function(e,t,...n){let r=[];t instanceof ox&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof ux).length,n=e.filter(e=>e instanceof cx).length;if(t>1||t>0&&n>0)throw new up(cp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}(nP,function(e,t,n){const r=t,i=ax("where",e);return cx._create(i,r,n)}("userId","==",t.uid),function(e,t="asc"){const n=t,r=ax("orderBy",e);return dx._create(r,n)}("created_date",e.startsWith("-")?"desc":"asc"));return(await kx(n)).docs.map(e=>({id:e.id,...e.data()}))}catch(wM){throw wM}},async get(e){try{const t=jw(tS,"chopSessions",e),n=await xx(t);if(n.exists()){const e=n.data(),t=nS.currentUser;if(e.userId!==t?.uid)throw new Error("User not authorized to view this session");return{id:n.id,...e}}return null}catch(wM){throw wM}},async delete(e){try{if(!(await this.get(e)))throw new Error("Session not found or user not authorized.");await(t=jw(tS,"chopSessions",e),Cx(_w(t.firestore,Dw),[new ey(t._key,Bg.none())]))}catch(t){throw t}var t}};let iP=0;const sP=new Map,aP=e=>{if(sP.has(e))return;const t=setTimeout(()=>{sP.delete(e),uP({type:"REMOVE_TOAST",toastId:e})},1e6);sP.set(e,t)},oP=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?aP(n):e.toasts.forEach(e=>{aP(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},lP=[];let cP={toasts:[]};function uP(e){cP=oP(cP,e),lP.forEach(e=>{e(cP)})}function dP(e){const t=(iP=(iP+1)%Number.MAX_VALUE,iP.toString()),n=()=>uP({type:"DISMISS_TOAST",toastId:t});return uP({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>uP({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function hP(){const[e,t]=m.useState(cP);return m.useEffect(()=>(lP.push(t),()=>{const e=lP.indexOf(t);e>-1&&lP.splice(e,1)}),[e]),{...e,toast:dP,dismiss:e=>uP({type:"DISMISS_TOAST",toastId:e})}}var fP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pP=m.forwardRef((e,t)=>u.jsx(Pr.span,{...e,ref:t,style:{...fP,...e.style}}));pP.displayName="VisuallyHidden";var mP="ToastProvider",[gP,yP,vP]=kA("Toast"),[bP,wP]=kr("Toast",[vP]),[xP,SP]=bP(mP),kP=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=e,[o,l]=m.useState(null),[c,d]=m.useState(0),h=m.useRef(!1),f=m.useRef(!1);return n.trim(),u.jsx(gP.Provider,{scope:t,children:u.jsx(xP,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:m.useCallback(()=>d(e=>e+1),[]),onToastRemove:m.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};kP.displayName=mP;var CP="ToastViewport",EP=["F8"],TP="toast.viewportPause",_P="toast.viewportResume",NP=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=EP,label:i="Notifications ({hotkey})",...s}=e,a=SP(CP,n),o=yP(n),l=m.useRef(null),c=m.useRef(null),d=m.useRef(null),h=m.useRef(null),f=gn(t,h,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=a.toastCount>0;m.useEffect(()=>{const e=e=>{0!==r.length&&r.every(t=>e[t]||e.code===t)&&h.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),m.useEffect(()=>{const e=l.current,t=h.current;if(g&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(TP);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},r=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(_P);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},s=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[g,a.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,r=[n,...KP(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return m.useEffect(()=>{const e=h.current;if(e){const t=t=>{const n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){const n=document.activeElement,r=t.shiftKey;if(t.target===e&&r)return void c.current?.focus();const i=y({tabbingDirection:r?"backwards":"forwards"}),s=i.findIndex(e=>e===n);WP(i.slice(s+1))?t.preventDefault():r?c.current?.focus():d.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,y]),u.jsxs(Hr,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&u.jsx(AP,{ref:c,onFocusFromOutsideViewport:()=>{WP(y({tabbingDirection:"forwards"}))}}),u.jsx(gP.Slot,{scope:n,children:u.jsx(Pr.ol,{tabIndex:-1,...s,ref:f})}),g&&u.jsx(AP,{ref:d,onFocusFromOutsideViewport:()=>{WP(y({tabbingDirection:"backwards"}))}})]})});NP.displayName=CP;var IP="ToastFocusProxy",AP=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,s=SP(IP,n);return u.jsx(pP,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{const t=e.relatedTarget;!s.viewport?.contains(t)&&r()}})});AP.displayName=IP;var PP="Toast",RP=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=e,[o,l]=Ar({prop:r,defaultProp:i??!0,onChange:s,caller:PP});return u.jsx(ni,{present:n||o,children:u.jsx(DP,{open:o,...a,ref:t,onClose:()=>l(!1),onPause:jr(e.onPause),onResume:jr(e.onResume),onSwipeStart:Sr(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Sr(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:Sr(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Sr(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});RP.displayName=PP;var[jP,MP]=bP(PP,{onClose(){}}),DP=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...g}=e,y=SP(PP,n),[v,b]=m.useState(null),w=gn(t,e=>b(e)),x=m.useRef(null),S=m.useRef(null),k=i||y.duration,C=m.useRef(0),E=m.useRef(k),T=m.useRef(0),{onToastAdd:_,onToastRemove:N}=y,I=jr(()=>{const e=v?.contains(document.activeElement);e&&y.viewport?.focus(),a()}),A=m.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(T.current),C.current=(new Date).getTime(),T.current=window.setTimeout(I,e))},[I]);m.useEffect(()=>{const e=y.viewport;if(e){const t=()=>{A(E.current),c?.()},n=()=>{const e=(new Date).getTime()-C.current;E.current=E.current-e,window.clearTimeout(T.current),l?.()};return e.addEventListener(TP,n),e.addEventListener(_P,t),()=>{e.removeEventListener(TP,n),e.removeEventListener(_P,t)}}},[y.viewport,k,l,c,A]),m.useEffect(()=>{s&&!y.isClosePausedRef.current&&A(k)},[s,k,y.isClosePausedRef,A]),m.useEffect(()=>(_(),()=>N()),[_,N]);const P=m.useMemo(()=>v?$P(v):null,[v]);return y.viewport?u.jsxs(u.Fragment,{children:[P&&u.jsx(LP,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:P}),u.jsx(jP,{scope:n,onClose:I,children:D.createPortal(u.jsx(gP.ItemSlot,{scope:n,children:u.jsx($r,{asChild:!0,onEscapeKeyDown:Sr(o,()=>{y.isFocusedToastEscapeKeyDownRef.current||I(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:u.jsx(Pr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Sr(e.onKeyDown,e=>{"Escape"===e.key&&(o?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Sr(e.onPointerDown,e=>{0===e.button&&(x.current={x:e.clientX,y:e.clientY})}),onPointerMove:Sr(e.onPointerMove,e=>{if(!x.current)return;const t=e.clientX-x.current.x,n=e.clientY-x.current.y,r=Boolean(S.current),i=["left","right"].includes(y.swipeDirection),s=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,a=i?s(0,t):0,o=i?0:s(0,n),l="touch"===e.pointerType?10:2,c={x:a,y:o},u={originalEvent:e,delta:c};r?(S.current=c,HP("toast.swipeMove",h,u,{discrete:!1})):qP(c,y.swipeDirection,l)?(S.current=c,HP("toast.swipeStart",d,u,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(x.current=null)}),onPointerUp:Sr(e.onPointerUp,e=>{const t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,x.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};qP(t,y.swipeDirection,y.swipeThreshold)?HP("toast.swipeEnd",p,r,{discrete:!0}):HP("toast.swipeCancel",f,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),LP=e=>{const{__scopeToast:t,children:n,...r}=e,i=SP(PP,t),[s,a]=m.useState(!1),[o,l]=m.useState(!1);return function(e=()=>{}){const t=jr(e);Er(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),m.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:u.jsx(ti,{asChild:!0,children:u.jsx(pP,{...r,children:s&&u.jsxs(u.Fragment,{children:[i.label," ",n]})})})},OP=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return u.jsx(Pr.div,{...r,ref:t})});OP.displayName="ToastTitle";var FP=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return u.jsx(Pr.div,{...r,ref:t})});FP.displayName="ToastDescription";var UP=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?u.jsx(VP,{altText:n,asChild:!0,children:u.jsx(BP,{...r,ref:t})}):null});UP.displayName="ToastAction";var zP="ToastClose",BP=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=MP(zP,n);return u.jsx(VP,{asChild:!0,children:u.jsx(Pr.button,{type:"button",...r,ref:t,onClick:Sr(e.onClick,i.onClose)})})});BP.displayName=zP;var VP=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return u.jsx(Pr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function $P(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...$P(e))}}),t}function HP(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Rr(i,s):i.dispatchEvent(s)}var qP=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),s=r>i;return"left"===t||"right"===t?s&&r>n:!s&&i>n};function KP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function WP(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var GP=NP,YP=RP,JP=OP,QP=FP,XP=UP,ZP=BP;const eR=kP,tR=m.forwardRef(({className:e,...t},n)=>u.jsx(GP,{ref:n,className:br("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));tR.displayName=GP.displayName;const nR=Tn("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),rR=m.forwardRef(({className:e,variant:t,...n},r)=>u.jsx(YP,{ref:r,className:br(nR({variant:t}),e),...n}));rR.displayName=YP.displayName;m.forwardRef(({className:e,...t},n)=>u.jsx(XP,{ref:n,className:br("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=XP.displayName;const iR=m.forwardRef(({className:e,...t},n)=>u.jsx(ZP,{ref:n,className:br("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:u.jsx(dn,{className:"h-4 w-4"})}));iR.displayName=ZP.displayName;const sR=m.forwardRef(({className:e,...t},n)=>u.jsx(JP,{ref:n,className:br("text-sm font-semibold",e),...t}));sR.displayName=JP.displayName;const aR=m.forwardRef(({className:e,...t},n)=>u.jsx(QP,{ref:n,className:br("text-sm opacity-90",e),...t}));function oR(){const{toasts:e}=hP();return u.jsxs(eR,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return u.jsxs(rR,{...i,children:[u.jsxs("div",{className:"grid gap-1",children:[t&&u.jsx(sR,{children:t}),n&&u.jsx(aR,{children:n})]}),r,u.jsx(iR,{})]},e)}),u.jsx(tR,{})]})}function lR({activeBank:e,setActiveBank:t,masterVolume:n,setMasterVolume:r,chops:i,youtubeUrl:s}){const{toast:a}=hP(),{currentUser:o}=cS(),[l,c]=m.useState(""),[d,h]=m.useState(!1);return u.jsxs(u.Fragment,{children:[u.jsx(oR,{}),u.jsxs(uA.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-4 space-y-6",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-white/80",children:[u.jsx(Pt,{className:"w-4 h-4 text-cyan-400"}),"Sample Banks"]}),u.jsx("div",{className:"grid grid-cols-4 gap-2",children:["A","B","C","D"].map(n=>u.jsx(xr,{onClick:()=>t(n),className:"font-mono text-lg transition-all duration-200\n                                "+(e===n?"bg-cyan-500 text-black shadow-md":"bg-white/10 hover:bg-white/20"),children:n},n))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-white/80",children:[u.jsx(on,{className:"w-4 h-4 text-cyan-400"}),"Master Volume"]}),u.jsx(tP,{defaultValue:[100],max:100,step:1,onValueChange:e=>r(e[0]/100),className:"[&>span:first-child]:bg-cyan-400"})]}),u.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/10",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-white/80",children:[u.jsx(Wt,{className:"w-4 h-4 text-cyan-400"}),"Save Session"]}),o?u.jsxs(u.Fragment,{children:[u.jsx(yA,{placeholder:"Session Name...",value:l,onChange:e=>c(e.target.value),className:"bg-white/10 border-white/20 placeholder-gray-400"}),u.jsx(xr,{onClick:async()=>{if(o)if(l){h(!0);try{await rP.create({sessionName:l,youtubeUrl:s,chops:i,userId:o.uid}),a({title:"Session Saved!",description:`"${l}" has been saved successfully.`})}catch(kM){a({variant:"destructive",title:"Save Failed",description:"Could not save your session. Please try again."})}finally{h(!1)}}else a({variant:"destructive",title:"Uh oh! Something went wrong.",description:"Please enter a name for your session."});else a({variant:"destructive",title:"Authentication Required",description:"You must be signed in to save a session."})},disabled:d||!o,className:"w-full bg-purple-600 hover:bg-purple-700 font-bold",children:d?"Saving...":"Save Chops"})]}):u.jsx("div",{className:"text-center text-sm text-white/60 p-4 bg-black/20 rounded-lg",children:u.jsx("p",{children:"Please sign in to save your sessions."})})]})]})]})}function cR({className:e="",children:t,...n}){return u.jsx("div",{className:`relative w-full rounded-lg border p-4 ${e}`,...n,children:t})}function uR({className:e="",children:t,...n}){return u.jsx("div",{className:`text-sm ${e}`,...n,children:t})}aR.displayName=QP.displayName;const dR=new class{constructor(){this.storageKey="youtube-chopper-sessions",this.currentSessionKey="current-session"}async saveSession(e,t=null){try{const n=this.generateSessionId(),r=(new Date).toISOString(),i={id:n,name:t||`Session ${(new Date).toLocaleDateString()}`,youtubeUrl:e.youtubeUrl,videoId:this.extractVideoId(e.youtubeUrl),chops:e.chops.map(e=>({padId:e.padId,startTime:e.startTime,endTime:e.endTime,color:e.color})),activeBank:e.activeBank||"A",createdAt:r,updatedAt:r,version:"1.0"},s=await this.getAllSessions();return s[n]=i,localStorage.setItem(this.storageKey,JSON.stringify(s)),localStorage.setItem(this.currentSessionKey,n),{success:!0,sessionId:n,sessionName:i.name}}catch(kM){return{success:!1,error:kM.message}}}async loadSession(e){try{const t=(await this.getAllSessions())[e];if(!t)throw new Error(`Session ${e} not found`);return localStorage.setItem(this.currentSessionKey,e),{success:!0,session:t}}catch(kM){return{success:!1,error:kM.message}}}async getAllSessions(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(kM){return{}}}async deleteSession(e){try{const t=await this.getAllSessions();if(!t[e])throw new Error(`Session ${e} not found`);const n=t[e].name;delete t[e],localStorage.setItem(this.storageKey,JSON.stringify(t));return localStorage.getItem(this.currentSessionKey)===e&&localStorage.removeItem(this.currentSessionKey),{success:!0,sessionName:n}}catch(kM){return{success:!1,error:kM.message}}}getCurrentSessionId(){return localStorage.getItem(this.currentSessionKey)}autoSave(e){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(async()=>{const t=this.getCurrentSessionId();t?await this.updateSession(t,e):await this.saveSession(e,"Auto-saved Session")},2e3)}async updateSession(e,t){try{const n=await this.getAllSessions(),r=n[e];if(!r)throw new Error(`Session ${e} not found`);const i={...r,youtubeUrl:t.youtubeUrl,videoId:this.extractVideoId(t.youtubeUrl),chops:t.chops.map(e=>({padId:e.padId,startTime:e.startTime,endTime:e.endTime,color:e.color})),activeBank:t.activeBank||r.activeBank,updatedAt:(new Date).toISOString()};return n[e]=i,localStorage.setItem(this.storageKey,JSON.stringify(n)),{success:!0,session:i}}catch(kM){return{success:!1,error:kM.message}}}async exportSession(e){try{const t=await this.loadSession(e);if(!t.success)throw new Error(t.error);return{success:!0,data:{...t.session,exportedAt:(new Date).toISOString(),appVersion:"1.0"},filename:`chopper-session-${t.session.name.replace(/[^a-z0-9]/gi,"-").toLowerCase()}.json`}}catch(kM){return{success:!1,error:kM.message}}}async importSession(e){try{if(!e.youtubeUrl||!Array.isArray(e.chops))throw new Error("Invalid session data format");const t=this.generateSessionId(),n={...e,id:t,name:`${e.name} (Imported)`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},r=await this.getAllSessions();return r[t]=n,localStorage.setItem(this.storageKey,JSON.stringify(r)),{success:!0,sessionId:t,session:n}}catch(kM){return{success:!1,error:kM.message}}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}extractVideoId(e){const t=e.match(/(?:v=|youtu\.be\/)([^&?]+)/);return t?t[1]:null}clearAllSessions(){localStorage.removeItem(this.storageKey),localStorage.removeItem(this.currentSessionKey)}async getSessionStats(){const e=await this.getAllSessions(),t=Object.values(e);return{totalSessions:t.length,totalChops:t.reduce((e,t)=>e+t.chops.length,0),oldestSession:t.length>0?t.reduce((e,t)=>new Date(t.createdAt)<new Date(e.createdAt)?t:e).createdAt:null,newestSession:t.length>0?t.reduce((e,t)=>new Date(t.createdAt)>new Date(e.createdAt)?t:e).createdAt:null}}};function hR({currentSession:e,onLoadSession:t,onNewSession:n,isOpen:r,onClose:i}){const[s,a]=m.useState({}),[o,l]=m.useState(""),[c,d]=m.useState(!1),[h,f]=m.useState(null),[p,g]=m.useState(null);m.useEffect(()=>{y()},[]);const y=async()=>{const e=await dR.getAllSessions();a(e)},v=async()=>{if(!e.youtubeUrl)return void f({type:"error",text:"No video loaded to save"});if(!o.trim())return void f({type:"error",text:"Please enter a session name"});d(!0);const t=await dR.saveSession(e,o.trim());t.success?(f({type:"success",text:`Session "${t.sessionName}" saved successfully!`}),l(""),await y()):f({type:"error",text:`Failed to save session: ${t.error}`}),d(!1)},b=Object.values(s).sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt));return r?u.jsxs(uA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:i,children:[u.jsxs(uA.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-black/90 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[u.jsx("div",{className:"p-6 border-b border-white/10",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(kt,{className:"w-6 h-6 text-cyan-400"}),u.jsx("h2",{className:"text-xl font-bold text-white",children:"Session Manager"})]}),u.jsx(xr,{onClick:i,variant:"ghost",size:"sm",className:"text-white/60 hover:text-white",children:""})]})}),u.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[u.jsx(ES,{children:h&&u.jsx(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-4",children:u.jsx(cR,{className:"border "+("success"===h.type?"border-green-400 bg-green-400/10":"border-red-400 bg-red-400/10"),children:u.jsx(uR,{className:"success"===h.type?"text-green-200":"text-red-200",children:h.text})})})}),u.jsxs("div",{className:"mb-6 p-4 bg-white/5 rounded-lg border border-white/10",children:[u.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[u.jsx(Wt,{className:"w-5 h-5 text-cyan-400"}),"Save Current Session"]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx(yA,{placeholder:"Enter session name...",value:o,onChange:e=>l(e.target.value),className:"bg-white/10 border-white/20 text-white placeholder-gray-400",onKeyPress:e=>"Enter"===e.key&&v()}),u.jsx(xr,{onClick:v,disabled:c||!o.trim(),className:"bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:c?"Saving...":"Save"})]}),e.chops?.length>0&&u.jsxs("p",{className:"text-sm text-white/60 mt-2",children:["Current session has ",e.chops.length," chops"]})]}),u.jsxs("div",{className:"mb-6 flex gap-3",children:[u.jsxs("label",{className:"flex-1",children:[u.jsx("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=async e=>{try{const t=JSON.parse(e.target.result),n=await dR.importSession(t);n.success?(f({type:"success",text:`Session "${n.session.name}" imported successfully!`}),await y()):f({type:"error",text:`Failed to import session: ${n.error}`})}catch(kM){f({type:"error",text:"Invalid session file format"})}},n.readAsText(t),e.target.value=""},className:"hidden"}),u.jsxs(xr,{as:"span",variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[u.jsx(rn,{className:"w-4 h-4 mr-2"}),"Import Session"]})]}),u.jsxs(xr,{onClick:n,variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[u.jsx(Ht,{className:"w-4 h-4 mr-2"}),"New Session"]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:["Saved Sessions (",b.length,")"]}),0===b.length?u.jsxs("div",{className:"text-center py-8 text-white/60",children:[u.jsx(kt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),u.jsx("p",{children:"No saved sessions yet"}),u.jsx("p",{className:"text-sm",children:"Create your first session by saving your current work"})]}):u.jsx("div",{className:"space-y-3",children:b.map(e=>{return u.jsx(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-white/5 rounded-lg border border-white/10 hover:bg-white/10 transition-colors",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-white mb-1",children:e.name}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-2",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(an,{className:"w-3 h-3"}),e.videoId]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(bt,{className:"w-3 h-3"}),(n=e.updatedAt,new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),u.jsxs("span",{children:[e.chops.length," chops"]})]}),u.jsx("p",{className:"text-xs text-white/40 truncate",children:e.youtubeUrl})]}),u.jsxs("div",{className:"flex gap-2 ml-4",children:[u.jsx(xr,{onClick:()=>(async e=>{d(!0);const n=await dR.loadSession(e);n.success?(t(n.session),f({type:"success",text:`Session "${n.session.name}" loaded successfully!`}),i()):f({type:"error",text:`Failed to load session: ${n.error}`}),d(!1)})(e.id),size:"sm",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:"Load"}),u.jsx(xr,{onClick:()=>(async e=>{const t=await dR.exportSession(e);if(t.success){const e=new Blob([JSON.stringify(t.data,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t.filename,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),f({type:"success",text:"Session exported successfully!"})}else f({type:"error",text:`Failed to export session: ${t.error}`})})(e.id),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:u.jsx(xt,{className:"w-3 h-3"})}),u.jsx(xr,{onClick:()=>g(e.id),size:"sm",variant:"outline",className:"border-red-400/20 text-red-400 hover:bg-red-400/10",children:u.jsx(tn,{className:"w-3 h-3"})})]})]})},e.id);var n})})]})]})]}),u.jsx(ES,{children:p&&u.jsx(uA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 flex items-center justify-center",onClick:()=>g(null),children:u.jsxs(uA.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"bg-black/90 border border-red-400/20 rounded-lg p-6 max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Delete Session"}),u.jsx("p",{className:"text-white/70 mb-4",children:"Are you sure you want to delete this session? This action cannot be undone."}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx(xr,{onClick:()=>g(null),variant:"outline",className:"border-white/20 text-white",children:"Cancel"}),u.jsx(xr,{onClick:()=>(async e=>{const t=await dR.deleteSession(e);t.success?(f({type:"success",text:`Session "${t.sessionName}" deleted`}),await y()):f({type:"error",text:`Failed to delete session: ${t.error}`}),g(null)})(p),className:"bg-red-500 hover:bg-red-600 text-white",children:"Delete"})]})]})})})]}):null}function fR({value:e=0,className:t="",...n}){const r=Math.min(100,Math.max(0,e));return u.jsx("div",{className:`relative w-full overflow-hidden rounded-full bg-gray-200 ${t}`,...n,children:u.jsx("div",{className:"h-full bg-cyan-500 transition-all duration-300 ease-out",style:{width:`${r}%`}})})}const pR=new class{constructor(){this.workers=[],this.maxWorkers=Math.min(navigator.hardwareConcurrency||4,4),this.workerPool=[],this.activeJobs=new Map,this.cache=new Map,this.config={defaultSamples:400,maxSamples:2e3,chunkSize:1048576,useWebWorkers:!0,enableCaching:!0,progressiveRendering:!0,memoryThreshold:104857600},this.generateWaveform=this.generateWaveform.bind(this),this.generateProgressiveWaveform=this.generateProgressiveWaveform.bind(this),this.cleanup=this.cleanup.bind(this)}async generateWaveform(e,t={}){const n=hA.startMeasurement("waveform_generation");try{const r={samples:Math.min(t.samples||this.config.defaultSamples,this.config.maxSamples),channel:t.channel||0,normalize:!1!==t.normalize,progressive:t.progressive||!1,onProgress:t.onProgress||null},i=this.generateCacheKey(e,r);if(this.config.enableCaching&&this.cache.has(i)){const e=this.cache.get(i);return r.onProgress&&r.onProgress({progress:100,status:"cached"}),n({cached:!0,samples:r.samples}),e}const s=this.estimateAudioSize(e),a=this.config.useWebWorkers&&s>this.config.memoryThreshold;let o;return o=a&&this.supportsWebWorkers()?await this.generateWithWebWorkers(e,r):r.progressive&&s>this.config.memoryThreshold?await this.generateProgressiveWaveform(e,r):await this.generateSynchronous(e,r),this.config.enableCaching&&(this.cache.set(i,o),this.manageCacheSize()),n({samples:r.samples,audioSize:s,useWorkers:a,progressive:r.progressive}),o}catch(kM){throw n({error:kM.message}),new Error(`Waveform generation failed: ${kM.message}`)}}async generateProgressiveWaveform(e,t){const n=e.getChannelData(t.channel),r=n.length,i=Math.floor(r/t.samples),s=Math.min(this.config.chunkSize,Math.floor(r/10)),a=new Float32Array(t.samples);let o=0;for(let c=0;c<r;c+=s){const e=Math.min(c+s,r)-c;if(await this.processChunk(n,c,e,i,a,t.samples),o+=e,t.onProgress){const e=Math.round(o/r*100);t.onProgress({progress:e,status:"processing",processedSamples:o,totalSamples:r})}await this.yieldControl()}let l=Array.from(a);return t.normalize&&(l=this.normalizeWaveform(l)),{data:l,samples:t.samples,duration:e.duration,sampleRate:e.sampleRate,channels:e.numberOfChannels,progressive:!0}}async generateWithWebWorkers(e,t){return new Promise((n,r)=>{const i=this.getWorker(),s=`waveform_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;this.activeJobs.set(s,{worker:i,resolve:n,reject:r});const a=e=>{const{type:o,jobId:l,data:c,error:u}=e.data;l===s&&("progress"===o&&t.onProgress?t.onProgress(c):"complete"===o?(i.removeEventListener("message",a),this.releaseWorker(i),this.activeJobs.delete(s),n(c)):"error"===o&&(i.removeEventListener("message",a),this.releaseWorker(i),this.activeJobs.delete(s),r(new Error(u))))};i.addEventListener("message",a);const o=e.getChannelData(t.channel);i.postMessage({type:"generateWaveform",jobId:s,audioData:o.buffer.slice(),config:{samples:t.samples,normalize:t.normalize,sampleRate:e.sampleRate,duration:e.duration,channels:e.numberOfChannels}}),setTimeout(()=>{this.activeJobs.has(s)&&(i.removeEventListener("message",a),this.releaseWorker(i),this.activeJobs.delete(s),r(new Error("Waveform generation timeout")))},3e4)})}async generateSynchronous(e,t){const n=e.getChannelData(t.channel),r=Math.floor(n.length/t.samples),i=[];for(let s=0;s<t.samples;s++){const e=r*s,a=Math.min(e+r,n.length);let o=0,l=0;for(let t=e;t<a;t++){const e=n[t];o+=e*e,l++}const c=l>0?Math.sqrt(o/l):0;if(i.push(c),t.onProgress&&s%50==0){const e=Math.round(s/t.samples*100);t.onProgress({progress:e,status:"processing"})}s%100==0&&await this.yieldControl()}return{data:t.normalize?this.normalizeWaveform(i):i,samples:t.samples,duration:e.duration,sampleRate:e.sampleRate,channels:e.numberOfChannels,progressive:!1}}async processChunk(e,t,n,r,i,s){const a=Math.floor(n/e.length*s),o=Math.floor(t/e.length*s);for(let l=0;l<a;l++){const t=o+l;if(t>=s)break;const n=Math.floor(t/s*e.length),a=Math.min(n+r,e.length);let c=0,u=0;for(let r=n;r<a;r++){const t=e[r];c+=t*t,u++}const d=u>0?Math.sqrt(c/u):0;i[t]=d}}normalizeWaveform(e){const t=Math.max(...e);if(0===t)return e;const n=1/t;return e.map(e=>e*n)}getWorker(){if(this.workerPool.length>0)return this.workerPool.pop();if(this.workers.length<this.maxWorkers){const e=this.createWorker();return this.workers.push(e),e}return new Promise(e=>{const t=()=>{this.workerPool.length>0?e(this.workerPool.pop()):setTimeout(t,100)};t()})}releaseWorker(e){this.workerPool.push(e)}createWorker(){const e=new Blob(["\n      self.addEventListener('message', function(event) {\n        const { type, jobId, audioData, config } = event.data;\n        \n        if (type === 'generateWaveform') {\n          try {\n            const channelData = new Float32Array(audioData);\n            const blockSize = Math.floor(channelData.length / config.samples);\n            const waveformData = [];\n            \n            for (let i = 0; i < config.samples; i++) {\n              const blockStart = blockSize * i;\n              const blockEnd = Math.min(blockStart + blockSize, channelData.length);\n              \n              let sum = 0;\n              let count = 0;\n              \n              for (let j = blockStart; j < blockEnd; j++) {\n                const sample = channelData[j];\n                sum += sample * sample;\n                count++;\n              }\n              \n              const rms = count > 0 ? Math.sqrt(sum / count) : 0;\n              waveformData.push(rms);\n              \n              // Report progress every 10%\n              if (i % Math.floor(config.samples / 10) === 0) {\n                self.postMessage({\n                  type: 'progress',\n                  jobId,\n                  data: {\n                    progress: Math.round((i / config.samples) * 100),\n                    status: 'processing'\n                  }\n                });\n              }\n            }\n            \n            // Normalize if requested\n            let finalData = waveformData;\n            if (config.normalize) {\n              const maxValue = Math.max(...waveformData);\n              if (maxValue > 0) {\n                const multiplier = 1 / maxValue;\n                finalData = waveformData.map(value => value * multiplier);\n              }\n            }\n            \n            self.postMessage({\n              type: 'complete',\n              jobId,\n              data: {\n                data: finalData,\n                samples: config.samples,\n                duration: config.duration,\n                sampleRate: config.sampleRate,\n                channels: config.channels,\n                progressive: false\n              }\n            });\n            \n          } catch (error) {\n            self.postMessage({\n              type: 'error',\n              jobId,\n              error: error.message\n            });\n          }\n        }\n      });\n    "],{type:"application/javascript"});return new Worker(URL.createObjectURL(e))}supportsWebWorkers(){return"undefined"!=typeof Worker}estimateAudioSize(e){return e.numberOfChannels*e.length*4}generateCacheKey(e,t){return`${`${e.duration}_${e.sampleRate}_${e.numberOfChannels}`}_${`${t.samples}_${t.channel}_${t.normalize}`}`}manageCacheSize(){if(this.cache.size>10){const e=Array.from(this.cache.entries()),t=e.slice(0,e.length-10);for(const[n]of t)this.cache.delete(n)}}async yieldControl(){return new Promise(e=>setTimeout(e,0))}getStats(){return{activeWorkers:this.workers.length,availableWorkers:this.workerPool.length,activeJobs:this.activeJobs.size,cacheSize:this.cache.size,maxWorkers:this.maxWorkers,supportsWebWorkers:this.supportsWebWorkers()}}clearCache(){this.cache.clear()}cleanup(){for(const e of this.workers)e.terminate();this.workers=[],this.workerPool=[],this.activeJobs.clear(),this.cache.clear()}};"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{pR.cleanup()});const mR=new class{constructor(){this.audioContext=null,this.mediaElementSource=null,this.analyser=null,this.scriptProcessor=null,this.isCapturing=!1,this.capturedSamples=[],this.videoElement=null,this.captureStartTime=0,this.targetDuration=0,this.config={sampleRate:44100,bufferSize:4096,fftSize:2048,maxCaptureTime:600,waveformSamples:400},this.startCapture=this.startCapture.bind(this),this.stopCapture=this.stopCapture.bind(this),this.cleanup=this.cleanup.bind(this)}async startCapture(e,t=null,n=null){const r=hA.startMeasurement("youtube_stream_capture");try{if(!e)throw new Error("Video element not provided");return this.videoElement=e,this.targetDuration=n||e.duration||this.config.maxCaptureTime,this.audioContext=new(window.AudioContext||window.webkitAudioContext)({sampleRate:this.config.sampleRate}),"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.mediaElementSource=this.audioContext.createMediaElementSource(e),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.analyser.smoothingTimeConstant=.8,this.scriptProcessor=this.audioContext.createScriptProcessor(this.config.bufferSize,1,1),this.mediaElementSource.connect(this.analyser),this.analyser.connect(this.scriptProcessor),this.scriptProcessor.connect(this.audioContext.destination),this.setupAudioProcessing(t),this.isCapturing=!0,this.captureStartTime=this.audioContext.currentTime,this.capturedSamples=[],new Promise((e,t)=>{this.captureResolve=e,this.captureReject=t,setTimeout(()=>{this.isCapturing&&this.stopCapture().then(e).catch(t)},1e3*this.targetDuration)})}catch(kM){throw r({error:kM.message}),new Error(`Capture initialization failed: ${kM.message}`)}}setupAudioProcessing(e){let t=0;const n=Math.floor(this.config.sampleRate/10);this.scriptProcessor.onaudioprocess=r=>{if(!this.isCapturing)return;const i=r.inputBuffer.getChannelData(0),s=new Float32Array(i.length);if(s.set(i),this.capturedSamples.push(s),t+=i.length,t%n===0&&e){const n=t/this.config.sampleRate,r=Math.min(n/this.targetDuration*100,99);e({status:"capturing",progress:Math.round(r),capturedTime:n,targetDuration:this.targetDuration})}t/this.config.sampleRate>=this.targetDuration&&this.stopCapture()}}async stopCapture(){if(!this.isCapturing)return null;const e=hA.startMeasurement("youtube_capture_processing");try{this.isCapturing=!1,this.scriptProcessor&&(this.scriptProcessor.disconnect(),this.scriptProcessor.onaudioprocess=null),this.analyser&&this.analyser.disconnect(),this.mediaElementSource&&this.mediaElementSource.disconnect();const t=await this.createAudioBufferFromSamples();if(!t)throw new Error("No audio data captured");const n=await pR.generateWaveform(t,{samples:this.config.waveformSamples,normalize:!0}),r=`youtube_capture_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;fA.registerBuffer(r,t,{priority:fA.config.priorityLevels.HIGH,tags:["youtube","captured","streaming"],source:"youtube_stream"});const i={audioBuffer:t,waveformData:n.data,metadata:{duration:t.duration,sampleRate:t.sampleRate,channels:t.numberOfChannels,capturedSamples:this.capturedSamples.length,bufferId:r,source:"youtube_stream"}};return e({success:!0,duration:t.duration,samples:this.capturedSamples.length}),this.captureResolve&&this.captureResolve(i),i}catch(kM){throw e({error:kM.message}),this.captureReject&&this.captureReject(kM),kM}}async createAudioBufferFromSamples(){if(0===this.capturedSamples.length)return null;const e=this.capturedSamples.reduce((e,t)=>e+t.length,0);if(0===e)return null;const t=this.audioContext.createBuffer(1,e,this.config.sampleRate),n=t.getChannelData(0);let r=0;for(const i of this.capturedSamples)n.set(i,r),r+=i.length;return t}getStatus(){return{isCapturing:this.isCapturing,capturedSamples:this.capturedSamples.length,capturedDuration:this.capturedSamples.length>0?this.capturedSamples.length*this.config.bufferSize/this.config.sampleRate:0,targetDuration:this.targetDuration,audioContextState:this.audioContext?.state||"not-initialized"}}static isSupported(){return!(!window.AudioContext&&!window.webkitAudioContext)}cleanup(){this.stopCapture(),this.audioContext&&"closed"!==this.audioContext.state&&(this.audioContext.close(),this.audioContext=null),this.capturedSamples=[],this.videoElement=null}};function gR({youtubeUrl:e,videoElement:t,onCaptureComplete:n,onCaptureError:r,isVideoReady:i=!1}){const[s,a]=m.useState("idle"),[o,l]=m.useState(0),[c,d]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState(null);m.useEffect(()=>{a("idle"),l(0),d(null),f(null),g(null)},[e]);const y=m.useCallback(e=>{l(e.progress),d({capturedTime:e.capturedTime,targetDuration:e.targetDuration,status:e.status})},[]),v=m.useCallback(async()=>{if(t)if(i)try{a("capturing"),f(null),l(0);const e=t.duration||300,r=Math.min(e,600),i=await mR.startCapture(t,y,r);a("processing"),g(i),a("complete"),l(100),n&&n(i)}catch(e){a("error"),f(e.message||"Audio capture failed"),r&&r(e)}else f("Video not ready. Please wait for video to fully load.");else f("Video element not available. Please wait for video to load.")},[t,i,y,n,r]),b=m.useCallback(async()=>{try{a("processing");const e=await mR.stopCapture();e?(g(e),a("complete"),l(100),n&&n(e)):(a("idle"),l(0))}catch(e){a("error"),f(e.message||"Failed to stop capture")}},[n]),w=m.useCallback(()=>{mR.cleanup(),a("idle"),l(0),d(null),f(null),g(null)},[]);if(!mR.constructor.isSupported())return u.jsxs(cR,{className:"border-red-400 bg-red-400/10",children:[u.jsx(mt,{className:"h-4 w-4 text-red-400"}),u.jsx(uR,{className:"text-red-200",children:"Audio capture is not supported in this browser. Please use a modern browser with Web Audio API support."})]});const x=(()=>{switch(s){case"idle":return{icon:Ot,message:"Ready to capture audio from YouTube video",color:"text-white/70"};case"capturing":return{icon:Mt,message:`Capturing audio... ${o}%`,color:"text-cyan-400",animate:!0};case"processing":return{icon:Mt,message:"Processing captured audio...",color:"text-yellow-400",animate:!0};case"complete":return{icon:gt,message:"Audio capture complete!",color:"text-green-400"};case"error":return{icon:mt,message:"Capture failed",color:"text-red-400"};default:return{icon:Ot,message:"Unknown state",color:"text-white/50"}}})(),S=x.icon;return u.jsxs(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-4 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-2 bg-purple-600/20 rounded-lg",children:u.jsx(Ot,{className:"w-4 h-4 text-purple-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-medium",children:"Audio Capture"}),u.jsx("p",{className:"text-white/60 text-sm",children:"Capture audio directly from YouTube"})]})]}),u.jsx("div",{className:"flex items-center gap-1 text-white/40",children:t?.muted?u.jsx(ln,{className:"w-4 h-4"}):u.jsx(on,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(S,{className:`w-4 h-4 ${x.color} ${x.animate?"animate-spin":""}`}),u.jsx("span",{className:`text-sm font-medium ${x.color}`,children:x.message})]}),u.jsx(ES,{children:("capturing"===s||"processing"===s)&&u.jsxs(uA.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[u.jsx(fR,{value:o,className:"h-2 bg-white/10"}),c&&u.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[u.jsxs("span",{children:[c.capturedTime?.toFixed(1),"s / ",c.targetDuration?.toFixed(1),"s"]}),u.jsxs("span",{children:[o,"%"]})]})]})}),u.jsx(ES,{children:h&&u.jsx(uA.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:u.jsxs(cR,{className:"border-red-400 bg-red-400/10",children:[u.jsx(mt,{className:"h-4 w-4 text-red-400"}),u.jsx(uR,{className:"text-red-200 text-sm",children:h})]})})}),u.jsx(ES,{children:p&&"complete"===s&&u.jsx(uA.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:u.jsxs("div",{className:"text-green-200 text-sm space-y-1",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Duration:"}),u.jsxs("span",{children:[p.metadata.duration.toFixed(2),"s"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Sample Rate:"}),u.jsxs("span",{children:[p.metadata.sampleRate," Hz"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{children:"Channels:"}),u.jsx("span",{children:p.metadata.channels})]})]})})}),u.jsxs("div",{className:"flex gap-2",children:["idle"===s&&u.jsxs(xr,{onClick:v,disabled:!i||!t,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white",children:[u.jsx($t,{className:"w-4 h-4 mr-2"}),"Start Capture"]}),"capturing"===s&&u.jsxs(xr,{onClick:b,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[u.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Stop Capture"]}),("complete"===s||"error"===s)&&u.jsxs(u.Fragment,{children:[u.jsx(xr,{onClick:w,variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10",children:"Reset"}),"complete"===s&&u.jsxs(xr,{onClick:v,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white",children:[u.jsx($t,{className:"w-4 h-4 mr-2"}),"Capture Again"]})]})]}),"idle"===s&&u.jsxs("div",{className:"text-xs text-white/40 space-y-1",children:[u.jsx("p",{children:" This captures audio directly from the YouTube player"}),u.jsx("p",{children:" Make sure the video is playing and not muted"}),u.jsx("p",{children:" Capture will automatically stop at video end"})]})]})}const yR=new class{constructor(){this.retryAttempts=new Map,this.errorHistory=[],this.config={maxRetries:3,baseRetryDelay:1e3,maxRetryDelay:1e4,transientErrorPatterns:[/network/i,/timeout/i,/fetch/i,/connection/i,/temporary/i,/rate.?limit/i,/service.?unavailable/i,/internal.?server/i,/502|503|504/],permanentErrorPatterns:[/not.?found/i,/unauthorized/i,/forbidden/i,/invalid.?url/i,/malformed/i,/unsupported/i,/private/i,/deleted/i,/restricted/i]},this.shouldRetry=this.shouldRetry.bind(this),this.executeWithRetry=this.executeWithRetry.bind(this),this.classifyError=this.classifyError.bind(this)}classifyError(e){const t=`${e?.message||""} ${e?.stack||""}`.toLowerCase();if(this.config.permanentErrorPatterns.some(e=>e.test(t)))return{type:"permanent",category:this.getErrorCategory(t),retryable:!1,userActionRequired:!0,severity:"error"};return this.config.transientErrorPatterns.some(e=>e.test(t))?{type:"transient",category:this.getErrorCategory(t),retryable:!0,userActionRequired:!1,severity:"warning"}:{type:"unknown",category:"system",retryable:!0,userActionRequired:!1,severity:"error"}}getErrorCategory(e){return/network|connection|fetch|cors/i.test(e)?"network":/audio|decode|buffer|context/i.test(e)?"audio":/video|youtube|player|embed/i.test(e)?"video":/timeout|slow|delay/i.test(e)?"timeout":/quota|limit|rate/i.test(e)?"quota":/storage|cache|memory/i.test(e)?"storage":/permission|unauthorized|forbidden/i.test(e)?"permission":"system"}shouldRetry(e,t){if(!this.classifyError(e).retryable)return!1;return(this.retryAttempts.get(t)||0)<this.config.maxRetries}calculateRetryDelay(e){const t=Math.min(this.config.baseRetryDelay*Math.pow(2,e),this.config.maxRetryDelay),n=.3*Math.random()*t;return Math.floor(t+n)}async executeWithRetry(e,t,n={}){const{onProgress:r=null,onRetry:i=null,maxRetries:s=this.config.maxRetries,context:a={}}=n;let o=null;const l=Date.now();this.retryAttempts.set(t,0);for(let d=0;d<=s;d++)try{r&&r({status:0===d?"starting":"retrying",attempt:d+1,maxAttempts:s+1,operationId:t,context:a});const n=await e();return this.retryAttempts.delete(t),this.recordSuccess(t,d,Date.now()-l),n}catch(kM){o=kM;const n=this.classifyError(kM);if(this.recordError(t,kM,d,n),d>=s||!n.retryable)break;const l=this.calculateRetryDelay(d);this.retryAttempts.set(t,d+1),i&&i({error:kM,attempt:d+1,maxAttempts:s+1,delay:l,classification:n,operationId:t}),r&&r({status:"waiting_retry",attempt:d+1,maxAttempts:s+1,delay:l,error:kM.message,operationId:t,context:a}),await this.sleep(l)}this.retryAttempts.delete(t);const c=this.classifyError(o),u=new Error(o.message);throw u.originalError=o,u.classification=c,u.attempts=s+1,u.operationId=t,u}recordError(e,t,n,r){const i={timestamp:Date.now(),operationId:e,error:{message:t.message,stack:t.stack,name:t.name},attempt:n,classification:r};this.errorHistory.push(i),this.errorHistory.length>100&&this.errorHistory.shift()}recordSuccess(e,t,n){}getErrorStats(){const e=Date.now(),t=this.errorHistory.filter(t=>e-t.timestamp<3e5),n={},r={};return t.forEach(e=>{const t=e.classification.category,i=e.classification.type;n[t]=(n[t]||0)+1,r[i]=(r[i]||0)+1}),{totalErrors:this.errorHistory.length,recentErrors:t.length,activeRetries:this.retryAttempts.size,errorsByCategory:n,errorsByType:r,lastError:this.errorHistory[this.errorHistory.length-1]||null}}getUserFriendlyError(e){const t=e.classification||this.classifyError(e),n={network:{title:"Connection Problem",message:"Unable to connect to the service. Please check your internet connection.",suggestions:["Check your internet connection","Try refreshing the page","Wait a moment and try again"]},audio:{title:"Audio Processing Error",message:"Unable to process the audio from this video.",suggestions:["Try a different YouTube video","Check if the video has audio","Ensure your browser supports audio playback"]},video:{title:"Video Player Error",message:"Unable to load or play the video.",suggestions:["Check if the YouTube URL is valid","Ensure the video is public","Try refreshing the page"]},timeout:{title:"Request Timeout",message:"The operation is taking too long to complete.",suggestions:["Check your internet speed","Try a shorter video","Wait and try again later"]},quota:{title:"Service Limit Reached",message:"The service has reached its usage limit.",suggestions:["Wait a few minutes and try again","Try during off-peak hours","Contact support if this persists"]},storage:{title:"Storage Error",message:"Unable to store or retrieve data locally.",suggestions:["Clear your browser cache","Free up storage space","Try using a private/incognito window"]},permission:{title:"Permission Error",message:"Access to the requested resource is denied.",suggestions:["Check if the video is public","Try a different video","Contact the video owner if needed"]},system:{title:"System Error",message:"An unexpected error occurred.",suggestions:["Try refreshing the page","Clear your browser cache","Try a different browser if the issue persists"]}};return{...n[t.category]||n.system,classification:t,canRetry:t.retryable&&!e.attempts,technical:null}}sleep(e){return new Promise(t=>setTimeout(t,e))}reset(){this.errorHistory.length=0,this.retryAttempts.clear()}cleanup(){this.reset()}};const vR=new class{constructor(){this.audioContext=null,this.supportedFormats=["audio/mpeg","audio/mp3","audio/wav","audio/wave","audio/ogg","audio/webm","audio/mp4","audio/m4a","audio/flac"],this.processFile=this.processFile.bind(this),this.processURL=this.processURL.bind(this),this.cleanup=this.cleanup.bind(this)}async processFile(e,t=null){const n=hA.startMeasurement("audio_file_processing");try{this.validateFile(e),t&&t({status:"reading",progress:10});const r=await this.readFileAsArrayBuffer(e);t&&t({status:"decoding",progress:30}),this.audioContext=new(window.AudioContext||window.webkitAudioContext);const i=await this.audioContext.decodeAudioData(r);t&&t({status:"generating_waveform",progress:70});const s=await pR.generateWaveform(i,{samples:400,normalize:!0,onProgress:e=>{if(t){const n=70+.25*e.progress;t({status:"generating_waveform",progress:Math.round(n)})}}}),a=`uploaded_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;fA.registerBuffer(a,i,{priority:fA.config.priorityLevels.HIGH,tags:["uploaded","user_file"],source:"file_upload"});const o={audioBuffer:i,waveformData:s.data,metadata:{filename:e.name,size:e.size,type:e.type,duration:i.duration,sampleRate:i.sampleRate,channels:i.numberOfChannels,bufferId:a}};return t&&t({status:"complete",progress:100}),n({success:!0,filename:e.name,duration:i.duration,size:e.size}),o}catch(kM){throw n({error:kM.message,filename:e?.name}),new Error(`File processing failed: ${kM.message}`)}}async processURL(e,t=null){const n=hA.startMeasurement("audio_url_processing");try{t&&t({status:"downloading",progress:10});const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch audio: ${r.status}`);const i=await r.arrayBuffer();t&&t({status:"decoding",progress:50}),this.audioContext=new(window.AudioContext||window.webkitAudioContext);const s=await this.audioContext.decodeAudioData(i);t&&t({status:"generating_waveform",progress:80});const a=await pR.generateWaveform(s,{samples:400,normalize:!0}),o=`url_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;fA.registerBuffer(o,s,{priority:fA.config.priorityLevels.MEDIUM,tags:["url","remote"],source:"url_download"});const l={audioBuffer:s,waveformData:a.data,metadata:{url:e,duration:s.duration,sampleRate:s.sampleRate,channels:s.numberOfChannels,bufferId:o}};return t&&t({status:"complete",progress:100}),n({success:!0,url:e,duration:s.duration}),l}catch(kM){throw n({error:kM.message,url:e}),new Error(`URL processing failed: ${kM.message}`)}}validateFile(e){if(!e)throw new Error("No file provided");if(!this.supportedFormats.includes(e.type))throw new Error(`Unsupported file type: ${e.type}. Supported formats: ${this.supportedFormats.join(", ")}`);if(e.size>104857600)throw new Error(`File too large: ${Math.round(e.size/1024/1024)}MB. Maximum size: 100MB`)}readFileAsArrayBuffer(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>n(new Error("Failed to read file")),r.readAsArrayBuffer(e)})}getSupportedFormats(){return[...this.supportedFormats]}isFormatSupported(e){return this.supportedFormats.includes(e)}cleanup(){this.audioContext&&"closed"!==this.audioContext.state&&(this.audioContext.close(),this.audioContext=null)}};const bR=new class{constructor(){this.audioContext=null,this.downloadCache=new Map,this.progressCallbacks=new Map,this.abortControllers=new Map,this.config={maxRetries:3,baseRetryDelay:1e3,maxRetryDelay:1e4,downloadTimeout:6e4,functionUrl:"https://us-central1-chop-stop.cloudfunctions.net/getAudioStream"},this.downloadAndProcessAudio=this.downloadAndProcessAudio.bind(this),this.getAudioBuffer=this.getAudioBuffer.bind(this),this.clearCache=this.clearCache.bind(this),this.cleanup=this.cleanup.bind(this)}getAudioContext(){return this.audioContext&&"closed"!==this.audioContext.state||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),"suspended"===this.audioContext.state&&this.audioContext.resume().catch(e=>{}),this.audioContext}async downloadAndProcessAudio(e,t=null){if(e instanceof File)return await this.processAudioFile(e,t);if("string"==typeof e){if(this.isDirectAudioURL(e))return await this.processDirectAudioURL(e,t);if(this.isYouTubeURL(e))return await this.processYouTubeURL(e,t);throw new Error("Unsupported URL format")}throw new Error("Invalid source type")}async processAudioFile(e,t=null){const n=hA.startMeasurement("audio_file_upload");try{const r=await vR.processFile(e,t);return n({success:!0,filename:e.name}),r}catch(kM){throw n({error:kM.message}),kM}}async processDirectAudioURL(e,t=null){const n=hA.startMeasurement("direct_audio_url");try{const r=await vR.processURL(e,t);return n({success:!0,url:e}),r}catch(kM){throw n({error:kM.message}),kM}}async processYouTubeURL(e,t=null){const n=hA.startMeasurement("audio_download");if(!e)throw new Error("YouTube URL is required");const r=this.getCacheKey(e);if(this.downloadCache.has(r)){const e=this.downloadCache.get(r);return t&&t({status:"ready",progress:100}),n({cached:!0,cacheKey:r}),e}t&&this.progressCallbacks.set(r,t);const i=`audio_download_${r}`;try{const s=await yR.executeWithRetry(()=>this.performDownload(e,r,t),i,{maxRetries:this.config.maxRetries,onProgress:e=>{t&&t({status:"starting"===e.status?"downloading":"retrying"===e.status||"waiting_retry"===e.status?"retrying":"downloading",progress:0,attempt:e.attempt,maxAttempts:e.maxAttempts,retryDelay:e.delay,error:e.error,operationId:e.operationId})},onRetry:e=>{},context:{youtubeUrl:e,cacheKey:r}});return this.downloadCache.set(r,s),fA.registerBuffer(r,s.audioBuffer,{priority:fA.config.priorityLevels.HIGH,source:"audio_download",tags:["youtube","audio"]}),t&&t({status:"ready",progress:100}),n({success:!0,cacheKey:r,audioSize:this.estimateAudioSize(s.audioBuffer),waveformSamples:s.waveformData?.length||0}),s}catch(kM){const s=new Error(kM.message);throw s.originalError=kM.originalError||kM,s.classification=kM.classification,s.attempts=kM.attempts,s.operationId=i,s.youtubeUrl=e,t&&t({status:"error",progress:0,error:s.message,classification:s.classification}),n({error:s.message,classification:s.classification,attempts:s.attempts}),s}}async performDownload(e,t,n){const r=new AbortController;this.abortControllers.set(t,r);try{const t=setTimeout(()=>{r.abort()},this.config.downloadTimeout),i=`${this.config.functionUrl}?url=${encodeURIComponent(e)}`,s=await fetch(i,{method:"GET",signal:r.signal});if(clearTimeout(t),!s.ok){let e=`Server responded with ${s.status}`;try{e=(await s.json()).message||e}catch{e=await s.text()||e}throw new Error(e)}const a=s.headers.get("content-length"),o=s.body.getReader(),l=[];let c=0;for(;;){const{done:e,value:t}=await o.read();if(e)break;if(l.push(t),c+=t.length,a&&n){const e=Math.round(c/parseInt(a)*70);n({status:"downloading",progress:Math.min(e,70),bytesReceived:c,totalBytes:parseInt(a)})}}const u=new ArrayBuffer(c),d=new Uint8Array(u);let h=0;for(const e of l)d.set(e,h),h+=e.length;n&&n({status:"processing",progress:75});const f=this.getAudioContext(),p=await f.decodeAudioData(u);n&&n({status:"generating_waveform",progress:90});return{audioBuffer:p,waveformData:this.generateWaveformData(p)}}finally{this.abortControllers.delete(t)}}async generateWaveformData(e,t=400){const n=hA.startMeasurement("waveform_generation");try{const r=await pR.generateWaveform(e,{samples:t,normalize:!0,progressive:this.estimateAudioSize(e)>52428800});return n({samples:t,audioSize:this.estimateAudioSize(e),progressive:r.progressive}),r.data}catch(kM){return n({error:kM.message}),this.generateSimpleWaveform(e,t)}}generateSimpleWaveform(e,t=400){const n=e.getChannelData(0),r=Math.floor(n.length/t),i=[];for(let o=0;o<t;o++){const e=r*o;let t=0;for(let i=0;i<r;i++)t+=Math.abs(n[e+i]);i.push(t/r)}const s=Math.max(...i),a=s>0?Math.pow(s,-1):1;return i.map(e=>e*a)}getAudioBuffer(e){const t=this.getCacheKey(e);return this.downloadCache.get(t)||null}isCached(e){const t=this.getCacheKey(e);return this.downloadCache.has(t)}getDownloadProgress(e){const t=this.getCacheKey(e);return this.progressCallbacks.get(t)?{hasProgress:!0}:null}cancelDownload(e){const t=this.getCacheKey(e),n=this.abortControllers.get(t);n&&(n.abort(),this.abortControllers.delete(t)),this.progressCallbacks.delete(t)}clearCache(){for(const[e,t]of this.abortControllers)t.abort();for(const e of this.downloadCache.keys())fA.unregisterBuffer(e);this.downloadCache.clear(),this.progressCallbacks.clear(),this.abortControllers.clear()}cleanup(){this.clearCache(),this.audioContext&&"closed"!==this.audioContext.state&&(this.audioContext.close().catch(e=>{}),this.audioContext=null)}calculateRetryDelay(e){const t=Math.min(this.config.baseRetryDelay*Math.pow(2,e),this.config.maxRetryDelay),n=.1*Math.random()*t;return Math.floor(t+n)}isDirectAudioURL(e){const t=e.toLowerCase();return[".mp3",".wav",".ogg",".m4a",".flac",".webm"].some(e=>t.includes(e))||e.includes("audio/")||e.includes("soundcloud.com")||e.includes("bandcamp.com")}isYouTubeURL(e){return e.includes("youtube.com")||e.includes("youtu.be")}getCacheKey(e){if("string"==typeof e){const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?t[1]:e}return e instanceof File?`file_${e.name}_${e.size}_${e.lastModified}`:e.toString()}sleep(e){return new Promise(t=>setTimeout(t,e))}getStats(){return{cachedItems:this.downloadCache.size,activeDownloads:this.abortControllers.size,audioContextState:this.audioContext?.state||"not_initialized",memoryUsage:this.estimateMemoryUsage()}}estimateMemoryUsage(){let e=0;for(const[,t]of this.downloadCache)t.audioBuffer&&(e+=this.estimateAudioSize(t.audioBuffer));return{bytes:e,mb:Math.round(e/1048576*100)/100}}estimateAudioSize(e){return e.numberOfChannels*e.length*4}};function wR(){const e=function(e){const[t,n]=m.useState(null),[r,i]=m.useState(!1),[s,a]=m.useState(0),[o,l]=m.useState(null),c=m.useRef(e),u=m.useCallback(async(e,t={})=>{const{maxRetries:r=3,onProgress:s=null,onRetry:o=null,context:u={}}=t;n(null),i(!1),a(0),l(Date.now());try{const t=await yR.executeWithRetry(e,c.current,{maxRetries:r,onProgress:e=>{"retrying"===e.status||"waiting_retry"===e.status?(i(!0),a(e.attempt-1)):"starting"===e.status&&i(!1),s&&s(e)},onRetry:e=>{a(e.attempt-1),l(Date.now()),o&&o(e)},context:u});return i(!1),n(null),t}catch(d){throw i(!1),n(d),d}},[]),d=m.useCallback(async(e,t={})=>{if(!e)throw new Error("Operation function is required for retry");return u(e,t)},[u]),h=m.useCallback(()=>{n(null),i(!1),a(0),l(null)},[]),f=m.useCallback(e=>yR.shouldRetry(e,c.current),[]),p=m.useCallback(e=>yR.getUserFriendlyError(e||e),[]),g=m.useCallback(e=>yR.classifyError(e||e),[]);return{error:t,isRetrying:r,retryCount:s,lastAttempt:o,executeWithRetry:u,retry:d,reset:h,shouldRetry:f,getUserFriendlyError:p,classifyError:g,getStats:()=>yR.getErrorStats()}}("audio_processing"),t=m.useCallback(async(t,n={})=>e.executeWithRetry(t,{...n,context:{type:"audio",...n.context}}),[e]),n=m.useCallback(t=>{const n=e.getUserFriendlyError(t);return"audio"===e.classifyError(t).category?{...n,suggestions:["Check if the video has audio content","Try a different YouTube video","Ensure your browser supports Web Audio API",...n.suggestions]}:n},[e]);return{...e,executeAudioOperation:t,getAudioErrorGuidance:n}}"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{bR.cleanup()});g.Component;class xR extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,videoUrl:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,hasError:!0,videoUrl:this.props.youtubeUrl||null}),this.props.onError&&this.props.onError(e,t)}handleRetry=async()=>{this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});try{this.props.onRetry&&await this.props.onRetry(),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,videoUrl:null})},100)}catch(e){this.setState({isRetrying:!1,error:e})}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,videoUrl:null}),this.props.onReset&&this.props.onReset()};getErrorType(e){const t=e?.message?.toLowerCase()||"";return t.includes("youtube")||t.includes("player")?"youtube":t.includes("network")||t.includes("load")||t.includes("fetch")?"network":t.includes("embed")||t.includes("iframe")?"embed":t.includes("api")||t.includes("script")?"api":t.includes("unavailable")||t.includes("private")||t.includes("restricted")?"unavailable":"unknown"}getErrorDetails(e,t,n){const r=navigator.onLine;switch(e){case"youtube":return{icon:sn,title:"YouTube Player Error",description:"The YouTube player failed to initialize or load the video.",suggestions:["Check if the YouTube URL is valid","Ensure the video is public and available","Try refreshing the page","Check if YouTube is accessible in your region"],canRetry:!0,severity:"error",showUrl:!0};case"network":return{icon:r?un:cn,title:"Network Connection Error",description:r?"Unable to load the video player. This might be a temporary connection issue.":"You appear to be offline. Video playback requires an internet connection.",suggestions:[r?"Check your internet connection":"Connect to the internet","Try refreshing the page","Check if YouTube is accessible","Wait a moment and try again"],canRetry:!0,severity:"warning",showUrl:!1};case"embed":return{icon:an,title:"Video Embed Error",description:"Failed to embed the YouTube video. The video might not allow embedding.",suggestions:["Try a different YouTube video","Check if the video allows embedding","Ensure the video is public","Try copying the URL directly from YouTube"],canRetry:!0,severity:"warning",showUrl:!0};case"api":return{icon:nn,title:"YouTube API Error",description:"Failed to load the YouTube player API. This might be due to browser restrictions.",suggestions:["Check if JavaScript is enabled","Disable ad blockers temporarily","Try a different browser","Clear browser cache and cookies"],canRetry:!0,severity:"error",showUrl:!1};case"unavailable":return{icon:sn,title:"Video Unavailable",description:"This video cannot be played. It might be private, deleted, or restricted.",suggestions:["Try a different public YouTube video","Check if the video exists and is public","Ensure the video is available in your region","Contact the video owner if it's private"],canRetry:!1,severity:"error",showUrl:!0};default:return{icon:nn,title:"Video Player Error",description:t?.message||"An unexpected error occurred with the video player.",suggestions:["Try refreshing the page","Check your browser compatibility","Clear browser cache","Try a different browser if the issue persists"],canRetry:!0,severity:"error",showUrl:!0}}}extractVideoId(e){if(!e)return null;const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\n?#]+)/);return t?t[1]:null}render(){if(!this.state.hasError)return this.props.children;const e=this.getErrorType(this.state.error),t=this.getErrorDetails(e,this.state.error,this.state.videoUrl),n=t.icon,r=this.extractVideoId(this.state.videoUrl);return u.jsx("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:u.jsxs(cR,{className:`border-${"error"===t.severity?"red":"yellow"}-400 bg-${"error"===t.severity?"red":"yellow"}-400/10`,children:[u.jsx(n,{className:`h-4 w-4 text-${"error"===t.severity?"red":"yellow"}-400`}),u.jsx(uR,{className:`text-${"error"===t.severity?"red":"yellow"}-200`,children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:t.title}),u.jsx("p",{className:"text-sm mt-1",children:t.description})]}),t.showUrl&&this.state.videoUrl&&u.jsxs("div",{className:"bg-black/20 rounded p-2 text-xs",children:[u.jsx("span",{className:"text-white/60",children:"Video URL: "}),u.jsx("span",{className:"text-white/80 break-all",children:this.state.videoUrl}),r&&u.jsxs("div",{className:"mt-1",children:[u.jsx("span",{className:"text-white/60",children:"Video ID: "}),u.jsx("span",{className:"text-white/80",children:r})]})]}),t.suggestions.length>0&&u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium mb-2",children:"Troubleshooting steps:"}),u.jsx("ul",{className:"text-sm space-y-1 list-disc list-inside ml-2",children:t.suggestions.map((e,t)=>u.jsx("li",{children:e},t))})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[t.canRetry&&u.jsx(xr,{onClick:this.handleRetry,disabled:this.state.isRetrying,size:"sm",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:this.state.isRetrying?u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1 animate-spin"}),"Retrying..."]}):u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1"}),"Retry Video ",this.state.retryCount>0&&`(${this.state.retryCount+1})`]})}),u.jsx(xr,{onClick:this.handleReset,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:"Reset Player"}),this.state.videoUrl&&u.jsxs(xr,{onClick:()=>window.open(this.state.videoUrl,"_blank"),variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(an,{className:"w-3 h-3 mr-1"}),"Open in YouTube"]})]}),!1]})})]})})}}class SR extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,lastFailedAction:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,hasError:!0,lastFailedAction:this.props.lastAction||"unknown"}),this.props.onError&&this.props.onError(e,t)}handleRetry=async()=>{this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});try{this.props.onRetry&&await this.props.onRetry(),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,lastFailedAction:null})},100)}catch(e){this.setState({isRetrying:!1,error:e})}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,lastFailedAction:null}),this.props.onReset&&this.props.onReset()};getErrorType(e){const t=e?.message?.toLowerCase()||"";return t.includes("audiocontext")||t.includes("suspended")?"audiocontext":t.includes("buffer")||t.includes("decode")?"buffer":t.includes("playback")||t.includes("play")?"playback":t.includes("timestamp")||t.includes("time")?"timestamp":t.includes("sample")||t.includes("pad")?"sample":"unknown"}getErrorDetails(e,t,n){switch(e){case"audiocontext":return{icon:on,title:"Audio Context Error",description:"The browser's audio system is not responding. This usually happens when audio is blocked or suspended.",suggestions:["Click anywhere on the page to activate audio","Check if audio is muted in your browser","Try refreshing the page","Ensure your browser supports Web Audio API"],canRetry:!0,severity:"warning",action:"Click to activate audio"};case"buffer":return{icon:nn,title:"Audio Buffer Error",description:"There's an issue with the audio data. The audio buffer might be corrupted or invalid.",suggestions:["Try reloading the audio","Check if the original video is still available","Clear the audio cache and try again"],canRetry:!0,severity:"error",action:"Reload audio"};case"playback":return{icon:$t,title:"Playback Error",description:`Failed to ${n||"play"} the sample. This might be due to audio system conflicts.`,suggestions:["Stop other audio and try again","Check your system audio settings","Try a different sample","Refresh the page if the issue persists"],canRetry:!0,severity:"warning",action:"Try playback again"};case"timestamp":return{icon:nn,title:"Timestamp Error",description:"Invalid sample timing. The start or end time might be outside the audio duration.",suggestions:["Check that timestamps are within the audio length","Ensure start time is before end time","Try creating the sample again","Reload the audio if timestamps seem correct"],canRetry:!0,severity:"warning",action:"Fix timestamps"};case"sample":return{icon:nn,title:"Sample Creation Error",description:"Failed to create or manage the sample. There might be an issue with the sample data.",suggestions:["Try creating the sample at a different time","Check if the audio is fully loaded","Clear existing samples and try again","Ensure the video is playing when creating samples"],canRetry:!0,severity:"error",action:"Create sample again"};default:return{icon:nn,title:"Sample System Error",description:t?.message||"An unexpected error occurred in the sample playback system.",suggestions:["Try the action again","Refresh the page","Clear browser cache if the issue persists","Try a different browser"],canRetry:!0,severity:"error",action:"Try again"}}}render(){if(!this.state.hasError)return this.props.children;const e=this.getErrorType(this.state.error),t=this.getErrorDetails(e,this.state.error,this.state.lastFailedAction),n=t.icon;return u.jsx("div",{className:"p-4 space-y-3",children:u.jsxs(cR,{className:`border-${"error"===t.severity?"red":"yellow"}-400 bg-${"error"===t.severity?"red":"yellow"}-400/10`,children:[u.jsx(n,{className:`h-4 w-4 text-${"error"===t.severity?"red":"yellow"}-400`}),u.jsx(uR,{className:`text-${"error"===t.severity?"red":"yellow"}-200`,children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-sm",children:t.title}),u.jsx("p",{className:"text-xs mt-1",children:t.description})]}),t.suggestions.length>0&&u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-medium mb-1",children:"Quick fixes:"}),u.jsx("ul",{className:"text-xs space-y-0.5 list-disc list-inside ml-2",children:t.suggestions.slice(0,2).map((e,t)=>u.jsx("li",{children:e},t))})]}),u.jsxs("div",{className:"flex gap-2 pt-1",children:[t.canRetry&&u.jsx(xr,{onClick:this.handleRetry,disabled:this.state.isRetrying,size:"sm",className:"bg-cyan-500 hover:bg-cyan-600 text-black text-xs h-7",children:this.state.isRetrying?u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1 animate-spin"}),"Retrying..."]}):u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1"}),t.action]})}),u.jsx(xr,{onClick:this.handleReset,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10 text-xs h-7",children:"Dismiss"})]})]})})]})})}}const kR=({error:e,onRetry:t,onReset:n,youtubeUrl:r,isRetrying:i=!1,retryCount:s=0})=>{const a=()=>{r&&window.open(r,"_blank")},o=()=>{n&&n()},l=(e=>{const t=e?.message?.toLowerCase()||"";return t.includes("network")||t.includes("timeout")?"warning":t.includes("unavailable")||t.includes("private")?"error":"warning"})(e),c=(e=>{const n=e?.message?.toLowerCase()||"";return n.includes("network")||n.includes("timeout")?[{icon:qt,title:"Check Connection",description:"Verify your internet connection and try again",action:t,primary:!0},{icon:St,title:"Open in YouTube",description:"Listen to the audio directly on YouTube",action:a,primary:!1}]:n.includes("unavailable")||n.includes("private")?[{icon:rn,title:"Try Different Video",description:"Use a public YouTube video that allows audio extraction",action:o,primary:!0},{icon:St,title:"Open Original",description:"Check if the video exists and is accessible",action:a,primary:!1}]:[{icon:qt,title:"Try Again",description:"Retry the audio processing",action:t,primary:!0},{icon:rn,title:"Different Video",description:"Try with a different YouTube video",action:o,primary:!1}]})(e);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(cR,{className:`border-${"error"===l?"red":"yellow"}-400 bg-${"error"===l?"red":"yellow"}-400/10`,children:[u.jsx(ln,{className:`h-4 w-4 text-${"error"===l?"red":"yellow"}-400`}),u.jsx(uR,{className:`text-${"error"===l?"red":"yellow"}-200`,children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Audio Processing Failed"}),u.jsx("p",{className:"text-sm mt-1",children:e?.message||"Unable to process audio from this YouTube video."})]}),s>0&&u.jsxs("div",{className:"text-sm",children:[u.jsx("span",{className:"text-white/60",children:"Retry attempts: "}),u.jsx("span",{className:"text-white/80",children:s})]})]})})]}),i&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(qt,{className:"w-4 h-4 animate-spin text-cyan-400"}),u.jsx("span",{className:"text-sm text-cyan-200",children:"Retrying audio processing..."})]}),u.jsx(fR,{value:void 0,className:"h-2 bg-white/10"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map((e,t)=>{const n=e.icon;return u.jsx("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-xl p-4 "+(e.primary?"ring-2 ring-cyan-500/30":""),children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg "+(e.primary?"bg-cyan-500/20 text-cyan-400":"bg-white/10 text-white/60"),children:u.jsx(n,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h5",{className:"font-medium text-white mb-1",children:e.title}),u.jsx("p",{className:"text-sm text-white/60 mb-3",children:e.description}),u.jsx(xr,{onClick:e.action,disabled:i,size:"sm",className:e.primary?"bg-cyan-500 hover:bg-cyan-600 text-black":"bg-white/10 hover:bg-white/20 text-white border-white/20",children:e.title})]})]})},t)})}),u.jsxs("div",{className:"bg-black/10 backdrop-blur-lg border border-white/10 rounded-xl p-4",children:[u.jsxs("h5",{className:"font-medium text-white mb-3 flex items-center gap-2",children:[u.jsx(nn,{className:"w-4 h-4 text-yellow-400"}),"Troubleshooting Tips"]}),u.jsxs("ul",{className:"text-sm text-white/70 space-y-2 list-disc list-inside",children:[u.jsx("li",{children:"Ensure the YouTube video is public and has audio content"}),u.jsx("li",{children:"Check your internet connection stability"}),u.jsx("li",{children:"Try videos that are shorter than 10 minutes for better performance"}),u.jsx("li",{children:"Clear your browser cache if you continue experiencing issues"}),u.jsx("li",{children:"Some videos may have restrictions that prevent audio extraction"})]})]}),r&&u.jsxs("div",{className:"bg-black/10 backdrop-blur-lg border border-white/10 rounded-xl p-4",children:[u.jsx("h5",{className:"font-medium text-white mb-2",children:"Current Video"}),u.jsx("div",{className:"text-sm text-white/60 break-all",children:r}),u.jsx("div",{className:"flex gap-2 mt-3",children:u.jsxs(xr,{onClick:a,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(St,{className:"w-3 h-3 mr-1"}),"Open in YouTube"]})})]})]})},CR=m.memo(function({isPlaying:e=!1,bpm:t=120,onPlay:n,onStop:r,onBpmChange:i,className:s=""}){const[a,o]=m.useState(t),[l,c]=m.useState(!1),d=((e,t)=>{const n=m.useRef(null);return m.useCallback((...r)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...r)},t)},[e,t])})(e=>{i?.(e)},300);m.useEffect(()=>{l||o(t)},[t,l]);const h=m.useCallback(()=>{e?r?.():n?.()},[e,n,r]),f=m.useCallback(e=>{const t=e.target.value;o(t)},[]),p=m.useCallback(()=>{c(!1);const e=parseInt(a,10);isNaN(e)||e<60||e>200?o(t):e!==t&&d(e)},[a,t,d]),g=m.useCallback(()=>{c(!0)},[]),y=m.useCallback(e=>{"Enter"===e.key&&e.target.blur()},[]);m.useEffect(()=>{const e=e=>{"Space"!==e.code||l||"INPUT"===e.target.tagName||(e.preventDefault(),h())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[h,l]);const v=m.useMemo(()=>e?"bg-red-500 hover:bg-red-600 text-white font-bold":"bg-green-500 hover:bg-green-600 text-white font-bold",[e]),b=m.useMemo(()=>`w-16 px-2 py-1 bg-white/10 border rounded text-white text-sm text-center\n      transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-400/50\n      ${l?"border-cyan-400/50 bg-white/15":"border-white/20"}\n      hover:bg-white/15`,[l]);return u.jsxs("div",{className:`flex items-center gap-4 ${s}`,children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(xr,{onClick:h,className:v,size:"default",children:e?u.jsxs(u.Fragment,{children:[u.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Stop"]}):u.jsxs(u.Fragment,{children:[u.jsx($t,{className:"w-4 h-4 mr-2"}),"Play"]})})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{htmlFor:"bpm-input",className:"text-sm font-medium text-white/80 min-w-[32px]",children:"BPM:"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{id:"bpm-input",type:"number",min:"60",max:"200",value:a,onChange:f,onBlur:p,onFocus:g,onKeyDown:y,className:b}),l&&u.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 \r\n              bg-black/80 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"60-200 BPM"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[u.jsx("div",{className:"w-2 h-2 rounded-full transition-all duration-300 "+(e?"bg-green-400 animate-pulse":"bg-gray-400")}),u.jsx("span",{className:"text-xs text-white/60",children:e?"Playing":"Stopped"})]})]})}),ER=m.memo(function({pattern:t=null,currentStep:n=0,isPlaying:r=!1,onStepToggle:i,onStepVelocityChange:s,className:a=""}){const o=m.useRef(null),l=m.useRef(null),c=m.useRef(new Map),[d,h]=m.useState(new Set),[f,p]=m.useState({start:0,end:15}),[g,y]=m.useState({frameTime:0,droppedFrames:0});m.useEffect(()=>(o.current||(o.current=new e),()=>{o.current&&o.current.cleanup()}),[]);const v=m.useMemo(()=>t&&t.tracks?t.tracks.map(e=>({id:e.id,name:e.name||`Track ${e.id}`,steps:e.steps||Array(16).fill({active:!1,velocity:100}),color:e.color||"#3b82f6"})):[],[t]),b=m.useCallback((e,t)=>{if(!o.current)return;const n=`${e}-${t}`,r=c.current.get(n);r&&o.current.scheduleUpdate(()=>{const e=!r.dataset.active;r.dataset.active=e,x(r,e,!1)},`toggle-${n}`),i?.(e,t)},[i]),w=m.useCallback((e,t,n)=>{if(!o.current)return;const r=`${e}-${t}`,i=c.current.get(r);i&&o.current.scheduleUpdate(()=>{i.style.opacity=n/127},`velocity-${r}`),s?.(e,t,n)},[s]),x=m.useCallback((e,t,n)=>{if(!e)return;let i,s,a;n&&r?(i="#f59e0b",s="translateZ(0) scale(1.1)",a="0 0 10px rgba(245, 158, 11, 0.5)"):t?(i="#10b981",s="translateZ(0) scale(1)",a="0 2px 4px rgba(16, 185, 129, 0.3)"):(i="#374151",s="translateZ(0) scale(1)",a="none"),e.style.backgroundColor=i,e.style.transform=s,e.style.boxShadow=a},[r]),S=m.useCallback((e,t,i)=>{if(!o.current)return null;const s=o.current.createOptimizedStepIndicator(t,t===n&&r,i.active),a=`${e}-${t}`;return s.dataset.trackId=e,s.dataset.stepIndex=t,s.dataset.active=i.active,s.dataset.stepKey=a,s.addEventListener("click",()=>{b(e,t)}),s.addEventListener("contextmenu",n=>{n.preventDefault();const r=127===i.velocity?64:127;w(e,t,r)}),o.current.optimizeElement(s),c.current.set(a,s),s},[n,r,b,w]),k=m.useCallback((e,t)=>{const n=document.createElement("div");n.className="sequencer-track-row",n.style.cssText="\n      display: flex;\n      align-items: center;\n      padding: 8px;\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      min-height: 60px;\n    ";const r=document.createElement("div");r.className="track-label",r.textContent=e.name,r.style.cssText="\n      width: 120px;\n      color: white;\n      font-size: 14px;\n      font-weight: 500;\n      padding-right: 16px;\n      flex-shrink: 0;\n    ",n.appendChild(r);const i=document.createElement("div");return i.className="steps-container",i.style.cssText="\n      display: flex;\n      gap: 4px;\n      flex: 1;\n    ",e.steps.forEach((t,n)=>{if(n>=f.start&&n<=f.end){const r=S(e.id,n,t);r&&i.appendChild(r)}}),n.appendChild(i),n},[f,S]);m.useEffect(()=>{o.current&&o.current.scheduleUpdate(()=>{c.current.forEach((e,t)=>{const r=parseInt(e.dataset.stepIndex),i="true"===e.dataset.active;x(e,i,r===n)})},`current-step-${n}`)},[n,x]);const C=m.useCallback(()=>{if(!l.current||!o.current)return;const e=l.current;e.innerHTML="";const t=o.current.createVirtualScrollContainer(v,(e,t)=>k(e,t),60);e.appendChild(t)},[v,k]);return m.useEffect(()=>{C()},[C]),m.useEffect(()=>{if(!o.current)return;const e=setInterval(()=>{const e=o.current.getPerformanceMetrics();y(e),e.droppedFrames},2e3);return()=>clearInterval(e)},[]),m.useEffect(()=>()=>{c.current.clear()},[]),u.jsxs("div",{className:`optimized-sequencer-grid ${a}`,children:[g.droppedFrames>0&&u.jsxs("div",{className:"performance-warning",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(239, 68, 68, 0.9)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",zIndex:10},children:["Performance: ",g.droppedFrames," dropped frames"]}),u.jsx("div",{ref:l,className:"grid-container",style:{width:"100%",height:"400px",overflow:"auto",background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}}),u.jsx("div",{className:"step-indicators",style:{display:"flex",justifyContent:"center",gap:"4px",marginTop:"8px",padding:"0 136px"},children:Array.from({length:16},(e,t)=>u.jsx("div",{className:"step-indicator "+(t===n?"active":""),style:{width:"20px",height:"4px",backgroundColor:t===n&&r?"#f59e0b":"#374151",borderRadius:"2px",transition:"background-color 0.1s ease"}},t))})]})}),TR=m.memo(function({service:e=null,isVisible:t=!1,onToggle:n,className:r=""}){const[i,s]=m.useState({engine:{jitter:0,drift:0,cpuUsage:0},renderer:{frameTime:0,droppedFrames:0,renderCalls:0},service:{activeChops:0,totalChops:0,config:{}}}),[a,o]=m.useState("good"),[l,c]=m.useState([]),[d,h]=m.useState(!0),[f,p]=m.useState("balanced"),g=m.useCallback(()=>{if(e&&"function"==typeof e.getPerformanceMetrics)try{const t=e.getPerformanceMetrics();s(t),y(t)}catch(kM){}},[e]),y=m.useCallback(e=>{const t=[];let n="good";e.engine.jitter>20?(t.push({type:"critical",message:"High audio jitter detected",recommendation:"Reduce concurrent chops or increase buffer size"}),n="critical"):e.engine.jitter>10&&(t.push({type:"warning",message:"Moderate audio jitter",recommendation:"Consider reducing visual effects or background processes"}),"critical"!==n&&(n="warning")),e.renderer.droppedFrames>10?(t.push({type:"critical",message:"High number of dropped frames",recommendation:"Enable hardware acceleration or reduce visual complexity"}),n="critical"):e.renderer.droppedFrames>3&&(t.push({type:"warning",message:"Some frames dropped",recommendation:"Close unnecessary browser tabs or applications"}),"critical"!==n&&(n="warning")),e.service.activeChops>6&&(t.push({type:"warning",message:"High number of concurrent chops",recommendation:"Limit simultaneous chop playback for better performance"}),"critical"!==n&&(n="warning")),o(n),c(t),d&&"good"!==n&&v(e,n)},[d]),v=m.useCallback((t,n)=>{if(e&&void 0!==e.performanceConfig)try{const t={...e.performanceConfig};let r=!1;"critical"===n?"aggressive"===f?(t.maxConcurrentChops=Math.max(2,t.maxConcurrentChops-2),t.renderThrottle=Math.max(33,t.renderThrottle+8),r=!0):"balanced"===f&&(t.maxConcurrentChops=Math.max(4,t.maxConcurrentChops-1),t.renderThrottle=Math.max(20,t.renderThrottle+4),r=!0):"warning"===n&&"conservative"!==f&&(t.maxConcurrentChops=Math.max(4,t.maxConcurrentChops-1),r=!0),r&&(e.performanceConfig=t)}catch(kM){}},[e,f]),b=m.useCallback(t=>{if(e)try{const n={...e.performanceConfig};switch(t){case"reduce_chops":n.maxConcurrentChops=Math.max(2,n.maxConcurrentChops-1);break;case"increase_chops":n.maxConcurrentChops=Math.min(8,n.maxConcurrentChops+1);break;case"reduce_quality":n.renderThrottle=Math.max(33,n.renderThrottle+8);break;case"increase_quality":n.renderThrottle=Math.max(16,n.renderThrottle-8);break;case"reset":n.maxConcurrentChops=6,n.renderThrottle=16,n.audioLookahead=25}e.performanceConfig=n}catch(kM){}},[e]);m.useEffect(()=>{if(!t)return;const e=setInterval(g,1e3);return g(),()=>clearInterval(e)},[t,g]);const w=m.useCallback(e=>{switch(e){case"good":return"#10b981";case"warning":return"#f59e0b";case"critical":return"#ef4444";default:return"#6b7280"}},[]),x=m.useCallback(e=>{switch(e){case"good":return gt;case"warning":case"critical":return nn;default:return lt}},[]);if(!t)return u.jsx("button",{onClick:n,className:"performance-toggle",style:{position:"fixed",bottom:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"50%",background:w(a),border:"none",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",zIndex:1e3},children:u.jsx(lt,{className:"w-6 h-6"})});const S=x(a);return u.jsxs("div",{className:`performance-dashboard ${r}`,style:{position:"fixed",bottom:"20px",right:"20px",width:"400px",maxHeight:"600px",background:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",color:"white",fontSize:"14px",overflow:"auto",zIndex:1e3},children:[u.jsxs("div",{className:"dashboard-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx(S,{className:"w-5 h-5",style:{color:w(a)}}),u.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600"},children:"Performance Dashboard"})]}),u.jsx("button",{onClick:n,style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"4px"},children:""})]}),u.jsxs("div",{className:"status-overview",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:w(a)}}),u.jsxs("span",{style:{fontWeight:"500",textTransform:"capitalize"},children:[a," Performance"]})]}),l.length>0&&u.jsxs("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:[l.length," recommendation",l.length>1?"s":""," available"]})]}),u.jsxs("div",{className:"metrics-section",style:{marginBottom:"16px"},children:[u.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"500"},children:"Real-time Metrics"}),u.jsxs("div",{className:"metrics-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[u.jsxs("div",{className:"metric-card",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",padding:"8px"},children:[u.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Audio Jitter"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[i.engine.jitter.toFixed(1),"ms"]})]}),u.jsxs("div",{className:"metric-card",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",padding:"8px"},children:[u.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Dropped Frames"}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"600"},children:i.renderer.droppedFrames})]}),u.jsxs("div",{className:"metric-card",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",padding:"8px"},children:[u.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Active Chops"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[i.service.activeChops,"/",i.service.config.maxConcurrentChops||6]})]}),u.jsxs("div",{className:"metric-card",style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",padding:"8px"},children:[u.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:"Frame Time"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"600"},children:[i.renderer.frameTime.toFixed(1),"ms"]})]})]})]}),l.length>0&&u.jsxs("div",{className:"recommendations-section",style:{marginBottom:"16px"},children:[u.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"500"},children:"Recommendations"}),l.map((e,t)=>u.jsxs("div",{className:"recommendation",style:{background:"critical"===e.type?"rgba(239, 68, 68, 0.1)":"rgba(245, 158, 11, 0.1)",border:"1px solid "+("critical"===e.type?"rgba(239, 68, 68, 0.3)":"rgba(245, 158, 11, 0.3)"),borderRadius:"6px",padding:"8px",marginBottom:"8px"},children:[u.jsx("div",{style:{fontWeight:"500",marginBottom:"4px"},children:e.message}),u.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.7)"},children:e.recommendation})]},t))]}),u.jsxs("div",{className:"controls-section",children:[u.jsx("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"500"},children:"Optimization Controls"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[u.jsx("span",{children:"Auto-optimize"}),u.jsx("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:u.jsx("input",{type:"checkbox",checked:d,onChange:e=>h(e.target.checked),style:{marginRight:"8px"}})})]}),u.jsxs("div",{style:{marginBottom:"12px"},children:[u.jsx("label",{style:{display:"block",marginBottom:"4px"},children:"Optimization Level"}),u.jsxs("select",{value:f,onChange:e=>p(e.target.value),style:{width:"100%",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"white"},children:[u.jsx("option",{value:"conservative",children:"Conservative"}),u.jsx("option",{value:"balanced",children:"Balanced"}),u.jsx("option",{value:"aggressive",children:"Aggressive"})]})]}),u.jsxs("div",{className:"manual-controls",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[u.jsx("button",{onClick:()=>b("reduce_chops"),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"4px",padding:"6px",color:"white",cursor:"pointer",fontSize:"12px"},children:"Reduce Chops"}),u.jsx("button",{onClick:()=>b("increase_chops"),style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"4px",padding:"6px",color:"white",cursor:"pointer",fontSize:"12px"},children:"Increase Chops"}),u.jsx("button",{onClick:()=>b("reduce_quality"),style:{background:"rgba(245, 158, 11, 0.2)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"4px",padding:"6px",color:"white",cursor:"pointer",fontSize:"12px"},children:"Reduce Quality"}),u.jsx("button",{onClick:()=>b("reset"),style:{background:"rgba(107, 114, 128, 0.2)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"4px",padding:"6px",color:"white",cursor:"pointer",fontSize:"12px"},children:"Reset"})]})]})]})}),_R=m.memo(function({currentBank:e=0,totalBanks:t=2,onBankChange:n,chopsPerBank:r=[],className:i=""}){const s=m.useMemo(()=>["A","B","C","D"],[]),a=m.useMemo(()=>({currentBankLabel:s[e]||"A",currentChopCount:r[e]||0,canGoPrevious:e>0,canGoNext:e<t-1}),[e,t,r,s]),o=m.useMemo(()=>"p-1.5 h-8 w-8 transition-colors duration-200 "+(a.canGoPrevious?"text-white/80 hover:text-white hover:bg-white/10":"text-white/30 cursor-not-allowed"),[a.canGoPrevious]),l=m.useMemo(()=>"p-1.5 h-8 w-8 transition-colors duration-200 "+(a.canGoNext?"text-white/80 hover:text-white hover:bg-white/10":"text-white/30 cursor-not-allowed"),[a.canGoNext]);return u.jsxs("div",{className:`flex items-center gap-2 ${i}`,children:[u.jsx(xr,{onClick:()=>{a.canGoPrevious&&n?.(e-1)},disabled:!a.canGoPrevious,variant:"ghost",size:"sm",className:o,title:"Previous Bank",children:u.jsx(ht,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/10 border border-white/20 rounded-md min-w-[100px] justify-center",children:[u.jsxs("span",{className:"text-sm font-medium text-white",children:["Bank ",a.currentBankLabel]}),u.jsxs("span",{className:"text-xs text-white/60",children:["(",a.currentChopCount,"/16)"]})]}),u.jsx(xr,{onClick:()=>{a.canGoNext&&n?.(e+1)},disabled:!a.canGoNext,variant:"ghost",size:"sm",className:l,title:"Next Bank",children:u.jsx(ft,{className:"w-4 h-4"})}),u.jsx("div",{className:"flex items-center gap-1 ml-2",children:Array.from({length:t},(t,r)=>u.jsx("div",{className:"w-1.5 h-1.5 rounded-full transition-colors duration-200 cursor-pointer "+(r===e?"bg-cyan-400":"bg-white/30 hover:bg-white/50"),onClick:()=>n?.(r),title:`Bank ${s[r]}`},r))})]})}),NR=m.memo(function({onTempoCalculated:e,currentBpm:t}){const[n,r]=m.useState([]),[i,s]=m.useState(!1),a=m.useRef(null);m.useEffect(()=>()=>{a.current&&clearTimeout(a.current)},[]),m.useEffect(()=>{const e=e=>{"Space"===e.code&&"INPUT"!==e.target.tagName&&(e.preventDefault(),f())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const o=m.useCallback(()=>{r([]),s(!1),a.current&&(clearTimeout(a.current),a.current=null)},[]),l=m.useCallback(e=>{if(e.length<4)return null;const t=[];for(let i=1;i<e.length;i++)t.push(e[i]-e[i-1]);const n=t.reduce((e,t)=>e+t,0)/t.length,r=Math.round(6e4/n);return Math.max(60,Math.min(200,r))},[]),c=m.useMemo(()=>{const e=n.length;return{tapCount:e,needsMoreTaps:e<4}},[n.length]),d=m.useMemo(()=>{const e="px-3 py-1.5 text-xs font-medium rounded-md border transition-colors duration-150";return i?`${e} bg-cyan-500/20 border-cyan-400 text-cyan-300 shadow-sm ${c.needsMoreTaps?"animate-pulse":""}`:`${e} bg-gray-800/50 border-gray-600 text-gray-300 hover:bg-gray-700/50`},[i,c.needsMoreTaps]),h=m.useMemo(()=>c.needsMoreTaps&&c.tapCount>0?`${c.tapCount}/4`:t||"---",[c.needsMoreTaps,c.tapCount,t]),f=m.useCallback(()=>{const t=Date.now();r(n=>{const r=[...n,t];if(r.length>8&&r.shift(),r.length>=4){const t=l(r);t&&e&&e(t)}return r}),s(!0),a.current&&clearTimeout(a.current),a.current=setTimeout(o,3e3)},[l,e,o]);return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:f,className:d,title:`Tap Tempo (Space) - ${c.tapCount}/4 taps`,children:"TAP"}),u.jsx("div",{className:"text-xs text-gray-400 min-w-[60px]",children:c.needsMoreTaps&&c.tapCount>0?u.jsx("span",{className:"opacity-60",children:h}):u.jsx("span",{className:"text-cyan-300 font-medium",children:h})})]})});class IR extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,degradedMode:!1,lastErrorTime:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,lastErrorTime:Date.now()}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,hasError:!0}),this.props.onError&&this.props.onError(e,t),this.attemptAutoRecovery(e)}attemptAutoRecovery=async e=>{const t=this.getErrorType(e);"youtube"!==t&&"timing"!==t&&"network"!==t||setTimeout(()=>{this.handleRetry()},2e3)};handleRetry=async()=>{this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});try{this.props.onRetry&&await this.props.onRetry(),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,degradedMode:!1})},100)}catch(e){this.state.retryCount>=2?this.setState({isRetrying:!1,degradedMode:!0,error:e}):this.setState({isRetrying:!1,error:e})}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,degradedMode:!1,lastErrorTime:null}),this.props.onReset&&this.props.onReset()};handleDegradedMode=()=>{this.setState({hasError:!1,degradedMode:!0}),this.props.onDegradedMode&&this.props.onDegradedMode()};getErrorType(e){const t=`${e?.message?.toLowerCase()||""} ${e?.stack?.toLowerCase()||""}`;return t.includes("youtube")||t.includes("player")||t.includes("video")?"youtube":t.includes("timing")||t.includes("sequencer")||t.includes("step")?"timing":t.includes("pattern")||t.includes("validation")||t.includes("data")?"pattern":t.includes("chop")||t.includes("assignment")||t.includes("track")?"chop":t.includes("network")||t.includes("fetch")||t.includes("cors")?"network":t.includes("audio")||t.includes("context")||t.includes("decode")?"audio":"unknown"}getErrorDetails(e,t){const n=navigator.onLine;switch(e){case"youtube":return{icon:ln,title:"YouTube Player Error",description:"Unable to control YouTube video playback. The video might be unavailable or restricted.",suggestions:["Check if the YouTube video is still available","Try refreshing the page","Ensure the video is public and not restricted","Continue in degraded mode (sequencer only, no video control)"],canRetry:!0,canDegrade:!0,severity:"warning"};case"timing":return{icon:nn,title:"Sequencer Timing Error",description:"The sequencer timing engine encountered an issue. This might affect playback accuracy.",suggestions:["Try reducing the BPM for better stability","Close other browser tabs to free up resources","Restart the sequencer","Continue with reduced timing precision"],canRetry:!0,canDegrade:!0,severity:"warning"};case"pattern":return{icon:nn,title:"Pattern Data Error",description:"Invalid or corrupted pattern data detected. The pattern might not load correctly.",suggestions:["Try creating a new pattern","Clear the current pattern and start over","Check if the pattern data is valid","Reset to default pattern"],canRetry:!0,canDegrade:!1,severity:"error"};case"chop":return{icon:on,title:"Chop Integration Error",description:"Unable to integrate chops with the sequencer. Some chops might not trigger correctly.",suggestions:["Try recreating the affected chops","Refresh the chop assignments","Check if the chops have valid timestamps","Continue with manual chop assignment"],canRetry:!0,canDegrade:!0,severity:"warning"};case"network":return{icon:n?un:cn,title:"Network Connection Error",description:n?"Unable to connect to required services. Some features might not work.":"You appear to be offline. The sequencer will work in offline mode.",suggestions:[n?"Check your internet connection":"Connect to the internet for full functionality","Try refreshing the page","Continue in offline mode (limited functionality)"],canRetry:!0,canDegrade:!0,severity:"warning"};case"audio":return{icon:ln,title:"Audio System Error",description:"The audio system encountered an error. This might affect sound playback.",suggestions:["Check your browser audio permissions","Try refreshing the page","Ensure your browser supports Web Audio API","Continue in silent mode (visual sequencer only)"],canRetry:!0,canDegrade:!0,severity:"warning"};default:return{icon:nn,title:"Sequencer System Error",description:t?.message||"An unexpected error occurred in the sampler sequencer.",suggestions:["Try refreshing the page","Clear your browser cache","Try a different browser if the issue persists","Continue in safe mode with limited features"],canRetry:!0,canDegrade:!0,severity:"error"}}}render(){if(!this.state.hasError&&!this.state.degradedMode)return this.props.children;if(this.state.degradedMode)return u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mb-4",children:u.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[u.jsx(nn,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:"Running in Safe Mode - Some features may be limited"}),u.jsx("button",{onClick:this.handleReset,className:"ml-auto text-xs px-2 py-1 bg-yellow-500/20 rounded hover:bg-yellow-500/30 transition-colors",children:"Try Full Mode"})]})}),this.props.children]});const e=this.getErrorType(this.state.error),t=this.getErrorDetails(e,this.state.error),n=t.icon;return u.jsx("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-6",children:u.jsx("div",{className:`border border-${"error"===t.severity?"red":"yellow"}-400/20 bg-${"error"===t.severity?"red":"yellow"}-400/10 rounded-xl p-4`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(n,{className:`w-5 h-5 text-${"error"===t.severity?"red":"yellow"}-400 mt-0.5 flex-shrink-0`}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:`font-semibold text-${"error"===t.severity?"red":"yellow"}-200`,children:t.title}),u.jsx("p",{className:`text-sm mt-1 text-${"error"===t.severity?"red":"yellow"}-300`,children:t.description})]}),t.suggestions.length>0&&u.jsxs("div",{children:[u.jsx("p",{className:`text-sm font-medium mb-2 text-${"error"===t.severity?"red":"yellow"}-200`,children:"What you can do:"}),u.jsx("ul",{className:`text-sm space-y-1 list-disc list-inside ml-2 text-${"error"===t.severity?"red":"yellow"}-300`,children:t.suggestions.map((e,t)=>u.jsx("li",{children:e},t))})]}),u.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[t.canRetry&&u.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying,className:"flex items-center gap-1 px-3 py-1.5 bg-cyan-500 hover:bg-cyan-600 disabled:bg-cyan-500/50 text-black text-sm rounded transition-colors",children:this.state.isRetrying?u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 animate-spin"}),"Retrying..."]}):u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3"}),"Try Again ",this.state.retryCount>0&&`(${this.state.retryCount+1})`]})}),t.canDegrade&&u.jsxs("button",{onClick:this.handleDegradedMode,className:"flex items-center gap-1 px-3 py-1.5 bg-yellow-500/20 hover:bg-yellow-500/30 border border-yellow-500/40 text-yellow-300 text-sm rounded transition-colors",children:[u.jsx($t,{className:"w-3 h-3"}),"Safe Mode"]}),u.jsx("button",{onClick:this.handleReset,className:"flex items-center gap-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/20 text-white/80 text-sm rounded transition-colors",children:"Reset"})]}),this.state.retryCount>=3&&u.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2 mt-3",children:u.jsx("p",{className:"text-xs text-red-300",children:"Multiple errors detected. Consider refreshing the page or trying a different video."})}),!1]})]})})})}}function AR({errors:e=[],onDismiss:t,onRetry:n,maxVisible:r=3,autoHideDelay:i=5e3}){const[s,a]=m.useState([]),[o,l]=m.useState(new Set);m.useEffect(()=>{const t=e.filter(e=>!o.has(e.id)).slice(0,r).map(e=>({...e,timestamp:e.timestamp||Date.now()}));a(t)},[e,o,r]),m.useEffect(()=>{i>0&&s.forEach(e=>{if(!1!==e.autoHide){const t=setTimeout(()=>{c(e.id)},i);return()=>clearTimeout(t)}})},[s,i]);const c=m.useCallback(e=>{l(t=>new Set([...t,e])),t&&t(e)},[t]),d=m.useCallback(e=>{n&&n(e),c(e)},[n,c]);return 0===s.length?null:u.jsxs("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:[s.map(e=>{const t=((e,t)=>{switch(e){case"youtube":return"error"===t?ln:on;case"network":return navigator.onLine?un:cn;case"timing":case"pattern":case"chop":return nn;default:return"error"===t?mt:It}})(e.type,e.severity),n=(e=>{switch(e){case"error":return{bg:"bg-red-500/10",border:"border-red-500/20",text:"text-red-200",icon:"text-red-400"};case"warning":return{bg:"bg-yellow-500/10",border:"border-yellow-500/20",text:"text-yellow-200",icon:"text-yellow-400"};case"info":return{bg:"bg-blue-500/10",border:"border-blue-500/20",text:"text-blue-200",icon:"text-blue-400"};case"success":return{bg:"bg-green-500/10",border:"border-green-500/20",text:"text-green-200",icon:"text-green-400"};default:return{bg:"bg-gray-500/10",border:"border-gray-500/20",text:"text-gray-200",icon:"text-gray-400"}}})(e.severity);return u.jsx("div",{className:`${n.bg} ${n.border} border backdrop-blur-lg rounded-lg p-4 shadow-lg animate-in slide-in-from-right duration-300`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(t,{className:`w-5 h-5 ${n.icon} mt-0.5 flex-shrink-0`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:`font-medium ${n.text} text-sm`,children:e.title}),e.message&&u.jsx("p",{className:`text-xs mt-1 ${n.text} opacity-80`,children:e.message})]}),u.jsx("button",{onClick:()=>c(e.id),className:`${n.icon} hover:opacity-80 transition-opacity`,children:u.jsx(dn,{className:"w-4 h-4"})})]}),(e.canRetry||e.actions)&&u.jsxs("div",{className:"flex gap-2 mt-3",children:[e.canRetry&&u.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center gap-1 px-2 py-1 bg-white/10 hover:bg-white/20 rounded text-xs transition-colors",children:[u.jsx(qt,{className:"w-3 h-3"}),"Retry"]}),e.actions?.map((t,n)=>u.jsx("button",{onClick:()=>{t.handler(),t.dismissAfter&&c(e.id)},className:"px-2 py-1 bg-white/10 hover:bg-white/20 rounded text-xs transition-colors",children:t.label},n))]}),!1!==e.autoHide&&i>0&&u.jsx("div",{className:"mt-2 h-1 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-white/30 rounded-full animate-pulse",style:{animation:`shrink ${i}ms linear forwards`}})})]})]})},e.id)}),e.length>r&&u.jsx("div",{className:"bg-gray-500/10 border border-gray-500/20 backdrop-blur-lg rounded-lg p-2 text-center",children:u.jsxs("span",{className:"text-xs text-gray-300",children:["+",e.length-r," more error",e.length-r!==1?"s":""]})}),u.jsx("style",{jsx:!0,children:"\n        @keyframes shrink {\n          from { width: 100%; }\n          to { width: 0%; }\n        }\n      "})]})}const PR=m.memo(function({progress:e=0,stage:t="initializing",className:n=""}){const r={initializing:{icon:Mt,text:"Initializing Sampler Sequencer...",color:"cyan"},connecting:{icon:Ut,text:"Connecting to YouTube Player...",color:"blue"},loading_chops:{icon:Tt,text:"Loading Chop Data...",color:"green"},ready:{icon:$t,text:"Ready to Sequence!",color:"emerald"}},i=r[t]||r.initializing,s=i.icon;return u.jsx("div",{className:`bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-6 ${n}`,children:u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(s,{className:`w-8 h-8 text-${i.color}-400 ${"ready"!==t?"animate-spin":"animate-pulse"}`}),e>0&&u.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2",children:u.jsx("div",{className:"w-16 h-1 bg-white/20 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full bg-${i.color}-400 transition-all duration-300 ease-out`,style:{width:`${e}%`}})})})]}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("span",{className:"text-white/80 font-medium",children:i.text}),e>0&&u.jsxs("div",{className:"text-xs text-white/60",children:[Math.round(e),"% complete"]})]}),u.jsxs("div",{className:"text-xs text-white/50 text-center max-w-md",children:["initializing"===t&&"Setting up sequencer engine and pattern management...","connecting"===t&&"Establishing connection with video player for timestamp control...","loading_chops"===t&&"Processing your chops and assigning them to sequencer tracks...","ready"===t&&"All systems ready! Start creating patterns with your chops."]})]})})});m.memo(function({text:e="Loading...",size:t="sm",className:n=""}){return u.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[u.jsx(Mt,{className:`${{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[t]} text-cyan-400 animate-spin`}),u.jsx("span",{className:"text-white/70 text-sm",children:e})]})}),m.memo(function({className:e=""}){return u.jsxs("div",{className:`bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-4 ${e}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"h-5 bg-white/10 rounded w-32 animate-pulse"}),u.jsx("div",{className:"h-4 bg-white/10 rounded w-24 animate-pulse"})]}),u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[u.jsx("div",{className:"w-12 h-4 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"flex gap-1 flex-1",children:Array.from({length:16},(e,t)=>u.jsx("div",{className:"flex-1 h-4 bg-white/10 rounded animate-pulse"},t))})]}),u.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[u.jsx("div",{className:"w-12"}),u.jsx("div",{className:"flex gap-1 flex-1",children:Array.from({length:16},(e,t)=>u.jsx("div",{className:"flex-1 h-1 bg-white/10 rounded animate-pulse"},t))})]}),u.jsx("div",{className:"space-y-1",children:Array.from({length:16},(e,t)=>u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-12 h-8 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"flex gap-1 flex-1",children:Array.from({length:16},(e,n)=>u.jsx("div",{className:"flex-1 h-8 bg-white/10 rounded animate-pulse",style:{animationDelay:50*(16*t+n)+"ms"}},n))})]},t))})]})}),m.memo(function({className:e=""}){return u.jsxs("div",{className:`flex items-center gap-4 ${e}`,children:[u.jsx("div",{className:"h-10 w-20 bg-white/10 rounded animate-pulse"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-4 w-8 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"h-8 w-16 bg-white/10 rounded animate-pulse"})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[u.jsx("div",{className:"w-2 h-2 bg-white/10 rounded-full animate-pulse"}),u.jsx("div",{className:"h-4 w-16 bg-white/10 rounded animate-pulse"})]})]})}),m.memo(function({className:e=""}){return u.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[u.jsx("div",{className:"h-8 w-8 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"h-8 w-24 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"h-8 w-8 bg-white/10 rounded animate-pulse"}),u.jsx("div",{className:"flex items-center gap-1 ml-2",children:Array.from({length:4},(e,t)=>u.jsx("div",{className:"w-1.5 h-1.5 bg-white/10 rounded-full animate-pulse"},t))})]})}),m.memo(function({title:e="Loading Failed",message:t="Unable to initialize the sampler sequencer",onRetry:n,className:r=""}){return u.jsx("div",{className:`bg-black/20 backdrop-blur-lg border border-red-500/20 rounded-2xl p-6 ${r}`,children:u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:u.jsx("div",{className:"w-6 h-6 text-red-400",children:""})}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h3",{className:"text-white font-semibold",children:e}),u.jsx("p",{className:"text-white/70 text-sm max-w-md",children:t})]}),n&&u.jsx("button",{onClick:n,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-500/40 \r\n              text-red-300 rounded-lg transition-colors duration-200 text-sm font-medium",children:"Try Again"})]})})});const RR=m.memo(function({isVisible:e=!1,onClose:t,className:n=""}){return m.useEffect(()=>{const n=n=>{"Escape"===n.key&&e&&t?.()};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e,t]),e?u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:u.jsxs("div",{className:`bg-black/80 backdrop-blur-lg border border-white/20 rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto ${n}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(At,{className:"w-6 h-6 text-cyan-400"}),u.jsx("h2",{className:"text-xl font-bold text-white",children:"Keyboard Shortcuts"})]}),u.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors p-1",children:""})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{category:"Transport",items:[{key:"Space",description:"Play/Stop toggle"},{key:"Enter",description:"Play"},{key:"Esc",description:"Stop"},{key:"Ctrl/Cmd + M",description:"Mute toggle"},{key:"Ctrl/Cmd + S",description:"Stop (override save)"}]},{category:"Tempo",items:[{key:"T",description:"Tap tempo"},{key:"Ctrl/Cmd + /",description:"Adjust BPM 1"},{key:"Ctrl/Cmd + Shift + /",description:"Adjust BPM 10"},{key:"Ctrl/Cmd + 1-4",description:"BPM presets (90/120/140/160)"}]},{category:"Navigation",items:[{key:"Shift + /",description:"Switch banks"},{key:"Ctrl/Cmd + B",description:"Cycle through banks"}]},{category:"Grid (Future)",items:[{key:"Click",description:"Toggle step"},{key:"Shift + Click",description:"Multi-select steps"},{key:"Ctrl/Cmd + Click",description:"Add to selection"}]}].map(e=>u.jsxs("div",{className:"space-y-3",children:[u.jsx("h3",{className:"text-lg font-semibold text-cyan-300 border-b border-cyan-400/20 pb-2",children:e.category}),u.jsx("div",{className:"space-y-2",children:e.items.map((e,t)=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-white/80 text-sm",children:e.description}),u.jsx("kbd",{className:"px-2 py-1 bg-white/10 border border-white/20 rounded text-xs font-mono text-white/90",children:e.key})]},t))})]},e.category))}),u.jsx("div",{className:"mt-6 pt-4 border-t border-white/10 text-center",children:u.jsxs("p",{className:"text-white/60 text-sm",children:["Press ",u.jsx("kbd",{className:"px-1 py-0.5 bg-white/10 rounded text-xs",children:"Esc"})," to close this help"]})})]})}):null}),jR=m.memo(function({onShowHelp:e,className:t=""}){return u.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 \n        border border-white/10 hover:border-white/20 rounded-lg transition-all duration-200 \n        text-white/60 hover:text-white/80 text-xs ${t}`,title:"Show keyboard shortcuts",children:[u.jsx(At,{className:"w-3 h-3"}),u.jsx("span",{children:"Shortcuts"})]})}),MR=()=>{const[e,t]=m.useState("desktop"),[n,r]=m.useState({width:0,height:0});m.useEffect(()=>{const e=()=>{const e=window.innerWidth,n=window.innerHeight;r({width:e,height:n}),t(e<640?"mobile":e<1024?"tablet":"desktop")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const i="mobile"===e,s="tablet"===e;return{screenSize:e,dimensions:n,isMobile:i,isTablet:s,isDesktop:"desktop"===e,isSmallScreen:i||s}},DR=m.memo(function({children:e,className:t=""}){const{screenSize:n}=MR(),r=m.useMemo(()=>{const e="w-full";switch(n){case"mobile":return`${e} px-2 py-2 space-y-3`;case"tablet":return`${e} px-4 py-3 space-y-4`;default:return`${e} px-6 py-4 space-y-6`}},[n]);return u.jsxs("div",{className:`${r} ${t}`,children:[!1,e]})});m.memo(function({children:e,className:t=""}){const{screenSize:n}=MR(),r=m.useMemo(()=>"mobile"===n?"gap-0.5":"gap-1",[n]);return u.jsx("div",{className:`${r} ${t}`,children:e})}),m.memo(function({title:e,children:t,defaultExpanded:n=!0,alwaysExpanded:r=!1,className:i=""}){const[s,a]=m.useState(n),{isSmallScreen:o}=MR(),l=o&&!r,c=r||s;return u.jsxs("div",{className:`bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl overflow-hidden ${i}`,children:[u.jsxs("div",{className:"flex items-center justify-between p-4 "+(l?"cursor-pointer hover:bg-white/5":""),onClick:l?()=>a(!s):void 0,children:[u.jsx("h3",{className:"text-lg font-semibold text-white",children:e}),l&&u.jsx("div",{className:"text-white/60",children:s?u.jsx(pt,{className:"w-5 h-5"}):u.jsx(dt,{className:"w-5 h-5"})})]}),c&&u.jsx("div",{className:"px-4 pb-4",children:t})]})});const LR=m.memo(function({transportControls:e,tapTempo:t,bankNavigation:n,className:r=""}){const{screenSize:i}=MR();return"mobile"===i?u.jsxs("div",{className:`space-y-3 ${r}`,children:[u.jsx("div",{className:"flex justify-center",children:e}),u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t,n]})]}):"tablet"===i?u.jsxs("div",{className:`space-y-3 ${r}`,children:[u.jsx("div",{className:"flex justify-center",children:e}),u.jsxs("div",{className:"flex items-center justify-between",children:[t,n]})]}):u.jsxs("div",{className:`flex items-center justify-between gap-4 ${r}`,children:[e,u.jsxs("div",{className:"flex items-center gap-4",children:[t,n]})]})});m.memo(function({className:e=""}){const{screenSize:t}=MR(),n={mobile:Jt,tablet:Xt,desktop:Ft}[t];return u.jsxs("div",{className:`flex items-center gap-2 text-white/60 text-xs ${e}`,children:[u.jsx(n,{className:"w-3 h-3"}),u.jsx("span",{className:"capitalize",children:t})]})}),m.memo(function({mobile:e,tablet:t,desktop:n,className:r=""}){const{screenSize:i}=MR();let s=null;switch(i){case"mobile":s=e;break;case"tablet":s=t||e;break;default:s=n||t||e}return s?u.jsx("div",{className:r,children:s}):null});const OR=m.memo(function({toasts:e=[],onRemove:t,position:n="top-right",className:r=""}){return u.jsx("div",{className:`${{"top-right":"fixed top-4 right-4 z-50","top-left":"fixed top-4 left-4 z-50","bottom-right":"fixed bottom-4 right-4 z-50","bottom-left":"fixed bottom-4 left-4 z-50","top-center":"fixed top-4 left-1/2 transform -translate-x-1/2 z-50","bottom-center":"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50"}[n]} space-y-2 max-w-sm w-full ${r}`,children:e.map(e=>u.jsx(FR,{toast:e,onRemove:()=>t(e.id)},e.id))})}),FR=m.memo(function({toast:e,onRemove:t,className:n=""}){const[r,i]=m.useState(!1);m.useEffect(()=>{const e=setTimeout(()=>i(!0),10);return()=>clearTimeout(e)},[]);const s=m.useCallback(()=>{i(!1),setTimeout(t,200)},[t]),a={success:{icon:ut,bgColor:"bg-green-500/20",borderColor:"border-green-500/40",textColor:"text-green-300",iconColor:"text-green-400"},error:{icon:mt,bgColor:"bg-red-500/20",borderColor:"border-red-500/40",textColor:"text-red-300",iconColor:"text-red-400"},warning:{icon:mt,bgColor:"bg-yellow-500/20",borderColor:"border-yellow-500/40",textColor:"text-yellow-300",iconColor:"text-yellow-400"},info:{icon:It,bgColor:"bg-blue-500/20",borderColor:"border-blue-500/40",textColor:"text-blue-300",iconColor:"text-blue-400"}},o=a[e.type]||a.info,l=o.icon;return u.jsx("div",{className:`\n        ${o.bgColor} ${o.borderColor} ${o.textColor}\n        backdrop-blur-lg border rounded-lg p-3 shadow-lg\n        transform transition-all duration-200 ease-out\n        ${r?"translate-x-0 opacity-100":"translate-x-full opacity-0"}\n        ${n}\n      `,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(l,{className:`w-5 h-5 ${o.iconColor} flex-shrink-0 mt-0.5`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[e.title&&u.jsx("div",{className:"font-medium text-sm mb-1",children:e.title}),u.jsx("div",{className:"text-sm opacity-90",children:e.message}),e.action&&u.jsx("button",{onClick:e.action.handler,className:"mt-2 text-xs underline hover:no-underline opacity-80 hover:opacity-100",children:e.action.label})]}),u.jsx("button",{onClick:s,className:"text-white/60 hover:text-white/80 transition-colors flex-shrink-0",children:""})]})})});m.memo(function({isActive:e=!1,isTriggered:t=!1,hasChop:n=!1,className:r=""}){const[i,s]=m.useState(!1);return m.useEffect(()=>{if(t){s(!0);const e=setTimeout(()=>s(!1),300);return()=>clearTimeout(e)}},[t]),u.jsxs("div",{className:`relative overflow-hidden ${r}`,children:[i&&u.jsx("div",{className:"absolute inset-0 bg-cyan-400/30 rounded animate-ping"}),e&&n&&u.jsx("div",{className:"absolute inset-0 bg-cyan-400/20 rounded animate-pulse"})]})});const UR=m.memo(function({isEnabled:e,onToggle:t,className:n=""}){return u.jsxs("button",{onClick:t,className:`flex items-center gap-2 px-2 py-1 rounded text-xs transition-colors\n        ${e?"text-cyan-300 hover:text-cyan-200 bg-cyan-500/10 hover:bg-cyan-500/20":"text-white/40 hover:text-white/60 bg-white/5 hover:bg-white/10"} ${n}`,title:"Audio feedback "+(e?"enabled":"disabled"),children:[e?u.jsx(on,{className:"w-3 h-3"}):u.jsx(ln,{className:"w-3 h-3"}),u.jsx("span",{children:"Audio"})]})});m.memo(function({progress:e=0,label:t="",showPercentage:n=!0,size:r="md",className:i=""}){return u.jsxs("div",{className:`space-y-2 ${i}`,children:[(t||n)&&u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/70",children:[t&&u.jsx("span",{children:t}),n&&u.jsxs("span",{children:[Math.round(e),"%"]})]}),u.jsx("div",{className:`w-full bg-white/10 rounded-full overflow-hidden ${{sm:"h-1",md:"h-2",lg:"h-3"}[r]}`,children:u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500 transition-all duration-300 ease-out",style:{width:`${Math.max(0,Math.min(100,e))}%`}})})]})});const zR=m.memo(function({status:e="idle",label:t="",pulse:n=!1,className:r=""}){const i={idle:{color:"bg-gray-400",text:"Idle"},loading:{color:"bg-yellow-400",text:"Loading"},playing:{color:"bg-green-400",text:"Playing"},error:{color:"bg-red-400",text:"Error"},success:{color:"bg-emerald-400",text:"Ready"}},s=i[e]||i.idle;return u.jsxs("div",{className:`flex items-center gap-2 ${r}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${s.color} ${n?"animate-pulse":""}`}),u.jsx("span",{className:"text-xs text-white/70",children:t||s.text})]})}),BR=m.memo(function({chops:e=[],activeBank:n="A",youtubePlayer:r=null,onBankChange:i,onServiceRef:s,className:a=""}){const[o,l]=m.useState(!1),[c,d]=m.useState(140),[h,f]=m.useState(0),[p,g]=m.useState(0),[y,v]=m.useState(!1),[b,w]=m.useState(!1),[x,S]=m.useState(null),k=function(){const[e,t]=m.useState([]),[n,r]=m.useState(1),i=m.useCallback(e=>{const i={id:n,timestamp:Date.now(),severity:"error",autoHide:!0,canRetry:!1,...e};return t(e=>[...e,i]),r(e=>e+1),i.id},[n]),s=m.useCallback(e=>i({...e,severity:"warning"}),[i]),a=m.useCallback(e=>i({...e,severity:"info"}),[i]),o=m.useCallback(e=>i({...e,severity:"success",autoHide:!0}),[i]),l=m.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),c=m.useCallback(()=>{t([])},[]),u=m.useCallback((e,t=!0)=>i({type:"youtube",title:"YouTube Player Error",message:e,canRetry:t,actions:t?[]:[{label:"Continue in Safe Mode",handler:()=>{},dismissAfter:!0}]}),[i]),d=m.useCallback((e,t=!0)=>s({type:"timing",title:"Timing Issue",message:e,canRetry:t}),[s]),h=m.useCallback((e,t=!0)=>i({type:"pattern",title:"Pattern Data Error",message:e,canRetry:t}),[i]),f=m.useCallback((e,t=!0)=>s({type:"chop",title:"Chop Integration Error",message:e,canRetry:t}),[s]),p=m.useCallback((e,t=!0)=>s({type:"network",title:"Connection Issue",message:e,canRetry:t}),[s]);return{errors:e,addError:i,addWarning:s,addInfo:a,addSuccess:o,removeError:l,clearAll:c,addYouTubeError:u,addTimingError:d,addPatternError:h,addChopError:f,addNetworkError:p}}(),C=(()=>{const[e,t]=m.useState([]),n=m.useRef(0),r=m.useCallback(e=>{const r=++n.current,i={id:r,type:"info",duration:3e3,...e,timestamp:Date.now()};return t(e=>[...e,i]),i.duration>0&&setTimeout(()=>{t(e=>e.filter(e=>e.id!==r))},i.duration),r},[]),i=m.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),s=m.useCallback(()=>{t([])},[]),a=m.useCallback((e,t={})=>r({type:"success",message:e,...t}),[r]),o=m.useCallback((e,t={})=>r({type:"error",message:e,duration:5e3,...t}),[r]),l=m.useCallback((e,t={})=>r({type:"info",message:e,...t}),[r]),c=m.useCallback((e,t={})=>r({type:"warning",message:e,duration:4e3,...t}),[r]);return{toasts:e,addToast:r,removeToast:i,clearAll:s,success:a,error:o,info:l,warning:c}})(),E=(()=>{const[e,t]=m.useState(!0),n=m.useRef(null);m.useEffect(()=>{if(e&&!n.current)try{"undefined"!=typeof window&&window.AudioContext&&!window.navigator?.userAgent?.includes("jsdom")?n.current=new(window.AudioContext||window.webkitAudioContext):t(!1)}catch(kM){t(!1)}},[e]);const r=m.useCallback((t=800,r=100,i=.1)=>{if(e&&n.current)try{const e=n.current,s=e.createOscillator(),a=e.createGain();s.connect(a),a.connect(e.destination),s.frequency.setValueAtTime(t,e.currentTime),s.type="sine",a.gain.setValueAtTime(0,e.currentTime),a.gain.linearRampToValueAtTime(i,e.currentTime+.01),a.gain.exponentialRampToValueAtTime(.001,e.currentTime+r/1e3),s.start(e.currentTime),s.stop(e.currentTime+r/1e3)}catch(kM){}},[e]),i={stepToggle:()=>r(600,80,.05),play:()=>r(800,120,.08),stop:()=>r(400,150,.08),bankChange:()=>r(1e3,100,.06),error:()=>r(200,200,.1),success:()=>{r(600,100,.05),setTimeout(()=>r(800,100,.05),100)}};return{isEnabled:e,setIsEnabled:t,playTone:r,feedback:i}})(),[T,_]=m.useState(null),[N,I]=m.useState([]),[A,P]=m.useState([0,0,0,0]),[R,j]=m.useState(!1),[M,D]=m.useState("initializing"),[L,O]=m.useState(0),[F,U]=m.useState(!1),z=m.useRef(null),B=m.useRef(!1),{isSmallScreen:V}=MR(),$=(()=>{const{screenSize:e}=MR();return m.useMemo(()=>({title:"mobile"===e?"text-lg":"tablet"===e?"text-xl":"text-2xl",subtitle:"mobile"===e?"text-sm":"text-base",body:"mobile"===e?"text-xs":"text-sm",caption:"text-xs",button:"mobile"===e?"text-sm":"text-base"}),[e])})();m.useRef(0),m.useRef(Date.now()),((e,t=16)=>{const n=m.useRef([]),r=m.useRef(null);m.useCallback(i=>{n.current.push(i),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{const t=n.current;n.current=[],e(e=>t.reduce((e,t)=>"function"==typeof t?t(e):t,e))},t)},[e,t])})(_,16);const H=((e,t)=>{const n=m.useRef(null);return m.useCallback((...r)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{e(...r)},t)},[e,t])})(e=>{if(z.current)try{z.current.setBPM(e),d(e)}catch(xM){Z(xM)}},300),q=m.useMemo(()=>"string"==typeof n?n.charCodeAt(0)-65:n||0,[n]);m.useEffect(()=>{if(!z.current&&!B.current){B.current=!0;(async()=>{try{D("initializing"),O(10);const n=new t;if(z.current=n,O(30),n.onStep((e,t,n)=>{f(e)}),n.onStateChange(e=>{l(e.isPlaying),d(e.bpm),f(e.currentStep)}),n.onError(e=>{Z(e)}),n.youtubeInterface&&n.youtubeInterface.onDegradation(e=>{"degradation"===e.type?(w(!0),S(e.reason),k.addYouTubeError(`YouTube player degraded: ${e.reason}`,!1)):"recovery"===e.type&&(w(!1),S(null),k.addSuccess({title:"YouTube Player Recovered",message:"Full functionality restored"}))}),r){D("connecting"),O(50),await new Promise(e=>setTimeout(e,1e3));await n.initialize(r,e)?(D("loading_chops"),O(80),v(!0),_(n.getCurrentBankPattern()),K(n),D("ready"),O(100),C.success("Sampler sequencer ready!",{title:"Initialization Complete"}),E.feedback.success(),s&&s(n)):ee("Failed to initialize sequencer service")}else D("ready"),O(100),v(!0),w(!0),S("No YouTube player available"),_(n.getCurrentBankPattern()),K(n),C.info("Sequencer ready in safe mode",{title:"Limited functionality - no video control"}),s&&s(n)}catch(xM){ee(`Failed to create sequencer service: ${xM.message}`)}})()}return()=>{z.current&&(z.current.destroy(),z.current=null,s&&s(null)),B.current=!1}},[r]);const K=m.useCallback(t=>{if(!t)return;const n=t.getCurrentBankChops();I(n);const r=[0,0,0,0];e.forEach(e=>{if(e?.padId){const t=e.padId.charCodeAt(0)-65;t>=0&&t<4&&r[t]++}}),P(r)},[e]);m.useEffect(()=>{if(z.current&&y){z.current.updateChopsData(e);const t=z.current.getCurrentBankPattern();if(_(t),K(z.current),z.current.chopIntegration){z.current.chopIntegration.getIntegrationStats()}}},[e,y,K]),m.useEffect(()=>{if(z.current&&y&&q!==p){z.current.switchBank(q),g(q);const e=z.current.getCurrentBankPattern();_(e),K(z.current)}},[q,p,y]);const W=m.useCallback(async()=>{if(z.current&&y)try{await z.current.start()?(C.info("Playback started"),E.feedback.play()):(k.addError({title:"Playback Failed",message:"Unable to start sequencer playback",canRetry:!0}),E.feedback.error())}catch(xM){Z(xM),E.feedback.error()}},[y,C,E]),G=m.useCallback(()=>{if(z.current)try{z.current.stop(),f(0),C.info("Playback stopped"),E.feedback.stop()}catch(xM){Z(xM),E.feedback.error()}},[C,E]),Y=m.useCallback(e=>{d(e),H(e)},[H]),J=m.useCallback((e,t,n)=>{if(z.current)try{if("ASSIGN_CHOPS"===e){if(z.current.chopIntegration){z.current.chopIntegration.reassignAllChops();const e=z.current.getCurrentBankPattern();_(e),K(z.current),C.success("Chops assigned to tracks!"),E.feedback.success()}return}if("CREATE_TEST_CHOPS"===e){const e=[];for(let t=0;t<4;t++)e.push({padId:`A${t+1}`,startTime:10*t,endTime:10*t+5,color:"#06b6d4"});if(z.current){z.current.updateChopsData(e);const t=z.current.getCurrentBankPattern();_(t),K(z.current),C.success("Test chops created and assigned!"),E.feedback.success()}return}z.current.setStep(e,t,n);const r=z.current.getCurrentBankPattern();_(r),E.feedback.stepToggle()}catch(xM){C.error("Failed to toggle step"),E.feedback.error()}},[E,C,N,K]),Q=m.useCallback(e=>{if(z.current)try{z.current.switchBank(e),g(e),K(z.current);const t=String.fromCharCode(65+e);C.info(`Switched to Bank ${t}`,{duration:2e3}),E.feedback.bankChange(),i?.(t)}catch(xM){Z(xM),E.feedback.error()}},[i,K,C,E]),X=m.useCallback(e=>{Y(e),C.success(`Tempo set to ${e} BPM`,{duration:2e3})},[Y,C]),Z=m.useCallback(e=>{const t=e?.message||"Unknown sequencer error";t.toLowerCase().includes("youtube")?k.addYouTubeError(t,!0):t.toLowerCase().includes("timing")?k.addTimingError(t,!0):t.toLowerCase().includes("pattern")?k.addPatternError(t,!0):t.toLowerCase().includes("chop")?k.addChopError(t,!0):t.toLowerCase().includes("network")?k.addNetworkError(t,!0):k.addError({title:"Sequencer Error",message:t,canRetry:!0})},[k]),ee=m.useCallback(e=>{k.addError({title:"Initialization Failed",message:e,canRetry:!0,autoHide:!1,actions:[{label:"Refresh Page",handler:()=>window.location.reload(),dismissAfter:!0}]})},[k]),te=m.useCallback(()=>{w(!0),S("User requested safe mode"),k.addInfo({title:"Safe Mode Enabled",message:"Running with limited functionality for better stability",autoHide:!1})},[k]),ne=m.useCallback(async t=>{try{if(!y&&z.current){await z.current.initialize(r,e)&&(v(!0),k.addSuccess({title:"Recovery Successful",message:"Sequencer has been restored"}))}else if(b&&z.current?.youtubeInterface){await z.current.youtubeInterface.forceRecovery()&&(w(!1),S(null))}}catch(kM){k.addError({title:"Recovery Failed",message:"Unable to recover automatically. Try refreshing the page.",canRetry:!1})}},[y,b,r,e,k]);return(({onPlay:e,onStop:t,onBpmChange:n,onBankChange:r,onStepToggle:i,onTapTempo:s,isPlaying:a=!1,currentBpm:o=120,currentBank:l=0,totalBanks:c=2,isEnabled:u=!0})=>{m.useRef(0),m.useRef(0);const d=m.useRef([]),h=m.useCallback(i=>{if(u&&"INPUT"!==i.target.tagName&&"TEXTAREA"!==i.target.tagName)switch(["Space","Enter","Escape","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Digit1","Digit2","Digit3","Digit4","KeyT","KeyB","KeyM","KeyS"].includes(i.code)&&i.preventDefault(),i.code){case"Space":a?t?.():e?.();break;case"Enter":e?.();break;case"Escape":t?.();break;case"ArrowLeft":i.shiftKey&&l>0&&r?.(l-1);break;case"ArrowRight":i.shiftKey&&l<c-1&&r?.(l+1);break;case"ArrowUp":if(i.ctrlKey||i.metaKey){const e=Math.min(200,o+(i.shiftKey?10:1));n?.(e)}break;case"ArrowDown":if(i.ctrlKey||i.metaKey){const e=Math.max(60,o-(i.shiftKey?10:1));n?.(e)}break;case"Digit1":(i.ctrlKey||i.metaKey)&&n?.(90);break;case"Digit2":(i.ctrlKey||i.metaKey)&&n?.(120);break;case"Digit3":(i.ctrlKey||i.metaKey)&&n?.(140);break;case"Digit4":(i.ctrlKey||i.metaKey)&&n?.(160);break;case"KeyT":i.ctrlKey||i.metaKey||i.altKey||f();break;case"KeyB":(i.ctrlKey||i.metaKey)&&r?.((l+1)%c);break;case"KeyM":(i.ctrlKey||i.metaKey)&&(a?t?.():e?.());break;case"KeyS":(i.ctrlKey||i.metaKey)&&(i.preventDefault(),t?.())}},[u,a,e,t,n,r,o,l,c]),f=m.useCallback(()=>{const e=Date.now();if(d.current.push(e),d.current.length>8&&d.current.shift(),d.current.length>=4){const e=[];for(let n=1;n<d.current.length;n++)e.push(d.current[n]-d.current[n-1]);const t=e.reduce((e,t)=>e+t,0)/e.length,r=Math.round(6e4/t),i=Math.max(60,Math.min(200,r));s?.(i),n?.(i)}setTimeout(()=>{Date.now()-e>=3e3&&(d.current=[])},3e3)},[s,n]);m.useEffect(()=>{if(u)return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[h,u])})({onPlay:W,onStop:G,onBpmChange:Y,onBankChange:Q,onStepToggle:J,onTapTempo:X,isPlaying:o,currentBpm:c,currentBank:p,totalBanks:2,isEnabled:y&&!R}),y?u.jsxs(IR,{onError:Z,onRetry:ne,onDegradedMode:te,onReset:()=>{v(!1),w(!1),S(null),k.clearAll(),z.current&&(z.current.destroy(),z.current=null)},children:[u.jsxs("div",{className:"relative",children:[u.jsx(AR,{errors:k.errors,onDismiss:k.removeError,onRetry:ne,maxVisible:3,autoHideDelay:5e3}),u.jsx(DR,{className:a,children:u.jsxs("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h2",{className:`font-bold text-white ${$.title}`,children:"Sampler Drum Sequencer"}),u.jsxs("div",{className:`text-white/60 ${$.subtitle} flex items-center gap-2 flex-wrap`,children:[u.jsxs("span",{children:["Sequence your YouTube chops  ",e.length," chops loaded"]}),b&&u.jsx("button",{onClick:async()=>{if(z.current?.youtubeInterface){await z.current.youtubeInterface.forceRecovery()?C.success("Safe mode disabled",{duration:3e3}):C.error("Could not exit safe mode",{duration:3e3})}},className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-300 text-xs rounded hover:bg-yellow-500/30 transition-colors cursor-pointer",title:"Click to exit safe mode",children:"Safe Mode "})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(zR,{status:o?"playing":"idle",pulse:o}),!V&&u.jsxs("div",{className:`text-white/60 ${$.caption}`,children:["Bank ",String.fromCharCode(65+p),"  ",A[p],"/16 chops"]}),u.jsx(UR,{isEnabled:E.isEnabled,onToggle:()=>E.setIsEnabled(!E.isEnabled)}),u.jsx(jR,{onShowHelp:()=>j(!0)}),b&&u.jsxs("button",{onClick:async()=>{if(z.current?.youtubeInterface){await z.current.youtubeInterface.forceRecovery()?C.success("Safe mode disabled",{duration:3e3}):C.error("Could not exit safe mode",{duration:3e3})}},className:"flex items-center gap-1 text-xs text-yellow-400 hover:text-yellow-300 transition-colors cursor-pointer",title:"Click to exit safe mode",children:[u.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),"Safe Mode (Click to exit)"]})]})]}),u.jsx("div",{className:"p-4 border-b border-white/10",children:u.jsx(LR,{transportControls:u.jsx(CR,{isPlaying:o,bpm:c,onPlay:W,onStop:G,onBpmChange:Y}),tapTempo:u.jsx(NR,{onTempoCalculated:X,currentBpm:c}),bankNavigation:u.jsx(_R,{currentBank:p,totalBanks:2,onBankChange:Q,chopsPerBank:A})})}),u.jsx("div",{className:"p-4",children:u.jsx(ER,{pattern:T,currentStep:h,isPlaying:o,onStepToggle:J})}),u.jsxs("div",{className:`flex items-center justify-between p-4 pt-2 border-t border-white/10 text-white/50 ${$.caption}`,children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("span",{children:"Press Space to play/stop  Click grid steps to program patterns"}),b&&u.jsx("span",{className:"ml-2 text-yellow-400",children:" Video control disabled in safe mode"})]}),!V&&u.jsx("div",{className:"ml-4 flex-shrink-0",children:T?`Pattern: ${T.name}`:"No pattern loaded"})]})]})}),u.jsx(OR,{toasts:C.toasts,onRemove:C.removeToast,position:"top-right"}),u.jsx(RR,{isVisible:R,onClose:()=>j(!1)})]}),u.jsx(TR,{service:z.current,isVisible:F,onToggle:()=>U(!F)})]}):u.jsx(DR,{className:a,children:u.jsx(PR,{progress:L,stage:M})})},(e,t)=>e.chops===t.chops&&e.activeBank===t.activeBank&&e.youtubePlayer===t.youtubePlayer&&e.className===t.className&&e.onBankChange===t.onBankChange&&e.onServiceRef===t.onServiceRef),VR=["#06b6d4","#3b82f6","#8b5cf6","#d946ef","#059669","#10b981","#65a30d","#ca8a04","#f97316","#ef4444","#ec4899","#a855f7","#22c55e","#eab308","#f43f5e","#6366f1"];function $R(){const[e,t]=m.useState("https://www.youtube.com/watch?v=yp7-wNhGBDY&t"),[n,r]=m.useState(""),[i,s]=m.useState([]),[a,o]=m.useState("A"),[l,c]=m.useState(null),[d,h]=m.useState({currentTime:0,duration:180,isPlaying:!1}),[f,p]=m.useState(1),[g,y]=m.useState(null),[v,b]=m.useState(null),[w,x]=m.useState(navigator.onLine),[S,k]=m.useState(!1),[C,E]=m.useState(!1),[T,_]=m.useState(""),[N,I]=m.useState(null),[A,P]=m.useState(null),[R,j]=m.useState(!1),[M,D]=m.useState(null),{waveformData:L,audioBuffer:O,analysisStatus:F,progress:U,error:z,downloadStats:B,retry:V}=function(e){const[t,n]=m.useState("idle"),[r,i]=m.useState(null),[s,a]=m.useState(null),[o,l]=m.useState(0),[c,u]=m.useState(null),[d,h]=m.useState(null),f=m.useRef(null),p=m.useRef(!0),g=m.useCallback(t=>{if(p.current&&f.current===e)switch(l(t.progress||0),t.status){case"downloading":n("fetching"),h({attempt:t.attempt,maxAttempts:t.maxAttempts,bytesReceived:t.bytesReceived,totalBytes:t.totalBytes});break;case"processing":case"generating_waveform":n("decoding");break;case"retrying":n("fetching"),h({attempt:t.attempt,maxAttempts:t.maxAttempts,retryDelay:t.retryDelay,lastError:t.error});break;case"ready":n("ready"),h(null);break;case"error":n(`error: ${t.error}`),u(t.error),h(null)}},[e]),y=m.useCallback(async()=>{e&&(u(null),n("idle"),l(0),h(null),bR.cancelDownload(e),v())},[e]),v=m.useCallback(async()=>{if(!e||!p.current)return;if(f.current=e,u(null),i(null),a(null),l(0),h(null),e.includes("youtube.com")||e.includes("youtu.be"))return n("ready"),void l(100);const t=bR.getAudioBuffer(e);if(t)return a(t.audioBuffer),i(t.waveformData),n("ready"),void l(100);try{n("fetching");const t=await bR.downloadAndProcessAudio(e,g);p.current&&f.current===e&&(a(t.audioBuffer),i(t.waveformData),n("ready"),l(100),u(null),h(null))}catch(r){p.current&&f.current===e&&(n(`error: ${r.message}`),u(r.message),i(null),a(null),l(0),h(null))}},[e,g]);return m.useEffect(()=>(p.current=!0,e?(v(),()=>{p.current=!1,f.current&&bR.cancelDownload(f.current)}):(n("idle"),i(null),a(null),l(0),u(null),h(null),void(f.current=null))),[e,v]),m.useEffect(()=>()=>{p.current=!1,f.current&&bR.cancelDownload(f.current)},[]),{waveformData:r,audioBuffer:s,analysisStatus:t,progress:o,error:c,downloadStats:d,retry:y,serviceStats:bR.getStats(),isCached:!!e&&bR.isCached(e),cancelDownload:()=>{e&&bR.cancelDownload(e)}}}(n),$=wR();i.find(e=>e.padId===l),m.useEffect(()=>{},[L,F,n,A]),m.useEffect(()=>{const e=()=>x(!1);return window.addEventListener("online",()=>x(!0)),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),m.useEffect(()=>{if(!n&&e&&w)try{const t=new URL(e),n=t.searchParams.get("v")||t.pathname.split("/").pop();if(n&&11===n.length){r(`https://www.youtube.com/watch?v=${n}`)}}catch(t){}},[n,e,w]);const H=m.useCallback(e=>{y(e);try{if(e&&e.getVideoData){const t=e.getVideoData();_(t.title||"Unknown Video")}}catch(t){}setTimeout(()=>{const e=document.querySelector("video");e&&(I(e),j(!0))},1e3)},[]);m.useCallback((e,t)=>{l&&s(n=>{const r=n.findIndex(e=>e.padId===l);if(r>-1){const i=[...n];return i[r]={...i[r],[e]:t},i}{const r=parseInt(l.slice(1),10),i="startTime"===e?t:d.currentTime,s="endTime"===e?t:Math.min(d.currentTime+2,d.duration);return[...n,{padId:l,startTime:i,endTime:s,color:VR[r%VR.length]}]}})},[l,d.currentTime,d.duration]);const q=m.useCallback((e,t,n)=>{const r=parseInt(e.slice(1),10),i={padId:e,startTime:t,endTime:n,color:VR[r%VR.length]};s(t=>{const n=t.findIndex(t=>t.padId===e);let r;return n>-1?(r=[...t],r[n]=i):r=[...t,i],r})},[]),K=m.useCallback(e=>{s(t=>{const n=t.findIndex(t=>t.padId===e.padId);if(n>-1){const r=[...t];return r[n]=e,r}return t})},[]),W=m.useCallback(e=>{s(t=>t.filter(t=>t.padId!==e)),l===e&&c(null)},[l]),G=e=>e.includes("network")||e.includes("fetch")?"Network error: Unable to load video. Check your internet connection.":e.includes("timeout")?"Loading timeout: The video is taking too long to load.":e.includes("unavailable")||e.includes("private")?"Video unavailable: This video may be private, deleted, or restricted.":e.includes("quota")||e.includes("limit")?"Service limit reached: Please try again later.":`Video loading failed: ${e}`,Y=e=>e.includes("network")||e.includes("fetch")?"Check your internet connection and try again.":e.includes("timeout")?"Try refreshing the page or check your connection speed.":e.includes("unavailable")||e.includes("private")?"Try a different public YouTube video.":e.includes("quota")||e.includes("limit")?"Wait a few minutes and try again.":"Try refreshing the page or using a different video.",J=()=>{k(!1),V&&V()},Q=()=>{k(!1),r(""),s([])};m.useCallback((e,t)=>{g&&(g.seekTo(e,!0),t&&c(t.padId))},[g]),m.useCallback(()=>{g&&(d.isPlaying?g.pauseVideo():g.playVideo())},[g,d.isPlaying]);const X=m.useCallback(()=>({youtubeUrl:n,chops:i,activeBank:a,playerState:d}),[n,i,a,d]),Z=m.useCallback(e=>{t(e.youtubeUrl),r(e.youtubeUrl),s(e.chops||[]),o(e.activeBank||"A"),c(null)},[]);m.useCallback(()=>{t(""),r(""),s([]),o("A"),c(null),E(!1),P(null),j(!1)},[]);const ee=m.useCallback(e=>{P(e)},[]),te=m.useCallback(e=>{},[]),ne=m.useCallback(e=>{o(e)},[]),re=m.useCallback(e=>{D(e)},[]),ie=m.useCallback(e=>{},[]),se=(()=>{const e={message:"",type:"info",showProgress:!1,showRetry:!1,actionable:null};switch(F){case"idle":return{...e,message:"Enter a YouTube URL to load video.",type:"info"};case"fetching":case"decoding":return{...e,message:"Loading video...",type:"loading",showProgress:!1};case"ready":const t=A?"Audio captured! Create samples by pressing keys or use capture controls.":"Video ready. Use capture controls or press keys to create samples!";return{...e,message:t,type:"success"};default:if(F.startsWith("error:")){const t=F.substring(6);return{...e,message:G(t),type:"error",showRetry:!0,actionable:Y(t)}}return{...e,message:"Loading...",type:"loading"}}})();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs(uA.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:[u.jsxs("form",{onSubmit:t=>{if(t.preventDefault(),b(null),w)if(e.trim())try{const t=new URL(e),n=t.searchParams.get("v")||t.pathname.split("/").pop();if(!n||11!==n.length)throw new Error("Invalid YouTube URL. Please make sure you're using a valid YouTube video link.");r(`https://www.youtube.com/watch?v=${n}`),s([]),P(null),j(!1),I(null)}catch(n){b(n.message||"Invalid YouTube URL format. Please check the URL and try again.")}else b("Please enter a YouTube URL.");else b("You're offline. Please check your internet connection and try again.")},className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(hn,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),!w&&u.jsx(cn,{className:"w-4 h-4 text-red-400"}),w&&u.jsx(un,{className:"w-4 h-4 text-green-400"})]}),u.jsx(yA,{type:"text",placeholder:"Paste a YouTube URL to begin...",value:e,onPaste:e=>{const n=e.clipboardData.getData("text");t(n)},onChange:e=>{t(e.target.value),b(null)},className:"bg-white/10 border-white/20 placeholder-gray-400 "+(v?"border-red-400 focus:border-red-400":""),disabled:!w}),u.jsx(xr,{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-black font-bold",disabled:!w||"fetching"===F||"decoding"===F,children:"fetching"===F||"decoding"===F?u.jsxs(u.Fragment,{children:[u.jsx(Mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading"]}):"Load Video"}),u.jsxs(xr,{onClick:()=>E(!0),variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[u.jsx(kt,{className:"w-4 h-4 mr-2"}),"Sessions"]})]}),u.jsx(ES,{children:v&&u.jsx(uA.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:u.jsxs(cR,{className:"border-red-400 bg-red-400/10",children:[u.jsx(mt,{className:"h-4 w-4 text-red-400"}),u.jsx(uR,{className:"text-red-200",children:v})]})})}),u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:["loading"===se.type&&u.jsx(Mt,{className:"w-4 h-4 animate-spin text-cyan-400"}),"success"===se.type&&u.jsx(gt,{className:"w-4 h-4 text-green-400"}),"error"===se.type&&u.jsx(mt,{className:"w-4 h-4 text-red-400"}),u.jsx("span",{className:"text-sm font-medium "+("error"===se.type?"text-red-200":"success"===se.type?"text-green-200":"loading"===se.type?"text-cyan-200":"text-white/60"),children:se.message})]}),se.showRetry&&u.jsxs(xr,{onClick:J,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(qt,{className:"w-3 h-3 mr-1"}),"Retry"]})]}),se.showProgress&&u.jsxs("div",{className:"space-y-2",children:[u.jsx(fR,{value:U,className:"h-2 bg-white/10"}),u.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[u.jsxs("span",{children:[Math.round(U),"% complete"]}),B?.bytesReceived&&B?.totalBytes&&u.jsxs("span",{children:[Math.round(B.bytesReceived/1024/1024),"MB /",Math.round(B.totalBytes/1024/1024),"MB"]})]})]}),se.actionable&&u.jsxs("div",{className:"text-xs text-white/40 italic",children:[" ",se.actionable]}),A&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-300 bg-purple-500/10 rounded-lg px-3 py-2",children:[u.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),u.jsxs("span",{children:["Using captured audio (",A.metadata.duration.toFixed(1),"s) - High quality samples available"]})]}),B&&(B.attempt>1||B.lastError)&&u.jsxs("details",{className:"text-xs text-white/40",children:[u.jsx("summary",{className:"cursor-pointer hover:text-white/60",children:"Technical Details"}),u.jsxs("div",{className:"mt-2 space-y-1 pl-4 border-l border-white/10",children:[B.attempt>1&&u.jsxs("div",{children:["Retry attempt: ",B.attempt,"/",B.maxAttempts]}),B.retryDelay&&u.jsxs("div",{children:["Next retry in: ",Math.round(B.retryDelay/1e3),"s"]}),B.lastError&&u.jsxs("div",{children:["Last error: ",B.lastError]})]})]})]})]}),S&&z?u.jsx(kR,{error:z,onRetry:J,onReset:Q,youtubeUrl:n,isRetrying:$.isRetrying,retryCount:$.retryCount}):u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u.jsx(xR,{youtubeUrl:n,onError:(e,t)=>{},onRetry:J,onReset:Q,children:u.jsx(mA,{youtubeUrl:n,setPlayerState:h,volume:f,onPlayerReady:H})}),u.jsx("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-6 text-center",children:u.jsx("div",{className:"text-white/60 text-sm",children:"Waveform visualization will be implemented here"})})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx(lR,{activeBank:a,setActiveBank:o,masterVolume:f,setMasterVolume:p,chops:i,youtubeUrl:n}),R&&n&&u.jsx(gR,{youtubeUrl:n,videoElement:N,onCaptureComplete:ee,onCaptureError:te,isVideoReady:"ready"===F}),u.jsxs("div",{className:"relative "+("ready"!==F?"opacity-50 pointer-events-none":""),children:[u.jsx(SR,{onError:(e,t)=>{},onRetry:J,onReset:()=>s([]),children:u.jsx(wA,{chops:i,activeBank:a,selectedPadId:l,setSelectedPadId:c,setPlayerState:h,playerState:d,onCreateSample:q,onUpdateSample:K,onDeleteSample:W,youtubePlayer:g,audioBuffer:A?.audioBuffer||O,capturedAudioData:A})}),"ready"!==F&&u.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-2xl flex items-center justify-center",children:u.jsx("p",{className:"text-white/80 font-semibold",children:"Waiting for video..."})})]})]})]}),n&&"ready"===F&&u.jsx("div",{className:"mt-4 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:u.jsxs("div",{className:"text-sm text-blue-300",children:[u.jsx("strong",{children:"Debug Info:"})," ",i.length," chops loaded",i.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsx("strong",{children:"Chops:"})," ",i.map(e=>e.padId).join(", ")]}),0===i.length&&u.jsxs("div",{className:"mt-2 text-yellow-300",children:[" No chops found. Create some chops using the pad grid above.",u.jsx("button",{onClick:()=>{const e=[];for(let t=0;t<4;t++)e.push({padId:`A${t+1}`,startTime:10*t,endTime:10*t+5,color:"#06b6d4"});s(e)},className:"ml-2 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-500",children:"Create Test Chops"})]})]})}),n&&"ready"===F&&u.jsx("div",{className:"mt-6",children:u.jsx(BR,{chops:i,activeBank:a,youtubePlayer:g,onBankChange:ne,onServiceRef:re,className:"w-full"})}),u.jsx(hR,{currentSession:X(),onLoadSession:Z,onSaveSession:ie,isOpen:C,onClose:()=>E(!1)})]})}const HR=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:br("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));HR.displayName="Card";const qR=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:br("flex flex-col space-y-1.5 p-6",e),...t}));qR.displayName="CardHeader";const KR=m.forwardRef(({className:e,...t},n)=>u.jsx("h3",{ref:n,className:br("text-2xl font-semibold leading-none tracking-tight",e),...t}));KR.displayName="CardTitle";const WR=m.forwardRef(({className:e,...t},n)=>u.jsx("p",{ref:n,className:br("text-sm text-muted-foreground",e),...t}));WR.displayName="CardDescription";const GR=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:br("p-6 pt-0",e),...t}));GR.displayName="CardContent";const YR=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:br("flex items-center p-6 pt-0",e),...t}));function JR({className:e,...t}){return u.jsx("div",{className:br("animate-pulse rounded-md bg-muted",e),...t})}function QR(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),{user:i,loading:s}=cS(),[a,o]=m.useState(!1);m.useEffect(()=>{!s&&i?l():s||i||(r(!1),t([]))},[i,s]);const l=async()=>{r(!0);try{const e=await rP.list("-created_date");t(e)}catch(kM){}finally{r(!1)}},c=e=>{if(!e)return"";const t=e.match(/(?:v=)([^&?]+)/)||e.match(/(?:youtu.be\/)([^&?]+)/),n=t?t[1]:"";return n?`https://img.youtube.com/vi/${n}/mqdefault.jpg`:""};return s?u.jsx("div",{className:"text-center col-span-full py-20 bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl",children:u.jsx("p",{className:"text-white/70",children:"Loading sessions..."})}):i?u.jsxs("div",{className:"space-y-6",children:[u.jsxs(uA.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 text-3xl font-bold tracking-tighter",children:[u.jsx(_t,{className:"w-8 h-8 text-cyan-400"}),u.jsx("h2",{children:"My Saved Sessions"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:u.jsx(ES,{children:n?Array.from({length:4}).map((e,t)=>u.jsxs(HR,{className:"bg-black/20 backdrop-blur-lg border border-white/20 text-white overflow-hidden",children:[u.jsx(qR,{children:u.jsx(JR,{className:"h-40 -mx-6 -mt-6"})}),u.jsxs(GR,{children:[u.jsx(JR,{className:"h-6 w-3/4 mb-2"}),u.jsx(JR,{className:"h-4 w-1/2"})]}),u.jsxs(YR,{className:"flex justify-between",children:[u.jsx(JR,{className:"h-10 w-24"}),u.jsx(JR,{className:"h-10 w-10"})]})]},t)):e.map(n=>u.jsx(uA.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:260,damping:20},children:u.jsxs(HR,{className:"bg-black/20 backdrop-blur-lg border border-white/20 text-white overflow-hidden shadow-xl hover:shadow-cyan-500/20 transition-shadow duration-300 h-full flex flex-col",children:[u.jsx(qR,{className:"p-0",children:u.jsx("img",{src:c(n.youtubeUrl),alt:n.sessionName,className:"w-full h-40 object-cover"})}),u.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[u.jsx(KR,{className:"tracking-tight",children:n.sessionName}),u.jsxs(WR,{className:"text-white/60 flex items-center gap-2 mt-1",children:[u.jsx(jt,{className:"w-4 h-4"}),n.chops?.length||0," Chops"]}),u.jsx("div",{className:"flex-grow"}),u.jsxs(YR,{className:"p-0 pt-6 flex justify-between items-center",children:[u.jsx(Qe,{to:`/?sessionId=${n.id}`,children:u.jsx(xr,{className:"bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:"Load"})}),u.jsx(xr,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-500/20",onClick:()=>(async n=>{try{await rP.delete(n),t(e.filter(e=>e.id!==n))}catch(kM){}})(n.id),children:u.jsx(tn,{className:"w-5 h-5"})})]})]})]})},n.id))})}),!n&&0===e.length&&u.jsxs("div",{className:"text-center col-span-full py-20 bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl",children:[u.jsx("p",{className:"text-white/70",children:"You have no saved sessions."}),u.jsx(Qe,{to:"/",children:u.jsx(xr,{className:"mt-4 bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:"Create your first chop!"})})]})]}):u.jsxs("div",{className:"text-center col-span-full py-20 bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl",children:[u.jsx("p",{className:"text-white/70",children:"Please sign in to view your saved sessions."}),u.jsxs(xr,{onClick:()=>o(!0),className:"mt-4 bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:[u.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Sign In"]}),u.jsx(aS,{isOpen:a,onOpenChange:o})]})}function XR({isPlaying:e=!1,isPaused:t=!1,bpm:n=120,swing:r=0,isInitialized:i=!1,onPlay:s,onPause:a,onStop:o,onBpmChange:l,onSwingChange:c,className:d=""}){const[h,f]=m.useState(n),[p,g]=m.useState(r),[y,v]=m.useState(!1);m.useEffect(()=>{y||f(n)},[n,y]),m.useEffect(()=>{g(r)},[r]);const b=m.useCallback(()=>{i&&(e?a?.():s?.())},[e,i,s,a]),w=m.useCallback(()=>{i&&o?.()},[i,o]),x=m.useCallback(e=>{const t=e.target.value;f(t)},[]),S=m.useCallback(()=>{v(!1);const e=parseInt(h,10);isNaN(e)||e<60||e>200?f(n):e!==n&&l?.(e)},[h,n,l]),k=m.useCallback(()=>{v(!0)},[]),C=m.useCallback(e=>{"Enter"===e.key&&e.target.blur()},[]),E=m.useCallback(e=>{const t=parseInt(e.target.value,10);g(t),c?.(t)},[c]),T=e?{className:"bg-orange-500 hover:bg-orange-600 text-white font-bold",icon:Bt,text:"Pause"}:{className:"bg-green-500 hover:bg-green-600 text-white font-bold",icon:$t,text:t?"Resume":"Play"},_=T.icon;return u.jsxs(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:`flex items-center gap-4 ${d}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(xr,{onClick:b,className:T.className,disabled:!i,size:"default",children:[u.jsx(_,{className:"w-4 h-4 mr-2"}),T.text]}),u.jsxs(xr,{onClick:w,variant:"outline",className:"border-white/20 text-white hover:bg-white/10 hover:text-white",disabled:!i,size:"default",children:[u.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Stop"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-sm font-medium text-white/80 min-w-[32px]",children:"BPM:"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",min:"60",max:"200",value:h,onChange:x,onBlur:S,onFocus:k,onKeyDown:C,className:`w-16 px-2 py-1 bg-white/10 border rounded text-white text-sm text-center\n              transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-400/50\n              ${y?"border-cyan-400/50 bg-white/15":"border-white/20"}\n              ${i?"hover:bg-white/15":"opacity-50 cursor-not-allowed"}\n            `,disabled:!i}),y&&u.jsx(uA.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute -top-8 left-1/2 transform -translate-x-1/2 \r\n                bg-black/80 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"60-200 BPM"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-sm font-medium text-white/80 min-w-[40px]",children:"Swing:"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:E,className:`w-20 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer\n              transition-opacity duration-200\n              ${i?"":"opacity-50 cursor-not-allowed"}\n            `,style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${p}%, rgba(255,255,255,0.1) ${p}%, rgba(255,255,255,0.1) 100%)`},disabled:!i}),u.jsxs("span",{className:"text-xs font-mono text-white/60 min-w-[32px] text-right",children:[p,"%"]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[u.jsx("div",{className:"w-2 h-2 rounded-full transition-all duration-300 "+(i?e?"bg-green-400 animate-pulse":t?"bg-orange-400":"bg-gray-400":"bg-yellow-400 animate-pulse")}),u.jsx("span",{className:"text-xs text-white/60",children:i?e?"Playing":t?"Paused":"Stopped":"Initializing..."})]})]})}function ZR({resolution:e=16,onResolutionChange:t,isInitialized:n=!1,hasPatternData:r=!1,className:i=""}){const[s,a]=m.useState(!1),[o,l]=m.useState(null),c=[{value:8,label:"1/8",description:"8 steps per bar"},{value:16,label:"1/16",description:"16 steps per bar"},{value:32,label:"1/32",description:"32 steps per bar"}],d=m.useCallback(i=>{if(n)return r&&i!==e?(l(i),void a(!0)):void t?.(i)},[e,r,n,t]),h=m.useCallback(()=>{null!==o&&t?.(o),a(!1),l(null)},[o,t]),f=m.useCallback(()=>{a(!1),l(null)},[]),p=c.find(t=>t.value===e)||c[1];return u.jsxs("div",{className:`relative ${i}`,children:[u.jsxs(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Tt,{className:"w-4 h-4 text-white/60"}),u.jsx("label",{className:"text-sm font-medium text-white/80",children:"Step Resolution"})]}),u.jsx("div",{className:"flex gap-2",children:c.map(t=>{const r=t.value===e,i=t.value===o;return u.jsxs(uA.button,{onClick:()=>d(t.value),disabled:!n,className:`relative px-3 py-2 text-sm rounded-lg border transition-all duration-200\n                  focus:outline-none focus:ring-2 focus:ring-cyan-400/50\n                  ${r?"border-cyan-400 bg-cyan-400/20 text-cyan-200 shadow-lg shadow-cyan-400/20":i?"border-orange-400 bg-orange-400/20 text-orange-200":"border-white/20 bg-white/5 text-white/60 hover:bg-white/10 hover:text-white/80"}\n                  ${n?"cursor-pointer":"opacity-50 cursor-not-allowed"}\n                `,whileHover:n?{scale:1.02}:{},whileTap:n?{scale:.98}:{},children:[u.jsx("div",{className:"font-medium",children:t.label}),u.jsx("div",{className:"text-xs opacity-70",children:t.description}),r&&u.jsx(uA.div,{layoutId:"resolution-indicator",className:"absolute inset-0 border-2 border-cyan-400 rounded-lg",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},t.value)})}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/50",children:[u.jsx("span",{children:"Current:"}),u.jsx("span",{className:"font-mono text-cyan-400",children:p.label}),u.jsx("span",{children:""}),u.jsx("span",{children:p.description})]}),r&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-yellow-400/80",children:[u.jsx(nn,{className:"w-3 h-3"}),u.jsx("span",{children:"Changing resolution may affect existing pattern data"})]})]}),u.jsx(ES,{children:s&&u.jsx(uA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:f,children:u.jsxs(uA.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-black/90 backdrop-blur-lg border border-orange-400/20 rounded-2xl p-6 max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(nn,{className:"w-6 h-6 text-orange-400"}),u.jsx("h3",{className:"text-lg font-semibold text-orange-200",children:"Change Step Resolution?"})]}),u.jsxs("div",{className:"space-y-3 mb-6",children:[u.jsxs("p",{className:"text-white/70",children:["You're about to change from ",u.jsx("span",{className:"font-mono text-cyan-400",children:p.label})," to"," ",u.jsx("span",{className:"font-mono text-cyan-400",children:c.find(e=>e.value===o)?.label}),"."]}),u.jsx("p",{className:"text-white/60 text-sm",children:"This will modify your current pattern. Steps will be preserved where possible, but some pattern data may be lost or rearranged."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:f,className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white \r\n                    border border-white/20 rounded-lg transition-all duration-200",children:"Cancel"}),u.jsx("button",{onClick:h,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white \r\n                    rounded-lg transition-all duration-200 font-medium",children:"Change Resolution"})]})]})})})]})}YR.displayName="CardFooter";const ej=m.memo(function({trackId:e,stepIndex:t,step:n,trackColor:r="#06b6d4",isActive:i=!1,isSelected:s=!1,isCurrentStep:a=!1,isHovered:o=!1,velocity:l=.8,onToggle:c,onSelect:d,onVelocityChange:h,onHover:f,className:p=""}){const[g,y]=m.useState(!1),v=m.useCallback(n=>{n.preventDefault(),n.stopPropagation(),c&&c(e,t)},[e,t,c]),b=m.useCallback(e=>{e.preventDefault(),e.stopPropagation(),i&&y(!0)},[i]),w=m.useCallback(n=>{n.preventDefault(),n.stopPropagation();const r=parseFloat(n.target.value);h&&h(e,t,r)},[e,t,h]),x=m.useCallback(()=>{y(!1)},[]),S=i?Math.max(.3,l):1,k=i?r:"#374151";return u.jsxs("div",{className:`relative flex-1 ${p}`,children:[u.jsxs("button",{onClick:v,onContextMenu:b,className:`\n          w-full h-10 rounded border-2 relative overflow-hidden\n          focus:outline-none focus:ring-1 focus:ring-cyan-400/50\n          hover:brightness-110 active:scale-95\n          transition-all duration-100\n          ${i?"border-white/40 shadow-md":"bg-gray-700 border-gray-600 hover:bg-gray-600"}\n          ${a?"ring-2 ring-cyan-300":""}\n          ${s?"ring-2 ring-yellow-400":""}\n        `,style:{backgroundColor:k,opacity:S},title:`${e} - Step ${t+1}${i?` (Velocity: ${Math.round(100*l)}%) - Right-click to adjust`:" - Click to activate"}`,children:[i&&u.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white/60 transition-all duration-100",style:{width:100*l+"%"}}),u.jsx("div",{className:"absolute top-0 right-0 text-xs text-white/30 leading-none p-1",children:t+1})]}),g&&i&&u.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-black/90 backdrop-blur-lg \r\n          border border-white/20 rounded-lg p-2 z-50 shadow-lg",children:[u.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Velocity"}),u.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.01",value:l,onChange:w,onBlur:x,className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, ${r} 0%, \n                ${r} ${100*l}%, \n                rgba(255,255,255,0.1) ${100*l}%, \n                rgba(255,255,255,0.1) 100%)`},autoFocus:!0}),u.jsxs("div",{className:"text-xs text-white/40 text-center mt-1",children:[Math.round(100*l),"%"]})]})]})}),tj=m.memo(function({currentStep:e=0,totalSteps:t=16,isPlaying:n=!1,className:r=""}){const i=t>0?e/t*100:0;return u.jsxs("div",{className:`relative h-3 bg-black/30 rounded-full overflow-hidden ${r}`,children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-white/5"}),u.jsx("div",{className:"absolute inset-0 flex",children:Array.from({length:t},(e,t)=>u.jsx("div",{className:"flex-1 border-r border-white/5 last:border-r-0 "+(t%4==0?"border-white/10":"")},t))}),u.jsx("div",{className:"absolute top-0 bottom-0 bg-gradient-to-r from-cyan-500/20 to-cyan-400/30 rounded-full",style:{width:`${i}%`}}),u.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-cyan-400 rounded-full transition-none "+(n?"shadow-lg shadow-cyan-400/60":"shadow-md shadow-cyan-400/30"),style:{left:`${i}%`,transform:"translateX(-50%)"}}),n&&u.jsx("div",{className:"absolute top-1/2 w-2 h-2 bg-cyan-300 rounded-full shadow-lg shadow-cyan-300/50",style:{left:`${i}%`,transform:"translate(-50%, -50%)"}})]})}),nj=m.memo(function({pattern:e=null,stepResolution:t=16,sequencerEngine:n=null,onStepToggle:r,onStepVelocityChange:i,className:s=""}){const[a,o]=m.useState(null),[l,c]=m.useState(new Set),[d,h]=m.useState(!1),[f,p]=m.useState(0),[g,y]=m.useState(!1);m.useEffect(()=>{if(!n)return;const e=e=>{p(e.currentStep||0),y(e.isPlaying||!1)};n.onStateChange(e);const t=e=>{p(e)};return n.onStep(t),()=>{n.removeStateChangeCallback(e),n.removeStepCallback(t)}},[n]),m.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&h(!0),"Escape"===e.key&&c(new Set)," "===e.key&&l.size>0&&(e.preventDefault(),l.forEach(e=>{const[t,n]=e.split("-");v(t,parseInt(n))}))},t=e=>{e.ctrlKey||e.metaKey||h(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[l]);const v=m.useCallback((e,t)=>{r?.(e,t)},[r]),b=m.useCallback((e,t,n)=>{const r=`${e}-${t}`;c(e=>{const t=new Set(e);return d?n?t.add(r):t.delete(r):(t.clear(),n&&t.add(r)),t})},[d]),w=m.useCallback((e,t,n)=>{i&&i(e,t,n)},[i]),x=m.useMemo(()=>Array.from({length:t},(e,t)=>t+1),[t]),S=m.useMemo(()=>{if(e&&e.tracks)return e.tracks;const n=["#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1"];return["Kick","Snare","Hi-Hat","Open Hat","Crash","Ride","Tom 1","Tom 2"].map((e,r)=>({id:`track_${r}`,name:e,color:n[r%n.length],steps:Array.from({length:t},()=>({active:!1,velocity:.8}))}))},[e,t]);return S&&0!==S.length?u.jsxs("div",{className:`bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-6 ${s}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-white",children:"Pattern Grid"}),u.jsxs("div",{className:"flex items-center gap-2 ml-auto text-sm text-white/60",children:[u.jsxs("span",{children:["Resolution: ",t]}),l.size>0&&u.jsxs("span",{className:"text-cyan-400",children:[l.size," step",1!==l.size?"s":""," selected"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[u.jsx("div",{className:"w-20 flex-shrink-0"})," ",u.jsx("div",{className:"flex gap-1 flex-1",children:x.map((e,t)=>u.jsx("div",{className:"flex-1 text-center text-xs font-mono "+(t%4==0?"text-white/60":"text-white/40"),children:e},e))})]}),u.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[u.jsx("div",{className:"w-20 flex-shrink-0"})," ",u.jsx("div",{className:"flex-1",children:u.jsx(tj,{currentStep:f,totalSteps:t,isPlaying:g})})]}),u.jsx("div",{className:"space-y-2",children:S.map((e,t)=>u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-20 flex-shrink-0",children:u.jsx("div",{className:"text-sm font-medium text-white/90 truncate px-2 py-1 rounded border",style:{borderColor:e.color,backgroundColor:`${e.color}20`},title:e.name,children:e.name})}),u.jsx("div",{className:"flex gap-1 flex-1",children:e.steps.map((t,n)=>{const r=`${e.id}-${n}`,i=l.has(r),s=n===f,c=a===r;return u.jsx(ej,{trackId:e.id,stepIndex:n,step:t,trackColor:e.color,isActive:t.active,isSelected:i,isCurrentStep:s,isHovered:c,velocity:t.velocity,onToggle:v,onSelect:b,onVelocityChange:w,onHover:o},n)})})]},e.id))}),u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-white/10",children:[u.jsx("div",{className:"text-xs text-white/60",children:"Click steps to toggle  Hold Ctrl/Cmd for multi-select  Space to toggle selected"}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-white/60",children:[e&&u.jsxs("span",{children:["Pattern: ",e.name,"  BPM: ",e.bpm]}),u.jsxs("span",{className:"text-cyan-400",children:["Step: ",f+1,"/",t]})]})]})]}):u.jsx("div",{className:`bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl p-6 ${s}`,children:u.jsxs("div",{className:"text-center text-white/60",children:[u.jsx("p",{children:"No pattern loaded"}),u.jsx("p",{className:"text-sm mt-2",children:"Create or load a pattern to start sequencing"})]})})}),rj=m.memo(function({tracks:e=[],onVolumeChange:t,onMuteToggle:n,onSoloToggle:r,onTrackNameChange:i,onTrackColorChange:s,className:a=""}){const[o,l]=m.useState(null),[c,d]=m.useState(""),h=m.useCallback((e,n)=>{t?.(e,n)},[t]),f=m.useCallback(e=>{n?.(e)},[n]),p=m.useCallback(e=>{r?.(e)},[r]),g=m.useCallback(e=>{l(e.id),d(e.name)},[]),y=m.useCallback(()=>{l(null),d("")},[]),v=m.useCallback(()=>{o&&c.trim()&&i?.(o,c.trim()),l(null),d("")},[o,c,i]),b=m.useCallback(e=>{"Enter"===e.key?v():"Escape"===e.key&&y()},[v,y]),w=m.useCallback((e,t)=>{s?.(e,t)},[s]),x=["#06b6d4","#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#ec4899","#84cc16"];return e&&0!==e.length?u.jsx("div",{className:`space-y-3 ${a}`,children:e.map((e,t)=>u.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-3 space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[u.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20",style:{backgroundColor:e.color||"#06b6d4"}}),o===e.id?u.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),onBlur:v,onKeyDown:b,className:"bg-white/10 border border-white/20 rounded px-2 py-1 text-sm text-white\r\n                    focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/50\r\n                    transition-all duration-200",autoFocus:!0}):u.jsxs("button",{onClick:()=>g(e),className:"text-sm font-medium text-white hover:text-cyan-400 \r\n                    transition-colors duration-200 flex items-center gap-1",children:[e.name,u.jsx(Vt,{className:"w-3 h-3 opacity-50"})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("button",{className:"p-1 rounded hover:bg-white/10 transition-colors duration-200",children:u.jsx(zt,{className:"w-4 h-4 text-white/60"})}),u.jsx("div",{className:"absolute right-0 top-8 bg-black/80 backdrop-blur-lg border border-white/20 \r\n                rounded-lg p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible\r\n                transition-all duration-200 z-10",children:u.jsx("div",{className:"grid grid-cols-4 gap-1",children:x.map(t=>u.jsx("button",{onClick:()=>w(e.id,t),className:`w-6 h-6 rounded border-2 transition-all duration-200 hover:scale-110\n                        ${e.color===t?"border-white":"border-white/20"}\n                      `,style:{backgroundColor:t}},t))})})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-xs font-medium text-white/60",children:"Volume"}),u.jsxs("span",{className:"text-xs font-mono text-white/60",children:[Math.round(100*(e.volume||.8)),"%"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ln,{className:"w-4 h-4 text-white/40"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.volume||.8,onChange:t=>h(e.id,parseFloat(t.target.value)),className:"flex-1 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer\r\n                  transition-opacity duration-200",style:{background:`linear-gradient(to right, ${e.color||"#06b6d4"} 0%, \n                    ${e.color||"#06b6d4"} ${100*(e.volume||.8)}%, \n                    rgba(255,255,255,0.1) ${100*(e.volume||.8)}%, \n                    rgba(255,255,255,0.1) 100%)`}}),u.jsx(on,{className:"w-4 h-4 text-white/40"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(xr,{onClick:()=>f(e.id),variant:"outline",size:"sm",className:"flex-1 border-white/20 text-white transition-all duration-200 "+(e.mute?"bg-red-500/20 border-red-400/40 text-red-200 hover:bg-red-500/30":"hover:bg-white/10 hover:text-white"),children:[u.jsx(ln,{className:"w-3 h-3 mr-1"}),e.mute?"Muted":"Mute"]}),u.jsxs(xr,{onClick:()=>p(e.id),variant:"outline",size:"sm",className:"flex-1 border-white/20 text-white transition-all duration-200 "+(e.solo?"bg-yellow-500/20 border-yellow-400/40 text-yellow-200 hover:bg-yellow-500/30":"hover:bg-white/10 hover:text-white"),children:[u.jsx(Nt,{className:"w-3 h-3 mr-1"}),(e.solo,"Solo")]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-white/40",children:[u.jsxs("span",{children:["Sample: ",e.sampleId||"None"]}),u.jsxs("span",{children:["Steps: ",e.steps?.filter(e=>e.active).length||0]})]})]},e.id))}):u.jsx("div",{className:`text-center py-8 ${a}`,children:u.jsx("div",{className:"text-white/40 text-sm",children:"No tracks available"})})});function ij({tracks:e=[],onRandomizationChange:t,className:n=""}){const r=m.useCallback(n=>{const r=e.find(e=>e.id===n);if(!r)return;const i={...r.randomization,velocity:{...r.randomization.velocity,enabled:!r.randomization.velocity.enabled}};t?.(n,i)},[e,t]),i=m.useCallback((n,r)=>{const i=e.find(e=>e.id===n);if(!i)return;const s={...i.randomization,velocity:{...i.randomization.velocity,amount:r}};t?.(n,s)},[e,t]),s=m.useCallback(n=>{const r=e.find(e=>e.id===n);if(!r)return;const i={...r.randomization,timing:{...r.randomization.timing,enabled:!r.randomization.timing.enabled}};t?.(n,i)},[e,t]),a=m.useCallback((n,r)=>{const i=e.find(e=>e.id===n);if(!i)return;const s={...i.randomization,timing:{...i.randomization.timing,amount:r}};t?.(n,s)},[e,t]);return e&&0!==e.length?u.jsxs(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:`space-y-4 ${n}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Yt,{className:"w-4 h-4 text-cyan-400"}),u.jsx("h4",{className:"text-sm font-medium text-white",children:"Humanization"})]}),e.map((e,t)=>u.jsxs(uA.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*t},className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg p-4 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color||"#06b6d4"}}),u.jsx("span",{className:"text-sm font-medium text-white/80",children:e.name})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-xs font-medium text-white/60",children:"Velocity Variation"}),u.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center gap-1 text-xs text-white/60 hover:text-white \r\n                  transition-colors duration-200",children:[e.randomization?.velocity?.enabled?u.jsx(en,{className:"w-4 h-4 text-cyan-400"}):u.jsx(Zt,{className:"w-4 h-4"}),e.randomization?.velocity?.enabled?"On":"Off"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-white/40 min-w-[20px]",children:"0%"}),u.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:e.randomization?.velocity?.amount||0,onChange:t=>i(e.id,parseInt(t.target.value,10)),disabled:!e.randomization?.velocity?.enabled,className:"flex-1 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer\n                  transition-all duration-200 "+(e.randomization?.velocity?.enabled?"":"opacity-30 cursor-not-allowed"),style:{background:e.randomization?.velocity?.enabled?`linear-gradient(to right, ${e.color||"#06b6d4"} 0%, \n                        ${e.color||"#06b6d4"} ${e.randomization?.velocity?.amount||0}%, \n                        rgba(255,255,255,0.1) ${e.randomization?.velocity?.amount||0}%, \n                        rgba(255,255,255,0.1) 100%)`:"rgba(255,255,255,0.1)"}}),u.jsx("span",{className:"text-xs text-white/40 min-w-[30px] text-right",children:"100%"})]}),u.jsxs("div",{className:"text-xs text-white/40 text-center",children:[e.randomization?.velocity?.amount||0,"% variation"]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("label",{className:"text-xs font-medium text-white/60",children:"Timing Groove"}),u.jsxs("button",{onClick:()=>s(e.id),className:"flex items-center gap-1 text-xs text-white/60 hover:text-white \r\n                  transition-colors duration-200",children:[e.randomization?.timing?.enabled?u.jsx(en,{className:"w-4 h-4 text-cyan-400"}):u.jsx(Zt,{className:"w-4 h-4"}),e.randomization?.timing?.enabled?"On":"Off"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs text-white/40 min-w-[20px]",children:"0%"}),u.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:e.randomization?.timing?.amount||0,onChange:t=>a(e.id,parseInt(t.target.value,10)),disabled:!e.randomization?.timing?.enabled,className:"flex-1 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer\n                  transition-all duration-200 "+(e.randomization?.timing?.enabled?"":"opacity-30 cursor-not-allowed"),style:{background:e.randomization?.timing?.enabled?`linear-gradient(to right, ${e.color||"#06b6d4"} 0%, \n                        ${e.color||"#06b6d4"} ${e.randomization?.timing?.amount||0}%, \n                        rgba(255,255,255,0.1) ${e.randomization?.timing?.amount||0}%, \n                        rgba(255,255,255,0.1) 100%)`:"rgba(255,255,255,0.1)"}}),u.jsx("span",{className:"text-xs text-white/40 min-w-[30px] text-right",children:"100%"})]}),u.jsxs("div",{className:"text-xs text-white/40 text-center",children:[e.randomization?.timing?.amount||0,"% groove"]})]}),(e.randomization?.velocity?.enabled||e.randomization?.timing?.enabled)&&u.jsx("div",{className:"pt-2 border-t border-white/10",children:u.jsx("div",{className:"text-xs text-white/40 text-center",children:e.randomization?.velocity?.enabled&&e.randomization?.timing?.enabled?"Velocity & timing humanization active":e.randomization?.velocity?.enabled?"Velocity humanization active":"Timing humanization active"})})]},e.id))]}):u.jsx("div",{className:`text-center py-8 ${n}`,children:u.jsx("div",{className:"text-white/40 text-sm",children:"No tracks available for randomization"})})}const sj=m.memo(function({children:e,className:t=""}){return u.jsx("div",{className:`space-y-2 ${t}`,children:e})}),aj=m.memo(function({title:e,icon:t=Gt,defaultOpen:n=!1,children:r,className:i=""}){const[s,a]=m.useState(n),o=m.useCallback(()=>{a(e=>!e)},[]);return u.jsxs("div",{className:`bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden ${i}`,children:[u.jsxs("button",{onClick:o,className:"w-full px-4 py-3 flex items-center justify-between text-left\r\n          hover:bg-white/5 transition-colors duration-200 group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(t,{className:"w-4 h-4 text-cyan-400"}),u.jsx("span",{className:"font-medium text-white text-sm",children:e})]}),u.jsx(uA.div,{animate:{rotate:s?180:0},transition:{duration:.2,ease:"easeInOut"},children:u.jsx(dt,{className:"w-4 h-4 text-white/60 group-hover:text-white/80"})})]}),u.jsx(ES,{initial:!1,children:s&&u.jsx(uA.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:u.jsx("div",{className:"px-4 pb-4 border-t border-white/10",children:u.jsx("div",{className:"pt-3",children:r})})})})]})});class oj{constructor(){this.storageKey="sampler_patterns",this.currentPatternKey="sampler_current_pattern",this.maxStoredPatterns=10}async savePattern(e){try{if(!e||!e.id)throw new Error("Invalid pattern: missing id");const t=await this.getAllPatterns(),n=t.findIndex(t=>t.id===e.id);if(n>=0)t[n]={...e,metadata:{...e.metadata,modified:(new Date).toISOString()}};else{const n={...e,metadata:{...e.metadata,created:e.metadata?.created||(new Date).toISOString(),modified:(new Date).toISOString()}};t.push(n),t.length>this.maxStoredPatterns&&(t.sort((e,t)=>new Date(e.metadata.created)-new Date(t.metadata.created)),t.splice(0,t.length-this.maxStoredPatterns))}return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(kM){return!1}}async loadPattern(e){try{if(!e)throw new Error("Pattern ID is required");const t=(await this.getAllPatterns()).find(t=>t.id===e);return t||null}catch(kM){return null}}async getAllPatterns(){try{const e=localStorage.getItem(this.storageKey);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:(localStorage.removeItem(this.storageKey),[])}catch(kM){return localStorage.removeItem(this.storageKey),[]}}async deletePattern(e){try{if(!e)throw new Error("Pattern ID is required");const t=await this.getAllPatterns(),n=t.filter(t=>t.id!==e);if(n.length===t.length)return!1;localStorage.setItem(this.storageKey,JSON.stringify(n));return await this.getCurrentPatternId()===e&&await this.clearCurrentPattern(),!0}catch(kM){return!1}}async setCurrentPattern(e){try{return e?localStorage.setItem(this.currentPatternKey,e):localStorage.removeItem(this.currentPatternKey),!0}catch(kM){return!1}}async getCurrentPatternId(){try{return localStorage.getItem(this.currentPatternKey)}catch(kM){return null}}async loadCurrentPattern(){try{const e=await this.getCurrentPatternId();return e?await this.loadPattern(e):null}catch(kM){return null}}async clearCurrentPattern(){try{return localStorage.removeItem(this.currentPatternKey),!0}catch(kM){return!1}}async autoSavePattern(e){return this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),new Promise(t=>{this.autoSaveTimeout=setTimeout(async()=>{const n=await this.savePattern(e);t(n)},2e3)})}async exportPattern(e){try{const t=await this.loadPattern(e);if(!t)throw new Error("Pattern not found");return JSON.stringify(t,null,2)}catch(kM){return null}}async importPattern(e){try{const t=JSON.parse(e);if(!t||!t.id)throw new Error("Invalid pattern data");t.id=`imported_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,t.name=`${t.name} (Imported)`;if(await this.savePattern(t))return t;throw new Error("Failed to save imported pattern")}catch(kM){return null}}async getStorageStats(){try{const e=await this.getAllPatterns(),t=localStorage.getItem(this.storageKey)||"",n=localStorage.getItem(this.currentPatternKey)||"";return{patternCount:e.length,totalSize:t.length+n.length,averagePatternSize:e.length>0?Math.round(t.length/e.length):0,maxPatterns:this.maxStoredPatterns}}catch(kM){return{patternCount:0,totalSize:0,averagePatternSize:0,maxPatterns:this.maxStoredPatterns}}}async clearAllPatterns(){try{return localStorage.removeItem(this.storageKey),localStorage.removeItem(this.currentPatternKey),!0}catch(kM){return!1}}validatePattern(e){if(!e||"object"!=typeof e)return!1;const t=["id","name","bpm","currentBank","banks"];for(const n of t)if(!(n in e))return!1;if(!Array.isArray(e.banks))return!1;for(const n of e.banks)if(!this.validateBank(n))return!1;return!0}validateBank(e){if(!e||"object"!=typeof e)return!1;if("number"!=typeof e.bankId||!e.name||!Array.isArray(e.tracks))return!1;for(const t of e.tracks)if(!t||"number"!=typeof t.trackIndex||!Array.isArray(t.steps))return!1;return!0}destroy(){this.autoSaveTimeout&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=null)}}let lj=class{constructor(){this.persistence=new oj}async getStorageStats(){try{const e=await this.persistence.getAllPatterns(),t=JSON.stringify(e),n=new Blob([t]).size,r=5242880,i=Math.round(n/r*100);return{patternCount:e.length,storageSize:n,usagePercentage:Math.min(i,100)}}catch(kM){return{patternCount:0,storageSize:0,usagePercentage:0}}}async exportPattern(e){try{const t=await this.persistence.loadPattern(e);if(!t)throw new Error(`Pattern with ID "${e}" not found`);return JSON.stringify({version:"1.0",type:"sampler-pattern",exported:(new Date).toISOString(),pattern:t},null,2)}catch(kM){throw kM}}async importPattern(e,t={}){try{const n=JSON.parse(e);if(!n.pattern)throw new Error("Invalid pattern file: missing pattern data");let r=n.pattern;if(t.generateNewIds&&(r={...r,id:`pattern_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:r.name+" (Imported)"}),!t.overwrite){await this.persistence.loadPattern(r.id)&&(r.id=`pattern_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r.name=r.name+" (Copy)")}if(!(await this.persistence.savePattern(r)))throw new Error("Failed to save imported pattern");return[r.id]}catch(kM){throw kM}}async exportAllPatterns(){try{const e=await this.persistence.getAllPatterns();return JSON.stringify({version:"1.0",type:"sampler-patterns-collection",exported:(new Date).toISOString(),patternCount:e.length,patterns:e},null,2)}catch(kM){throw kM}}};function cj({isOpen:e=!1,onClose:t,onPatternLoad:n,onPatternSave:r,onPatternDuplicate:i,onPatternDelete:s,currentPattern:a=null,patterns:o=[]}){const[l,c]=m.useState("load"),[d,h]=m.useState(!1),[f,p]=m.useState(null),[g,y]=m.useState(null),[v,b]=m.useState(null),[w,x]=m.useState(null),[S,k]=m.useState(""),[C,E]=m.useState(new Set),[T,_]=m.useState(!1),[N]=m.useState(()=>new lj);m.useEffect(()=>{e&&(I(),p(null),y(null))},[e]);const I=m.useCallback(async()=>{try{const e=await N.getStorageStats();b(e)}catch(e){}},[N]);m.useEffect(()=>{if(g){const e=setTimeout(()=>y(null),3e3);return()=>clearTimeout(e)}},[g]),m.useEffect(()=>{if(f){const e=setTimeout(()=>p(null),5e3);return()=>clearTimeout(e)}},[f]);const A=m.useCallback(async()=>{if(a)if(S.trim())try{h(!0),p(null);const e={...a,name:S.trim(),metadata:{...a.metadata,modified:(new Date).toISOString()}};await(r?.(e)),await I(),y(`Pattern "${S}" saved successfully`),k(""),c("load")}catch(e){p(`Failed to save pattern: ${e.message}`)}finally{h(!1)}else p("Pattern name is required");else p("No pattern to save")},[a,S,r,I]),P=m.useCallback(async e=>{try{h(!0),p(null),await(n?.(e.id)),y(`Pattern "${e.name}" loaded successfully`),t?.()}catch(r){p(`Failed to load pattern: ${r.message}`)}finally{h(!1)}},[n,t]),R=m.useCallback(async e=>{const t=`${e.name} (Copy)`;try{h(!0),p(null),await(i?.(e.id,t)),await I(),y(`Pattern duplicated as "${t}"`)}catch(n){p(`Failed to duplicate pattern: ${n.message}`)}finally{h(!1)}},[i,I]),j=m.useCallback(async e=>{if(confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{h(!0),p(null),await(s?.(e.id)),await I(),y(`Pattern "${e.name}" deleted successfully`)}catch(t){p(`Failed to delete pattern: ${t.message}`)}finally{h(!1)}},[s,I]),M=m.useCallback(async e=>{try{h(!0),p(null);const t=await N.exportPattern(e.id),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),y(`Pattern "${e.name}" exported successfully`)}catch(t){p(`Failed to export pattern: ${t.message}`)}finally{h(!1)}},[N]),D=m.useCallback(async e=>{try{h(!0),p(null);const t=await e.text(),n=await N.importPattern(t,{generateNewIds:!0,overwrite:!1});await I(),y(`Successfully imported ${n.length} pattern(s)`)}catch(t){p(`Failed to import pattern: ${t.message}`)}finally{h(!1)}},[N,I]),L=m.useCallback(e=>{e.preventDefault(),_(!1);const t=Array.from(e.dataTransfer.files).filter(e=>"application/json"===e.type||e.name.endsWith(".json"));0!==t.length?D(t[0]):p("Please drop JSON files only")},[D]),O=m.useCallback(e=>{e.preventDefault(),_(!0)},[]),F=m.useCallback(e=>{e.preventDefault(),_(!1)},[]),U=m.useCallback(e=>{if(!e)return"Unknown";try{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},[]),z=m.useCallback(e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB"][t]},[]);return e?u.jsx(ES,{children:u.jsx(uA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&t?.(),children:u.jsxs(uA.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-black/80 backdrop-blur-lg border border-white/10 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Pattern Management"}),u.jsx(xr,{variant:"ghost",size:"sm",onClick:t,className:"text-white/70 hover:text-white hover:bg-white/10",children:u.jsx(dn,{className:"w-5 h-5"})})]}),v&&u.jsx("div",{className:"px-6 py-3 bg-white/5 border-b border-white/10",children:u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("span",{className:"text-white/70",children:[v.patternCount," patterns  ",z(v.storageSize)," used"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-32 h-2 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${Math.min(v.usagePercentage,100)}%`}})}),u.jsxs("span",{className:"text-white/70 min-w-[3rem]",children:[v.usagePercentage,"%"]})]})]})}),u.jsx("div",{className:"flex border-b border-white/10",children:[{id:"load",label:"Load Pattern",icon:kt},{id:"save",label:"Save Pattern",icon:Wt},{id:"import",label:"Import/Export",icon:rn}].map(({id:e,label:t,icon:n})=>u.jsxs("button",{onClick:()=>c(e),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors "+(l===e?"text-white bg-white/10 border-b-2 border-blue-400":"text-white/70 hover:text-white hover:bg-white/5"),children:[u.jsx(n,{className:"w-4 h-4"}),t]},e))}),u.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f&&u.jsxs(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[u.jsx(mt,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),u.jsx("span",{className:"text-red-200 text-sm",children:f})]}),g&&u.jsxs(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg flex items-center gap-2",children:[u.jsx(ut,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),u.jsx("span",{className:"text-green-200 text-sm",children:g})]}),"load"===l&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-semibold text-white",children:"Saved Patterns"}),u.jsxs("span",{className:"text-sm text-white/70",children:[o.length," patterns"]})]}),0===o.length?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Ut,{className:"w-12 h-12 text-white/30 mx-auto mb-4"}),u.jsx("p",{className:"text-white/70",children:"No saved patterns found"}),u.jsx("p",{className:"text-white/50 text-sm mt-2",children:"Create and save a pattern to get started"})]}):u.jsx("div",{className:"grid gap-3",children:o.map(e=>u.jsx(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white/5 border border-white/10 rounded-lg p-4 hover:bg-white/10 transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-medium text-white truncate",children:e.name}),u.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-white/70",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(bt,{className:"w-3 h-3"}),U(e.metadata?.modified)]}),u.jsxs("span",{children:[e.bpm," BPM"]}),u.jsxs("span",{children:[e.tracks?.length||0," tracks"]}),u.jsxs("span",{children:["1/",e.stepResolution]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[u.jsx(xr,{variant:"ghost",size:"sm",onClick:()=>P(e),disabled:d,className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20",children:u.jsx(kt,{className:"w-4 h-4"})}),u.jsx(xr,{variant:"ghost",size:"sm",onClick:()=>R(e),disabled:d,className:"text-green-400 hover:text-green-300 hover:bg-green-500/20",children:u.jsx(wt,{className:"w-4 h-4"})}),u.jsx(xr,{variant:"ghost",size:"sm",onClick:()=>M(e),disabled:d,className:"text-purple-400 hover:text-purple-300 hover:bg-purple-500/20",children:u.jsx(xt,{className:"w-4 h-4"})}),u.jsx(xr,{variant:"ghost",size:"sm",onClick:()=>j(e),disabled:d,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20",children:u.jsx(tn,{className:"w-4 h-4"})})]})]})},e.id))})]}),"save"===l&&u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Save Current Pattern"}),a?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-white mb-2",children:"Current Pattern Info"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-white/70",children:[u.jsxs("div",{children:["BPM: ",a.bpm]}),u.jsxs("div",{children:["Swing: ",a.swing,"%"]}),u.jsxs("div",{children:["Tracks: ",a.tracks?.length||0]}),u.jsxs("div",{children:["Resolution: 1/",a.stepResolution]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Pattern Name"}),u.jsx("input",{type:"text",value:S,onChange:e=>k(e.target.value),placeholder:"Enter pattern name...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:50}),u.jsxs("div",{className:"text-xs text-white/50 mt-1",children:[S.length,"/50 characters"]})]}),u.jsxs(xr,{onClick:A,disabled:d||!S.trim(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[u.jsx(Wt,{className:"w-4 h-4 mr-2"}),d?"Saving...":"Save Pattern"]})]}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(Wt,{className:"w-12 h-12 text-white/30 mx-auto mb-4"}),u.jsx("p",{className:"text-white/70",children:"No pattern to save"}),u.jsx("p",{className:"text-white/50 text-sm mt-2",children:"Create a pattern first to save it"})]})]})}),"import"===l&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Import Patterns"}),u.jsxs("div",{onDrop:L,onDragOver:O,onDragLeave:F,className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors "+(T?"border-blue-400 bg-blue-500/10":"border-white/30 hover:border-white/50"),children:[u.jsx(rn,{className:"w-12 h-12 text-white/50 mx-auto mb-4"}),u.jsx("p",{className:"text-white/70 mb-2",children:"Drag and drop JSON files here, or click to select"}),u.jsx("p",{className:"text-white/50 text-sm mb-4",children:"Supports pattern files exported from this sequencer"}),u.jsx("input",{type:"file",accept:".json,application/json",onChange:e=>{const t=e.target.files?.[0];t&&D(t),e.target.value=""},className:"hidden",id:"pattern-import"}),u.jsxs("label",{htmlFor:"pattern-import",className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-lg text-white cursor-pointer transition-colors",children:[u.jsx(rn,{className:"w-4 h-4"}),"Select Files"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Export All Patterns"}),u.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Export all your saved patterns as a single JSON file for backup or sharing."}),u.jsxs(xr,{onClick:async()=>{try{h(!0);const e=await N.exportAllPatterns(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`sequencer_patterns_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),y("All patterns exported successfully")}catch(e){p(`Failed to export patterns: ${e.message}`)}finally{h(!1)}},disabled:d||0===o.length,className:"bg-purple-600 hover:bg-purple-700 text-white",children:[u.jsx(xt,{className:"w-4 h-4 mr-2"}),d?"Exporting...":"Export All Patterns"]})]})]})]})]})})}):null}const uj=new class{constructor(){this.baseMonitor=hA,this.sequencerMetrics=new Map,this.timingAccuracyHistory=[],this.audioLatencyHistory=[],this.memoryUsageHistory=[],this.alertCallbacks=[],this.config={maxTimingAccuracyHistory:100,maxAudioLatencyHistory:100,maxMemoryUsageHistory:50,timingAccuracyThreshold:5,audioLatencyThreshold:50,memoryUsageThreshold:104857600,cpuUsageThreshold:80,alertCooldown:5e3},this.lastAlertTime=new Map,this.isMonitoring=!1,this.monitoringInterval=null}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.baseMonitor.isMonitoring||this.baseMonitor.startMonitoring(),this.monitoringInterval=setInterval(()=>{this.collectSequencerMetrics(),this.checkPerformanceAlerts()},1e3))}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null))}recordTimingAccuracy(e,t,n){const r=1e3*Math.abs(t-e),i={expectedTime:e,actualTime:t,drift:r,stepIndex:n,timestamp:Date.now()};this.timingAccuracyHistory.push(i),this.timingAccuracyHistory.length>this.config.maxTimingAccuracyHistory&&this.timingAccuracyHistory.shift(),this.baseMonitor.recordMetric("sequencer_timing_accuracy",r,{stepIndex:n,expectedTime:e,actualTime:t}),r>this.config.timingAccuracyThreshold&&this.triggerAlert("timing_drift",{drift:r,stepIndex:n,threshold:this.config.timingAccuracyThreshold})}recordAudioLatency(e,t,n){const r=1e3*(t-e),i={scheduleTime:e,actualPlayTime:t,latency:r,trackId:n,timestamp:Date.now()};this.audioLatencyHistory.push(i),this.audioLatencyHistory.length>this.config.maxAudioLatencyHistory&&this.audioLatencyHistory.shift(),this.baseMonitor.recordMetric("sequencer_audio_latency",r,{trackId:n,scheduleTime:e,actualPlayTime:t}),r>this.config.audioLatencyThreshold&&this.triggerAlert("high_audio_latency",{latency:r,trackId:n,threshold:this.config.audioLatencyThreshold})}recordMemoryUsage(e){const t=Date.now(),n=e.patterns+e.samples+e.audioBuffers,r={...e,totalUsage:n,timestamp:t};this.memoryUsageHistory.push(r),this.memoryUsageHistory.length>this.config.maxMemoryUsageHistory&&this.memoryUsageHistory.shift(),this.baseMonitor.recordMetric("sequencer_memory_usage",n,e),n>this.config.memoryUsageThreshold&&this.triggerAlert("high_memory_usage",{totalUsage:n,breakdown:e,threshold:this.config.memoryUsageThreshold})}recordCPUUsage(e,t){this.baseMonitor.recordMetric("sequencer_cpu_usage",e,{operation:t}),e>this.config.cpuUsageThreshold&&this.triggerAlert("high_cpu_usage",{cpuUsage:e,operation:t,threshold:this.config.cpuUsageThreshold})}getTimingAccuracyStats(){if(0===this.timingAccuracyHistory.length)return{count:0,averageDrift:0,maxDrift:0,minDrift:0,recentDrift:0};const e=this.timingAccuracyHistory.map(e=>e.drift),t=this.timingAccuracyHistory.slice(-10),n=t.length>0?t.reduce((e,t)=>e+t.drift,0)/t.length:0;return{count:this.timingAccuracyHistory.length,averageDrift:e.reduce((e,t)=>e+t,0)/e.length,maxDrift:Math.max(...e),minDrift:Math.min(...e),recentDrift:n,isStable:n<this.config.timingAccuracyThreshold}}getAudioLatencyStats(){if(0===this.audioLatencyHistory.length)return{count:0,averageLatency:0,maxLatency:0,minLatency:0,recentLatency:0};const e=this.audioLatencyHistory.map(e=>e.latency),t=this.audioLatencyHistory.slice(-10),n=t.length>0?t.reduce((e,t)=>e+t.latency,0)/t.length:0;return{count:this.audioLatencyHistory.length,averageLatency:e.reduce((e,t)=>e+t,0)/e.length,maxLatency:Math.max(...e),minLatency:Math.min(...e),recentLatency:n,isAcceptable:n<this.config.audioLatencyThreshold}}getMemoryUsageStats(){if(0===this.memoryUsageHistory.length)return{count:0,currentUsage:0,peakUsage:0,averageUsage:0,breakdown:{}};const e=this.memoryUsageHistory[this.memoryUsageHistory.length-1],t=this.memoryUsageHistory.map(e=>e.totalUsage),n=Math.max(...t),r=t.reduce((e,t)=>e+t,0)/t.length;return{count:this.memoryUsageHistory.length,currentUsage:e.totalUsage,peakUsage:n,averageUsage:r,breakdown:{patterns:e.patterns,samples:e.samples,audioBuffers:e.audioBuffers},isWithinLimits:e.totalUsage<this.config.memoryUsageThreshold}}getPerformanceReport(){return{timestamp:Date.now(),isMonitoring:this.isMonitoring,timingAccuracy:this.getTimingAccuracyStats(),audioLatency:this.getAudioLatencyStats(),memoryUsage:this.getMemoryUsageStats(),baseMetrics:this.baseMonitor.getMetrics(),recommendations:this.getPerformanceRecommendations()}}getPerformanceRecommendations(){const e=[],t=this.getTimingAccuracyStats();t.isStable||e.push({type:"timing",severity:"high",message:`Timing drift detected (${t.recentDrift.toFixed(2)}ms). Consider reducing system load or using a dedicated audio thread.`});const n=this.getAudioLatencyStats();n.isAcceptable||e.push({type:"latency",severity:"medium",message:`High audio latency detected (${n.recentLatency.toFixed(2)}ms). Check audio buffer size and system audio settings.`});const r=this.getMemoryUsageStats();r.isWithinLimits||e.push({type:"memory",severity:"high",message:`High memory usage detected (${this.formatBytes(r.currentUsage)}). Consider clearing unused patterns or samples.`});return this.baseMonitor.getPerformanceOptimizationRecommendations().forEach(t=>{e.push({type:"general",severity:"medium",message:t})}),e}onAlert(e){"function"==typeof e&&this.alertCallbacks.push(e)}removeAlertCallback(e){const t=this.alertCallbacks.indexOf(e);t>-1&&this.alertCallbacks.splice(t,1)}triggerAlert(e,t){const n=Date.now();if(n-(this.lastAlertTime.get(e)||0)<this.config.alertCooldown)return;this.lastAlertTime.set(e,n);const r={type:e,timestamp:n,data:t,severity:this.getAlertSeverity(e,t)};this.alertCallbacks.forEach(e=>{try{e(r)}catch(kM){}})}getAlertSeverity(e,t){switch(e){case"timing_drift":return t.drift>2*this.config.timingAccuracyThreshold?"critical":"high";case"high_audio_latency":return t.latency>2*this.config.audioLatencyThreshold?"high":"medium";case"high_memory_usage":return t.totalUsage>1.5*this.config.memoryUsageThreshold?"critical":"high";case"high_cpu_usage":return t.cpuUsage>90?"critical":"high";default:return"medium"}}collectSequencerMetrics(){const e=this.baseMonitor.getCurrentMemoryUsage();e.unavailable||this.baseMonitor.recordMetric("sequencer_system_memory",e.usedJSHeapSize,{totalHeapSize:e.totalJSHeapSize,heapSizeLimit:e.jsHeapSizeLimit})}checkPerformanceAlerts(){if(this.memoryUsageHistory.length>=5){const e=this.memoryUsageHistory.slice(-5),t=e.reduce((e,t)=>e+t.totalUsage,0)/e.length;t>this.config.memoryUsageThreshold&&this.triggerAlert("sustained_high_memory",{averageUsage:t,threshold:this.config.memoryUsageThreshold,duration:"5 measurements"})}if(this.timingAccuracyHistory.length>=10){const e=this.timingAccuracyHistory.slice(-10),t=this.calculateVariance(e.map(e=>e.drift));t>10&&this.triggerAlert("timing_instability",{variance:t,recentMeasurements:e.length})}}calculateVariance(e){if(0===e.length)return 0;const t=e.reduce((e,t)=>e+t,0)/e.length;return e.map(e=>Math.pow(e-t,2)).reduce((e,t)=>e+t,0)/e.length}formatBytes(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}cleanup(){this.stopMonitoring(),this.sequencerMetrics.clear(),this.timingAccuracyHistory=[],this.audioLatencyHistory=[],this.memoryUsageHistory=[],this.alertCallbacks=[],this.lastAlertTime.clear()}};class dj{constructor(e){this.audioContext=e,this.lookahead=25,this.scheduleAheadTime=.1,this.timerWorker=null,this.isRunning=!1,this.nextStepTime=0,this.currentStep=0,this.bpm=120,this.swing=0,this.stepResolution=16,this.startTime=0,this.stepCount=0,this.onStep=null,this.onScheduleNote=null,this.schedulingStats={totalScheduled:0,averageLatency:0,maxLatency:0}}initialize(){if(!this.audioContext)throw new Error("AudioContext is required for AudioScheduler");const e=new Blob(['\n      let timerID = null;\n      let isRunning = false;\n      const TIMER_INTERVAL = 25; // Fixed 25ms for stability\n      \n      self.onmessage = function(e) {\n        if (e.data === "start" && !isRunning) {\n          isRunning = true;\n          timerID = setInterval(() => {\n            if (isRunning) {\n              self.postMessage("tick");\n            }\n          }, TIMER_INTERVAL);\n        } else if (e.data === "stop") {\n          isRunning = false;\n          if (timerID) {\n            clearInterval(timerID);\n            timerID = null;\n          }\n        }\n      };\n    '],{type:"application/javascript"});this.timerWorker=new Worker(URL.createObjectURL(e)),this.timerWorker.onmessage=e=>{"tick"===e.data&&this.scheduler()}}start(){this.timerWorker||this.initialize(),this.isRunning=!0,this.startTime=this.audioContext.currentTime+.005,this.nextStepTime=this.startTime,this.currentStep=0,this.stepCount=0,this.timerWorker.postMessage("start")}stop(){this.isRunning=!1,this.timerWorker&&this.timerWorker.postMessage("stop"),this.currentStep=0,this.nextStepTime=0}pause(){this.isRunning=!1,this.timerWorker&&this.timerWorker.postMessage("stop")}resume(){if(!this.isRunning){this.isRunning=!0;const e=this.audioContext.currentTime+.005,t=this.getStepDuration();this.startTime=e-this.stepCount*t,this.nextStepTime=e,this.timerWorker&&this.timerWorker.postMessage("start")}}setBPM(e){if(e<60||e>200)throw new Error("BPM must be between 60 and 200");const t=this.bpm;if(this.bpm=e,t!==e&&this.isRunning,this.isRunning&&t!==e){const e=this.audioContext.currentTime,t=this.getStepDuration();this.startTime=e-this.stepCount*t,this.nextStepTime=e}}setSwing(e){if(e<0||e>100)throw new Error("Swing must be between 0 and 100");this.swing!==e&&this.isRunning,this.swing=e}setStepResolution(e){if(![8,16,32,64].includes(e))throw new Error("Step resolution must be 8, 16, 32, or 64");this.stepResolution=e}getStepDuration(){return 60/this.bpm/(this.stepResolution/4)}calculateSwingTiming(e,t){if(0===this.swing)return e;if(t%2==1){const t=this.swing/100;return e+.3*this.getStepDuration()*t}return e}applyRandomization(e,t,n){let r=e,i=t;if(n.timing&&n.timing.enabled){const e=n.timing.amount/100,t=.1*this.getStepDuration();r+=2*(Math.random()-.5)*t*e}if(n.velocity&&n.velocity.enabled){const e=n.velocity.amount/100,r=2*(Math.random()-.5)*e;i=Math.max(.1,Math.min(1,t+r))}return{timing:r,velocity:i}}scheduleNote(e,t,n=1,r={},i=null){const s=performance.now();try{const a=this.applyRandomization(e,n,r);this.onScheduleNote&&this.onScheduleNote(a.timing,t,a.velocity,i);const o=performance.now()-s;this.updateSchedulingStats(o),uj.baseMonitor.recordMetric("audio_scheduler_note",o,{trackId:i,velocity:a.velocity,hasRandomization:Object.keys(r).length>0,timingAdjustment:a.timing-e})}catch(kM){uj.baseMonitor.recordMetric("audio_scheduler_error",0,{error:kM.message,trackId:i})}}scheduler(){if(!this.isRunning)return;const e=performance.now(),t=this.audioContext.currentTime;for(;this.nextStepTime<t+this.scheduleAheadTime;){const e=this.calculateSwingTiming(this.nextStepTime,this.currentStep);this.onStep&&this.onStep(this.currentStep,e),this.advanceStepAbsolute()}const n=performance.now()-e;n>1&&uj.baseMonitor.recordMetric("audio_scheduler_loop",n,{currentStep:this.currentStep,nextStepTime:this.nextStepTime,audioContextTime:t})}advanceStepAbsolute(){this.stepCount++,this.currentStep=(this.currentStep+1)%this.stepResolution;const e=this.getStepDuration();this.nextStepTime=this.startTime+this.stepCount*e}updateSchedulingStats(e){this.schedulingStats.totalScheduled++;const t=this.schedulingStats.averageLatency*(this.schedulingStats.totalScheduled-1);this.schedulingStats.averageLatency=(t+e)/this.schedulingStats.totalScheduled,e>this.schedulingStats.maxLatency&&(this.schedulingStats.maxLatency=e)}getSchedulingStats(){return{...this.schedulingStats}}resetSchedulingStats(){this.schedulingStats={totalScheduled:0,averageLatency:0,maxLatency:0}}getCurrentStep(){return this.currentStep}getNextStepTime(){return this.nextStepTime}getIsRunning(){return this.isRunning}getTimingDiagnostics(){const e=this.audioContext.currentTime,t=this.startTime+this.stepCount*this.getStepDuration(),n=Math.abs(this.nextStepTime-t);return{isRunning:this.isRunning,currentStep:this.currentStep,stepCount:this.stepCount,bpm:this.bpm,swing:this.swing,currentTime:e,nextStepTime:this.nextStepTime,expectedStepTime:t,timingDrift:n,stepDuration:this.getStepDuration(),startTime:this.startTime}}destroy(){this.stop(),this.timerWorker&&(this.timerWorker.terminate(),this.timerWorker=null)}}class hj{constructor(){this.audioContext=null,this.scheduler=null,this.patternManager=null,this.sampleManager=null,this.isPlaying=!1,this.isPaused=!1,this.currentStep=0,this.nextStepTime=0,this.bpm=120,this.swing=0,this.stepResolution=16,this.schedulerIntervalId=null,this.stepCallbacks=[],this.stateChangeCallbacks=[],this.performanceStats={totalSteps:0,averageLatency:0,maxLatency:0,timingDrift:0},this.lastStepTime=0,this.isInitialized=!1}async initialize(e,t={}){if(!e)throw new Error("AudioContext is required for SequencerEngine");const n=uj.baseMonitor.startMeasurement("sequencer_engine_init");this.audioContext=e,this.scheduler=new dj(e),this.scheduler.initialize(),this.scheduler.onStep=(e,t)=>{this.handleStep(e,t)},this.scheduler.onScheduleNote=(e,t,n,r)=>{this.handleNoteScheduling(e,t,n,r)},this.patternManager=t.patternManager||null,this.sampleManager=t.sampleManager||null,this.scheduler.setBPM(this.bpm),this.scheduler.setSwing(this.swing),this.scheduler.setStepResolution(this.stepResolution),uj.startMonitoring(),this.isInitialized=!0,n({audioContextState:e.state,hasDependencies:!(!t.patternManager||!t.sampleManager)})}async start(){if(!this.isInitialized)throw new Error("SequencerEngine must be initialized before starting");if(!this.isPlaying)try{"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.isPaused||(this.currentStep=0,this.resetPerformanceStats(),this.scheduler&&(this.scheduler.currentStep=0)),this.scheduler.start(),this.isPlaying=!0,this.isPaused=!1,this.lastStepTime=this.audioContext.currentTime,this.notifyStateChange()}catch(kM){throw kM}}stop(){(this.isPlaying||this.isPaused)&&(this.scheduler&&this.scheduler.stop(),this.isPlaying=!1,this.isPaused=!1,this.currentStep=0,this.nextStepTime=0,this.notifyStateChange())}pause(){this.isPlaying&&(this.scheduler&&this.scheduler.pause(),this.isPlaying=!1,this.isPaused=!0,this.notifyStateChange())}async resume(){if(this.isPaused)try{"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.scheduler&&this.scheduler.resume(),this.isPlaying=!0,this.isPaused=!1,this.lastStepTime=this.audioContext.currentTime,this.notifyStateChange()}catch(kM){throw kM}}setBPM(e){if("number"!=typeof e||e<60||e>200)throw new Error("BPM must be a number between 60 and 200");if(this.bpm=e,this.scheduler&&(this.scheduler.setBPM(e),this.isPlaying)){const e=this.audioContext.currentTime,t=this.scheduler.getStepDuration();this.scheduler.nextStepTime=e+t}this.notifyStateChange()}setSwing(e){if("number"!=typeof e||e<0||e>100)throw new Error("Swing must be a number between 0 and 100");this.swing=e,this.scheduler&&this.scheduler.setSwing(e),this.notifyStateChange()}setStepResolution(e){if(![8,16,32,64].includes(e))throw new Error("Step resolution must be 8, 16, 32, or 64");const t=this.stepResolution;if(this.stepResolution=e,this.scheduler&&this.scheduler.setStepResolution(e),this.currentStep>0){const n=e/t;this.currentStep=Math.floor(this.currentStep*n)%e}this.patternManager&&this.patternManager.updateStepResolution(e),this.notifyStateChange()}scheduleNextStep(){if(!this.isPlaying||!this.patternManager)return;const e=this.patternManager.getCurrentPattern();if(!e)return;const t=e.tracks.filter(e=>e.solo).length>0;e.tracks.filter(e=>{const n=e.steps[this.currentStep];return!(!n||!n.active)&&(!e.mute&&(!(t&&!e.solo)&&!this.sampleManager?.isTrackMuted(e.id)))}).forEach(e=>{if(this.sampleManager){const t=this.sampleManager.getSample(e.sampleId);if(t){const n=e.steps[this.currentStep].velocity*e.volume*this.sampleManager.getTrackVolume(e.id);this.scheduler.scheduleNote(this.nextStepTime,t,n,e.randomization,e.id)}}})}getState(){return{isPlaying:this.isPlaying,isPaused:this.isPaused,currentStep:this.currentStep,bpm:this.bpm,swing:this.swing,stepResolution:this.stepResolution,nextStepTime:this.nextStepTime,isInitialized:this.isInitialized,performanceStats:{...this.performanceStats}}}destroy(){this.stop(),this.scheduler&&(this.scheduler.destroy(),this.scheduler=null),this.stepCallbacks=[],this.stateChangeCallbacks=[],this.audioContext=null,this.patternManager=null,this.sampleManager=null,this.isInitialized=!1}onStep(e){"function"==typeof e&&this.stepCallbacks.push(e)}onStateChange(e){"function"==typeof e&&this.stateChangeCallbacks.push(e)}removeStepCallback(e){const t=this.stepCallbacks.indexOf(e);t>-1&&this.stepCallbacks.splice(t,1)}removeStateChangeCallback(e){const t=this.stateChangeCallbacks.indexOf(e);t>-1&&this.stateChangeCallbacks.splice(t,1)}handleStep(e,t){const n=performance.now(),r=this.calculateExpectedStepTime(e);this.currentStep=e,this.nextStepTime=t,uj.recordTimingAccuracy(r,t,e),this.scheduleNextStep();const i=performance.now()-n;this.updatePerformanceStats(i,t),this.stepCallbacks.forEach(n=>{try{n(e,t)}catch(kM){}})}handleNoteScheduling(e,t,n,r=null){const i=performance.now();if(this.sampleManager&&t){this.sampleManager.scheduleNote(e,t,n,r);const i=e;uj.recordAudioLatency(e,i,r)}const s=performance.now()-i;uj.baseMonitor.recordMetric("sequencer_note_scheduling",s,{trackId:r,velocity:n,hasScheduler:!!this.sampleManager})}notifyStateChange(){const e=this.getState();this.stateChangeCallbacks.forEach(t=>{try{t(e)}catch(kM){}})}updatePerformanceStats(e,t){this.performanceStats.totalSteps++;const n=this.performanceStats.averageLatency*(this.performanceStats.totalSteps-1);if(this.performanceStats.averageLatency=(n+e)/this.performanceStats.totalSteps,e>this.performanceStats.maxLatency&&(this.performanceStats.maxLatency=e),this.lastStepTime>0){const e=this.scheduler?this.scheduler.getStepDuration():0,n=t-this.lastStepTime,r=Math.abs(n-e);this.performanceStats.timingDrift=Math.max(this.performanceStats.timingDrift,r)}this.lastStepTime=t}resetPerformanceStats(){this.performanceStats={totalSteps:0,averageLatency:0,maxLatency:0,timingDrift:0},this.lastStepTime=0}getPerformanceStats(){return{...this.performanceStats}}calculateExpectedStepTime(e){if(!this.scheduler)return 0;const t=this.scheduler.getStepDuration();return this.audioContext.currentTime-this.currentStep*t+e*t}}const fj=new class{constructor(){this.patterns=new Map,this.samples=new Map,this.audioBuffers=new Map,this.patternCache=new Map,this.sampleCache=new Map,this.memoryUsage={patterns:0,samples:0,audioBuffers:0,cache:0},this.config={maxPatterns:50,maxSamples:100,maxAudioBuffers:50,maxCacheSize:20,memoryCheckInterval:5e3,autoCleanupThreshold:.8,compressionEnabled:!0},this.memoryCheckInterval=null,this.isMonitoring=!1,this.cleanupCallbacks=[]}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.memoryCheckInterval=setInterval(()=>{this.checkMemoryUsage(),this.reportMemoryUsage()},this.config.memoryCheckInterval))}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.memoryCheckInterval&&(clearInterval(this.memoryCheckInterval),this.memoryCheckInterval=null))}storePattern(e,t){try{this.patterns.size>=this.config.maxPatterns&&this.cleanupOldPatterns();const n=this.calculatePatternSize(t);return this.patterns.set(e,{data:t,size:n,timestamp:Date.now(),accessCount:0,lastAccessed:Date.now()}),this.memoryUsage.patterns+=n,this.patternCache.size<this.config.maxCacheSize&&(this.patternCache.set(e,t),this.memoryUsage.cache+=n),!0}catch(kM){return!1}}getPattern(e){if(this.patternCache.has(e)){const t=this.patternCache.get(e);return this.updateAccessStats(e,"pattern"),t}if(this.patterns.has(e)){const t=this.patterns.get(e);return this.updateAccessStats(e,"pattern"),t.accessCount>3&&this.patternCache.size<this.config.maxCacheSize&&(this.patternCache.set(e,t.data),this.memoryUsage.cache+=t.size),t.data}return null}removePattern(e){let t=!1;if(this.patterns.has(e)){const n=this.patterns.get(e);this.memoryUsage.patterns-=n.size,this.patterns.delete(e),t=!0}if(this.patternCache.has(e)){const t=this.patternCache.get(e),n=this.calculatePatternSize(t);this.memoryUsage.cache-=n,this.patternCache.delete(e)}return t}storeSample(e,t){try{this.samples.size>=this.config.maxSamples&&this.cleanupOldSamples();const n=this.calculateSampleSize(t);return this.samples.set(e,{data:t,size:n,timestamp:Date.now(),accessCount:0,lastAccessed:Date.now()}),this.memoryUsage.samples+=n,!0}catch(kM){return!1}}getSample(e){if(this.samples.has(e)){const t=this.samples.get(e);return this.updateAccessStats(e,"sample"),t.data}return null}removeSample(e){if(this.samples.has(e)){const t=this.samples.get(e);return this.memoryUsage.samples-=t.size,this.samples.delete(e),!0}return!1}storeAudioBuffer(e,t){try{this.audioBuffers.size>=this.config.maxAudioBuffers&&this.cleanupOldAudioBuffers();const n=this.calculateAudioBufferSize(t);return this.audioBuffers.set(e,{data:t,size:n,timestamp:Date.now(),accessCount:0,lastAccessed:Date.now()}),this.memoryUsage.audioBuffers+=n,!0}catch(kM){return!1}}getAudioBuffer(e){if(this.audioBuffers.has(e)){const t=this.audioBuffers.get(e);return this.updateAccessStats(e,"audioBuffer"),t.data}return null}removeAudioBuffer(e){if(this.audioBuffers.has(e)){const t=this.audioBuffers.get(e);return this.memoryUsage.audioBuffers-=t.size,this.audioBuffers.delete(e),!0}return!1}getMemoryUsage(){const e=this.memoryUsage.patterns+this.memoryUsage.samples+this.memoryUsage.audioBuffers+this.memoryUsage.cache;return{patterns:this.memoryUsage.patterns,samples:this.memoryUsage.samples,audioBuffers:this.memoryUsage.audioBuffers,cache:this.memoryUsage.cache,total:e,counts:{patterns:this.patterns.size,samples:this.samples.size,audioBuffers:this.audioBuffers.size,cachedPatterns:this.patternCache.size},formatted:{patterns:this.formatBytes(this.memoryUsage.patterns),samples:this.formatBytes(this.memoryUsage.samples),audioBuffers:this.formatBytes(this.memoryUsage.audioBuffers),cache:this.formatBytes(this.memoryUsage.cache),total:this.formatBytes(e)}}}cleanup(e={}){const{clearPatterns:t=!1,clearSamples:n=!1,clearAudioBuffers:r=!1,clearCache:i=!0,force:s=!1}=e;let a=0;return i&&(a+=this.memoryUsage.cache,this.patternCache.clear(),this.sampleCache.clear(),this.memoryUsage.cache=0),(t||s)&&(a+=this.memoryUsage.patterns,this.patterns.clear(),this.memoryUsage.patterns=0),(n||s)&&(a+=this.memoryUsage.samples,this.samples.clear(),this.memoryUsage.samples=0),(r||s)&&(a+=this.memoryUsage.audioBuffers,this.audioBuffers.clear(),this.memoryUsage.audioBuffers=0),this.cleanupCallbacks.forEach(t=>{try{t({freedMemory:a,options:e})}catch(kM){}}),a}onCleanup(e){"function"==typeof e&&this.cleanupCallbacks.push(e)}removeCleanupCallback(e){const t=this.cleanupCallbacks.indexOf(e);t>-1&&this.cleanupCallbacks.splice(t,1)}calculatePatternSize(e){try{const t=JSON.stringify(e);return new Blob([t]).size}catch(kM){return 1024}}calculateSampleSize(e){try{let t=0;e.metadata&&(t+=new Blob([JSON.stringify(e.metadata)]).size),e.audioBuffer&&(t+=this.calculateAudioBufferSize(e.audioBuffer));const n={...e};return delete n.audioBuffer,delete n.metadata,t+=new Blob([JSON.stringify(n)]).size,t}catch(kM){return 10240}}calculateAudioBufferSize(e){if(!e)return 0;try{return e.numberOfChannels*e.length*4}catch(kM){return 0}}updateAccessStats(e,t){let n;switch(t){case"pattern":n=this.patterns;break;case"sample":n=this.samples;break;case"audioBuffer":n=this.audioBuffers;break;default:return}if(n.has(e)){const t=n.get(e);t.accessCount++,t.lastAccessed=Date.now()}}cleanupOldPatterns(){const e=Array.from(this.patterns.entries());e.sort((e,t)=>e[1].lastAccessed-t[1].lastAccessed);const t=Math.ceil(.2*e.length);for(let n=0;n<t;n++)this.removePattern(e[n][0])}cleanupOldSamples(){const e=Array.from(this.samples.entries());e.sort((e,t)=>e[1].lastAccessed-t[1].lastAccessed);const t=Math.ceil(.2*e.length);for(let n=0;n<t;n++)this.removeSample(e[n][0])}cleanupOldAudioBuffers(){const e=Array.from(this.audioBuffers.entries());e.sort((e,t)=>e[1].lastAccessed-t[1].lastAccessed);const t=Math.ceil(.2*e.length);for(let n=0;n<t;n++)this.removeAudioBuffer(e[n][0])}checkMemoryUsage(){this.getMemoryUsage();const e=uj.baseMonitor.getCurrentMemoryUsage();if(!e.unavailable){e.usedJSHeapSize/e.jsHeapSizeLimit>this.config.autoCleanupThreshold&&this.cleanup({clearCache:!0})}}reportMemoryUsage(){const e=this.getMemoryUsage();uj.recordMemoryUsage(e)}formatBytes(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}};class pj{constructor(){this.patterns=new Map,this.currentPattern=null,this.stepResolution=16,this.maxTracks=16,this.maxSteps=64,this.storageService=new lj,fj.startMonitoring(),fj.onCleanup(e=>{})}createPattern(e,t=8,n=16){if(!e||"string"!=typeof e)throw new Error("Pattern name is required and must be a string");if(t<1||t>this.maxTracks)throw new Error(`Number of tracks must be between 1 and ${this.maxTracks}`);if(n<1||n>this.maxSteps)throw new Error(`Number of steps must be between 1 and ${this.maxSteps}`);const r=this.generatePatternId(),i={id:r,name:e,bpm:120,swing:0,stepResolution:this.stepResolution,tracks:this.createDefaultTracks(t,n),metadata:{created:(new Date).toISOString(),modified:(new Date).toISOString(),userId:null}};return this.patterns.set(r,i),fj.storePattern(r,i),i}async loadPattern(e){if(!e||"string"!=typeof e)throw new Error("Pattern ID is required and must be a string");let t=fj.getPattern(e);if(t||(t=this.patterns.get(e)),!t)try{t=await this.storageService.loadPattern(e)}catch(kM){throw new Error(`Pattern with ID ${e} not found`)}if(!this.validatePattern(t))throw new Error(`Pattern ${e} is invalid`);return this.currentPattern=t,this.stepResolution=t.stepResolution,this.patterns.set(e,t),fj.storePattern(e,t),t}async savePattern(e){if(!e)throw new Error("Pattern is required");if(e.id||(e.id=this.generatePatternId()),!this.validatePattern(e))throw new Error("Pattern is invalid and cannot be saved");return e.metadata.modified=(new Date).toISOString(),await this.storageService.savePattern(e),this.patterns.set(e.id,{...e}),fj.storePattern(e.id,e),e.id}toggleStep(e,t){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if("number"!=typeof t||t<0)throw new Error("Step index must be a non-negative number");const n=this.currentPattern.tracks.find(t=>t.id===e);if(!n)throw new Error(`Track with ID ${e} not found`);if(t>=n.steps.length)throw new Error(`Step index ${t} is out of range for track ${e}`);n.steps[t].active=!n.steps[t].active,this.currentPattern.metadata.modified=(new Date).toISOString()}setStepVelocity(e,t,n){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if("number"!=typeof t||t<0)throw new Error("Step index must be a non-negative number");if("number"!=typeof n||n<0||n>1)throw new Error("Velocity must be a number between 0.0 and 1.0");const r=this.currentPattern.tracks.find(t=>t.id===e);if(!r)throw new Error(`Track with ID ${e} not found`);if(t>=r.steps.length)throw new Error(`Step index ${t} is out of range for track ${e}`);r.steps[t].velocity=n,this.currentPattern.metadata.modified=(new Date).toISOString()}clearPattern(){if(!this.currentPattern)throw new Error("No pattern is currently loaded");this.currentPattern.tracks.forEach(e=>{e.steps.forEach(e=>{e.active=!1,e.velocity=.8})}),this.currentPattern.metadata.modified=(new Date).toISOString()}duplicatePattern(e,t){if(!e||"string"!=typeof e)throw new Error("Pattern ID is required and must be a string");if(!t||"string"!=typeof t)throw new Error("New pattern name is required and must be a string");const n=this.patterns.get(e);if(!n)throw new Error(`Pattern with ID ${e} not found`);const r={id:this.generatePatternId(),name:t,bpm:n.bpm,swing:n.swing,stepResolution:n.stepResolution,tracks:n.tracks.map(e=>({id:e.id,name:e.name,sampleId:e.sampleId,volume:e.volume,mute:e.mute,solo:e.solo,color:e.color,randomization:{...e.randomization},steps:e.steps.map(e=>({...e}))})),metadata:{created:(new Date).toISOString(),modified:(new Date).toISOString(),userId:n.metadata.userId}};return this.patterns.set(r.id,r),r}changeStepResolution(e){if(![8,16,32].includes(e))throw new Error("Step resolution must be 8, 16, or 32");const t=this.stepResolution;this.stepResolution=e,this.currentPattern&&(this.currentPattern.stepResolution=e,this.currentPattern.tracks.forEach(n=>{const r=[...n.steps],i=[];if(e>t){const n=e/t;for(let t=0;t<e;t++){const e=Math.floor(t/n);i[t]=e<r.length&&t%n===0?{...r[e]}:{active:!1,velocity:.8}}}else{const n=t/e;for(let t=0;t<e;t++){const e=Math.floor(t*n);i[t]=e<r.length?{...r[e]}:{active:!1,velocity:.8}}}n.steps=i}),this.currentPattern.metadata.modified=(new Date).toISOString())}validatePattern(e){if(!e||"object"!=typeof e)return!1;if(!e.id||"string"!=typeof e.id)return!1;if(!e.name||"string"!=typeof e.name)return!1;if("number"!=typeof e.bpm||e.bpm<60||e.bpm>200)return!1;if("number"!=typeof e.swing||e.swing<0||e.swing>100)return!1;if(![8,16,32].includes(e.stepResolution))return!1;if(!Array.isArray(e.tracks)||0===e.tracks.length)return!1;if(e.tracks.length>this.maxTracks)return!1;for(const t of e.tracks)if(!this.validateTrack(t))return!1;return!(!e.metadata||"object"!=typeof e.metadata)&&!(!e.metadata.created||!e.metadata.modified)}getCurrentPattern(){return this.currentPattern}setCurrentPattern(e){if(e&&!this.validatePattern(e))throw new Error("Invalid pattern cannot be set as current");this.currentPattern=e,e&&(this.stepResolution=e.stepResolution)}getAllPatterns(){return Array.from(this.patterns.values())}async deletePattern(e){if(!e||"string"!=typeof e)throw new Error("Pattern ID is required and must be a string");let t=!1;try{t=await this.storageService.deletePattern(e)}catch(kM){}const n=this.patterns.has(e);return n&&(this.patterns.delete(e),fj.removePattern(e),this.currentPattern&&this.currentPattern.id===e&&(this.currentPattern=null)),t||n}updateStepResolution(e){this.changeStepResolution(e)}setTrackVolume(e,t){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if("number"!=typeof t||t<0||t>1)throw new Error("Volume must be a number between 0.0 and 1.0");const n=this.currentPattern.tracks.find(t=>t.id===e);if(!n)throw new Error(`Track with ID ${e} not found`);n.volume=t,this.currentPattern.metadata.modified=(new Date).toISOString()}toggleTrackMute(e){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");const t=this.currentPattern.tracks.find(t=>t.id===e);if(!t)throw new Error(`Track with ID ${e} not found`);t.mute=!t.mute,this.currentPattern.metadata.modified=(new Date).toISOString()}toggleTrackSolo(e){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");const t=this.currentPattern.tracks.find(t=>t.id===e);if(!t)throw new Error(`Track with ID ${e} not found`);t.solo=!t.solo,this.currentPattern.metadata.modified=(new Date).toISOString()}setTrackName(e,t){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if(!t||"string"!=typeof t)throw new Error("Track name is required and must be a string");const n=this.currentPattern.tracks.find(t=>t.id===e);if(!n)throw new Error(`Track with ID ${e} not found`);n.name=t.trim(),this.currentPattern.metadata.modified=(new Date).toISOString()}setTrackColor(e,t){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if(!t||"string"!=typeof t)throw new Error("Track color is required and must be a string");if(!/^#[0-9A-F]{6}$/i.test(t))throw new Error("Track color must be a valid hex color (e.g., #FF0000)");const n=this.currentPattern.tracks.find(t=>t.id===e);if(!n)throw new Error(`Track with ID ${e} not found`);n.color=t,this.currentPattern.metadata.modified=(new Date).toISOString()}setTrackRandomization(e,t){if(!this.currentPattern)throw new Error("No pattern is currently loaded");if(!e||"string"!=typeof e)throw new Error("Track ID is required and must be a string");if(!t||"object"!=typeof t)throw new Error("Randomization settings are required and must be an object");const n=this.currentPattern.tracks.find(t=>t.id===e);if(!n)throw new Error(`Track with ID ${e} not found`);if(t.velocity){const e=t.velocity;if("boolean"!=typeof e.enabled||"number"!=typeof e.amount||e.amount<0||e.amount>100)throw new Error("Invalid velocity randomization settings")}if(t.timing){const e=t.timing;if("boolean"!=typeof e.enabled||"number"!=typeof e.amount||e.amount<0||e.amount>100)throw new Error("Invalid timing randomization settings")}n.randomization={...t},this.currentPattern.metadata.modified=(new Date).toISOString()}generatePatternId(){return`pattern_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}createDefaultTracks(e,t){const n=["Kick","Snare","Hi-Hat","Open Hat","Crash","Ride","Tom 1","Tom 2","Clap","Perc 1","Perc 2","Perc 3","Perc 4","Perc 5","Perc 6","Perc 7"],r=["#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899"],i=[];for(let s=0;s<e;s++){const e={id:`track_${s}`,name:n[s]||`Track ${s+1}`,sampleId:null,volume:.8,mute:!1,solo:!1,color:r[s%r.length],randomization:{velocity:{enabled:!1,amount:0},timing:{enabled:!1,amount:0}},steps:this.createDefaultSteps(t)};i.push(e)}return i}createDefaultSteps(e){const t=[];for(let n=0;n<e;n++)t.push({active:!1,velocity:.8});return t}validateTrack(e){if(!e||"object"!=typeof e)return!1;if(!e.id||"string"!=typeof e.id)return!1;if(!e.name||"string"!=typeof e.name)return!1;if("number"!=typeof e.volume||e.volume<0||e.volume>1)return!1;if("boolean"!=typeof e.mute||"boolean"!=typeof e.solo)return!1;if(!Array.isArray(e.steps)||0===e.steps.length)return!1;if(e.steps.length>this.maxSteps)return!1;for(const t of e.steps)if(!this.validateStep(t))return!1;if(e.randomization){if(e.randomization.velocity){const t=e.randomization.velocity;if("boolean"!=typeof t.enabled||"number"!=typeof t.amount||t.amount<0||t.amount>100)return!1}if(e.randomization.timing){const t=e.randomization.timing;if("boolean"!=typeof t.enabled||"number"!=typeof t.amount||t.amount<0||t.amount>100)return!1}}return!0}validateStep(e){return!(!e||"object"!=typeof e)&&("boolean"==typeof e.active&&!("number"!=typeof e.velocity||e.velocity<0||e.velocity>1))}cleanup(e={}){const{clearCurrent:t=!1,clearAll:n=!1}=e;n?(this.patterns.clear(),this.currentPattern=null,fj.cleanup({clearPatterns:!0})):t&&this.currentPattern&&(this.deletePattern(this.currentPattern.id),this.currentPattern=null)}getMemoryUsage(){return fj.getMemoryUsage()}async getSavedPatterns(){try{return await this.storageService.getAllPatterns()}catch(kM){return[]}}async exportPattern(e){if(!e||"string"!=typeof e)throw new Error("Pattern ID is required and must be a string");try{return await this.storageService.exportPattern(e)}catch(kM){throw new Error(`Failed to export pattern: ${kM.message}`)}}async exportAllPatterns(){try{return await this.storageService.exportAllPatterns()}catch(kM){throw new Error(`Failed to export patterns: ${kM.message}`)}}async importPattern(e,t={}){if(!e||"string"!=typeof e)throw new Error("JSON string is required");try{const n=await this.storageService.importPattern(e,t);for(const e of n)try{const t=await this.storageService.loadPattern(e);this.patterns.set(e,t),fj.storePattern(e,t)}catch(kM){}return n}catch(kM){throw new Error(`Failed to import pattern: ${kM.message}`)}}async getStorageStats(){try{return await this.storageService.getStorageStats()}catch(kM){return{patternCount:0,storageSize:0,maxStorageSize:0,usagePercentage:0,lastAccess:null,version:1}}}async clearAllSavedPatterns(){try{await this.storageService.clearAllPatterns(),this.patterns.clear(),this.currentPattern=null,fj.cleanup({clearPatterns:!0})}catch(kM){throw new Error(`Failed to clear patterns: ${kM.message}`)}}async patternExistsInStorage(e){if(!e||"string"!=typeof e)return!1;try{return await this.storageService.patternExists(e)}catch(kM){return!1}}async saveCurrentPattern(){if(!this.currentPattern)return null;try{return await this.savePattern(this.currentPattern)}catch(kM){throw new Error(`Failed to save current pattern: ${kM.message}`)}}}class mj{constructor(){this.samples=new Map,this.samplePlaybackEngine=null,this.trackSampleAssignments=new Map,this.preloadedSamples=new Set,this.isLoading=!1,this.trackVolumeSettings=new Map,this.mutedTracks=new Set,fj.onCleanup(e=>{})}initialize(e){if(!e)throw new Error("SamplePlaybackEngine is required for SampleManager");this.samplePlaybackEngine=e}async loadSamplePack(e){if(!e||"string"!=typeof e)throw new Error("Pack ID is required and must be a string");this.isLoading=!0;try{const e=this.getDefaultDrumKit();for(const t of e)await this.loadSample(t.id,t.url,t.metadata),this.samplePlaybackEngine&&await this.samplePlaybackEngine.preloadSample(t.url);this.isLoading=!1}catch(kM){throw this.isLoading=!1,kM}}async preloadSamples(e,t=null){if(!Array.isArray(e))throw new Error("Sample list must be an array");this.isLoading=!0;const n={total:e.length,successful:0,failed:0,errors:[]};try{for(let r=0;r<e.length;r++){const i=e[r];try{if(this.preloadedSamples.has(i))n.successful++;else{const e=this.samples.get(i);if(!e||!this.samplePlaybackEngine)throw new Error(`Sample ${i} not found or no playback engine available`);await this.samplePlaybackEngine.preloadSample(e.filename),this.preloadedSamples.add(i),n.successful++}}catch(kM){n.failed++,n.errors.push({sampleId:i,error:kM.message}),await this.loadFallbackSample(i)}t&&t(r+1,e.length)}return this.isLoading=!1,n}catch(kM){throw this.isLoading=!1,kM}}async preloadAllSamples(e=null){const t=Array.from(this.samples.keys());return this.preloadSamples(t,e)}getSample(e){if(!e||"string"!=typeof e)return null;let t=fj.getSample(e);return t||(t=this.samples.get(e)),t||null}assignSampleToTrack(e,t){return!!this.validateSampleAssignment(e,t)&&(this.trackSampleAssignments.set(e,t),!0)}getTrackSample(e){if(!e||"string"!=typeof e)return null;const t=this.trackSampleAssignments.get(e);return t?this.getSample(t):null}async loadSample(e,t,n={}){if(!e||"string"!=typeof e)throw new Error("Sample ID is required and must be a string");if(!t||"string"!=typeof t)throw new Error("Sample URL is required and must be a string");try{const r=this.extractSoundTypeFromUrl(t),i=this.createMockAudioBuffer(r),s={id:e,name:n.name||e,filename:t,audioBuffer:i,metadata:{duration:n.duration||1,sampleRate:n.sampleRate||44100,channels:n.channels||1,size:n.size||44100,...n},tags:n.tags||[]};return this.samples.set(e,s),fj.storeSample(e,s),s.audioBuffer&&fj.storeAudioBuffer(`${e}_buffer`,s.audioBuffer),s}catch(kM){throw kM}}validateSampleAssignment(e,t){return!(!e||"string"!=typeof e)&&(!(!t||"string"!=typeof t)&&!!this.samples.has(t))}getAllSamples(){return Array.from(this.samples.values())}getSamplesByTag(e){return e&&"string"==typeof e?Array.from(this.samples.values()).filter(t=>t.tags&&t.tags.includes(e)):[]}isLoadingSamples(){return this.isLoading}getLoadingProgress(){const e=this.samples.size,t=this.preloadedSamples.size;return{total:e,loaded:t,percentage:e>0?t/e*100:0,isLoading:this.isLoading}}clearSamples(){this.samples.clear(),this.trackSampleAssignments.clear(),this.preloadedSamples.clear(),this.trackVolumeSettings.clear(),this.mutedTracks.clear(),this.isLoading=!1,fj.cleanup({clearSamples:!0,clearAudioBuffers:!0})}destroy(){this.clearSamples(),this.samplePlaybackEngine=null,fj.stopMonitoring()}getMemoryUsage(){return fj.getMemoryUsage()}performMemoryCleanup(e={}){return fj.cleanup(e)}getDefaultDrumKit(){return[{id:"kick_001",url:"generated://kick",metadata:{name:"Kick 001",duration:.8,tags:["kick","drum","electronic"]}},{id:"snare_001",url:"generated://snare",metadata:{name:"Snare 001",duration:.5,tags:["snare","drum","electronic"]}},{id:"hihat_001",url:"generated://hihat",metadata:{name:"Hi-Hat 001",duration:.2,tags:["hihat","drum","electronic"]}},{id:"openhat_001",url:"generated://openhat",metadata:{name:"Open Hat 001",duration:.6,tags:["openhat","drum","electronic"]}},{id:"crash_001",url:"/samples/crash_001.wav",metadata:{name:"Crash 001",duration:2,tags:["crash","drum","electronic"]}},{id:"ride_001",url:"/samples/ride_001.wav",metadata:{name:"Ride 001",duration:1.5,tags:["ride","drum","electronic"]}},{id:"tom1_001",url:"/samples/tom1_001.wav",metadata:{name:"Tom 1",duration:.7,tags:["tom","drum","electronic"]}},{id:"tom2_001",url:"/samples/tom2_001.wav",metadata:{name:"Tom 2",duration:.6,tags:["tom","drum","electronic"]}}]}createMockAudioBuffer(e="kick"){const t=44100,n=this.getDurationForSoundType(e),r=Math.floor(n*t),i=this.generateDrumSound(e,r,t);return{sampleRate:t,length:r,duration:n,numberOfChannels:1,getChannelData:e=>i}}getDurationForSoundType(e){return{kick:.8,snare:.5,hihat:.2,openhat:.6,crash:1.2,ride:.8,tom:.6,clap:.3}[e]||.5}generateDrumSound(e,t,n){const r=new Float32Array(t);switch(e){case"kick":default:this.generateKickDrum(r,t,n);break;case"snare":this.generateSnareDrum(r,t,n);break;case"hihat":this.generateHiHat(r,t,n);break;case"openhat":this.generateOpenHat(r,t,n);break;case"crash":this.generateCrash(r,t,n)}return r}async playSample(e,t=1,n=0){const r=this.getSample(e);if(r&&this.samplePlaybackEngine)try{await this.playGeneratedSample(r,t,n)}catch(kM){}}async playGeneratedSample(e,t=1,n=0){if(!this.samplePlaybackEngine||!this.samplePlaybackEngine.audioContext)return;const r=this.samplePlaybackEngine.audioContext,i=n||r.currentTime;try{const n=r.createBufferSource(),s=r.createGain(),a=this.createRealAudioBuffer(e.audioBuffer,r);n.buffer=a,s.gain.value=t,n.connect(s),s.connect(r.destination),n.start(i),n.onended=()=>{n.disconnect(),s.disconnect()}}catch(kM){}}createRealAudioBuffer(e,t){const n=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let r=0;r<e.numberOfChannels;r++){const t=n.getChannelData(r),i=e.getChannelData(r);t.set(i)}return n}scheduleNote(e,t,n=1,r=null){if(t&&this.samplePlaybackEngine)try{let i=n;if(r&&this.trackVolumeSettings.has(r)){i=n*this.trackVolumeSettings.get(r)}if(r&&this.mutedTracks.has(r))return;this.playGeneratedSample(t,i,e).catch(e=>{})}catch(kM){}}setTrackVolume(e,t){if(!e||"string"!=typeof e)return;const n=Math.max(0,Math.min(1,t));this.trackVolumeSettings.set(e,n)}getTrackVolume(e){if(!e||"string"!=typeof e)return 1;const t=this.trackVolumeSettings.get(e);return void 0!==t?t:1}setTrackMute(e,t){e&&"string"==typeof e&&(t?this.mutedTracks.add(e):this.mutedTracks.delete(e))}isTrackMuted(e){return this.mutedTracks.has(e)}getTrackAssignments(){return new Map(this.trackSampleAssignments)}removeTrackAssignment(e){return!(!e||"string"!=typeof e)&&this.trackSampleAssignments.delete(e)}isSamplePreloaded(e){return this.preloadedSamples.has(e)}async loadFallbackSample(e){try{const t={id:`${e}_fallback`,name:`${e} (Fallback)`,filename:"fallback.wav",audioBuffer:this.createSilentAudioBuffer(),metadata:{duration:.1,sampleRate:44100,channels:1,size:4410,isFallback:!0},tags:["fallback"]};this.samples.set(`${e}_fallback`,t),this.preloadedSamples.add(`${e}_fallback`)}catch(kM){}}createSilentAudioBuffer(){return{sampleRate:44100,length:4410,duration:.1,numberOfChannels:1,getChannelData:e=>new Float32Array(4410)}}getPreloadingStats(){const e=this.samples.size,t=this.preloadedSamples.size;return{total:e,preloaded:t,fallbacks:Array.from(this.samples.values()).filter(e=>e.metadata?.isFallback).length,percentage:e>0?t/e*100:0,isLoading:this.isLoading}}generateKickDrum(e,t,n){for(let r=0;r<t;r++){const t=r/n,i=Math.exp(8*-t),s=60*Math.exp(10*-t),a=Math.sin(2*Math.PI*s*t)*i*.8;e[r]=a}}generateSnareDrum(e,t,n){for(let r=0;r<t;r++){const t=r/n,i=Math.exp(12*-t),s=(.3*Math.sin(2*Math.PI*200*t)+.7*(2*Math.random()-1))*i*.6;e[r]=s}}generateHiHat(e,t,n){for(let r=0;r<t;r++){const t=r/n,i=Math.exp(25*-t),s=(2*Math.random()-1)*Math.sin(2*Math.PI*8e3*t)*i*.4;e[r]=s}}generateOpenHat(e,t,n){for(let r=0;r<t;r++){const t=r/n,i=Math.exp(5*-t),s=(2*Math.random()-1)*Math.sin(2*Math.PI*6e3*t)*i*.5;e[r]=s}}generateCrash(e,t,n){for(let r=0;r<t;r++){const t=r/n,i=Math.exp(2*-t),s=(2*Math.random()-1+.3*Math.sin(2*Math.PI*4e3*t))*i*.7;e[r]=s}}extractSoundTypeFromUrl(e){if(e.includes("generated://"))return e.replace("generated://","");const t=e.split("/").pop().toLowerCase();return t.includes("kick")?"kick":t.includes("snare")?"snare":t.includes("hihat")||t.includes("hat")?"hihat":t.includes("open")?"openhat":t.includes("crash")?"crash":t.includes("ride")?"ride":t.includes("tom")?"tom":t.includes("clap")?"clap":"kick"}}class gj extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?u.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:u.jsxs("div",{className:"bg-black/20 backdrop-blur-lg border border-red-400/20 rounded-2xl p-8 max-w-md mx-auto",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx(mt,{className:"w-6 h-6 text-red-400"}),u.jsx("h2",{className:"text-xl font-bold text-red-200",children:"Sequencer Error"})]}),u.jsx("p",{className:"text-white/70 mb-4",children:"Something went wrong with the sequencer. This error has been logged for debugging."}),u.jsxs(xr,{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"bg-red-500 hover:bg-red-600 text-white",children:[u.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Reset Sequencer"]}),!1]})}):this.props.children}}function yj(){const[e,t]=m.useState(!1),[n,r]=m.useState(!1),[i,s]=m.useState(120),[a,o]=m.useState(0),[l,c]=m.useState(16),[d,h]=m.useState(0),[f,p]=m.useState(!1),[g,y]=m.useState(null),[v,b]=m.useState([]),[w,x]=m.useState(!1),[S,k]=m.useState(!1),[C,E]=m.useState(!1),[T,_]=m.useState(!1),N=m.useRef(null),I=m.useRef(null),A=m.useRef(null),P=m.useRef(null),R=m.useRef(null),[j,M]=m.useState({isLoading:!1,isComplete:!1,hasErrors:!1});!function(e={}){const{autoCleanupOnUnmount:t=!0,monitoringEnabled:n=!0,alertsEnabled:r=!0,cleanupThreshold:i=.8}=e,[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!1),d=m.useRef(null),h=m.useRef(null),f=m.useCallback(()=>{n&&!c&&(fj.startMonitoring(),uj.startMonitoring(),r&&(d.current=e=>{l(t=>[...t.slice(-9),e])},uj.onAlert(d.current)),h.current=setInterval(()=>{const e=fj.getMemoryUsage();a(e);const t=uj.baseMonitor.getCurrentMemoryUsage();t.unavailable||t.usedJSHeapSize/t.jsHeapSizeLimit>i&&g({clearCache:!0})},2e3),u(!0))},[n,r,i,c]),p=m.useCallback(()=>{c&&(fj.stopMonitoring(),uj.stopMonitoring(),d.current&&(uj.removeAlertCallback(d.current),d.current=null),h.current&&(clearInterval(h.current),h.current=null),u(!1))},[c]),g=m.useCallback((e={})=>{const t={clearCache:!0,clearPatterns:!1,clearSamples:!1,clearAudioBuffers:!1,force:!1,...e},n=fj.cleanup(t);return setTimeout(()=>{const e=fj.getMemoryUsage();a(e)},100),n},[]),y=m.useCallback(()=>fj.getMemoryUsage(),[]),v=m.useCallback(()=>uj.getPerformanceReport(),[]),b=m.useCallback(()=>{l([])},[]),w=m.useCallback(()=>uj.baseMonitor.triggerGC(),[]),x=m.useCallback(()=>uj.getPerformanceRecommendations(),[]);m.useEffect(()=>(n&&f(),()=>{p()}),[n,f,p]),m.useEffect(()=>()=>{t&&(fj.cleanup({clearCache:!0,clearPatterns:!1,clearSamples:!0,clearAudioBuffers:!0}),fj.stopMonitoring(),uj.stopMonitoring())},[t])}({autoCleanupOnUnmount:!0,monitoringEnabled:!1,alertsEnabled:!1,cleanupThreshold:.8}),m.useEffect(()=>{let e=!0;return(async()=>{try{if(await new Promise(e=>setTimeout(e,0)),!e)return;if(R.current=new(window.AudioContext||window.webkitAudioContext),I.current=new pj,P.current=new pA,A.current=new mj,N.current=new hj,patternStorageServiceRef.current=new PatternStorageService,!e)return;if(await P.current.initializeAudioContext(),!e)return;if(A.current.initialize(P.current),await N.current.initialize(R.current,{patternManager:I.current,sampleManager:A.current}),!e)return;N.current.onStateChange(n=>{e&&(t(n.isPlaying),r(n.isPaused),h(n.currentStep),s(n.bpm),o(n.swing),c(n.stepResolution))});const n=I.current.createPattern("Default Pattern",8,l);I.current.setCurrentPattern(n),y(n),p(!0),patternStorageServiceRef.current.getAllPatterns().then(t=>{e&&b(t)}).catch(e=>{}),_(!0),setTimeout(async()=>{if(e)try{if(M({isLoading:!0,isComplete:!1,hasErrors:!1}),await A.current.loadSamplePack("default-drum-kit"),!e)return;if(n&&A.current){const t=["kick_001","snare_001","hihat_001","openhat_001"];if(n.tracks.forEach((e,n)=>{n<t.length&&(A.current.assignSampleToTrack(e.id,t[n]),e.sampleId=t[n])}),n.tracks[0]&&(n.tracks[0].steps[0].active=!0,n.tracks[0].steps[4].active=!0,n.tracks[0].steps[8].active=!0,n.tracks[0].steps[12].active=!0),n.tracks[1]&&(n.tracks[1].steps[4].active=!0,n.tracks[1].steps[12].active=!0),n.tracks[2])for(let e=0;e<n.tracks[2].steps.length;e+=2)n.tracks[2].steps[e].active=!0;e&&(I.current.setCurrentPattern(n),y(n))}M({isLoading:!1,isComplete:!0,hasErrors:!1})}catch(kM){M({isLoading:!1,isComplete:!0,hasErrors:!0})}},100)}catch(kM){}})(),()=>{e=!1,N.current&&N.current.destroy(),P.current&&P.current.cleanup(),R.current&&"closed"!==R.current.state&&R.current.close()}},[l]);const D=e=>{if(N.current)try{N.current.setBPM(e)}catch(kM){}},L=m.useCallback((e,t)=>{if(I.current)try{I.current.toggleStep(e,t);const n=I.current.getCurrentPattern();n&&y(n)}catch(kM){}},[]),O=m.useCallback((e,t)=>{if(I.current)try{I.current.setTrackVolume(e,t);const n=I.current.getCurrentPattern();n&&y(n)}catch(kM){}},[]),F=m.useCallback(e=>{if(I.current)try{I.current.toggleTrackMute(e);const t=I.current.getCurrentPattern();t&&y(t)}catch(kM){}},[]),U=m.useCallback(e=>{if(I.current)try{I.current.toggleTrackSolo(e);const t=I.current.getCurrentPattern();t&&y(t)}catch(kM){}},[]),z=async e=>{try{await songManager.jumpToSection(e)}catch(kM){}};return u.jsx(gj,{children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs(uA.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h1",{className:"text-2xl font-bold text-white",children:"Drum Sequencer"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"text-sm text-white/60",children:j.isLoading?"Loading samples...":j.hasErrors?"Samples loaded (with fallbacks)":j.isComplete?"Samples ready":"Initializing..."}),u.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[u.jsx("div",{className:"w-2 h-2 rounded-full "+(T&&j.isComplete?"bg-green-400":j.isLoading?"bg-blue-400":"bg-yellow-400")}),u.jsx("span",{children:T?j.isLoading?"Loading Samples...":j.hasErrors?"Ready (with fallbacks)":"Ready":"Initializing..."})]})]})]}),u.jsx(XR,{isPlaying:e,isPaused:n,bpm:i,swing:a,isInitialized:T,onPlay:async()=>{if(N.current)try{n?await N.current.resume():await N.current.start()}catch(kM){}},onPause:()=>{if(N.current)try{N.current.pause()}catch(kM){}},onStop:()=>{if(N.current)try{N.current.stop()}catch(kM){}},onBpmChange:D,onSwingChange:e=>{if(N.current)try{N.current.setSwing(e)}catch(kM){}}}),u.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[u.jsx("span",{className:"text-sm text-white/60",children:"Step:"}),u.jsxs("span",{className:"text-sm font-mono text-cyan-400",children:[d+1,"/",l]})]})]}),u.jsxs(uA.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[u.jsx(Ut,{className:"w-5 h-5"}),"Song Mode"]}),u.jsxs(xr,{onClick:()=>k(!S),className:"bg-white/10 hover:bg-white/20 text-white text-sm",children:[S?"Hide":"Show"," Arrangement"]})]}),u.jsx(SongModeControls,{songState:songManager.songState,songs:songManager.songs,patterns:v,onSongModeToggle:e=>{songManager.toggleSongMode(e)},onSongLoad:async e=>{try{await songManager.loadSong(e)}catch(kM){}},onSongCreate:async e=>{try{const t=await songManager.createSong(e);t&&await songManager.loadSong(t.id)}catch(kM){}},onSongDelete:e=>{try{songManager.deleteSong(e)}catch(kM){}},onJumpToSection:z}),S&&songManager.songState.currentSong&&u.jsx("div",{className:"mt-6 border-t border-white/10 pt-6",children:u.jsx(SongArrangementView,{song:songManager.songState.currentSong,patterns:v,currentSectionIndex:songManager.songState.currentSongPosition,onSectionSelect:z,onSectionUpdate:(e,t)=>{try{songManager.updateSection(e,t)}catch(kM){}},onSectionMove:(e,t)=>{try{songManager.movePatternInSong(e,t)}catch(kM){}},onSectionAdd:(e,t)=>{try{songManager.addPatternToSong(e,t)}catch(kM){}},onSectionRemove:e=>{try{songManager.removePatternFromSong(e)}catch(kM){}}})})]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[u.jsx("div",{className:"xl:col-span-3",children:u.jsx(uA.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:u.jsx(nj,{pattern:g,stepResolution:l,sequencerEngine:N.current,onStepToggle:L,onStepVelocityChange:(e,t,n)=>{if(I.current)try{I.current.setStepVelocity(e,t,n);const r=I.current.getCurrentPattern();y(r)}catch(kM){}}})})}),u.jsx("div",{children:u.jsx(uA.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:u.jsxs(sj,{children:[u.jsx(aj,{title:"Track Controls",icon:on,defaultOpen:!0,children:u.jsx(rj,{tracks:g?.tracks||[],onVolumeChange:O,onMuteToggle:F,onSoloToggle:U,onTrackNameChange:(e,t)=>{if(I.current)try{I.current.setTrackName(e,t);const n=I.current.getCurrentPattern();y(n)}catch(kM){}},onTrackColorChange:(e,t)=>{if(I.current)try{I.current.setTrackColor(e,t);const n=I.current.getCurrentPattern();y(n)}catch(kM){}}})}),u.jsx(aj,{title:"Randomization",icon:Yt,defaultOpen:!1,children:u.jsx(ij,{tracks:g?.tracks||[],onRandomizationChange:(e,t)=>{if(I.current)try{I.current.setTrackRandomization(e,t);const n=I.current.getCurrentPattern();y(n)}catch(kM){}}})}),u.jsx(aj,{title:"Pattern Settings",icon:Gt,defaultOpen:!1,children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-white/60 mb-2",children:"Pattern Name"}),u.jsx("input",{type:"text",value:g?.name||"Untitled Pattern",onChange:e=>{g&&(g.name=e.target.value,y({...g}))},className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded\r\n                          text-white text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400/50"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-white/60 mb-2",children:["BPM: ",i]}),u.jsx("input",{type:"range",min:"60",max:"200",value:i,onChange:e=>D(parseInt(e.target.value)),className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer"})]})]})})]})})}),u.jsx("div",{children:u.jsxs(uA.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Pattern"}),u.jsxs("div",{className:"space-y-4",children:[g&&u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:[u.jsx("div",{className:"text-sm font-medium text-white truncate mb-1",children:g.name}),u.jsxs("div",{className:"text-xs text-white/70",children:[g.bpm," BPM  ",g.swing,"% swing"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs(xr,{onClick:()=>x(!0),disabled:!T,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm",children:[u.jsx(kt,{className:"w-4 h-4 mr-1"}),"Load"]}),u.jsxs(xr,{onClick:()=>x(!0),disabled:!T||!g,className:"bg-green-600 hover:bg-green-700 text-white text-sm",children:[u.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Save"]})]}),u.jsxs(xr,{onClick:()=>E(!0),disabled:!T||!g&&!songManager.songState.currentSong,className:"w-full bg-purple-600 hover:bg-purple-700 text-white text-sm",children:[u.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Export MIDI"]}),u.jsx(ZR,{resolution:l,onResolutionChange:e=>{if(N.current)try{N.current.setStepResolution(e)}catch(kM){}},isInitialized:T,hasPatternData:f})]})]})})]}),!T&&u.jsxs(cR,{className:"border-yellow-400/20 bg-yellow-400/10",children:[u.jsx(mt,{className:"h-4 w-4 text-yellow-400"}),u.jsx(uR,{className:"text-yellow-200",children:"Sequencer is initializing. This is a placeholder interface for development and testing."})]}),u.jsx(cj,{isOpen:w,onClose:()=>x(!1),onPatternLoad:async e=>{if(patternStorageServiceRef.current&&I.current)try{const t=await patternStorageServiceRef.current.loadPattern(e);I.current.setCurrentPattern(t),y(t),p(!0),N.current&&(N.current.setBPM(t.bpm),N.current.setSwing(t.swing),N.current.setStepResolution(t.stepResolution))}catch(kM){throw kM}},onPatternSave:async e=>{if(patternStorageServiceRef.current)try{const t=await patternStorageServiceRef.current.savePattern(e),n=await patternStorageServiceRef.current.getAllPatterns();return b(n),t}catch(kM){throw kM}},onPatternDuplicate:async(e,t)=>{if(patternStorageServiceRef.current&&I.current)try{const n=await patternStorageServiceRef.current.loadPattern(e),r={...n,id:`pattern_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:t,metadata:{...n.metadata,created:(new Date).toISOString(),modified:(new Date).toISOString()}};await patternStorageServiceRef.current.savePattern(r);const i=await patternStorageServiceRef.current.getAllPatterns();return b(i),r}catch(kM){throw kM}},onPatternDelete:async e=>{if(patternStorageServiceRef.current)try{await patternStorageServiceRef.current.deletePattern(e);const t=await patternStorageServiceRef.current.getAllPatterns();if(b(t),g?.id===e){const e=I.current.createPattern("Default Pattern",8,l);I.current.setCurrentPattern(e),y(e)}return!0}catch(kM){throw kM}},currentPattern:g,patterns:v}),u.jsx(MidiExportDialog,{isOpen:C,onClose:()=>E(!1),pattern:g,song:songManager.songState.currentSong,patterns:v})]})})}const vj=["Soul","Jazz","Funk","Blues","Afrobeat","Gospel","R&B","Motown","Disco","Reggae","Hip-Hop","Rock","Pop"],bj=1950,wj=1995,xj=600,Sj=60,kj=200;function Cj(e){const t=[];return e&&"object"==typeof e?(e.id&&"string"==typeof e.id&&""!==e.id.trim()||t.push("Sample ID is required and must be a non-empty string"),e.title&&"string"==typeof e.title&&""!==e.title.trim()||t.push("Sample title is required and must be a non-empty string"),e.artist&&"string"==typeof e.artist&&""!==e.artist.trim()||t.push("Sample artist is required and must be a non-empty string"),("number"!=typeof e.year||e.year<bj||e.year>wj)&&t.push("Sample year must be a number between 1950 and 1995"),e.genre&&"string"==typeof e.genre&&vj.includes(e.genre)||t.push(`Sample genre must be one of: ${vj.join(", ")}`),("number"!=typeof e.duration||e.duration<1||e.duration>xj)&&t.push("Sample duration must be a number between 1 and 600 seconds"),e.youtubeId&&"string"==typeof e.youtubeId&&""!==e.youtubeId.trim()||t.push("YouTube ID is required and must be a non-empty string"),e.thumbnailUrl&&"string"==typeof e.thumbnailUrl&&""!==e.thumbnailUrl.trim()||t.push("Thumbnail URL is required and must be a non-empty string"),"boolean"!=typeof e.isMock&&t.push("isMock field is required and must be a boolean"),void 0!==e.tempo&&("number"!=typeof e.tempo||e.tempo<Sj||e.tempo>kj)&&t.push("Tempo must be a number between 60 and 200 BPM"),void 0!==e.instruments&&(Array.isArray(e.instruments)?e.instruments.every(e=>"string"==typeof e&&""!==e.trim())||t.push("All instruments must be non-empty strings"):t.push("Instruments must be an array")),void 0!==e.tags&&(Array.isArray(e.tags)?e.tags.every(e=>"string"==typeof e&&""!==e.trim())||t.push("All tags must be non-empty strings"):t.push("Tags must be an array")),{isValid:0===t.length,errors:t}):{isValid:!1,errors:["Sample must be an object"]}}function Ej(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Filters must be an object"]};if(Array.isArray(e.genres)){const n=e.genres.filter(e=>!vj.includes(e));n.length>0&&t.push(`Invalid genres: ${n.join(", ")}. Valid genres: ${vj.join(", ")}`)}else t.push("Genres must be an array");const n=function(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Year range must be an object"]};("number"!=typeof e.start||e.start<bj||e.start>wj)&&t.push("Year range start must be a number between 1950 and 1995");("number"!=typeof e.end||e.end<bj||e.end>wj)&&t.push("Year range end must be a number between 1950 and 1995");"number"==typeof e.start&&"number"==typeof e.end&&e.start>e.end&&t.push("Year range start must be less than or equal to end");return{isValid:0===t.length,errors:t}}(e.yearRange);if(n.isValid||t.push(...n.errors),void 0!==e.tempoRange){const n=function(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Tempo range must be an object"]};("number"!=typeof e.min||e.min<Sj||e.min>kj)&&t.push("Tempo range min must be a number between 60 and 200");("number"!=typeof e.max||e.max<Sj||e.max>kj)&&t.push("Tempo range max must be a number between 60 and 200");"number"==typeof e.min&&"number"==typeof e.max&&e.min>e.max&&t.push("Tempo range min must be less than or equal to max");return{isValid:0===t.length,errors:t}}(e.tempoRange);n.isValid||t.push(...n.errors)}if(void 0!==e.durationRange){const n=function(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Duration range must be an object"]};("number"!=typeof e.min||e.min<1||e.min>xj)&&t.push("Duration range min must be a number between 1 and 600 seconds");("number"!=typeof e.max||e.max<1||e.max>xj)&&t.push("Duration range max must be a number between 1 and 600 seconds");"number"==typeof e.min&&"number"==typeof e.max&&e.min>e.max&&t.push("Duration range min must be less than or equal to max");return{isValid:0===t.length,errors:t}}(e.durationRange);n.isValid||t.push(...n.errors)}return void 0!==e.instruments&&(Array.isArray(e.instruments)?e.instruments.every(e=>"string"==typeof e&&""!==e.trim())||t.push("All instruments must be non-empty strings"):t.push("Instruments must be an array")),{isValid:0===t.length,errors:t}}function Tj(e){const t=[];if(!e||"object"!=typeof e)return{isValid:!1,errors:["Discovery state must be an object"]};if(Array.isArray(e.samples)?e.samples.forEach((e,n)=>{const r=Cj(e);r.isValid||t.push(`Sample at index ${n}: ${r.errors.join(", ")}`)}):t.push("Samples must be an array"),null!==e.currentSample){const n=Cj(e.currentSample);n.isValid||t.push(`Current sample: ${n.errors.join(", ")}`)}const n=Ej(e.filters);return n.isValid||t.push(`Filters: ${n.errors.join(", ")}`),Array.isArray(e.favorites)?e.favorites.forEach((e,n)=>{const r=Cj(e);r.isValid||t.push(`Favorite at index ${n}: ${r.errors.join(", ")}`)}):t.push("Favorites must be an array"),Array.isArray(e.history)?e.history.forEach((e,n)=>{const r=Cj(e);r.isValid||t.push(`History item at index ${n}: ${r.errors.join(", ")}`)}):t.push("History must be an array"),"boolean"!=typeof e.isLoading&&t.push("isLoading must be a boolean"),"boolean"!=typeof e.isOnline&&t.push("isOnline must be a boolean"),"boolean"!=typeof e.useMockData&&t.push("useMockData must be a boolean"),null!==e.error&&"string"!=typeof e.error&&t.push("Error must be null or a string"),{isValid:0===t.length,errors:t}}function _j(){return{genres:[],yearRange:{start:bj,end:wj}}}function Nj(){return{samples:[],currentSample:null,filters:_j(),favorites:[],history:[],isLoading:!1,error:null,isOnline:!0,useMockData:!1}}const Ij="sampleDiscovery.filters",Aj="sampleDiscovery.filterPresets",Pj="sampleDiscovery.lastAppliedFilters",Rj=[{id:"soul-70s",name:"Soul 70s",description:"Classic soul samples from the 1970s",filters:{genres:["Soul"],yearRange:{start:1970,end:1979},tempoRange:{min:90,max:130}},isDefault:!0,createdAt:Date.now()},{id:"funk-classics",name:"Funk Classics",description:"Funky grooves from the golden era",filters:{genres:["Funk"],yearRange:{start:1965,end:1980},tempoRange:{min:100,max:140}},isDefault:!0,createdAt:Date.now()},{id:"jazz-fusion",name:"Jazz Fusion",description:"Jazz fusion samples with complex rhythms",filters:{genres:["Jazz"],yearRange:{start:1970,end:1985},tempoRange:{min:120,max:180}},isDefault:!0,createdAt:Date.now()},{id:"short-breaks",name:"Short Breaks",description:"Quick drum breaks and short samples",filters:{genres:["Funk","Soul","Hip-Hop"],yearRange:{start:1960,end:1990},durationRange:{min:1,max:60}},isDefault:!0,createdAt:Date.now()}];const jj=new class{constructor(){this.listeners=new Set,this.initializeDefaultPresets()}initializeDefaultPresets(){try{const e=this.getPresets();if(!e.some(e=>e.isDefault)){const t=[...Rj,...e];localStorage.setItem(Aj,JSON.stringify(t))}}catch(kM){}}saveFilterState(e){try{if(!Ej(e).isValid)return!1;const t={filters:e,timestamp:Date.now(),version:"1.0"};return localStorage.setItem(Ij,JSON.stringify(t)),localStorage.setItem(Pj,JSON.stringify(t)),this.notifyListeners("filterStateSaved",{filters:e}),!0}catch(kM){return!1}}loadFilterState(){try{const e=localStorage.getItem(Ij);if(!e)return _j();const t=JSON.parse(e);return Ej(t.filters).isValid?t.filters:_j()}catch(kM){return _j()}}getLastAppliedFilters(){try{const e=localStorage.getItem(Pj);if(!e)return null;const t=JSON.parse(e);return Ej(t.filters).isValid?t.filters:null}catch(kM){return null}}savePreset(e,t,n){try{if(!e||"string"!=typeof e||""===e.trim())throw new Error("Preset name is required");t&&"string"==typeof t||(t="");const r=Ej(n);if(!r.isValid)throw new Error(`Invalid filter state: ${r.errors.join(", ")}`);const i=this.getPresets(),s=i.find(t=>t.name.toLowerCase()===e.toLowerCase());if(s&&!s.isDefault)throw new Error("A preset with this name already exists");const a={id:`preset-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.trim(),description:t.trim(),filters:JSON.parse(JSON.stringify(n)),isDefault:!1,createdAt:Date.now(),lastUsed:null},o=[...i,a];if(o.length>20){const e=o.filter(e=>!e.isDefault),t=o.filter(e=>e.isDefault);e.sort((e,t)=>e.createdAt-t.createdAt);const n=e.slice(-(20-t.length));o.splice(0,o.length,...t,...n)}return localStorage.setItem(Aj,JSON.stringify(o)),this.notifyListeners("presetSaved",{preset:a}),a}catch(kM){return null}}loadPreset(e){try{const t=this.getPresets(),n=t.find(t=>t.id===e);if(!n)throw new Error("Preset not found");return n.lastUsed=Date.now(),localStorage.setItem(Aj,JSON.stringify(t)),this.notifyListeners("presetLoaded",{preset:n}),n.filters}catch(kM){return null}}getPresets(){try{const e=localStorage.getItem(Aj);if(!e)return[...Rj];const t=JSON.parse(e);if(!Array.isArray(t))return[...Rj];return t.filter(e=>{if(!e.id||!e.name||!e.filters)return!1;return Ej(e.filters).isValid})}catch(kM){return[...Rj]}}deletePreset(e){try{const t=this.getPresets(),n=t.findIndex(t=>t.id===e);if(-1===n)throw new Error("Preset not found");const r=t[n];if(r.isDefault)throw new Error("Cannot delete default presets");return t.splice(n,1),localStorage.setItem(Aj,JSON.stringify(t)),this.notifyListeners("presetDeleted",{presetId:e,preset:r}),!0}catch(kM){return!1}}updatePreset(e,t){try{const n=this.getPresets(),r=n.findIndex(t=>t.id===e);if(-1===r)throw new Error("Preset not found");const i=n[r];if(i.isDefault)throw new Error("Cannot update default presets");if(void 0!==t.name){if(!t.name||"string"!=typeof t.name||""===t.name.trim())throw new Error("Invalid preset name");const e=n.find((e,n)=>n!==r&&e.name.toLowerCase()===t.name.toLowerCase());if(e)throw new Error("A preset with this name already exists")}if(void 0!==t.filters){const e=Ej(t.filters);if(!e.isValid)throw new Error(`Invalid filter state: ${e.errors.join(", ")}`)}const s={...i,...t,id:i.id,isDefault:i.isDefault,createdAt:i.createdAt,updatedAt:Date.now()};return n[r]=s,localStorage.setItem(Aj,JSON.stringify(n)),this.notifyListeners("presetUpdated",{preset:s}),s}catch(kM){return null}}clearAllData(){try{return localStorage.removeItem(Ij),localStorage.removeItem(Pj),localStorage.setItem(Aj,JSON.stringify(Rj)),this.notifyListeners("dataCleared",{}),!0}catch(kM){return!1}}getUsageStats(){try{const e=this.getPresets(),t=this.getLastAppliedFilters();return{totalPresets:e.length,customPresets:e.filter(e=>!e.isDefault).length,defaultPresets:e.filter(e=>e.isDefault).length,mostRecentlyUsed:e.filter(e=>e.lastUsed).sort((e,t)=>t.lastUsed-e.lastUsed).slice(0,5).map(e=>({id:e.id,name:e.name,lastUsed:e.lastUsed})),hasLastAppliedFilters:Boolean(t),storageSize:{presets:JSON.stringify(e).length,filterState:localStorage.getItem(Ij)?.length||0,lastApplied:localStorage.getItem(Pj)?.length||0}}}catch(kM){return{totalPresets:0,customPresets:0,defaultPresets:0,mostRecentlyUsed:[],hasLastAppliedFilters:!1,storageSize:{presets:0,filterState:0,lastApplied:0}}}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(e,t){this.listeners.forEach(n=>{try{n(e,t)}catch(kM){}})}},Mj=({currentFilters:e,onLoadPreset:t,isVisible:n=!1,onClose:r})=>{const[i,s]=m.useState([]),[a,o]=m.useState(!1),[l,c]=m.useState({name:"",description:""}),[d,h]=m.useState(!1),[f,p]=m.useState(null),[g,y]=m.useState(null),v=m.useCallback(async()=>{try{h(!0);const e=jj.getPresets();s(e),p(null)}catch(xM){p("Failed to load presets")}finally{h(!1)}},[]),b=m.useCallback(async e=>{try{h(!0);const n=jj.loadPreset(e);n?(t(n),p(null),await v()):p("Failed to load preset")}catch(xM){p("Failed to load preset")}finally{h(!1)}},[t,v]),w=m.useCallback(async t=>{if(t.preventDefault(),l.name.trim())try{h(!0);jj.savePreset(l.name.trim(),l.description.trim(),e)?(c({name:"",description:""}),o(!1),p(null),await v()):p("Failed to save preset")}catch(xM){p("Failed to save preset")}finally{h(!1)}else p("Preset name is required")},[l,e,v]),x=m.useCallback(async e=>{try{h(!0);jj.deletePreset(e)?(y(null),p(null),await v()):p("Failed to delete preset")}catch(xM){p("Failed to delete preset")}finally{h(!1)}},[v]),S=m.useCallback(()=>{if(!e)return!1;if(!Ej(e).isValid)return!1;const t=e.genres&&e.genres.length>0,n=e.yearRange&&(1950!==e.yearRange.start||1995!==e.yearRange.end),r=e.tempoRange,i=e.durationRange,s=e.instruments&&e.instruments.length>0;return t||n||r||i||s},[e]),k=m.useCallback(e=>{const t=[];if(e.genres&&e.genres.length>0&&t.push(`${e.genres.length} genre${1!==e.genres.length?"s":""}`),!e.yearRange||1950===e.yearRange.start&&1995===e.yearRange.end||t.push(`${e.yearRange.start}-${e.yearRange.end}`),e.tempoRange&&t.push(`${e.tempoRange.min}-${e.tempoRange.max} BPM`),e.durationRange){const n=Math.floor(e.durationRange.min/60),r=e.durationRange.min%60,i=Math.floor(e.durationRange.max/60),s=e.durationRange.max%60;t.push(`${n}:${r.toString().padStart(2,"0")}-${i}:${s.toString().padStart(2,"0")}`)}return e.instruments&&e.instruments.length>0&&t.push(`${e.instruments.length} instrument${1!==e.instruments.length?"s":""}`),t.length>0?t.join(", "):"No filters"},[]),C=m.useCallback(e=>{if(!e)return"Never used";const t=Date.now()-e,n=Math.floor(t/6e4),r=Math.floor(t/36e5),i=Math.floor(t/864e5);return n<1?"Just now":n<60?`${n}m ago`:r<24?`${r}h ago`:`${i}d ago`},[]);return m.useEffect(()=>{n&&v()},[n,v]),m.useEffect(()=>{const e=(e,t)=>{["presetSaved","presetDeleted","presetUpdated"].includes(e)&&v()};return jj.addListener(e),()=>jj.removeListener(e)},[v]),n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-xl font-semibold text-white",children:"Filter Presets"}),u.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close preset manager",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&u.jsxs("div",{className:"mb-4 p-3 bg-red-600 rounded-lg",children:[u.jsx("p",{className:"text-white text-sm",children:f}),u.jsx("button",{type:"button",onClick:()=>p(null),className:"text-red-200 hover:text-white text-xs mt-1",children:"Dismiss"})]}),u.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg",children:[u.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Current Filters"}),u.jsx("p",{className:"text-sm text-gray-300 mb-3",children:k(e)}),S()?u.jsx("button",{type:"button",onClick:()=>o(!0),disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Save as Preset"}):u.jsx("p",{className:"text-xs text-gray-400",children:"Apply some filters to save as a preset"})]}),a&&u.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-lg border border-blue-500",children:[u.jsx("h4",{className:"text-md font-medium text-white mb-3",children:"Save Filter Preset"}),u.jsxs("form",{onSubmit:w,children:[u.jsxs("div",{className:"mb-3",children:[u.jsx("label",{htmlFor:"preset-name",className:"block text-sm text-gray-300 mb-1",children:"Preset Name *"}),u.jsx("input",{id:"preset-name",type:"text",value:l.name,onChange:e=>c(t=>({...t,name:e.target.value})),placeholder:"e.g., My Favorite Soul Samples",className:"w-full bg-gray-600 text-white px-3 py-2 rounded border border-gray-500 focus:border-blue-500 focus:outline-none",maxLength:50,required:!0})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{htmlFor:"preset-description",className:"block text-sm text-gray-300 mb-1",children:"Description (optional)"}),u.jsx("textarea",{id:"preset-description",value:l.description,onChange:e=>c(t=>({...t,description:e.target.value})),placeholder:"Brief description of this filter combination",className:"w-full bg-gray-600 text-white px-3 py-2 rounded border border-gray-500 focus:border-blue-500 focus:outline-none resize-none",rows:2,maxLength:200})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"submit",disabled:d||!l.name.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded text-sm transition-colors",children:d?"Saving...":"Save Preset"}),u.jsx("button",{type:"button",onClick:()=>{o(!1),c({name:"",description:""})},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded text-sm transition-colors",children:"Cancel"})]})]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-medium text-white mb-4",children:["Saved Presets (",i.length,")"]}),d&&0===i.length?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-400",children:"Loading presets..."})]}):0===i.length?u.jsxs("div",{className:"text-center py-8",children:[u.jsx("p",{className:"text-gray-400 mb-2",children:"No presets saved yet"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Save your current filters to create your first preset"})]}):u.jsx("div",{className:"space-y-3",children:i.map(e=>u.jsx("div",{className:"bg-gray-700 rounded-lg p-4 hover:bg-gray-600 transition-colors",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"text-white font-medium truncate",children:e.name}),e.isDefault&&u.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded",children:"Default"})]}),e.description&&u.jsx("p",{className:"text-sm text-gray-300 mb-2 line-clamp-2",children:e.description}),u.jsx("p",{className:"text-xs text-gray-400 mb-2",children:k(e.filters)}),u.jsx("p",{className:"text-xs text-gray-500",children:e.lastUsed?`Last used: ${C(e.lastUsed)}`:"Never used"})]}),u.jsxs("div",{className:"flex gap-2 ml-4",children:[u.jsx("button",{type:"button",onClick:()=>b(e.id),disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-3 py-1 rounded text-sm transition-colors",children:"Load"}),!e.isDefault&&u.jsx("button",{type:"button",onClick:()=>y(e.id),disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white px-3 py-1 rounded text-sm transition-colors",children:"Delete"})]})]})},e.id))})]}),g&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Delete Preset"}),u.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this preset? This action cannot be undone."}),u.jsxs("div",{className:"flex gap-3 justify-end",children:[u.jsx("button",{type:"button",onClick:()=>y(null),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded transition-colors",children:"Cancel"}),u.jsx("button",{type:"button",onClick:()=>x(g),disabled:d,className:"bg-red-600 hover:bg-red-700 disabled:bg-gray-600 text-white px-4 py-2 rounded transition-colors",children:d?"Deleting...":"Delete"})]})]})})]})}):null};const Dj=new class{constructor(){this.filterStats={totalFiltered:0,lastFilterTime:null,filterBreakdown:{}}}applyFilters(e,t){const n=performance.now();try{if(!Array.isArray(e))throw new Error("Samples must be an array");const r=Ej(t);if(!r.isValid)throw new Error(`Invalid filter state: ${r.errors.join(", ")}`);if(this.isEmptyFilter(t))return e;let i=e.filter(e=>!!Cj(e).isValid&&this.matchesAllFilters(e,t));const s=performance.now();return this.updateFilterStats(e.length,i.length,s-n,t),i}catch(kM){return e}}matchesAllFilters(e,t){return!!this.matchesGenreFilter(e,t.genres)&&(!!this.matchesYearRangeFilter(e,t.yearRange)&&(!(t.tempoRange&&!this.matchesTempoRangeFilter(e,t.tempoRange))&&(!(t.durationRange&&!this.matchesDurationRangeFilter(e,t.durationRange))&&!(t.instruments&&!this.matchesInstrumentsFilter(e,t.instruments)))))}matchesGenreFilter(e,t){return!t||0===t.length||t.includes(e.genre)}matchesYearRangeFilter(e,t){return!t||e.year>=t.start&&e.year<=t.end}matchesTempoRangeFilter(e,t){return!t||void 0===e.tempo||e.tempo>=t.min&&e.tempo<=t.max}matchesDurationRangeFilter(e,t){return!t||e.duration>=t.min&&e.duration<=t.max}matchesInstrumentsFilter(e,t){return!t||0===t.length||(!e.instruments||0===e.instruments.length||t.some(t=>e.instruments.some(e=>e.toLowerCase().includes(t.toLowerCase()))))}isEmptyFilter(e){return!(e.genres&&e.genres.length>0)&&((!e.yearRange||e.yearRange.start===bj&&e.yearRange.end===wj)&&((!e.tempoRange||e.tempoRange.min===Sj&&e.tempoRange.max===kj)&&((!e.durationRange||1===e.durationRange.min&&e.durationRange.max===xj)&&!(e.instruments&&e.instruments.length>0))))}getFilterSuggestions(e,t){try{const n=[],r=this.analyzeSamples(e);if(0===t.genres.length&&r.genres.length>1&&r.genres.slice(0,3).forEach(e=>{n.push({type:"genre",label:`Filter by ${e.name}`,description:`${e.count} samples available`,filters:{...t,genres:[e.name]},expectedResults:e.count})}),r.yearSpread>20){const e=Math.floor((r.yearRange.min+r.yearRange.max)/2);n.push({type:"year",label:`Earlier Era (${r.yearRange.min}-${e})`,description:"Focus on earlier vintage samples",filters:{...t,yearRange:{start:r.yearRange.min,end:e}}}),n.push({type:"year",label:`Later Era (${e+1}-${r.yearRange.max})`,description:"Focus on later vintage samples",filters:{...t,yearRange:{start:e+1,end:r.yearRange.max}}})}return r.tempoSpread>40&&r.tempoRange.min&&r.tempoRange.max&&(n.push({type:"tempo",label:"Slower Tempo",description:`${r.tempoRange.min}-120 BPM`,filters:{...t,tempoRange:{min:r.tempoRange.min,max:120}}}),n.push({type:"tempo",label:"Faster Tempo",description:`120-${r.tempoRange.max} BPM`,filters:{...t,tempoRange:{min:120,max:r.tempoRange.max}}})),n.slice(0,6)}catch(kM){return[]}}analyzeSamples(e){const t={genres:{},yearRange:{min:1/0,max:-1/0},tempoRange:{min:1/0,max:-1/0},durationRange:{min:1/0,max:-1/0},instruments:{},totalSamples:e.length};return e.forEach(e=>{t.genres[e.genre]||(t.genres[e.genre]=0),t.genres[e.genre]++,t.yearRange.min=Math.min(t.yearRange.min,e.year),t.yearRange.max=Math.max(t.yearRange.max,e.year),e.tempo&&(t.tempoRange.min=Math.min(t.tempoRange.min,e.tempo),t.tempoRange.max=Math.max(t.tempoRange.max,e.tempo)),t.durationRange.min=Math.min(t.durationRange.min,e.duration),t.durationRange.max=Math.max(t.durationRange.max,e.duration),e.instruments&&e.instruments.forEach(e=>{t.instruments[e]||(t.instruments[e]=0),t.instruments[e]++})}),t.genres=Object.entries(t.genres).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count),t.instruments=Object.entries(t.instruments).map(([e,t])=>({name:e,count:t})).sort((e,t)=>t.count-e.count),t.yearSpread=t.yearRange.max-t.yearRange.min,t.tempoSpread=t.tempoRange.max-t.tempoRange.min,t.durationSpread=t.durationRange.max-t.durationRange.min,t}updateFilterStats(e,t,n,r){this.filterStats.totalFiltered++,this.filterStats.lastFilterTime=n;const i=e>0?t/e:0,s=this.getFilterKey(r);this.filterStats.filterBreakdown[s]||(this.filterStats.filterBreakdown[s]={count:0,totalTime:0,avgEffectiveness:0,totalEffectiveness:0});const a=this.filterStats.filterBreakdown[s];a.count++,a.totalTime+=n,a.totalEffectiveness+=i,a.avgEffectiveness=a.totalEffectiveness/a.count}getFilterKey(e){const t=[];return e.genres&&e.genres.length>0&&t.push(`genres:${e.genres.length}`),e.yearRange&&(e.yearRange.start===bj&&e.yearRange.end===wj||t.push("year:custom")),e.tempoRange&&t.push("tempo:custom"),e.durationRange&&t.push("duration:custom"),e.instruments&&e.instruments.length>0&&t.push(`instruments:${e.instruments.length}`),t.length>0?t.join(","):"no-filters"}getFilterStats(){return{...this.filterStats,avgFilterTime:this.filterStats.totalFiltered>0?Object.values(this.filterStats.filterBreakdown).reduce((e,t)=>e+t.totalTime,0)/this.filterStats.totalFiltered:0,mostUsedFilters:Object.entries(this.filterStats.filterBreakdown).sort(([,e],[,t])=>t.count-e.count).slice(0,5).map(([e,t])=>({key:e,...t}))}}resetStats(){this.filterStats={totalFiltered:0,lastFilterTime:null,filterBreakdown:{}}}},Lj=({filters:e,onFilterChange:t,onShuffle:n,isLoading:r=!1,error:i=null})=>{const[s,a]=m.useState(!1),[o,l]=m.useState(!1),[c,d]=m.useState([]),[h,f]=m.useState({start:e?.yearRange?.start||bj,end:e?.yearRange?.end||wj}),[p,g]=m.useState({min:e?.tempoRange?.min||Sj,max:e?.tempoRange?.max||kj}),[y,v]=m.useState({min:e?.durationRange?.min||1,max:e?.durationRange?.max||xj});m.useEffect(()=>{e?.yearRange&&f({start:e.yearRange.start,end:e.yearRange.end})},[e?.yearRange]),m.useEffect(()=>{e?.tempoRange&&g({min:e.tempoRange.min,max:e.tempoRange.max})},[e?.tempoRange]),m.useEffect(()=>{e?.durationRange&&v({min:e.durationRange.min,max:e.durationRange.max})},[e?.durationRange]);const b=m.useCallback(n=>{if(!e||r)return;const i=e.genres||[],s=i.includes(n)?i.filter(e=>e!==n):[...i,n];t({...e,genres:s})},[e,t,r]),w=m.useCallback(n=>{const r=parseInt(n.target.value,10);f(e=>({...e,start:r}));const i=Math.max(r,h.end);e&&t&&t({...e,yearRange:{start:r,end:i}})},[e,t,h.end]),x=m.useCallback(n=>{const r=parseInt(n.target.value,10);f(e=>({...e,end:r}));const i=Math.min(h.start,r);e&&t&&t({...e,yearRange:{start:i,end:r}})},[e,t,h.start]),S=m.useCallback(e=>{e.preventDefault(),e.stopPropagation(),!r&&n&&n()},[n,r]),k=m.useCallback(n=>{const r=parseInt(n.target.value,10);g(e=>({...e,min:r}));const i=Math.max(r,p.max);e&&t&&t({...e,tempoRange:{min:r,max:i}})},[e,t,p.max]),C=m.useCallback(n=>{const r=parseInt(n.target.value,10);g(e=>({...e,max:r}));const i=Math.min(p.min,r);e&&t&&t({...e,tempoRange:{min:i,max:r}})},[e,t,p.min]),E=m.useCallback(n=>{const r=parseInt(n.target.value,10);v(e=>({...e,min:r}));const i=Math.max(r,y.max);e&&t&&t({...e,durationRange:{min:r,max:i}})},[e,t,y.max]),T=m.useCallback(n=>{const r=parseInt(n.target.value,10);v(e=>({...e,max:r}));const i=Math.min(y.min,r);e&&t&&t({...e,durationRange:{min:i,max:r}})},[e,t,y.min]),_=m.useCallback(e=>{e.preventDefault(),e.stopPropagation(),a(e=>!e)},[]),N=m.useCallback(e=>{if(e.preventDefault(),e.stopPropagation(),!r&&t){const e={genres:[],yearRange:{start:bj,end:wj}};f({start:bj,end:wj}),g({min:Sj,max:kj}),v({min:1,max:xj}),t(e)}},[t,r]),I=m.useCallback(e=>{!r&&t&&(e.yearRange&&f({start:e.yearRange.start,end:e.yearRange.end}),e.tempoRange?g({min:e.tempoRange.min,max:e.tempoRange.max}):g({min:Sj,max:kj}),e.durationRange?v({min:e.durationRange.min,max:e.durationRange.max}):v({min:1,max:xj}),t(e),l(!1))},[t,r]);m.useCallback(e=>{!r&&t&&I(e.filters)},[r,t,I]);const A=m.useCallback(()=>!Dj.isEmptyFilter(e),[e]);return u.jsxs("div",{className:"discovery-controls bg-gray-800 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-semibold text-white",children:"Filters"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>l(!0),disabled:r,className:"text-sm text-purple-400 hover:text-purple-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors","aria-label":"Manage filter presets",children:"Presets"}),u.jsx("button",{type:"button",onClick:N,disabled:r||!A(),className:"text-sm text-blue-400 hover:text-blue-300 disabled:text-gray-500 disabled:cursor-not-allowed transition-colors","aria-label":"Clear all filters",children:"Clear All"})]})]}),i&&u.jsx("div",{className:"mb-4 p-3 bg-red-600 rounded-lg",children:u.jsx("p",{className:"text-white text-sm",children:i})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Genres"}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:vj.map(t=>{const n=e?.genres?.includes(t)||!1,i=`genre-${t.toLowerCase().replace(/[^a-z0-9]/g,"-")}`;return u.jsxs("label",{htmlFor:i,className:"flex items-center cursor-pointer hover:bg-gray-700 p-2 rounded transition-colors",children:[u.jsx("input",{id:i,type:"checkbox",checked:n,onChange:()=>b(t),disabled:r,className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:cursor-not-allowed","aria-describedby":`${i}-description`}),u.jsx("span",{className:"text-sm text-white select-none",children:t}),u.jsxs("span",{id:`${i}-description`,className:"sr-only",children:[n?"Selected":"Not selected"," genre filter for ",t]})]},t)})}),e?.genres&&e.genres.length>0&&u.jsx("div",{className:"mt-3 p-2 bg-gray-700 rounded",children:u.jsxs("p",{className:"text-xs text-gray-300",children:["Selected: ",e.genres.join(", ")]})})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Year Range"}),u.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded text-center",children:[u.jsxs("span",{className:"text-lg font-semibold text-white",children:[h.start," - ",h.end]}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Vintage samples from this era"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"year-start-slider",className:"block text-xs text-gray-400 mb-2",children:["Start Year: ",h.start]}),u.jsx("input",{id:"year-start-slider",type:"range",min:bj,max:wj,value:h.start,onChange:w,disabled:r,className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`Start year: ${h.start}`,"aria-describedby":"year-range-description"})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("label",{htmlFor:"year-end-slider",className:"block text-xs text-gray-400 mb-2",children:["End Year: ",h.end]}),u.jsx("input",{id:"year-end-slider",type:"range",min:bj,max:wj,value:h.end,onChange:x,disabled:r,className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`End year: ${h.end}`,"aria-describedby":"year-range-description"})]}),u.jsxs("p",{id:"year-range-description",className:"text-xs text-gray-500",children:["Adjust the sliders to filter samples by year range (",bj,"-",wj,")"]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("button",{type:"button",onClick:_,disabled:r,className:"w-full text-left text-sm font-medium text-gray-300 hover:text-white transition-colors flex items-center justify-between p-2 hover:bg-gray-700 rounded disabled:cursor-not-allowed disabled:text-gray-500","aria-expanded":s,"aria-controls":"advanced-filters",children:[u.jsx("span",{children:"Advanced Filters"}),u.jsx("span",{className:"transform transition-transform "+(s?"rotate-180":""),children:""})]}),s&&u.jsxs("div",{id:"advanced-filters",className:"mt-4 space-y-6 p-4 bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Tempo (BPM)"}),u.jsxs("div",{className:"mb-4 p-3 bg-gray-600 rounded text-center",children:[u.jsxs("span",{className:"text-lg font-semibold text-white",children:[p.min," - ",p.max," BPM"]}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Beats per minute range"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"tempo-min-slider",className:"block text-xs text-gray-400 mb-2",children:["Min BPM: ",p.min]}),u.jsx("input",{id:"tempo-min-slider",type:"range",min:Sj,max:kj,value:p.min,onChange:k,disabled:r,className:"w-full h-2 bg-gray-500 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`Minimum tempo: ${p.min} BPM`})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("label",{htmlFor:"tempo-max-slider",className:"block text-xs text-gray-400 mb-2",children:["Max BPM: ",p.max]}),u.jsx("input",{id:"tempo-max-slider",type:"range",min:Sj,max:kj,value:p.max,onChange:C,disabled:r,className:"w-full h-2 bg-gray-500 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`Maximum tempo: ${p.max} BPM`})]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Filter samples by tempo range (",Sj,"-",kj," BPM)"]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Duration"}),u.jsxs("div",{className:"mb-4 p-3 bg-gray-600 rounded text-center",children:[u.jsxs("span",{className:"text-lg font-semibold text-white",children:[Math.floor(y.min/60),":",(y.min%60).toString().padStart(2,"0")," - ",Math.floor(y.max/60),":",(y.max%60).toString().padStart(2,"0")]}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Sample duration range"})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("label",{htmlFor:"duration-min-slider",className:"block text-xs text-gray-400 mb-2",children:["Min Duration: ",Math.floor(y.min/60),":",(y.min%60).toString().padStart(2,"0")]}),u.jsx("input",{id:"duration-min-slider",type:"range",min:1,max:xj,value:y.min,onChange:E,disabled:r,className:"w-full h-2 bg-gray-500 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`Minimum duration: ${Math.floor(y.min/60)} minutes ${y.min%60} seconds`})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("label",{htmlFor:"duration-max-slider",className:"block text-xs text-gray-400 mb-2",children:["Max Duration: ",Math.floor(y.max/60),":",(y.max%60).toString().padStart(2,"0")]}),u.jsx("input",{id:"duration-max-slider",type:"range",min:1,max:xj,value:y.max,onChange:T,disabled:r,className:"w-full h-2 bg-gray-500 rounded-lg appearance-none cursor-pointer slider-thumb disabled:cursor-not-allowed","aria-label":`Maximum duration: ${Math.floor(y.max/60)} minutes ${y.max%60} seconds`})]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Filter samples by duration (",Math.floor(1/60),":",1..toString().padStart(2,"0")," - ",Math.floor(10),":",(0).toString().padStart(2,"0"),")"]})]})]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{type:"button",onClick:S,disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg transition-colors font-medium flex items-center justify-center","aria-label":"Shuffle samples with current filters",children:r?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Shuffling..."]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"mr-2",children:""}),"Shuffle Samples"]})}),u.jsxs("div",{className:"text-xs text-gray-400 text-center space-y-1",children:[e?.genres&&e.genres.length>0?u.jsxs("p",{children:["Filtering by ",e.genres.length," genre",1!==e.genres.length?"s":"","(",h.start,"-",h.end,")"]}):u.jsxs("p",{children:["All genres (",h.start,"-",h.end,")"]}),(e?.tempoRange||e?.durationRange)&&u.jsxs("div",{className:"pt-1 border-t border-gray-600",children:[e?.tempoRange&&u.jsxs("p",{children:["Tempo: ",e.tempoRange.min,"-",e.tempoRange.max," BPM"]}),e?.durationRange&&u.jsxs("p",{children:["Duration: ",Math.floor(e.durationRange.min/60),":",(e.durationRange.min%60).toString().padStart(2,"0")," - ",Math.floor(e.durationRange.max/60),":",(e.durationRange.max%60).toString().padStart(2,"0")]})]})]})]}),u.jsx(Mj,{currentFilters:e,onLoadPreset:I,isVisible:o,onClose:()=>l(!1)})]})};var Oj,Fj,Uj,zj,Bj,Vj={exports:{}};function $j(){if(Fj)return Oj;Fj=1;return Oj="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function Hj(){if(zj)return Uj;zj=1;var e=$j();function t(){}function n(){}return n.resetWarningCache=t,Uj=function(){function r(t,n,r,i,s,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function i(){return r}r.isRequired=r;var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s}}function qj(){return Bj||(Bj=1,Vj.exports=Hj()()),Vj.exports}const Kj=r(qj()),Wj=({sample:e,onPlay:t,onFavorite:n,isFavorite:r=!1,isPlaying:i=!1,isLoading:s=!1,className:a=""})=>{const[o,l]=m.useState(!1),[c,d]=m.useState(!0),h=()=>{d(!1),l(!1)},f=()=>{d(!1),l(!0)};return u.jsxs("div",{className:`sample-card ${s?"sample-card--loading":""} ${a}`,children:[u.jsxs("div",{className:"sample-card__thumbnail",children:[u.jsxs(u.Fragment,{children:[u.jsx("img",{src:e.thumbnailUrl,alt:`${e.title} by ${e.artist}`,className:"sample-card__thumbnail-image",onLoad:h,onError:f,style:{display:o?"none":"block"}}),c&&!o&&u.jsxs("div",{className:"sample-card__thumbnail-loading",children:[u.jsx("div",{className:"sample-card__loading-spinner"}),u.jsx("span",{className:"sr-only",children:"Loading thumbnail..."})]}),o&&u.jsxs("div",{className:"sample-card__thumbnail-error",children:[u.jsx("div",{className:"sample-card__error-icon",children:""}),u.jsx("span",{className:"sample-card__error-text",children:"Image unavailable"})]})]}),u.jsx("div",{className:"sample-card__play-overlay",children:u.jsx("button",{type:"button",className:"sample-card__play-button "+(i?"sample-card__play-button--playing":""),onClick:()=>{!s&&t&&t(e)},disabled:s,"aria-label":i?`Pause ${e.title}`:`Play ${e.title}`,children:s?u.jsx("div",{className:"sample-card__button-spinner"}):i?u.jsx("span",{className:"sample-card__pause-icon",children:""}):u.jsx("span",{className:"sample-card__play-icon",children:""})})}),e.isMock&&u.jsx("div",{className:"sample-card__mock-indicator",children:u.jsx("span",{className:"sample-card__mock-badge",children:"Demo"})})]}),u.jsxs("div",{className:"sample-card__content",children:[u.jsxs("div",{className:"sample-card__header",children:[u.jsx("h3",{className:"sample-card__title",title:e.title,children:e.title}),u.jsx("p",{className:"sample-card__artist",title:e.artist,children:e.artist})]}),u.jsxs("div",{className:"sample-card__metadata",children:[u.jsx("span",{className:"sample-card__year",children:e.year}),u.jsx("span",{className:"sample-card__separator",children:""}),u.jsx("span",{className:"sample-card__genre",children:e.genre}),u.jsx("span",{className:"sample-card__separator",children:""}),u.jsx("span",{className:"sample-card__duration",children:(p=e.duration,`${Math.floor(p/60)}:${Math.floor(p%60).toString().padStart(2,"0")}`)})]}),e.tempo&&u.jsxs("div",{className:"sample-card__tempo",children:[u.jsx("span",{className:"sample-card__tempo-label",children:"BPM:"}),u.jsx("span",{className:"sample-card__tempo-value",children:e.tempo})]}),e.instruments&&e.instruments.length>0&&u.jsxs("div",{className:"sample-card__instruments",children:[e.instruments.slice(0,3).map((e,t)=>u.jsx("span",{className:"sample-card__instrument-tag",children:e},t)),e.instruments.length>3&&u.jsxs("span",{className:"sample-card__instrument-more",children:["+",e.instruments.length-3," more"]})]})]}),u.jsxs("div",{className:"sample-card__actions",children:[u.jsx("button",{type:"button",className:"sample-card__favorite-button "+(r?"sample-card__favorite-button--active":""),onClick:()=>{!s&&n&&n(e)},disabled:s,"aria-label":r?`Remove ${e.title} from favorites`:`Add ${e.title} to favorites`,children:u.jsx("span",{className:"sample-card__favorite-icon",children:r?"":""})}),u.jsxs("button",{type:"button",className:"sample-card__action-button",onClick:()=>{const t=new CustomEvent("sampleAction",{detail:{action:"useInChopper",sample:e}});window.dispatchEvent(t)},disabled:s,"aria-label":`Use ${e.title} in Chopper`,title:"Use in Chopper - Copy URL and navigate to Chopper page",children:[u.jsx("span",{className:"sample-card__action-icon",children:""}),u.jsx("span",{className:"sample-card__action-text",children:"Use in Chopper"})]})]}),s&&u.jsxs("div",{className:"sample-card__loading-overlay",children:[u.jsx("div",{className:"sample-card__loading-spinner"}),u.jsx("span",{className:"sr-only",children:"Loading sample..."})]})]});var p};Wj.propTypes={sample:Kj.shape({id:Kj.string.isRequired,title:Kj.string.isRequired,artist:Kj.string.isRequired,year:Kj.number.isRequired,genre:Kj.string.isRequired,duration:Kj.number.isRequired,youtubeId:Kj.string.isRequired,thumbnailUrl:Kj.string.isRequired,tempo:Kj.number,instruments:Kj.arrayOf(Kj.string),tags:Kj.arrayOf(Kj.string),isMock:Kj.bool.isRequired}).isRequired,onPlay:Kj.func.isRequired,onFavorite:Kj.func.isRequired,isFavorite:Kj.bool,isPlaying:Kj.bool,isLoading:Kj.bool,className:Kj.string};const Gj=()=>u.jsxs("div",{className:"sample-card-skeleton",role:"status","aria-label":"Loading sample",children:[u.jsx("div",{className:"sample-card-skeleton__thumbnail",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})}),u.jsxs("div",{className:"sample-card-skeleton__content",children:[u.jsx("div",{className:"sample-card-skeleton__title",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})}),u.jsx("div",{className:"sample-card-skeleton__artist",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})}),u.jsx("div",{className:"sample-card-skeleton__metadata",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})})]}),u.jsxs("div",{className:"sample-card-skeleton__actions",children:[u.jsx("div",{className:"sample-card-skeleton__button",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})}),u.jsx("div",{className:"sample-card-skeleton__button",children:u.jsx("div",{className:"sample-card-skeleton__shimmer"})})]})]}),Yj=({hasFilters:e,onClearFilters:t,onShuffle:n,isOffline:r})=>u.jsxs("div",{className:"sample-grid__empty-state",role:"status",children:[u.jsx("div",{className:"sample-grid__empty-icon",children:r?"":e?"":""}),u.jsx("h3",{className:"sample-grid__empty-title",children:r?"You're Offline":e?"No Samples Found":"Ready to Discover"}),u.jsx("p",{className:"sample-grid__empty-description",children:r?"Connect to the internet to discover new samples. Showing cached content when available.":e?"No samples match your current filters. Try adjusting your search criteria or clearing filters.":"Use the filters to discover vintage samples from the 1950s-1990s, or click shuffle for random discoveries."}),u.jsxs("div",{className:"sample-grid__empty-actions",children:[e&&!r&&u.jsx("button",{type:"button",className:"sample-grid__action-button sample-grid__action-button--secondary",onClick:t,children:"Clear Filters"}),!r&&u.jsx("button",{type:"button",className:"sample-grid__action-button sample-grid__action-button--primary",onClick:n,children:e?"Shuffle with Filters":"Shuffle Samples"})]}),r&&u.jsx("div",{className:"sample-grid__offline-notice",children:u.jsx("p",{className:"sample-grid__offline-text",children:"Some features may be limited while offline"})})]});Yj.propTypes={hasFilters:Kj.bool.isRequired,onClearFilters:Kj.func.isRequired,onShuffle:Kj.func.isRequired,isOffline:Kj.bool.isRequired};const Jj=({error:e,onRetry:t,onShuffle:n})=>u.jsxs("div",{className:"sample-grid__error-state",role:"alert",children:[u.jsx("div",{className:"sample-grid__error-icon",children:""}),u.jsx("h3",{className:"sample-grid__error-title",children:"Unable to Load Samples"}),u.jsx("p",{className:"sample-grid__error-description",children:"We encountered an issue while loading samples. This might be due to network connectivity or service availability."}),e&&u.jsxs("details",{className:"sample-grid__error-details",children:[u.jsx("summary",{className:"sample-grid__error-summary",children:"Technical Details"}),u.jsx("p",{className:"sample-grid__error-message",children:e})]}),u.jsxs("div",{className:"sample-grid__error-actions",children:[u.jsx("button",{type:"button",className:"sample-grid__action-button sample-grid__action-button--primary",onClick:t,children:"Try Again"}),u.jsx("button",{type:"button",className:"sample-grid__action-button sample-grid__action-button--secondary",onClick:n,children:"Load Demo Samples"})]})]});Jj.propTypes={error:Kj.string,onRetry:Kj.func.isRequired,onShuffle:Kj.func.isRequired};const Qj=({samples:e=[],isLoading:t=!1,error:n=null,isOffline:r=!1,hasFilters:i=!1,onSamplePlay:s,onSampleFavorite:a,onClearFilters:o,onShuffle:l,onRetry:c,currentPlayingSampleId:d=null,favoriteSampleIds:h=[],className:f=""})=>u.jsxs("div",{className:`sample-grid ${f}`,children:[t&&u.jsxs("div",{className:"sample-grid__loading",role:"status","aria-label":"Loading samples",children:[u.jsx("div",{className:"sample-grid__grid",children:Array.from({length:12},(e,t)=>u.jsx(Gj,{},`skeleton-${t}`))}),u.jsx("div",{className:"sample-grid__loading-text",children:u.jsx("p",{children:"Discovering samples..."})})]}),!t&&n&&u.jsx(Jj,{error:n,onRetry:c,onShuffle:l}),!t&&!n&&0===e.length&&u.jsx(Yj,{hasFilters:i,onClearFilters:o,onShuffle:l,isOffline:r}),!t&&!n&&e.length>0&&u.jsxs("div",{className:"sample-grid__content",children:[u.jsxs("div",{className:"sample-grid__header",children:[u.jsx("h2",{className:"sample-grid__title",children:1===e.length?"1 Sample Found":`${e.length} Samples Found`}),e.some(e=>e.isMock)&&u.jsxs("div",{className:"sample-grid__demo-notice",children:[u.jsx("span",{className:"sample-grid__demo-badge",children:"Demo Mode"}),u.jsx("span",{className:"sample-grid__demo-text",children:"Some samples are demo content"})]})]}),u.jsx("div",{className:"sample-grid__grid",role:"grid","aria-label":`Grid of ${e.length} samples`,children:e.map((e,t)=>u.jsx("div",{className:"sample-grid__item",role:"gridcell","aria-rowindex":Math.floor(t/4)+1,"aria-colindex":t%4+1,children:u.jsx(Wj,{sample:e,onPlay:s,onFavorite:a,isFavorite:h.includes(e.id),isPlaying:d===e.id,isLoading:!1})},e.id))}),e.length>0&&e.length%12==0&&u.jsxs("div",{className:"sample-grid__load-more",children:[u.jsx("button",{type:"button",className:"sample-grid__load-more-button",disabled:!0,title:"Load more functionality will be implemented in future tasks",children:"Load More Samples"}),u.jsx("p",{className:"sample-grid__load-more-note",children:"Pagination will be implemented in subsequent tasks"})]})]})]});function Xj({videoId:e,onReady:t,onError:n,onStateChange:r,onTimeUpdate:i,sample:s,volume:a=.5,autoplay:o=!1,className:l=""}){const[c,d]=m.useState(null),[h,f]=m.useState(!1),[p,g]=m.useState({isPlaying:!1,currentTime:0,duration:0,volume:a,isMuted:!1,isBuffering:!1,hasError:!1,errorMessage:null}),y=m.useRef(null),v=m.useRef(null),b=m.useRef(0),w=m.useRef(`discovery-youtube-player-${Math.random().toString(36).substr(2,9)}`);m.useEffect(()=>{if(window.YT&&window.YT.Player)return void f(!0);if(window.discoveryYTAPILoading){const e=setInterval(()=>{window.YT&&window.YT.Player&&(f(!0),clearInterval(e))},100);return()=>clearInterval(e)}window.discoveryYTAPILoading=!0;const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.async=!0,e.onerror=()=>{k(new Error("Failed to load YouTube API"))};const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);const n=window.onYouTubeIframeAPIReady;return window.onYouTubeIframeAPIReady=()=>{n&&n(),f(!0),window.discoveryYTAPILoading=!1},()=>{window.discoveryYTAPILoading&&(window.discoveryYTAPILoading=!1)}},[]),m.useEffect(()=>{if(h&&e&&v.current){try{c&&c.destroy&&(c.destroy(),d(null)),g(e=>({...e,hasError:!1,errorMessage:null,isBuffering:!0}));new window.YT.Player(w.current,{height:"100%",width:"100%",videoId:e,playerVars:{autoplay:o?1:0,controls:1,modestbranding:1,rel:0,enablejsapi:1,origin:window.location.origin,playsinline:1},events:{onReady:x,onStateChange:S,onError:k}});b.current=0}catch(kM){k(kM)}return()=>{if(E(),c&&c.destroy)try{c.destroy()}catch(kM){}}}},[h,e,o]);const x=m.useCallback(e=>{const n=e.target;d(n);try{const e=n.getDuration(),r=n.getVolume()/100;g(t=>({...t,duration:e,volume:r,isBuffering:!1,hasError:!1,errorMessage:null})),n.setVolume(100*a),t&&t(n)}catch(kM){k(kM)}},[e,a,t]),S=m.useCallback(e=>{try{const t=e.data,n=t===window.YT.PlayerState.PLAYING,i=t===window.YT.PlayerState.BUFFERING;g(e=>({...e,isPlaying:n,isBuffering:i,hasError:!1,errorMessage:null})),n?C():E(),r&&r({state:t,isPlaying:n,isBuffering:i,player:e.target})}catch(kM){k(kM)}},[r]),k=m.useCallback(e=>{let t="An error occurred with the video player";if(e&&"object"==typeof e)if(void 0!==e.data)switch(e.data){case 2:t="Invalid video ID";break;case 5:t="HTML5 player error";break;case 100:t="Video not found or private";break;case 101:case 150:t="Video cannot be embedded";break;default:t=`YouTube player error (${e.data})`}else e.message&&(t=e.message);g(e=>({...e,hasError:!0,errorMessage:t,isPlaying:!1,isBuffering:!1})),E(),n&&n(e,t)},[n]),C=m.useCallback(()=>{y.current&&clearInterval(y.current),y.current=setInterval(()=>{if(c&&c.getCurrentTime)try{const e=c.getCurrentTime();g(t=>({...t,currentTime:e})),i&&i(e)}catch(kM){}},100)},[c,i]),E=m.useCallback(()=>{y.current&&(clearInterval(y.current),y.current=null)},[]),T=m.useCallback(()=>{if(c)try{p.isPlaying?c.pauseVideo():c.playVideo()}catch(kM){k(kM)}},[c,p.isPlaying,k]),_=m.useCallback(()=>{if(c)try{p.isMuted?(c.unMute(),g(e=>({...e,isMuted:!1}))):(c.mute(),g(e=>({...e,isMuted:!0})))}catch(kM){k(kM)}},[c,p.isMuted]),N=m.useCallback(()=>{if(!(b.current>=3)&&(b.current+=1,g(e=>({...e,hasError:!1,errorMessage:null,isBuffering:!0})),c&&c.loadVideoById))try{c.loadVideoById(e)}catch(kM){k(kM)}},[c,e,k]),I=m.useCallback(e=>{if(!e||isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},[]);return m.useEffect(()=>{if(c&&c.setVolume&&!p.isMuted)try{c.setVolume(100*a),g(e=>({...e,volume:a}))}catch(kM){}},[c,a,p.isMuted]),u.jsxs(uA.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:`relative bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg overflow-hidden ${l}`,ref:v,children:[u.jsx("div",{className:"aspect-video w-full relative",children:e?u.jsxs(u.Fragment,{children:[u.jsx("div",{id:w.current,className:"w-full h-full"}),p.isBuffering&&u.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:u.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),u.jsx("span",{className:"text-sm",children:"Loading video..."})]})}),p.hasError&&u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center p-4",children:u.jsxs("div",{className:"text-center text-white space-y-3",children:[u.jsx(nn,{className:"w-8 h-8 text-red-400 mx-auto"}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:"Video Player Error"}),u.jsx("p",{className:"text-sm text-white/80 mt-1",children:p.errorMessage})]}),u.jsxs("div",{className:"flex gap-2 justify-center",children:[b.current<3&&u.jsxs(xr,{onClick:N,size:"sm",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:["Retry (",b.current,"/",3,")"]}),u.jsxs(xr,{onClick:()=>window.open(`https://www.youtube.com/watch?v=${e}`,"_blank"),variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(St,{className:"w-3 h-3 mr-1"}),"Open in YouTube"]})]})]})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(xr,{onClick:T,size:"sm",variant:"ghost",className:"text-white hover:bg-white/20",disabled:p.hasError,children:p.isPlaying?u.jsx(Bt,{className:"w-4 h-4"}):u.jsx($t,{className:"w-4 h-4"})}),u.jsx(xr,{onClick:_,size:"sm",variant:"ghost",className:"text-white hover:bg-white/20",disabled:p.hasError,children:p.isMuted?u.jsx(ln,{className:"w-4 h-4"}):u.jsx(on,{className:"w-4 h-4"})}),u.jsxs("div",{className:"text-white text-sm",children:[I(p.currentTime)," / ",I(p.duration)]})]}),s&&u.jsxs("div",{className:"text-right text-white/80 text-sm max-w-xs truncate",children:[u.jsx("div",{className:"font-medium",children:s.title}),u.jsxs("div",{className:"text-xs",children:[s.artist,"  ",s.year]})]})]})})]}):u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/10",children:u.jsx("p",{className:"text-white/50 text-center",children:"Select a sample to start playing"})})}),s&&!p.hasError&&u.jsx("div",{className:"p-4 border-t border-white/10",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-white font-medium truncate",children:s.title}),u.jsx("p",{className:"text-white/70 text-sm truncate",children:s.artist}),u.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-white/50",children:[u.jsx("span",{children:s.year}),u.jsx("span",{children:s.genre}),u.jsx("span",{children:I(s.duration)}),s.tempo&&u.jsxs("span",{children:[s.tempo," BPM"]})]})]}),u.jsx(xr,{onClick:()=>window.open(`https://www.youtube.com/watch?v=${e}`,"_blank"),variant:"ghost",size:"sm",className:"text-white/60 hover:text-white hover:bg-white/10 ml-2",children:u.jsx(St,{className:"w-4 h-4"})})]})})]})}Qj.propTypes={samples:Kj.arrayOf(Kj.shape({id:Kj.string.isRequired,title:Kj.string.isRequired,artist:Kj.string.isRequired,year:Kj.number.isRequired,genre:Kj.string.isRequired,duration:Kj.number.isRequired,youtubeId:Kj.string.isRequired,thumbnailUrl:Kj.string.isRequired,tempo:Kj.number,instruments:Kj.arrayOf(Kj.string),tags:Kj.arrayOf(Kj.string),isMock:Kj.bool.isRequired})),isLoading:Kj.bool,error:Kj.string,isOffline:Kj.bool,hasFilters:Kj.bool,onSamplePlay:Kj.func.isRequired,onSampleFavorite:Kj.func.isRequired,onClearFilters:Kj.func.isRequired,onShuffle:Kj.func.isRequired,onRetry:Kj.func.isRequired,currentPlayingSampleId:Kj.string,favoriteSampleIds:Kj.arrayOf(Kj.string),className:Kj.string};class Zj extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,videoId:null,sample:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t,hasError:!0,videoId:this.props.videoId||null,sample:this.props.sample||null}),this.props.onError&&this.props.onError(e,t,"DiscoveryVideoPlayer")}handleRetry=async()=>{this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});try{this.props.onRetry&&await this.props.onRetry(),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,videoId:null,sample:null})},100)}catch(e){this.setState({isRetrying:!1,error:e})}};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,videoId:null,sample:null}),this.props.onReset&&this.props.onReset()};getErrorType(e){const t=e?.message?.toLowerCase()||"";return t.includes("youtube")||t.includes("player")||t.includes("iframe")?"youtube":t.includes("network")||t.includes("load")||t.includes("fetch")?"network":t.includes("embed")||t.includes("blocked")?"embed":t.includes("api")||t.includes("script")?"api":t.includes("unavailable")||t.includes("private")||t.includes("restricted")?"unavailable":t.includes("discovery")||t.includes("component")?"component":"unknown"}getErrorDetails(e,t,n,r){const i=navigator.onLine;switch(e){case"youtube":return{icon:sn,title:"Discovery Video Player Error",description:"The discovery video player failed to initialize or load the sample.",suggestions:["Check if the sample video is available","Try selecting a different sample","Refresh the discovery page","Check if YouTube is accessible"],canRetry:!0,severity:"error",showSample:!0};case"network":return{icon:i?un:cn,title:"Network Connection Error",description:i?"Unable to load the sample video. This might be a temporary connection issue.":"You appear to be offline. Sample playback requires an internet connection.",suggestions:[i?"Check your internet connection":"Connect to the internet","Try refreshing the discovery page","Select a different sample","Wait a moment and try again"],canRetry:!0,severity:"warning",showSample:!1};case"embed":return{icon:an,title:"Sample Embed Error",description:"Failed to embed the sample video. The video might not allow embedding.",suggestions:["Try a different sample","Check if the sample video allows embedding","Open the sample directly in YouTube","Use the shuffle feature to find other samples"],canRetry:!0,severity:"warning",showSample:!0};case"api":return{icon:nn,title:"YouTube API Error",description:"Failed to load the YouTube player API for sample discovery.",suggestions:["Check if JavaScript is enabled","Disable ad blockers temporarily","Try a different browser","Clear browser cache and cookies"],canRetry:!0,severity:"error",showSample:!1};case"unavailable":return{icon:sn,title:"Sample Unavailable",description:"This sample cannot be played. It might be private, deleted, or restricted.",suggestions:["Try discovering different samples","Use the shuffle feature to find available samples","Check if the sample is available in your region","Browse other genres or time periods"],canRetry:!1,severity:"error",showSample:!0};case"component":return{icon:nn,title:"Discovery Player Component Error",description:"An error occurred within the discovery video player component.",suggestions:["Try refreshing the discovery page","Select a different sample","Clear browser cache","Try again in a few moments"],canRetry:!0,severity:"error",showSample:!0};default:return{icon:nn,title:"Discovery Video Error",description:t?.message||"An unexpected error occurred with the sample video player.",suggestions:["Try refreshing the discovery page","Select a different sample","Check your browser compatibility","Clear browser cache if the issue persists"],canRetry:!0,severity:"error",showSample:!0}}}render(){if(!this.state.hasError)return this.props.children;const e=this.getErrorType(this.state.error),t=this.getErrorDetails(e,this.state.error,this.state.videoId,this.state.sample),n=t.icon;return u.jsx("div",{className:"bg-black/20 backdrop-blur-lg border border-white/20 rounded-2xl shadow-lg p-6",children:u.jsxs(cR,{className:`border-${"error"===t.severity?"red":"yellow"}-400 bg-${"error"===t.severity?"red":"yellow"}-400/10`,children:[u.jsx(n,{className:`h-4 w-4 text-${"error"===t.severity?"red":"yellow"}-400`}),u.jsx(uR,{className:`text-${"error"===t.severity?"red":"yellow"}-200`,children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold",children:t.title}),u.jsx("p",{className:"text-sm mt-1",children:t.description})]}),t.showSample&&this.state.sample&&u.jsxs("div",{className:"bg-black/20 rounded p-3 text-xs",children:[u.jsx("div",{className:"text-white/80 font-medium",children:this.state.sample.title}),u.jsxs("div",{className:"text-white/60 mt-1",children:[this.state.sample.artist,"  ",this.state.sample.year,"  ",this.state.sample.genre]}),this.state.videoId&&u.jsxs("div",{className:"mt-2",children:[u.jsx("span",{className:"text-white/60",children:"Video ID: "}),u.jsx("span",{className:"text-white/80",children:this.state.videoId})]})]}),t.suggestions.length>0&&u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium mb-2",children:"Troubleshooting steps:"}),u.jsx("ul",{className:"text-sm space-y-1 list-disc list-inside ml-2",children:t.suggestions.map((e,t)=>u.jsx("li",{children:e},t))})]}),u.jsxs("div",{className:"flex gap-2 pt-2 flex-wrap",children:[t.canRetry&&u.jsx(xr,{onClick:this.handleRetry,disabled:this.state.isRetrying,size:"sm",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:this.state.isRetrying?u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1 animate-spin"}),"Retrying..."]}):u.jsxs(u.Fragment,{children:[u.jsx(qt,{className:"w-3 h-3 mr-1"}),"Retry Player ",this.state.retryCount>0&&`(${this.state.retryCount+1})`]})}),u.jsx(xr,{onClick:this.handleReset,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:"Reset Player"}),this.state.videoId&&u.jsxs(xr,{onClick:()=>window.open(`https://www.youtube.com/watch?v=${this.state.videoId}`,"_blank"),variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(St,{className:"w-3 h-3 mr-1"}),"Open in YouTube"]}),this.props.onSelectDifferentSample&&u.jsxs(xr,{onClick:this.props.onSelectDifferentSample,variant:"outline",size:"sm",className:"border-white/20 text-white/80 hover:bg-white/10",children:[u.jsx(an,{className:"w-3 h-3 mr-1"}),"Try Different Sample"]})]}),!1]})})]})})}}const eM={getGuidanceMessage:(e,t={})=>({"use-in-chopper":'Click "Use in Chopper" to copy the YouTube URL and navigate to the Chopper page where you can create audio samples.',"copy-url":"URL copied to clipboard! You can now paste it in the Chopper page.","copy-failed":"Could not copy URL automatically. The URL will be available in the Chopper page.","navigation-failed":"Could not navigate automatically. Please manually go to the Chopper page.","sample-invalid":"This sample cannot be used in Chopper. Please select a different sample.","offline-mode":"You are offline. Some features may not work as expected."}[e]||"No guidance available for this action."),createChopperIntegrationGuidance:e=>({title:"Using Sample in Chopper",steps:[{step:1,title:"Copy YouTube URL",description:`The YouTube URL for "${e.title}" will be copied to your clipboard.`,status:"pending"},{step:2,title:"Navigate to Chopper",description:"You will be automatically redirected to the Chopper page.",status:"pending"},{step:3,title:"Load Sample",description:"The sample will be automatically loaded in the Chopper interface.",status:"pending"},{step:4,title:"Create Audio Samples",description:"Use the Chopper tools to create audio samples from the track.",status:"pending"}],tips:["Make sure you have a stable internet connection for the best experience.","The YouTube URL will be available in your clipboard for manual use if needed.","You can return to Sample Discovery anytime to find more samples."]}),formatSampleInfo(e){const t=[];return e.title&&t.push(e.title),e.artist&&t.push(`by ${e.artist}`),e.year&&t.push(`(${e.year})`),e.genre&&t.push(e.genre),t.join(" ")}},tM=({sample:e,isVisible:t,onClose:n,onTransfer:r,transferStatus:i={}})=>{const[s,a]=m.useState(0),[o,l]=m.useState(null);m.useEffect(()=>{if(e){const t=eM.createChopperIntegrationGuidance(e);l(t),a(0)}},[e]),m.useEffect(()=>{i.inProgress?a(1):i.success?a(4):i.error&&a(0)},[i]);return t&&e&&o?u.jsx(ES,{children:u.jsx(uA.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&n(),children:u.jsxs(uA.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"p-6 border-b border-gray-700",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:o.title}),u.jsxs("div",{className:"text-sm text-gray-300",children:[u.jsx("p",{className:"font-medium text-cyan-400",children:e.title}),u.jsxs("p",{children:["by ",e.artist," (",e.year,")  ",e.genre]})]})]}),u.jsx(xr,{onClick:n,variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:""})]})}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"space-y-3 mb-6",children:o.steps.map((e,t)=>((e,t)=>{const n=t<s,r=t===s,a=i.error&&r;return u.jsxs(uA.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start space-x-3 p-3 rounded-lg "+(n?"bg-green-500/10":r?"bg-cyan-500/10":"bg-gray-500/10"),children:[u.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n?u.jsx(gt,{className:"w-5 h-5 text-green-400"}):a?u.jsx(mt,{className:"w-5 h-5 text-red-400"}):u.jsx(vt,{className:"w-5 h-5 "+(r?"text-cyan-400":"text-gray-400")})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium "+(n?"text-green-400":r?"text-cyan-400":"text-gray-300"),children:e.title}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e.description}),a&&u.jsx("p",{className:"text-sm text-red-400 mt-1",children:i.error})]})]},e.step)})(e,t))}),u.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[u.jsx(xr,{onClick:()=>{r&&r(e)},disabled:i.inProgress,className:"bg-cyan-500 hover:bg-cyan-600 text-black font-medium",children:i.inProgress?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin mr-2"}),"Transferring..."]}):u.jsxs(u.Fragment,{children:[u.jsx(ct,{className:"w-4 h-4 mr-2"}),"Use in Chopper"]})}),u.jsxs(xr,{onClick:async()=>{if(!e?.youtubeId)return;const t=`https://www.youtube.com/watch?v=${e.youtubeId}`;try{await navigator.clipboard.writeText(t)}catch(kM){}},variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[u.jsx(wt,{className:"w-4 h-4 mr-2"}),"Copy URL"]}),u.jsxs(xr,{onClick:()=>{if(!e?.youtubeId)return;const t=`https://www.youtube.com/watch?v=${e.youtubeId}`;window.open(t,"_blank","noopener,noreferrer")},variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[u.jsx(St,{className:"w-4 h-4 mr-2"}),"Open YouTube"]})]}),i.message&&u.jsx(uA.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg mb-4 "+(i.success?"bg-green-500/10 text-green-400":i.error?"bg-red-500/10 text-red-400":"bg-cyan-500/10 text-cyan-400"),children:i.message}),u.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-white mb-2",children:"Tips:"}),u.jsx("ul",{className:"space-y-1 text-sm text-gray-300",children:o.tips.map((e,t)=>u.jsxs("li",{className:"flex items-start",children:[u.jsx("span",{className:"text-cyan-400 mr-2",children:""}),e]},t))})]})]}),u.jsx("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:"text-sm text-gray-400",children:"Need help? Check the documentation or contact support."}),u.jsx(xr,{onClick:n,variant:"ghost",className:"text-gray-400 hover:text-white",children:"Close"})]})})]})})}):null};tM.propTypes={sample:Kj.shape({id:Kj.string.isRequired,title:Kj.string.isRequired,artist:Kj.string.isRequired,year:Kj.number.isRequired,genre:Kj.string.isRequired,youtubeId:Kj.string.isRequired}),isVisible:Kj.bool.isRequired,onClose:Kj.func.isRequired,onTransfer:Kj.func.isRequired,transferStatus:Kj.shape({inProgress:Kj.bool,success:Kj.bool,message:Kj.string,error:Kj.string})};const nM=new class{constructor(){this.storageKey="sampleDiscovery",this.favoritesKey="favorites",this.inMemoryFavorites=[],this.useInMemoryFallback=!1,this.maxFavorites=100,this._testStorageAvailability()}_testStorageAvailability(){try{const e="__storage_test__";localStorage.setItem(e,"test"),localStorage.removeItem(e),this.useInMemoryFallback=!1}catch(kM){this.useInMemoryFallback=!0}}_getStorageData(){if(this.useInMemoryFallback)return{[this.favoritesKey]:this.inMemoryFavorites};try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(kM){return this.useInMemoryFallback=!0,{[this.favoritesKey]:this.inMemoryFavorites}}}_saveStorageData(e){if(this.useInMemoryFallback)this.inMemoryFavorites=e[this.favoritesKey]||[];else try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(kM){throw this.useInMemoryFallback=!0,this.inMemoryFavorites=e[this.favoritesKey]||[],new Error("Storage failed, using in-memory fallback")}}async getFavorites(){try{const e=this._getStorageData()[this.favoritesKey]||[],t=e.filter(e=>!!Cj(e).isValid);return t.length!==e.length&&await this._saveFavorites(t),t}catch(kM){return[]}}async addFavorite(e){try{const t=Cj(e);if(!t.isValid)throw new Error(`Invalid sample data: ${t.errors.join(", ")}`);const n=await this.getFavorites();if(n.some(t=>t.id===e.id))return!0;if(n.length>=this.maxFavorites)throw new Error(`Maximum favorites limit (${this.maxFavorites}) reached`);const r={...e,favoritedAt:(new Date).toISOString()},i=[...n,r];return await this._saveFavorites(i),!0}catch(kM){throw kM}}async removeFavorite(e){try{if(!e||"string"!=typeof e)throw new Error("Invalid sample ID");const t=await this.getFavorites(),n=t.filter(t=>t.id!==e);return n.length!==t.length&&await this._saveFavorites(n),!0}catch(kM){throw kM}}async isFavorite(e){try{if(!e||"string"!=typeof e)return!1;return(await this.getFavorites()).some(t=>t.id===e)}catch(kM){return!1}}async clearFavorites(){try{return await this._saveFavorites([]),!0}catch(kM){throw kM}}async getFavoritesCount(){try{return(await this.getFavorites()).length}catch(kM){return 0}}async exportFavorites(){try{const e=await this.getFavorites();return JSON.stringify(e,null,2)}catch(kM){throw kM}}async importFavorites(e,t=!1){try{const n=JSON.parse(e);if(!Array.isArray(n))throw new Error("Invalid favorites data: must be an array");const r=n.filter(e=>!!Cj(e).isValid);if(0===r.length)throw new Error("No valid favorites found in import data");let i;if(t){const e=await this.getFavorites(),t=new Set(e.map(e=>e.id)),n=r.filter(e=>!t.has(e.id));i=[...e,...n]}else i=r;return i.length>this.maxFavorites&&(i=i.slice(0,this.maxFavorites)),await this._saveFavorites(i),r.length}catch(kM){throw kM}}getStorageStatus(){return{isUsingInMemoryFallback:this.useInMemoryFallback,storageType:this.useInMemoryFallback?"memory":"localStorage",maxFavorites:this.maxFavorites}}async _saveFavorites(e){const t=this._getStorageData();t[this.favoritesKey]=e,this._saveStorageData(t)}};const rM=new class{constructor(){this.storageKey="sampleDiscovery.history",this.maxHistoryItems=100,this.history=[],this.listeners=new Set,this.loadHistory()}loadHistory(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.history=t.filter(e=>!!Cj(e).isValid).slice(0,this.maxHistoryItems))}}catch(kM){this.history=[]}}saveHistory(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.history))}catch(kM){}}addToHistory(e){try{if(!Cj(e).isValid)return!1;const t={...e,viewedAt:Date.now()};return this.history=this.history.filter(t=>t.id!==e.id),this.history.unshift(t),this.history.length>this.maxHistoryItems&&(this.history=this.history.slice(0,this.maxHistoryItems)),this.saveHistory(),this.notifyListeners(),!0}catch(kM){return!1}}getHistory(){return[...this.history]}clearHistory(){try{return this.history=[],this.saveHistory(),this.notifyListeners(),!0}catch(kM){return!1}}removeFromHistory(e){try{const t=this.history.length;return this.history=this.history.filter(t=>t.id!==e),this.history.length!==t&&(this.saveHistory(),this.notifyListeners(),!0)}catch(kM){return!1}}getHistoryStats(){const e=Date.now(),t=864e5,n=7*t,r=30*t,i={total:this.history.length,today:0,thisWeek:0,thisMonth:0,genres:{},years:{},oldestEntry:null,newestEntry:null};return this.history.forEach(s=>{const a=e-(s.viewedAt||0);a<=t&&i.today++,a<=n&&i.thisWeek++,a<=r&&i.thisMonth++,i.genres[s.genre]=(i.genres[s.genre]||0)+1,i.years[s.year]=(i.years[s.year]||0)+1,(!i.oldestEntry||s.viewedAt&&s.viewedAt<i.oldestEntry.viewedAt)&&(i.oldestEntry=s),(!i.newestEntry||s.viewedAt&&s.viewedAt>i.newestEntry.viewedAt)&&(i.newestEntry=s)}),i}searchHistory(e){if(!e||"string"!=typeof e)return this.getHistory();const t=e.toLowerCase().trim();return this.history.filter(e=>e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)||e.genre.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t)))}getHistoryByDateRange(e,t){return this.history.filter(n=>{const r=n.viewedAt||0;return r>=e&&r<=t})}isInHistory(e){return this.history.some(t=>t.id===e)}getLastViewedTime(e){const t=this.history.find(t=>t.id===e);return t?t.viewedAt:null}addListener(e){"function"==typeof e&&this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e=this.getHistory();this.listeners.forEach(t=>{try{t(e)}catch(kM){}})}exportHistory(){return{version:"1.0",exportedAt:Date.now(),history:this.getHistory(),stats:this.getHistoryStats()}}importHistory(e){try{if(!e||!Array.isArray(e.history))throw new Error("Invalid history data format");const t=e.history.filter(e=>Cj(e).isValid),n=new Set(this.history.map(e=>e.id)),r=t.filter(e=>!n.has(e.id));return this.history=[...r,...this.history].slice(0,this.maxHistoryItems),this.saveHistory(),this.notifyListeners(),!0}catch(kM){return!1}}cleanupOldEntries(e=2592e6){const t=Date.now(),n=this.history.length;this.history=this.history.filter(n=>t-(n.viewedAt||0)<=e);const r=n-this.history.length;return r>0&&(this.saveHistory(),this.notifyListeners()),r}getMemoryUsage(){const e=JSON.stringify(this.history).length,t=this.history.length>0?e/this.history.length:0;return{totalItems:this.history.length,maxItems:this.maxHistoryItems,estimatedSizeBytes:e,averageItemSizeBytes:Math.round(t),utilizationPercent:Math.round(this.history.length/this.maxHistoryItems*100)}}destroy(){this.listeners.clear(),this.history=[]}};const iM=new class{constructor(){this.maxRetries=3,this.baseDelay=1e3,this.errorLogs=[],this.retryAttempts=new Map}async withRetry(e,t={}){const{maxRetries:n=this.maxRetries,baseDelay:r=this.baseDelay,fallback:i=null,context:s="unknown"}=t,a=`${s}-${Date.now()}`;let o=null;for(let c=0;c<=n;c++)try{const t=await e();return this.retryAttempts.delete(a),c>0&&this.logRecovery(s,c,o),t}catch(kM){if(o=kM,this.logRetryAttempt(s,c,kM,n),c===n)break;const t=this.calculateDelay(r,c);await this.sleep(t)}if(this.logFinalFailure(s,n,o),null!==i){if("function"==typeof i)try{return await i(o)}catch(l){throw this.logError("fallback-execution",l,{originalError:o}),l}return i}throw o}handleYouTubeAPIError(e){const t=e?.message?.toLowerCase()||"",n=e?.status||e?.code;return 403===n||t.includes("quota")||t.includes("limit")?{type:"quota_exceeded",severity:"warning",canRetry:!1,fallbackToMock:!0,userMessage:"YouTube API quota exceeded. Showing demo samples instead.",retryAfter:36e5}:404===n||t.includes("not found")||t.includes("unavailable")?{type:"video_unavailable",severity:"warning",canRetry:!1,fallbackToMock:!1,userMessage:"This video is not available. Try a different sample.",retryAfter:null}:429===n||t.includes("rate limit")?{type:"rate_limited",severity:"warning",canRetry:!0,fallbackToMock:!0,userMessage:"Too many requests. Please wait a moment.",retryAfter:6e4}:t.includes("network")||t.includes("timeout")?{type:"network_error",severity:"warning",canRetry:!0,fallbackToMock:!0,userMessage:"Network connection issue. Retrying...",retryAfter:5e3}:{type:"unknown_api_error",severity:"error",canRetry:!0,fallbackToMock:!0,userMessage:"YouTube service temporarily unavailable.",retryAfter:3e4}}handleNetworkError(e){const t=navigator.onLine,n=e?.message?.toLowerCase()||"";return t?n.includes("cors")||n.includes("cross-origin")?{type:"cors_error",severity:"error",canRetry:!1,fallbackToMock:!0,userMessage:"Service configuration issue. Using demo samples.",retryAfter:null}:n.includes("timeout")?{type:"timeout",severity:"warning",canRetry:!0,fallbackToMock:!0,userMessage:"Request timed out. Retrying with demo samples.",retryAfter:1e4}:{type:"network_error",severity:"warning",canRetry:!0,fallbackToMock:!0,userMessage:"Connection issue. Retrying...",retryAfter:5e3}:{type:"offline",severity:"warning",canRetry:!1,fallbackToMock:!0,userMessage:"You are offline. Showing cached samples.",retryAfter:null}}logError(e,t,n={}){const r={id:`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:(new Date).toISOString(),context:e,error:{message:t?.message,stack:t?.stack,name:t?.name},metadata:{...n,userAgent:navigator.userAgent,url:window.location.href,isOnline:navigator.onLine,timestamp:Date.now()}};this.errorLogs.push(r),this.errorLogs.length>50&&(this.errorLogs=this.errorLogs.slice(-50));try{const e=JSON.parse(localStorage.getItem("discoveryErrorLogs")||"[]");e.push(r);const t=e.slice(-20);localStorage.setItem("discoveryErrorLogs",JSON.stringify(t))}catch(i){}this.reportToMonitoring(r)}logRetryAttempt(e,t,n,r){const i={context:e,attempt:t+1,maxRetries:r+1,error:n?.message,timestamp:(new Date).toISOString()},s=`${e}-retries`,a=this.retryAttempts.get(s)||[];a.push(i),this.retryAttempts.set(s,a)}logRecovery(e,t,n){const r={context:e,attempts:t,lastError:n?.message,timestamp:(new Date).toISOString()};this.logError("recovery-success",null,r)}logFinalFailure(e,t,n){const r={context:e,maxRetries:t,finalError:n?.message,timestamp:(new Date).toISOString()};this.logError("final-failure",n,r)}calculateDelay(e,t){const n=e*Math.pow(2,t),r=.5+Math.random();return Math.min(n*r,3e4)}sleep(e){return new Promise(t=>setTimeout(t,e))}reportToMonitoring(e){try{window.discoveryErrorReporter&&"function"==typeof window.discoveryErrorReporter&&window.discoveryErrorReporter(e),window.Sentry&&window.Sentry.captureException&&window.Sentry.captureException(new Error(e.error.message),{tags:{component:"SampleDiscovery",context:e.context},extra:e.metadata})}catch(t){}}getErrorStats(){const e=Date.now(),t=this.errorLogs.filter(t=>e-new Date(t.timestamp).getTime()<36e5),n={};return t.forEach(e=>{n[e.context]=(n[e.context]||0)+1}),{totalErrors:this.errorLogs.length,recentErrors:t.length,errorsByContext:n,retryAttempts:Object.fromEntries(this.retryAttempts)}}clearErrorLogs(){this.errorLogs=[],this.retryAttempts.clear();try{localStorage.removeItem("discoveryErrorLogs")}catch(kM){}}};class sM{constructor(e={}){this.cache=new Map,this.defaultTTL=e.ttl||3e5,this.maxCacheSize=e.maxSize||100,this.cleanupInterval=e.cleanupInterval||6e4,this.memoryThreshold=e.memoryThreshold||52428800,this.startCleanupTimer(),this.cacheResults=this.cacheResults.bind(this),this.getCachedResults=this.getCachedResults.bind(this),this.invalidateCache=this.invalidateCache.bind(this)}generateCacheKey(e){try{if(!e||"object"!=typeof e)return JSON.stringify({default:!0});const t={genres:(e.genres||[]).sort(),yearRange:e.yearRange||{start:1950,end:1995},tempoRange:e.tempoRange||null,durationRange:e.durationRange||null,instruments:(e.instruments||[]).sort()};return JSON.stringify(t)}catch(kM){return JSON.stringify({error:!0,timestamp:Date.now()})}}cacheResults(e,t,n=this.defaultTTL){try{const r=this.generateCacheKey(e),i={data:t,timestamp:Date.now(),ttl:n,size:this.estimateDataSize(t)};this.enforceMemoryLimits(),this.cache.set(r,i)}catch(kM){}}getCachedResults(e){try{const t=this.generateCacheKey(e),n=this.cache.get(t);if(!n)return null;return Date.now()-n.timestamp>n.ttl?(this.cache.delete(t),null):n.data}catch(kM){return null}}invalidateCache(e=null){try{if(e){const t=this.generateCacheKey(e);this.cache.delete(t)}else{this.cache.size;this.cache.clear()}}catch(kM){}}getCacheStats(){const e=Array.from(this.cache.values()),t=e.reduce((e,t)=>e+t.size,0),n=Date.now(),r=e.filter(e=>n-e.timestamp<=e.ttl);return{totalEntries:this.cache.size,validEntries:r.length,expiredEntries:this.cache.size-r.length,totalMemoryUsage:t,averageEntrySize:e.length>0?t/e.length:0}}estimateDataSize(e){try{return 2*JSON.stringify(e).length}catch(kM){return 1024}}enforceMemoryLimits(){try{if(this.removeExpiredEntries(),this.cache.size>=this.maxCacheSize){const e=this.cache.size-this.maxCacheSize+1,t=Array.from(this.cache.entries()).sort(([,e],[,t])=>e.timestamp-t.timestamp);for(let n=0;n<e&&n<t.length;n++)this.cache.delete(t[n][0])}this.getCacheStats().totalMemoryUsage>this.memoryThreshold&&this.reduceMemoryUsage()}catch(kM){}}cleanup(e=!1){try{(e||this.shouldCleanup())&&(this.removeExpiredEntries(),this.enforceMemoryLimits())}catch(kM){}}shouldCleanup(){try{const e=this.getCacheStats();return e.expiredEntries>0||e.totalEntries>this.maxCacheSize||e.totalMemoryUsage>.8*this.memoryThreshold}catch(kM){return!1}}removeExpiredEntries(){const e=Date.now();for(const[t,n]of this.cache.entries())e-n.timestamp>n.ttl&&this.cache.delete(t)}reduceMemoryUsage(){const e=Array.from(this.cache.entries()).sort(([,e],[,t])=>t.size-e.size);const t=.3*this.memoryThreshold;let n=0;for(const[r,i]of e){if(n>=t)break;this.cache.delete(r),n+=i.size}}startCleanupTimer(){this.cleanupTimer=setInterval(()=>{this.removeExpiredEntries()},this.cleanupInterval)}destroy(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.cache.clear()}async preloadCommonFilters(e,t){try{const n=e.map(async e=>{if(!this.getCachedResults(e))try{const n=await t(e);this.cacheResults(e,n)}catch(kM){}});await Promise.allSettled(n)}catch(kM){}}}var aM={};class oM{constructor(){this.metrics=new Map,this.timers=new Map,this.observers=new Map,this.isEnabled="true"===aM.VITE_ENABLE_PERFORMANCE_MONITORING,this.thresholds={pageLoad:2e3,filterResponse:1e3,apiCall:5e3,memoryWarning:52428800},this.initializeObservers()}initializeObservers(){if(this.isEnabled&&"undefined"!=typeof window)try{if("PerformanceObserver"in window){const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"navigation"===e.entryType&&this.recordPageLoadMetrics(e)})});e.observe({entryTypes:["navigation"]}),this.observers.set("navigation",e)}"memory"in performance&&this.startMemoryMonitoring()}catch(kM){}}startTiming(e,t={}){if(!this.isEnabled)return;const n=performance.now();this.timers.set(e,{startTime:n,context:t,timestamp:Date.now()})}endTiming(e,t={}){if(!this.isEnabled)return 0;const n=this.timers.get(e);if(!n)return 0;const r=performance.now(),i=r-n.startTime,s={name:e,duration:i,startTime:n.startTime,endTime:r,timestamp:n.timestamp,context:{...n.context,...t},threshold:this.thresholds[e]||null,isSlowPerformance:!!this.thresholds[e]&&i>this.thresholds[e]};return this.recordMetric(s),this.timers.delete(e),i}recordMetric(e){if(!this.isEnabled)return;const t=`${e.name}_${Date.now()}`;if(this.metrics.set(t,e),e.isSlowPerformance,"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("discoveryPerformanceMetric",{detail:e})),this.metrics.size>100){const e=this.metrics.keys().next().value;this.metrics.delete(e)}}trackPageLoad(){if(!this.isEnabled||"undefined"==typeof window)return;const e=performance.getEntriesByType("navigation")[0];e&&this.recordPageLoadMetrics(e)}recordPageLoadMetrics(e){const t={domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,loadComplete:e.loadEventEnd-e.loadEventStart,totalPageLoad:e.loadEventEnd-e.navigationStart,dnsLookup:e.domainLookupEnd-e.domainLookupStart,tcpConnect:e.connectEnd-e.connectStart,serverResponse:e.responseEnd-e.requestStart,domProcessing:e.domComplete-e.domLoading};Object.entries(t).forEach(([e,t])=>{t>0&&this.recordMetric({name:`pageLoad_${e}`,duration:t,timestamp:Date.now(),context:{type:"pageLoad"},threshold:"totalPageLoad"===e?this.thresholds.pageLoad:null,isSlowPerformance:"totalPageLoad"===e&&t>this.thresholds.pageLoad})})}trackFilterResponse(e,t){const n={filterCount:Object.keys(e).length,resultCount:t,genres:e.genres?.length||0,hasYearRange:!(!e.yearRange?.start||!e.yearRange?.end),hasAdvancedFilters:!(!e.tempoRange&&!e.durationRange)},r=Array.from(this.metrics.values()).filter(e=>"filterResponse"===e.name).sort((e,t)=>t.timestamp-e.timestamp)[0];r&&(r.context={...r.context,...n})}trackAPICall(e,t,n=0){const r=`apiCall_${e}`,i={success:t,responseSize:n,apiName:e},s=Array.from(this.metrics.values()).filter(e=>e.name===r).sort((e,t)=>t.timestamp-e.timestamp)[0];s&&(s.context={...s.context,...i})}startMemoryMonitoring(){if(!this.isEnabled||"undefined"==typeof window||!("memory"in performance))return;const e=()=>{const e=performance.memory,t={name:"memoryUsage",duration:0,timestamp:Date.now(),context:{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,usagePercentage:e.usedJSHeapSize/e.jsHeapSizeLimit*100},threshold:this.thresholds.memoryWarning,isSlowPerformance:e.usedJSHeapSize>this.thresholds.memoryWarning};this.recordMetric(t)},t=setInterval(e,3e4);this.observers.set("memory",{interval:t}),e()}getPerformanceSummary(e=null){const t=Array.from(this.metrics.values()),n=e?t.filter(t=>t.name.includes(e)):t;if(0===n.length)return{count:0,averageDuration:0,slowCount:0};const r=n.map(e=>e.duration).filter(e=>e>0),i=n.filter(e=>e.isSlowPerformance).length;return{count:n.length,averageDuration:r.length>0?r.reduce((e,t)=>e+t,0)/r.length:0,minDuration:r.length>0?Math.min(...r):0,maxDuration:r.length>0?Math.max(...r):0,slowCount:i,slowPercentage:i/n.length*100,recentMetrics:n.slice(-10)}}getDebugInfo(){return{isEnabled:this.isEnabled,metricsCount:this.metrics.size,activeTimers:this.timers.size,observers:Array.from(this.observers.keys()),thresholds:this.thresholds,recentMetrics:Array.from(this.metrics.values()).slice(-5),performanceSummary:{pageLoad:this.getPerformanceSummary("pageLoad"),filterResponse:this.getPerformanceSummary("filterResponse"),apiCall:this.getPerformanceSummary("apiCall"),memory:this.getPerformanceSummary("memoryUsage")}}}exportMetrics(e="json"){const t=Array.from(this.metrics.values());if("csv"===e){const e=[["name","duration","timestamp","isSlowPerformance","context"].join(",")];return t.forEach(t=>{const n=[t.name,t.duration,t.timestamp,t.isSlowPerformance,JSON.stringify(t.context).replace(/,/g,";")];e.push(n.join(","))}),e.join("\n")}return JSON.stringify(t,null,2)}reset(){this.metrics.clear(),this.timers.clear()}cleanup(){this.observers.forEach((e,t)=>{e.disconnect?e.disconnect():e.interval&&clearInterval(e.interval)}),this.observers.clear(),this.reset()}}const lM={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDBLjHyR3kiZNsoz63ZGpRcHfMoARgnRAA",VITE_FIREBASE_APP_ID:"1:285885896798:web:05ffbca2d4ead63140bccf",VITE_FIREBASE_AUTH_DOMAIN:"chop-stop.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-E39RL9F499",VITE_FIREBASE_MESSAGING_SENDER_ID:"285885896798",VITE_FIREBASE_PROJECT_ID:"chop-stop",VITE_FIREBASE_STORAGE_BUCKET:"chop-stop.firebasestorage.app",VITE_GEMINI_API_KEY:"AIzaSyBk5GiuLfL5yjc5Vv5nC7oAwNEdGb1Hpa0",VITE_USE_FIREBASE_EMULATOR:"true",VITE_YOUTUBE_API_KEY:"AIzaSyBYXiYASIE1J-BMlaA3ufIYCV07FKoAPkc--xwYQ9gpeEko",VITE_YOUTUBE_API_KEY_1:"AIzaSyCh328nmjLof_VLzffGcj--xwYQ9gpeEko",VITE_YOUTUBE_API_KEY_2:"AIzaSyBYXiYASIE1J-BMlaA3ufIYCV07FKoAPkc",VITE_YOUTUBE_API_KEY_3:""};var cM={};const uM=new class{constructor(){this.apiKeys=this._initializeApiKeys(),this.currentKeyIndex=0,this.keyQuotaStatus=new Map,this.apiKey=this.getCurrentApiKey(),this.baseUrl="https://www.googleapis.com/youtube/v3",this.errorService=iM,this.cacheManager=new sM,this.performanceMonitor=new oM,this.rateLimiter={requestsPerSecond:10,requestsPerDay:1e4,currentRequests:0,dailyRequests:0,lastRequestTime:0,dailyResetTime:this._getDailyResetTime()},this.requestQueue=[],this.isProcessingQueue=!1,this.endpoints={search:"/search",videos:"/videos",channels:"/channels"},this._initializeDailyQuota()}_initializeApiKeys(){const e=[],t=void 0!==import.meta&&lM?lM:cM;for(let n=1;n<=5;n++){const r=t[`VITE_YOUTUBE_API_KEY_${n}`];r&&r.trim()&&e.push(r.trim())}if(0===e.length){const n=t.VITE_YOUTUBE_API_KEY;n&&n.trim()&&e.push(n.trim())}return e}getCurrentApiKey(){if(0===this.apiKeys.length)throw new Error("No YouTube API keys configured");return this.apiKeys[this.currentKeyIndex]}rotateApiKey(){if(this.apiKeys.length<=1)return!1;const e=this.currentKeyIndex;let t=0;do{this.currentKeyIndex=(this.currentKeyIndex+1)%this.apiKeys.length,t++;const e=this.getCurrentApiKey(),n=this.keyQuotaStatus.get(e);if(!n||!n.exceeded||this._isQuotaResetTime(n.resetTime))return this.apiKey=e,n&&n.exceeded&&this._isQuotaResetTime(n.resetTime)&&this.keyQuotaStatus.delete(e),!0}while(this.currentKeyIndex!==e&&t<this.apiKeys.length);return!1}markKeyQuotaExceeded(e=null){const t=this.getCurrentApiKey();this.keyQuotaStatus.set(t,{exceeded:!0,resetTime:e||this._getNextDayResetTime(),timestamp:(new Date).toISOString()})}_isQuotaResetTime(e){return!!e&&new Date>=new Date(e)}_getNextDayResetTime(){const e=new Date;return e.setDate(e.getDate()+1),e.setHours(8,0,0,0),e.toISOString()}getApiKeyStatus(){return{totalKeys:this.apiKeys.length,currentKeyIndex:this.currentKeyIndex,quotaExceededKeys:Array.from(this.keyQuotaStatus.entries()).map(([e,t])=>({keyIndex:this.apiKeys.indexOf(e),resetTime:t.resetTime,exceeded:t.exceeded}))}}async searchSamples(e={}){const t=performance.now();this._generateCacheKey("search",e);try{const n=this.cacheManager.getCachedResults(e);if(n)return this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!0,success:!0,apiName:"youtube"}),n;if(!this.apiKey||"your_youtube_api_key_here"===this.apiKey)throw new Error("YouTube API key not configured. Please set VITE_YOUTUBE_API_KEY in your .env file.");await this._checkRateLimit();const r=this._buildSearchQuery(e),i=await this._makeApiRequest(this.endpoints.search,{part:"snippet",q:r,type:"video",maxResults:e.maxResults||12,order:e.order||"relevance",videoDuration:"medium",videoDefinition:"any",safeSearch:"none"});if(!i.items||0===i.items.length)throw new Error("No samples found for the specified criteria");const s=i.items.map(e=>e.id.videoId).join(","),a=await this._makeApiRequest(this.endpoints.videos,{part:"snippet,contentDetails,statistics",id:s}),o=this._transformToSampleData(a.items,e);return this.cacheManager.cacheResults(e,o,3e5),this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!1,success:!0,apiName:"youtube",resultCount:o.length}),o}catch(kM){if(this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!1,success:!1,apiName:"youtube",error:kM.message}),(403===kM.status||kM.message?.includes("quota")||kM.message?.includes("exceeded"))&&(this.markKeyQuotaExceeded(),this.rotateApiKey())){if(!e._retryCount)return e._retryCount=1,this.searchSamples(e);if(e._retryCount<this.apiKeys.length)return e._retryCount++,this.searchSamples(e)}throw this.errorService.handleYouTubeAPIError(kM)}}async getVideoDetails(e){const t=performance.now();this._generateCacheKey("video",{videoId:e});try{const n=this.cacheManager.getCachedResults({videoId:e});if(n)return this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!0,success:!0,apiName:"youtube"}),n;if(!this.apiKey||"your_youtube_api_key_here"===this.apiKey)throw new Error("YouTube API key not configured");await this._checkRateLimit();const r=await this._makeApiRequest(this.endpoints.videos,{part:"snippet,contentDetails,statistics",id:e});if(!r.items||0===r.items.length)throw new Error(`Video not found: ${e}`);const i=this._transformToSampleData(r.items)[0];return this.cacheManager.cacheResults({videoId:e},i,6e5),this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!1,success:!0,apiName:"youtube"}),i}catch(kM){if(this.performanceMonitor.recordMetric("apiCall",{duration:performance.now()-t,cached:!1,success:!1,apiName:"youtube",error:kM.message}),(403===kM.status||kM.message?.includes("quota")||kM.message?.includes("exceeded"))&&(this.markKeyQuotaExceeded(),this.rotateApiKey()))return this.getVideoDetails(e);throw this.errorService.handleYouTubeAPIError(kM)}}async getChannelInfo(e){performance.now(),this._generateCacheKey("channel",{channelId:e});try{const t=this.cacheManager.getCachedResults({channelId:e});if(t)return t;if(!this.apiKey||"your_youtube_api_key_here"===this.apiKey)throw new Error("YouTube API key not configured");await this._checkRateLimit();const n=await this._makeApiRequest(this.endpoints.channels,{part:"snippet,statistics",id:e});if(!n.items||0===n.items.length)throw new Error(`Channel not found: ${e}`);const r=n.items[0],i={id:r.id,title:r.snippet.title,description:r.snippet.description,thumbnailUrl:r.snippet.thumbnails?.default?.url,subscriberCount:r.statistics?.subscriberCount,videoCount:r.statistics?.videoCount};return this.cacheManager.cacheResults({channelId:e},i,36e5),i}catch(kM){throw this.errorService.handleYouTubeAPIError(kM)}}_buildSearchQuery(e){const t=[];if(e.genres&&e.genres.length>0){const n=e.genres.join(" OR ");t.push(`(${n})`)}if(e.yearRange){const{start:n,end:r}=e.yearRange;if(n&&r){const e=[];for(let t=10*Math.floor(n/10);t<=r;t+=10)e.push(`${t}s`);e.length>0&&t.push(`(${e.join(" OR ")})`)}}return t.push('(vintage OR classic OR original OR "rare groove")'),t.push("(music OR song OR track OR sample)"),t.push("-cover -remix -live -concert -interview"),t.join(" ")}_transformToSampleData(e,t={}){return e.map(e=>{const n=this._extractYear(e.snippet.title,e.snippet.description),r=this._determineGenre(e,t),i=this._parseDuration(e.contentDetails?.duration),s=this._extractTempo(e.snippet.title,e.snippet.description),a={id:`youtube-${e.id}`,title:this._cleanTitle(e.snippet.title),artist:this._extractArtist(e.snippet.title,e.snippet.channelTitle),year:n,genre:r,duration:i,youtubeId:e.id,thumbnailUrl:e.snippet.thumbnails?.medium?.url||e.snippet.thumbnails?.default?.url,tempo:s,instruments:this._extractInstruments(e.snippet.title,e.snippet.description),tags:this._extractTags(e.snippet.tags,e.snippet.title),isMock:!1,channelTitle:e.snippet.channelTitle,publishedAt:e.snippet.publishedAt,viewCount:parseInt(e.statistics?.viewCount)||0,likeCount:parseInt(e.statistics?.likeCount)||0};return Cj(a).isValid?a:this._createFallbackSampleData(e)}).filter(e=>null!==e)}_createFallbackSampleData(e){return{id:`youtube-${e.id}`,title:e.snippet.title||"Unknown Title",artist:e.snippet.channelTitle||"Unknown Artist",year:1970,genre:"Soul",duration:180,youtubeId:e.id,thumbnailUrl:e.snippet.thumbnails?.medium?.url||e.snippet.thumbnails?.default?.url||"https://img.youtube.com/vi/default/mqdefault.jpg",tempo:120,instruments:["unknown"],tags:["vintage","sample"],isMock:!1}}_extractYear(e,t){const n=`${e} ${t}`.toLowerCase(),r=n.match(/\b(19[5-9][0-9])\b/);if(r){const e=parseInt(r[1]);if(e>=1950&&e<=1995)return e}const i=n.match(/\b(50s|60s|70s|80s|90s)\b/);if(i){return{"50s":1955,"60s":1965,"70s":1975,"80s":1985,"90s":1995}[i[1]]}return 1970}_determineGenre(e,t){const n=`${e.snippet.title.toLowerCase()} ${e.snippet.description?.toLowerCase()||""}`;if(t&&t.genres&&1===t.genres.length)return t.genres[0];const r={Soul:["soul","motown","stax","atlantic","aretha","james brown","stevie wonder"],Jazz:["jazz","bebop","swing","blue note","miles davis","coltrane","monk"],Funk:["funk","p-funk","parliament","funkadelic","sly stone","meters"],Blues:["blues","chicago blues","delta blues","muddy waters","bb king","howlin wolf"],Afrobeat:["afrobeat","fela kuti","africa 70","nigerian","afro"]};for(const[i,s]of Object.entries(r))if(s.some(e=>n.includes(e)))return i;return"Soul"}_parseDuration(e){if(!e)return 180;const t=e.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!t)return 180;const n=3600*(parseInt(t[1])||0)+60*(parseInt(t[2])||0)+(parseInt(t[3])||0);return n<1?180:n>600?600:n}_extractTempo(e,t){const n=`${e} ${t}`.toLowerCase(),r=n.match(/(\d+)\s*bpm/);if(r){const e=parseInt(r[1]);if(e>=60&&e<=200)return e}const i={soul:110,jazz:130,funk:105,blues:80,afrobeat:120};for(const[s,a]of Object.entries(i))if(n.includes(s))return a;return 120}_extractInstruments(e,t){const n=`${e} ${t}`.toLowerCase(),r=[],i={drums:["drums","drummer","percussion"],bass:["bass","bassist","upright bass"],guitar:["guitar","guitarist"],piano:["piano","pianist","keys","keyboard"],saxophone:["saxophone","sax","tenor sax","alto sax"],trumpet:["trumpet","horn section"],vocals:["vocals","singer","vocal"],organ:["organ","hammond"],harmonica:["harmonica","harp"]};for(const[s,a]of Object.entries(i))a.some(e=>n.includes(e))&&r.push(s);return r.length>0?r:["unknown"]}_extractTags(e,t){const n=[];e&&Array.isArray(e)&&n.push(...e.slice(0,5));const r=t.toLowerCase();return r.includes("rare")&&n.push("rare"),r.includes("classic")&&n.push("classic"),r.includes("vintage")&&n.push("vintage"),r.includes("original")&&n.push("original"),n.push("sample"),[...new Set(n)].slice(0,8)}_cleanTitle(e){return e.replace(/\[.*?\]/g,"").replace(/\(.*?\)/g,"").replace(/\s+/g," ").trim()}_extractArtist(e,t){const n=e.match(/^([^-]+)\s*-\s*/);return n?n[1].trim():t||"Unknown Artist"}async _makeApiRequest(e,t){const n=new URL(this.baseUrl+e);n.searchParams.append("key",this.apiKey),Object.entries(t).forEach(([e,t])=>{n.searchParams.append(e,t)}),this._updateRateLimitCounters();const r=await fetch(n.toString(),{method:"GET",headers:{Accept:"application/json","User-Agent":"ChopShop-SampleDiscovery/1.0"}});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(`YouTube API error: ${r.status} - ${e.error?.message||r.statusText}`)}return await r.json()}async _checkRateLimit(){const e=Date.now();if(e>=this.rateLimiter.dailyResetTime&&(this.rateLimiter.dailyRequests=0,this.rateLimiter.dailyResetTime=this._getDailyResetTime()),this.rateLimiter.dailyRequests>=this.rateLimiter.requestsPerDay)throw new Error("Daily YouTube API quota exceeded. Please try again tomorrow.");const t=e-this.rateLimiter.lastRequestTime,n=1e3/this.rateLimiter.requestsPerSecond;if(t<n){const e=n-t;await new Promise(t=>setTimeout(t,e))}}_updateRateLimitCounters(){this.rateLimiter.currentRequests++,this.rateLimiter.dailyRequests++,this.rateLimiter.lastRequestTime=Date.now()}_getDailyResetTime(){const e=new Date;return e.setUTCDate(e.getUTCDate()+1),e.setUTCHours(0,0,0,0),e.getTime()}_initializeDailyQuota(){try{if("undefined"==typeof localStorage)return;const e=localStorage.getItem("youtube_api_quota");if(e){const t=JSON.parse(e);t.date===(new Date).toDateString()&&(this.rateLimiter.dailyRequests=t.requests||0)}}catch(kM){}}_saveDailyQuota(){try{if("undefined"==typeof localStorage)return;const e={date:(new Date).toDateString(),requests:this.rateLimiter.dailyRequests};localStorage.setItem("youtube_api_quota",JSON.stringify(e))}catch(kM){}}_generateCacheKey(e,t){const n=JSON.stringify(t,Object.keys(t).sort());return`youtube_${e}_${btoa(n).replace(/[^a-zA-Z0-9]/g,"")}`}getRateLimitStatus(){return{dailyRequests:this.rateLimiter.dailyRequests,dailyLimit:this.rateLimiter.requestsPerDay,remainingRequests:this.rateLimiter.requestsPerDay-this.rateLimiter.dailyRequests,resetTime:new Date(this.rateLimiter.dailyResetTime).toISOString()}}isConfigured(){return!(!this.apiKey||"your_youtube_api_key_here"===this.apiKey)}async testConnection(){try{return!!this.isConfigured()&&(await this._makeApiRequest(this.endpoints.search,{part:"snippet",q:"test",type:"video",maxResults:1}),!0)}catch(kM){return!1}}cleanup(){this._saveDailyQuota(),this.requestQueue=[],this.isProcessingQueue=!1}};class dM{constructor(){this.sampleDatabase=this._initializeSampleDatabase()}_initializeSampleDatabase(){return{Soul:[{id:"mock-soul-001",title:"Funky Drummer Break",artist:"James Brown",year:1970,genre:"Soul",duration:180,youtubeId:"mock-jb-funky-drummer",thumbnailUrl:"https://img.youtube.com/vi/mock-jb-funky-drummer/mqdefault.jpg",tempo:103,instruments:["drums","bass","guitar","horns"],tags:["break","classic","sampled"],isMock:!0},{id:"mock-soul-002",title:"Cold Sweat",artist:"James Brown",year:1967,genre:"Soul",duration:165,youtubeId:"mock-jb-cold-sweat",thumbnailUrl:"https://img.youtube.com/vi/mock-jb-cold-sweat/mqdefault.jpg",tempo:120,instruments:["drums","bass","guitar","vocals"],tags:["groove","funk","classic"],isMock:!0},{id:"mock-soul-003",title:"I Got You (I Feel Good)",artist:"James Brown",year:1965,genre:"Soul",duration:158,youtubeId:"mock-jb-i-got-you",thumbnailUrl:"https://img.youtube.com/vi/mock-jb-i-got-you/mqdefault.jpg",tempo:132,instruments:["vocals","horns","drums","bass"],tags:["upbeat","classic","energy"],isMock:!0},{id:"mock-soul-004",title:"Respect",artist:"Aretha Franklin",year:1967,genre:"Soul",duration:147,youtubeId:"mock-af-respect",thumbnailUrl:"https://img.youtube.com/vi/mock-af-respect/mqdefault.jpg",tempo:115,instruments:["vocals","piano","horns","drums"],tags:["powerful","anthem","classic"],isMock:!0}],Jazz:[{id:"mock-jazz-001",title:"Take Five",artist:"Dave Brubeck Quartet",year:1959,genre:"Jazz",duration:324,youtubeId:"mock-db-take-five",thumbnailUrl:"https://img.youtube.com/vi/mock-db-take-five/mqdefault.jpg",tempo:176,instruments:["piano","saxophone","drums","bass"],tags:["5/4 time","cool jazz","instrumental"],isMock:!0},{id:"mock-jazz-002",title:"So What",artist:"Miles Davis",year:1959,genre:"Jazz",duration:562,youtubeId:"mock-md-so-what",thumbnailUrl:"https://img.youtube.com/vi/mock-md-so-what/mqdefault.jpg",tempo:132,instruments:["trumpet","piano","bass","drums","saxophone"],tags:["modal jazz","kind of blue","classic"],isMock:!0},{id:"mock-jazz-003",title:"A Love Supreme",artist:"John Coltrane",year:1965,genre:"Jazz",duration:485,youtubeId:"mock-jc-love-supreme",thumbnailUrl:"https://img.youtube.com/vi/mock-jc-love-supreme/mqdefault.jpg",tempo:140,instruments:["saxophone","piano","bass","drums"],tags:["spiritual","free jazz","masterpiece"],isMock:!0},{id:"mock-jazz-004",title:"Cantaloupe Island",artist:"Herbie Hancock",year:1964,genre:"Jazz",duration:330,youtubeId:"mock-hh-cantaloupe",thumbnailUrl:"https://img.youtube.com/vi/mock-hh-cantaloupe/mqdefault.jpg",tempo:125,instruments:["piano","trumpet","bass","drums"],tags:["hard bop","groove","sampled"],isMock:!0}],Funk:[{id:"mock-funk-001",title:"Flash Light",artist:"Parliament",year:1977,genre:"Funk",duration:345,youtubeId:"mock-parliament-flash",thumbnailUrl:"https://img.youtube.com/vi/mock-parliament-flash/mqdefault.jpg",tempo:108,instruments:["synthesizer","bass","drums","vocals"],tags:["p-funk","synthesizer","groove"],isMock:!0},{id:"mock-funk-002",title:"Give Up the Funk",artist:"Parliament",year:1975,genre:"Funk",duration:357,youtubeId:"mock-parliament-give-up",thumbnailUrl:"https://img.youtube.com/vi/mock-parliament-give-up/mqdefault.jpg",tempo:112,instruments:["bass","drums","guitar","vocals","horns"],tags:["p-funk","party","classic"],isMock:!0},{id:"mock-funk-003",title:"Thank You (Falettinme Be Mice Elf Agin)",artist:"Sly & The Family Stone",year:1969,genre:"Funk",duration:295,youtubeId:"mock-sly-thank-you",thumbnailUrl:"https://img.youtube.com/vi/mock-sly-thank-you/mqdefault.jpg",tempo:95,instruments:["bass","drums","guitar","vocals"],tags:["psychedelic funk","groove","sampled"],isMock:!0},{id:"mock-funk-004",title:"Cissy Strut",artist:"The Meters",year:1969,genre:"Funk",duration:195,youtubeId:"mock-meters-cissy",thumbnailUrl:"https://img.youtube.com/vi/mock-meters-cissy/mqdefault.jpg",tempo:98,instruments:["guitar","bass","drums","organ"],tags:["new orleans funk","instrumental","groove"],isMock:!0}],Blues:[{id:"mock-blues-001",title:"The Thrill Is Gone",artist:"B.B. King",year:1969,genre:"Blues",duration:312,youtubeId:"mock-bb-thrill-gone",thumbnailUrl:"https://img.youtube.com/vi/mock-bb-thrill-gone/mqdefault.jpg",tempo:72,instruments:["guitar","vocals","strings","drums"],tags:["electric blues","classic","emotional"],isMock:!0},{id:"mock-blues-002",title:"Hoochie Coochie Man",artist:"Muddy Waters",year:1954,genre:"Blues",duration:178,youtubeId:"mock-mw-hoochie",thumbnailUrl:"https://img.youtube.com/vi/mock-mw-hoochie/mqdefault.jpg",tempo:85,instruments:["guitar","vocals","harmonica","bass"],tags:["chicago blues","classic","powerful"],isMock:!0},{id:"mock-blues-003",title:"Stormy Monday",artist:"T-Bone Walker",year:1950,genre:"Blues",duration:189,youtubeId:"mock-tb-stormy",thumbnailUrl:"https://img.youtube.com/vi/mock-tb-stormy/mqdefault.jpg",tempo:68,instruments:["guitar","vocals","piano","drums"],tags:["electric blues","slow","classic"],isMock:!0},{id:"mock-blues-004",title:"Sweet Home Chicago",artist:"Robert Johnson",year:1951,genre:"Blues",duration:195,youtubeId:"mock-rj-sweet-home",thumbnailUrl:"https://img.youtube.com/vi/mock-rj-sweet-home/mqdefault.jpg",tempo:120,instruments:["guitar","vocals"],tags:["delta blues","acoustic","legendary"],isMock:!0}],Afrobeat:[{id:"mock-afrobeat-001",title:"Zombie",artist:"Fela Kuti",year:1976,genre:"Afrobeat",duration:480,youtubeId:"mock-fk-zombie",thumbnailUrl:"https://img.youtube.com/vi/mock-fk-zombie/mqdefault.jpg",tempo:125,instruments:["saxophone","drums","bass","guitar","vocals","percussion"],tags:["political","extended","groove"],isMock:!0},{id:"mock-afrobeat-002",title:"Water No Get Enemy",artist:"Fela Kuti",year:1975,genre:"Afrobeat",duration:420,youtubeId:"mock-fk-water",thumbnailUrl:"https://img.youtube.com/vi/mock-fk-water/mqdefault.jpg",tempo:118,instruments:["saxophone","drums","bass","keyboards","vocals"],tags:["philosophical","groove","extended"],isMock:!0},{id:"mock-afrobeat-003",title:"Lady",artist:"Fela Kuti",year:1972,genre:"Afrobeat",duration:380,youtubeId:"mock-fk-lady",thumbnailUrl:"https://img.youtube.com/vi/mock-fk-lady/mqdefault.jpg",tempo:110,instruments:["saxophone","drums","bass","guitar","vocals"],tags:["social commentary","groove","classic"],isMock:!0},{id:"mock-afrobeat-004",title:"Expensive Shit",artist:"Fela Kuti",year:1975,genre:"Afrobeat",duration:450,youtubeId:"mock-fk-expensive",thumbnailUrl:"https://img.youtube.com/vi/mock-fk-expensive/mqdefault.jpg",tempo:115,instruments:["saxophone","drums","bass","keyboards","vocals"],tags:["political","groove","extended"],isMock:!0}]}}generateMockSamples(e={genres:[],yearRange:{start:1950,end:1995}},t=12){if(t<=0)return[];Ej(e).isValid||(e={genres:[],yearRange:{start:1950,end:1995}});let n=[];(e.genres.length>0?e.genres:Object.keys(this.sampleDatabase)).forEach(e=>{this.sampleDatabase[e]&&(n=n.concat(this.sampleDatabase[e]))}),n=n.filter(t=>t.year>=e.yearRange.start&&t.year<=e.yearRange.end),e.tempoRange&&(n=n.filter(t=>t.tempo&&t.tempo>=e.tempoRange.min&&t.tempo<=e.tempoRange.max)),e.durationRange&&(n=n.filter(t=>t.duration>=e.durationRange.min&&t.duration<=e.durationRange.max)),e.instruments&&e.instruments.length>0&&(n=n.filter(t=>t.instruments&&e.instruments.some(e=>t.instruments.includes(e))));const r=this._shuffleArray([...n]);return r.slice(0,Math.min(t,r.length)).filter(e=>!!Cj(e).isValid)}getGenreSpecificSamples(e,t=12){if(!vj.includes(e))return[];const n=this.sampleDatabase[e]||[],r=this._shuffleArray([...n]);return r.slice(0,Math.min(t,r.length))}getYearRangeSamples(e,t,n=12){if(e<1950||t>1995||e>t)return[];let r=[];Object.values(this.sampleDatabase).forEach(e=>{r=r.concat(e)});const i=r.filter(n=>n.year>=e&&n.year<=t),s=this._shuffleArray([...i]);return s.slice(0,Math.min(n,s.length))}getTempoRangeSamples(e,t,n=12){if(e<60||t>200||e>t)return[];let r=[];Object.values(this.sampleDatabase).forEach(e=>{r=r.concat(e)});const i=r.filter(n=>n.tempo&&n.tempo>=e&&n.tempo<=t),s=this._shuffleArray([...i]);return s.slice(0,Math.min(n,s.length))}getInstrumentSamples(e,t=12){if(!Array.isArray(e)||0===e.length)return[];let n=[];Object.values(this.sampleDatabase).forEach(e=>{n=n.concat(e)});const r=n.filter(t=>t.instruments&&e.some(e=>t.instruments.includes(e)));return this._shuffleArray([...r]).slice(0,Math.min(t,r.length))}getAvailableGenres(){return Object.keys(this.sampleDatabase)}getAvailableInstruments(){const e=new Set;return Object.values(this.sampleDatabase).forEach(t=>{t.forEach(t=>{t.instruments&&t.instruments.forEach(t=>e.add(t))})}),Array.from(e).sort()}getAvailableYearRange(){let e=1/0,t=-1/0;return Object.values(this.sampleDatabase).forEach(n=>{n.forEach(n=>{e=Math.min(e,n.year),t=Math.max(t,n.year)})}),{min:e,max:t}}getAvailableTempoRange(){let e=1/0,t=-1/0;return Object.values(this.sampleDatabase).forEach(n=>{n.forEach(n=>{n.tempo&&(e=Math.min(e,n.tempo),t=Math.max(t,n.tempo))})}),{min:e,max:t}}_shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}getTotalSampleCount(){let e=0;return Object.values(this.sampleDatabase).forEach(t=>{e+=t.length}),e}getSampleCountByGenre(){const e={};return Object.entries(this.sampleDatabase).forEach(([t,n])=>{e[t]=n.length}),e}}class hM{constructor(){this.youtubeService=uM,this.mockProvider=new dM,this.cacheManager=new sM,this.errorService=iM,this.performanceMonitor=new oM,this.serviceHealth={youtube:{available:!0,lastCheck:0,failureCount:0},cache:{available:!0,lastCheck:0,failureCount:0},mock:{available:!0,lastCheck:0,failureCount:0}},this.config={maxRetries:3,retryDelay:1e3,healthCheckInterval:3e5,fallbackThreshold:3,cacheFirst:!1},"undefined"!=typeof window&&this._initializeHealthMonitoring()}async discoverSamples(e={},t={}){const n=performance.now(),r=this._generateRequestId();try{Ej(e).isValid||(e=this._getDefaultFilters());const i={forceRefresh:!1,maxResults:12,preferredSource:"auto",...t},s=this._buildFallbackChain(i.preferredSource);let a=null,o=null;for(const t of s)try{switch(t){case"cache":i.forceRefresh||(o=await this._tryCache(e,i));break;case"api":o=await this._tryAPI(e,i);break;case"mock":o=await this._tryMock(e,i)}if(o&&o.length>0)return this._updateServiceHealth(t,!0),"api"===t&&o.length>0&&await this._cacheResults(e,o),this.performanceMonitor.recordMetric("discoveryRequest",{duration:performance.now()-n,source:t,success:!0,resultCount:o.length,requestId:r}),o}catch(kM){a=kM,this._updateServiceHealth(t,!1);continue}throw new Error(`All discovery sources failed. Last error: ${a?.message||"Unknown error"}`)}catch(kM){throw this.performanceMonitor.recordMetric("discoveryRequest",{duration:performance.now()-n,source:"failed",success:!1,error:kM.message,requestId:r}),kM}}async getSamples(e={},t={}){return this.discoverSamples(e,t)}async getSampleDetails(e){const t=performance.now();try{if(!e)throw new Error("Sample ID is required");if(e.startsWith("mock-"))return this._getMockSampleDetails(e);if(e.startsWith("youtube-")){const t=e.replace("youtube-","");return await this.youtubeService.getVideoDetails(t)}throw new Error(`Unknown sample ID format: ${e}`)}catch(kM){throw this.performanceMonitor.recordMetric("sampleDetails",{duration:performance.now()-t,success:!1,error:kM.message,sampleId:e}),kM}}getServiceHealth(){return{...this.serviceHealth,overall:this._calculateOverallHealth(),lastUpdated:Date.now()}}async refreshServiceHealth(){try{const e=await this.youtubeService.testConnection();this._updateServiceHealth("youtube",e)}catch(kM){this._updateServiceHealth("youtube",!1)}try{this.cacheManager.getCacheStats();this._updateServiceHealth("cache",!0)}catch(kM){this._updateServiceHealth("cache",!1)}return this._updateServiceHealth("mock",!0),this.getServiceHealth()}async clearCache(){try{this.cacheManager.invalidateCache()}catch(kM){throw kM}}getCacheStats(){return this.cacheManager.getCacheStats()}async _tryCache(e,t){if(!this.serviceHealth.cache.available)return null;try{const n=this.cacheManager.getCachedResults(e);return n&&n.length>0?t.maxResults?n.slice(0,t.maxResults):n:null}catch(kM){return null}}async _tryAPI(e,t){if(!this.serviceHealth.youtube.available)return null;try{const n=this._convertFiltersToSearchParams(e,t),r=await this.youtubeService.searchSamples(n);return r.filter(e=>!!Cj(e).isValid)}catch(kM){throw kM}}async _tryMock(e,t){if(!this.serviceHealth.mock.available)throw new Error("Mock provider is not available");try{return this.mockProvider.generateMockSamples(e,t.maxResults)}catch(kM){throw kM}}async _cacheResults(e,t){try{this.cacheManager.cacheResults(e,t)}catch(kM){}}_buildFallbackChain(e){const t=[];if(this.serviceHealth.cache.available&&t.push("cache"),this.serviceHealth.youtube.available&&t.push("api"),this.serviceHealth.mock.available&&t.push("mock"),e&&"auto"!==e){const n=t.filter(t=>t===e);if(n.length>0)return[...n,...t.filter(t=>t!==e)]}return["cache","api","mock"].filter(e=>t.includes(e))}_convertFiltersToSearchParams(e,t){return{genres:e.genres||[],yearRange:e.yearRange||{start:1950,end:1995},maxResults:t.maxResults||12,order:"relevance"}}_getMockSampleDetails(e){const t=this.mockProvider.getAvailableGenres();for(const n of t){const t=this.mockProvider.getGenreSpecificSamples(n,100).find(t=>t.id===e);if(t)return t}throw new Error(`Mock sample not found: ${e}`)}_updateServiceHealth(e,t){const n=this.serviceHealth[e];n&&(n.lastCheck=Date.now(),t?(n.available=!0,n.failureCount=0):(n.failureCount++,n.failureCount>=this.config.fallbackThreshold&&(n.available=!1)))}_calculateOverallHealth(){const e=Object.values(this.serviceHealth),t=e.filter(e=>e.available).length;return t===e.length?"healthy":t>0?"degraded":"unhealthy"}_initializeHealthMonitoring(){setInterval(()=>{this.refreshServiceHealth().catch(e=>{})},this.config.healthCheckInterval)}_getDefaultFilters(){return{genres:[],yearRange:{start:1950,end:1995},tempoRange:null,durationRange:null,instruments:[]}}_generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}cleanup(){this.youtubeService&&"function"==typeof this.youtubeService.cleanup&&this.youtubeService.cleanup(),this.cacheManager&&"function"==typeof this.cacheManager.destroy&&this.cacheManager.destroy()}}const fM="sampleDiscovery.state";const pM=new class{constructor(){this.baseChopperUrl="/chopper"}async transferSampleToChopper(e){try{if(!e?.youtubeId)throw new Error("Sample missing YouTube ID");const t=this.buildYouTubeUrl(e.youtubeId),n=this.buildChopperUrl(t,e),r=await this.copyUrlToClipboard(t);return this.navigateToChopper(n),{success:!0,message:r.success?"URL copied to clipboard and navigating to Chopper":"Navigating to Chopper (clipboard copy failed)",url:t}}catch(kM){return{success:!1,message:`Failed to transfer sample: ${kM.message}`}}}buildYouTubeUrl(e){if(!e)throw new Error("YouTube ID is required");return`https://www.youtube.com/watch?v=${e}`}buildChopperUrl(e,t){const n=new URLSearchParams;return n.set("url",e),t.title&&n.set("title",t.title),t.artist&&n.set("artist",t.artist),t.year&&n.set("year",t.year.toString()),t.genre&&n.set("genre",t.genre),`${this.baseChopperUrl}?${n.toString()}`}async copyUrlToClipboard(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),{success:!0,message:"URL copied to clipboard"};return this.fallbackCopyToClipboard(e)}catch(kM){return{success:!1,message:"Failed to copy URL to clipboard"}}}fallbackCopyToClipboard(e){try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),{success:n,message:n?"URL copied to clipboard":"Failed to copy URL"}}catch(kM){return{success:!1,message:"Clipboard not supported"}}}navigateToChopper(e){try{window.location.href=e}catch(kM){window.open(e,"_blank")}}getUserGuidanceMessage(e){return`Click "Use in Chopper" to copy the YouTube URL for "${e.title}" and navigate to the Chopper page where you can create audio samples from this track.`}validateSampleForTransfer(e){return e?e.youtubeId?e.isMock?{valid:!0,message:"Demo sample - will open YouTube directly"}:{valid:!0,message:"Sample ready for chopper integration"}:{valid:!1,message:"Sample missing YouTube ID"}:{valid:!1,message:"No sample provided"}}createShareableLink(e){const t=new URLSearchParams;return t.set("sample",e.id),`${window.location.origin}/sample-discovery?${t.toString()}`}},mM=()=>{const{state:e,fetchSamples:t,setCurrentSample:n,setFilters:r,setLoading:i,setError:s,setOnline:a}=function(){const[e,t]=m.useState(()=>Nj()),n=m.useRef(null);n.current||(n.current=new hM);const r=m.useRef(null),i=m.useRef(!1),s=m.useRef(null),a=m.useRef([]),o=m.useCallback(async()=>{try{const e=localStorage.getItem(fM);if(!e)return Nj();const t=JSON.parse(e);if(!Tj(t).isValid)return Nj();const[n,r,i]=await Promise.all([nM.getFavorites(),Promise.resolve(rM.getHistory()),Promise.resolve(jj.loadFilterState())]);return{...t,favorites:n,history:r,filters:i,isLoading:!1,error:null}}catch(kM){return Nj()}},[]),l=m.useCallback(e=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{try{const t={...e,favorites:[],history:[],isLoading:!1,error:null};localStorage.setItem(fM,JSON.stringify(t))}catch(kM){}},500)},[]),c=m.useCallback(e=>{t(t=>{const n="function"==typeof e?e(t):{...t,...e};return Tj(n).isValid?(a.current.push({timestamp:Date.now(),action:"update",changes:e}),a.current.length>10&&(a.current=a.current.slice(-10)),l(n),n):t})},[l]),u=m.useCallback(e=>{if(!Array.isArray(e))return;const t=e.filter(e=>!!Cj(e).isValid),n=t.slice(0,200);n.length,t.length,c({samples:n})},[c]),d=m.useCallback(e=>{if(null!==e){if(!Cj(e).isValid)return;rM.addToHistory(e)}c({currentSample:e})},[c]),h=m.useCallback(e=>{Ej(e).isValid&&(jj.saveFilterState(e),c({filters:e}))},[c]),f=m.useCallback(e=>{c({isLoading:Boolean(e)})},[c]),p=m.useCallback(e=>{c({error:e?String(e):null})},[c]),g=m.useCallback(e=>{c({isOnline:Boolean(e)})},[c]),y=m.useCallback(e=>{c({useMockData:Boolean(e)})},[c]),v=m.useCallback(async(t=null)=>{const r=t||e.filters;try{f(!0),p(null);const e=await n.current.getSamples(r);return u(e),e}catch(kM){return p(kM.message),[]}finally{f(!1)}},[e.filters,f,p,u]),b=m.useCallback(async e=>{try{await nM.addFavorite(e);const t=await nM.getFavorites();return c({favorites:t}),!0}catch(kM){return p(`Failed to add to favorites: ${kM.message}`),!1}},[c,p]),w=m.useCallback(async e=>{try{await nM.removeFavorite(e);const t=await nM.getFavorites();return c({favorites:t}),!0}catch(kM){return p(`Failed to remove from favorites: ${kM.message}`),!1}},[c,p]),x=m.useCallback(async()=>{try{return await nM.clearFavorites(),c({favorites:[]}),!0}catch(kM){return p(`Failed to clear favorites: ${kM.message}`),!1}},[c,p]),S=m.useCallback(()=>{try{return rM.clearHistory(),c({history:[]}),!0}catch(kM){return p(`Failed to clear history: ${kM.message}`),!1}},[c,p]),k=m.useCallback(()=>{const e=Nj();t(e),l(e),a.current=[]},[l]),C=m.useCallback(()=>({samplesCount:e.samples.length,favoritesCount:e.favorites.length,historyCount:e.history.length,currentSample:e.currentSample?e.currentSample.id:null,isLoading:e.isLoading,hasError:Boolean(e.error),isOnline:e.isOnline,useMockData:e.useMockData,memoryUsage:{samples:JSON.stringify(e.samples).length,favorites:JSON.stringify(e.favorites).length,history:JSON.stringify(e.history).length},stateHistory:a.current.length}),[e]),E=m.useCallback(()=>{t(e=>{if(e.samples.length>200){const t=e.samples.slice(0,200);return{...e,samples:t}}return e}),rM.cleanupOldEntries()>0&&c({history:rM.getHistory()}),a.current.length>10&&(a.current=a.current.slice(-10))},[c]);return m.useEffect(()=>{i.current||(async()=>{try{const e=await o();t(e),i.current=!0}catch(kM){t(Nj()),i.current=!0}})()},[o]),m.useEffect(()=>(s.current=setInterval(E,3e5),()=>{s.current&&clearInterval(s.current)}),[E]),m.useEffect(()=>{const e=e=>{c({history:e})};return rM.addListener(e),()=>{rM.removeListener(e)}},[c]),m.useEffect(()=>()=>{r.current&&clearTimeout(r.current),s.current&&clearInterval(s.current),a.current=[]},[]),{state:e,setSamples:u,setCurrentSample:d,fetchSamples:v,setFilters:h,setLoading:f,setError:p,setOnline:g,setUseMockData:y,addToFavorites:b,removeFromFavorites:w,clearFavorites:x,clearHistory:S,resetState:k,getStateStats:C,cleanupMemory:E,isInitialized:i.current,hasError:Boolean(e.error),isEmpty:0===e.samples.length,hasFavorites:e.favorites.length>0,hasHistory:e.history.length>0}}(),{transferStatus:o,showGuide:l,currentSample:c,transferSampleToChopper:d,quickTransferToChopper:h,showIntegrationGuide:f,hideIntegrationGuide:p}=(()=>{const[e,t]=m.useState({inProgress:!1,success:!1,message:null,error:null,lastTransferredSample:null}),[n,r]=m.useState(!1),[i,s]=m.useState(null),a=m.useCallback(()=>{t({inProgress:!1,success:!1,message:null,error:null,lastTransferredSample:null})},[]),o=m.useCallback(e=>{s(e),r(!0),a()},[a]),l=m.useCallback(()=>{r(!1),s(null)},[]),c=m.useCallback(async e=>{const n=pM.validateSampleForTransfer(e);if(!n.valid){const e=n.message;return t({inProgress:!1,success:!1,message:null,error:e,lastTransferredSample:null}),{success:!1,message:e}}t({inProgress:!0,success:!1,message:"Preparing to transfer sample...",error:null,lastTransferredSample:e});try{const n=await pM.transferSampleToChopper(e);return t({inProgress:!1,success:n.success,message:n.message,error:n.success?null:n.message,lastTransferredSample:e}),n}catch(kM){const r=`Transfer failed: ${kM.message}`;return t({inProgress:!1,success:!1,message:null,error:r,lastTransferredSample:e}),{success:!1,message:r}}},[]),u=m.useCallback(async e=>await c(e),[c]),d=m.useCallback(async e=>{if(!e?.youtubeId)return{success:!1,message:"Sample missing YouTube ID"};const t=pM.buildYouTubeUrl(e.youtubeId);return await pM.copyUrlToClipboard(t)},[]),h=m.useCallback(e=>pM.getUserGuidanceMessage(e),[]),f=m.useCallback(e=>pM.validateSampleForTransfer(e),[]),p=m.useCallback(e=>pM.createShareableLink(e),[]),g=m.useCallback(e=>{if(!e?.youtubeId)return null;const t=pM.buildYouTubeUrl(e.youtubeId);return pM.buildChopperUrl(t,e)},[]);return{transferStatus:e,showGuide:n,currentSample:i,transferSampleToChopper:c,quickTransferToChopper:u,copySampleUrl:d,showIntegrationGuide:o,hideIntegrationGuide:l,resetTransferStatus:a,getUserGuidance:h,validateSample:f,createShareableLink:p,buildChopperUrl:g}})();m.useEffect(()=>{const e=()=>{a(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[a]),m.useEffect(()=>{t()},[t]),m.useEffect(()=>{const e=e=>{const{action:t,sample:n}=e.detail;"useInChopper"===t&&f(n)};return window.addEventListener("sampleAction",e),()=>{window.removeEventListener("sampleAction",e)}},[f]);const g=async()=>{await t()},y=(e,t)=>{s(t||"Video player error occurred"),i(!1)},v=()=>{n(null)},b=e.filters.genres.length>0||e.filters.yearRange.start>1950||e.filters.yearRange.end<1995;return u.jsx("div",{className:"sample-discovery-page min-h-screen bg-gray-900 text-white p-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto",children:[u.jsxs("header",{className:"mb-8",children:[u.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Sample Discovery"}),u.jsx("p",{className:"text-gray-300 text-lg",children:"Discover vintage samples from the 1950s-1990s"}),!e.isOnline&&u.jsx("div",{className:"mt-4 p-3 bg-yellow-600 rounded-lg",children:u.jsx("p",{className:"text-sm",children:"You're offline. Showing cached samples and demo content."})})]}),u.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[u.jsx("aside",{className:"lg:col-span-1",children:u.jsx(Lj,{filters:e.filters,onFilterChange:async e=>{r(e),await t(e)},onShuffle:g,isLoading:e.isLoading,error:e.error})}),u.jsx("section",{className:"lg:col-span-3",children:u.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:u.jsx(Qj,{samples:e.samples,isLoading:e.isLoading,error:e.error,isOffline:!e.isOnline,hasFilters:b,onSamplePlay:t=>{e.currentSample?.id===t.id?(n(null),s(null)):(n(t),i(!0),s(null))},onSampleFavorite:async t=>{e.favorites.some(e=>e.id===t.id)},onClearFilters:async()=>{const e={genres:[],yearRange:{start:1950,end:1995}};r(e),await t(e)},onShuffle:g,onRetry:async()=>{s(null),await t()},currentPlayingSampleId:e.currentSample?.id,favoriteSampleIds:e.favorites.map(e=>e.id)})})})]}),u.jsx("section",{className:"mt-8",children:u.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"Sample Player"}),e.currentSample&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("button",{type:"button",onClick:()=>f(e.currentSample),className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-black font-medium rounded-lg transition-colors",title:"Show step-by-step guide for using this sample in Chopper",children:"Use in Chopper"}),u.jsx("button",{type:"button",onClick:()=>(async e=>{(await h(e)).success})(e.currentSample),className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-700 text-black rounded-lg transition-colors",title:"Quick transfer to Chopper without guide",children:"Quick Transfer"}),u.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Clear"})]})]}),u.jsxs("div",{className:"relative",children:[e.isLoading&&e.currentSample&&u.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10 rounded-lg",children:u.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}),u.jsx("span",{children:"Loading sample..."})]})}),u.jsx(Zj,{videoId:e.currentSample?.youtubeId,sample:e.currentSample,onError:y,onSelectDifferentSample:v,children:u.jsx(Xj,{videoId:e.currentSample?.youtubeId,sample:e.currentSample,onReady:e=>{i(!1),s(null)},onError:y,onStateChange:({state:e,isPlaying:t,isBuffering:n,player:r})=>{i(n),n&&s(null)},onTimeUpdate:t=>{e.currentSample},volume:.7,autoplay:!1,className:"w-full"})})]}),e.currentSample&&u.jsxs("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Now Playing"}),u.jsx("p",{className:"text-cyan-400 font-medium",children:e.currentSample.title}),u.jsx("p",{className:"text-gray-300",children:e.currentSample.artist})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-400",children:"Year:"}),u.jsx("span",{className:"text-white",children:e.currentSample.year})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-400",children:"Genre:"}),u.jsx("span",{className:"text-white",children:e.currentSample.genre})]}),u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-400",children:"Duration:"}),u.jsxs("span",{className:"text-white",children:[Math.floor(e.currentSample.duration/60),":",(e.currentSample.duration%60).toString().padStart(2,"0")]})]}),e.currentSample.tempo&&u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{className:"text-gray-400",children:"Tempo:"}),u.jsxs("span",{className:"text-white",children:[e.currentSample.tempo," BPM"]})]})]})]}),e.currentSample.instruments&&e.currentSample.instruments.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("span",{className:"text-gray-400 text-sm",children:"Instruments: "}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.currentSample.instruments.map((e,t)=>u.jsx("span",{className:"px-2 py-1 bg-gray-600 text-white text-xs rounded-full",children:e},t))})]})]})]})}),u.jsx(tM,{sample:c,isVisible:l,onClose:p,onTransfer:d,transferStatus:o})]})})},gM=[{icon:Rt,title:"Intuitive Sampling",description:"Easily chop YouTube videos into custom samples."},{icon:fn,title:"Live Performance",description:"Trigger samples instantly with keyboard shortcuts."},{icon:Et,title:"Web-Based Access",description:"Use it anywhere, anytime, directly in your browser."}],yM="chopshop_feature_tour_shown";function vM(){const[e,t]=m.useState(!1);m.useEffect(()=>{localStorage.getItem(yM)||t(!0)},[]);return u.jsx(Os,{open:e,onOpenChange:t,children:u.jsxs(zs,{className:"sm:max-w-[500px] bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 text-white border-white/20 shadow-lg",children:[u.jsxs(Bs,{className:"text-center",children:[u.jsx(uA.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20},children:u.jsx(Ct,{className:"w-16 h-16 mx-auto text-yellow-400 drop-shadow-lg"})}),u.jsx($s,{className:"text-3xl font-bold tracking-tighter mt-4",children:"Welcome to The Chop Shop!"}),u.jsx(Hs,{className:"text-white/80 mt-2",children:"Unleash your creativity by sampling YouTube videos with ease."})]}),u.jsx("div",{className:"space-y-4 py-4",children:gM.map((e,t)=>u.jsxs(uA.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2+.1*t,type:"spring",stiffness:100,damping:10},className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg border border-white/10",children:[u.jsx(e.icon,{className:"w-6 h-6 text-cyan-400 flex-shrink-0 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg",children:e.title}),u.jsx("p",{className:"text-white/70 text-sm",children:e.description})]})]},t))}),u.jsxs(uA.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,type:"spring",stiffness:100,damping:10},className:"text-center mt-6 p-4 bg-purple-900/40 rounded-xl border border-purple-700/50 shadow-inner",children:[u.jsxs("p",{className:"text-yellow-200 font-bold flex items-center justify-center gap-2",children:[u.jsx(yt,{className:"w-5 h-5"}),"One-Time Purchase, Free Lifetime Upgrades!"]}),u.jsx("p",{className:"text-white/70 text-sm mt-1",children:"Get all future features and improvements at no extra cost."})]}),u.jsx(Vs,{className:"mt-6",children:u.jsx(xr,{onClick:()=>{localStorage.setItem(yM,"true"),t(!1)},className:"w-full bg-cyan-500 hover:bg-cyan-600 text-black font-bold py-3 text-lg rounded-xl shadow-md hover:shadow-lg transition-all duration-300",children:"Let's Get Chopping!"})})]})})}function bM(){return u.jsxs(lS,{children:[u.jsx(Ge,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:u.jsx(dS,{children:u.jsxs($e,{children:[u.jsx(Be,{path:"/",element:u.jsx($R,{})}),u.jsx(Be,{path:"/my-sessions",element:u.jsx(QR,{})}),u.jsx(Be,{path:"/sequencer",element:u.jsx(yj,{})}),u.jsx(Be,{path:"/sample-discovery",element:u.jsx(mM,{})})]})})}),u.jsx(vM,{})]})}M.createRoot(document.getElementById("root")).render(u.jsx(m.StrictMode,{children:u.jsx(lS,{children:u.jsx(bM,{})})}));
